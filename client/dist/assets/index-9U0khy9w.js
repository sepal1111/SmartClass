(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Gl(t){const n=Object.create(null);for(const r of t.split(","))n[r]=1;return r=>r in n}const he={},ys=[],Wn=()=>{},Vd=()=>!1,Po=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Kl=t=>t.startsWith("onUpdate:"),qe=Object.assign,Zl=(t,n)=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)},Qy=Object.prototype.hasOwnProperty,le=(t,n)=>Qy.call(t,n),Ut=Array.isArray,bs=t=>pi(t)==="[object Map]",Rs=t=>pi(t)==="[object Set]",Gf=t=>pi(t)==="[object Date]",Vt=t=>typeof t=="function",Ie=t=>typeof t=="string",qn=t=>typeof t=="symbol",ge=t=>t!==null&&typeof t=="object",Gd=t=>(ge(t)||Vt(t))&&Vt(t.then)&&Vt(t.catch),Kd=Object.prototype.toString,pi=t=>Kd.call(t),tb=t=>pi(t).slice(8,-1),Zd=t=>pi(t)==="[object Object]",Yl=t=>Ie(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Qs=Gl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Do=t=>{const n=Object.create(null);return r=>n[r]||(n[r]=t(r))},eb=/-\w/g,En=Do(t=>t.replace(eb,n=>n.slice(1).toUpperCase())),nb=/\B([A-Z])/g,Lr=Do(t=>t.replace(nb,"-$1").toLowerCase()),Lo=Do(t=>t.charAt(0).toUpperCase()+t.slice(1)),ll=Do(t=>t?`on${Lo(t)}`:""),Rr=(t,n)=>!Object.is(t,n),ho=(t,...n)=>{for(let r=0;r<t.length;r++)t[r](...n)},Yd=(t,n,r,i=!1)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:i,value:r})},xo=t=>{const n=parseFloat(t);return isNaN(n)?t:n};let Kf;const Bo=()=>Kf||(Kf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xr(t){if(Ut(t)){const n={};for(let r=0;r<t.length;r++){const i=t[r],o=Ie(i)?ob(i):Xr(i);if(o)for(const l in o)n[l]=o[l]}return n}else if(Ie(t)||ge(t))return t}const rb=/;(?![^(]*\))/g,sb=/:([^]+)/,ib=/\/\*[^]*?\*\//g;function ob(t){const n={};return t.replace(ib,"").split(rb).forEach(r=>{if(r){const i=r.split(sb);i.length>1&&(n[i[0].trim()]=i[1].trim())}}),n}function ce(t){let n="";if(Ie(t))n=t;else if(Ut(t))for(let r=0;r<t.length;r++){const i=ce(t[r]);i&&(n+=i+" ")}else if(ge(t))for(const r in t)t[r]&&(n+=r+" ");return n.trim()}const ab="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lb=Gl(ab);function Jd(t){return!!t||t===""}function ub(t,n){if(t.length!==n.length)return!1;let r=!0;for(let i=0;r&&i<t.length;i++)r=Jr(t[i],n[i]);return r}function Jr(t,n){if(t===n)return!0;let r=Gf(t),i=Gf(n);if(r||i)return r&&i?t.getTime()===n.getTime():!1;if(r=qn(t),i=qn(n),r||i)return t===n;if(r=Ut(t),i=Ut(n),r||i)return r&&i?ub(t,n):!1;if(r=ge(t),i=ge(n),r||i){if(!r||!i)return!1;const o=Object.keys(t).length,l=Object.keys(n).length;if(o!==l)return!1;for(const u in t){const f=t.hasOwnProperty(u),h=n.hasOwnProperty(u);if(f&&!h||!f&&h||!Jr(t[u],n[u]))return!1}}return String(t)===String(n)}function Jl(t,n){return t.findIndex(r=>Jr(r,n))}const Xd=t=>!!(t&&t.__v_isRef===!0),lt=t=>Ie(t)?t:t==null?"":Ut(t)||ge(t)&&(t.toString===Kd||!Vt(t.toString))?Xd(t)?lt(t.value):JSON.stringify(t,Qd,2):String(t),Qd=(t,n)=>Xd(n)?Qd(t,n.value):bs(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[i,o],l)=>(r[ul(i,l)+" =>"]=o,r),{})}:Rs(n)?{[`Set(${n.size})`]:[...n.values()].map(r=>ul(r))}:qn(n)?ul(n):ge(n)&&!Ut(n)&&!Zd(n)?String(n):n,ul=(t,n="")=>{var r;return qn(t)?`Symbol(${(r=t.description)!=null?r:n})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sn;class cb{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=sn,!n&&sn&&(this.index=(sn.scopes||(sn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].pause();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].resume();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].resume()}}run(n){if(this._active){const r=sn;try{return sn=this,n()}finally{sn=r}}}on(){++this._on===1&&(this.prevScope=sn,sn=this)}off(){this._on>0&&--this._on===0&&(sn=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(this.effects.length=0,r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function fb(){return sn}let ve;const cl=new WeakSet;class th{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,sn&&sn.active&&sn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cl.has(this)&&(cl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||nh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zf(this),rh(this);const n=ve,r=Dn;ve=this,Dn=!0;try{return this.fn()}finally{sh(this),ve=n,Dn=r,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)tu(n);this.deps=this.depsTail=void 0,Zf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Al(this)&&this.run()}get dirty(){return Al(this)}}let eh=0,ti,ei;function nh(t,n=!1){if(t.flags|=8,n){t.next=ei,ei=t;return}t.next=ti,ti=t}function Xl(){eh++}function Ql(){if(--eh>0)return;if(ei){let n=ei;for(ei=void 0;n;){const r=n.next;n.next=void 0,n.flags&=-9,n=r}}let t;for(;ti;){let n=ti;for(ti=void 0;n;){const r=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(i){t||(t=i)}n=r}}if(t)throw t}function rh(t){for(let n=t.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function sh(t){let n,r=t.depsTail,i=r;for(;i;){const o=i.prevDep;i.version===-1?(i===r&&(r=o),tu(i),db(i)):n=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=o}t.deps=n,t.depsTail=r}function Al(t){for(let n=t.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(ih(n.dep.computed)||n.dep.version!==n.version))return!0;return!!t._dirty}function ih(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ai)||(t.globalVersion=ai,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Al(t))))return;t.flags|=2;const n=t.dep,r=ve,i=Dn;ve=t,Dn=!0;try{rh(t);const o=t.fn(t._value);(n.version===0||Rr(o,t._value))&&(t.flags|=128,t._value=o,n.version++)}catch(o){throw n.version++,o}finally{ve=r,Dn=i,sh(t),t.flags&=-3}}function tu(t,n=!1){const{dep:r,prevSub:i,nextSub:o}=t;if(i&&(i.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=i,t.nextSub=void 0),r.subs===t&&(r.subs=i,!i&&r.computed)){r.computed.flags&=-5;for(let l=r.computed.deps;l;l=l.nextDep)tu(l,!0)}!n&&!--r.sc&&r.map&&r.map.delete(r.key)}function db(t){const{prevDep:n,nextDep:r}=t;n&&(n.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=n,t.nextDep=void 0)}let Dn=!0;const oh=[];function dr(){oh.push(Dn),Dn=!1}function hr(){const t=oh.pop();Dn=t===void 0?!0:t}function Zf(t){const{cleanup:n}=t;if(t.cleanup=void 0,n){const r=ve;ve=void 0;try{n()}finally{ve=r}}}let ai=0;class hb{constructor(n,r){this.sub=n,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class eu{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!ve||!Dn||ve===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==ve)r=this.activeLink=new hb(ve,this),ve.deps?(r.prevDep=ve.depsTail,ve.depsTail.nextDep=r,ve.depsTail=r):ve.deps=ve.depsTail=r,ah(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const i=r.nextDep;i.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=i),r.prevDep=ve.depsTail,r.nextDep=void 0,ve.depsTail.nextDep=r,ve.depsTail=r,ve.deps===r&&(ve.deps=i)}return r}trigger(n){this.version++,ai++,this.notify(n)}notify(n){Xl();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Ql()}}}function ah(t){if(t.dep.sc++,t.sub.flags&4){const n=t.dep.computed;if(n&&!t.dep.subs){n.flags|=20;for(let i=n.deps;i;i=i.nextDep)ah(i)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const El=new WeakMap,Zr=Symbol(""),Tl=Symbol(""),li=Symbol("");function je(t,n,r){if(Dn&&ve){let i=El.get(t);i||El.set(t,i=new Map);let o=i.get(r);o||(i.set(r,o=new eu),o.map=i,o.key=r),o.track()}}function ar(t,n,r,i,o,l){const u=El.get(t);if(!u){ai++;return}const f=h=>{h&&h.trigger()};if(Xl(),n==="clear")u.forEach(f);else{const h=Ut(t),y=h&&Yl(r);if(h&&r==="length"){const _=Number(i);u.forEach((m,b)=>{(b==="length"||b===li||!qn(b)&&b>=_)&&f(m)})}else switch((r!==void 0||u.has(void 0))&&f(u.get(r)),y&&f(u.get(li)),n){case"add":h?y&&f(u.get("length")):(f(u.get(Zr)),bs(t)&&f(u.get(Tl)));break;case"delete":h||(f(u.get(Zr)),bs(t)&&f(u.get(Tl)));break;case"set":bs(t)&&f(u.get(Zr));break}}Ql()}function ms(t){const n=ae(t);return n===t?n:(je(n,"iterate",li),Sn(t)?n:n.map(Ne))}function Mo(t){return je(t=ae(t),"iterate",li),t}const pb={__proto__:null,[Symbol.iterator](){return fl(this,Symbol.iterator,Ne)},concat(...t){return ms(this).concat(...t.map(n=>Ut(n)?ms(n):n))},entries(){return fl(this,"entries",t=>(t[1]=Ne(t[1]),t))},every(t,n){return sr(this,"every",t,n,void 0,arguments)},filter(t,n){return sr(this,"filter",t,n,r=>r.map(Ne),arguments)},find(t,n){return sr(this,"find",t,n,Ne,arguments)},findIndex(t,n){return sr(this,"findIndex",t,n,void 0,arguments)},findLast(t,n){return sr(this,"findLast",t,n,Ne,arguments)},findLastIndex(t,n){return sr(this,"findLastIndex",t,n,void 0,arguments)},forEach(t,n){return sr(this,"forEach",t,n,void 0,arguments)},includes(...t){return dl(this,"includes",t)},indexOf(...t){return dl(this,"indexOf",t)},join(t){return ms(this).join(t)},lastIndexOf(...t){return dl(this,"lastIndexOf",t)},map(t,n){return sr(this,"map",t,n,void 0,arguments)},pop(){return Gs(this,"pop")},push(...t){return Gs(this,"push",t)},reduce(t,...n){return Yf(this,"reduce",t,n)},reduceRight(t,...n){return Yf(this,"reduceRight",t,n)},shift(){return Gs(this,"shift")},some(t,n){return sr(this,"some",t,n,void 0,arguments)},splice(...t){return Gs(this,"splice",t)},toReversed(){return ms(this).toReversed()},toSorted(t){return ms(this).toSorted(t)},toSpliced(...t){return ms(this).toSpliced(...t)},unshift(...t){return Gs(this,"unshift",t)},values(){return fl(this,"values",Ne)}};function fl(t,n,r){const i=Mo(t),o=i[n]();return i!==t&&!Sn(t)&&(o._next=o.next,o.next=()=>{const l=o._next();return l.done||(l.value=r(l.value)),l}),o}const gb=Array.prototype;function sr(t,n,r,i,o,l){const u=Mo(t),f=u!==t&&!Sn(t),h=u[n];if(h!==gb[n]){const m=h.apply(t,l);return f?Ne(m):m}let y=r;u!==t&&(f?y=function(m,b){return r.call(this,Ne(m),b,t)}:r.length>2&&(y=function(m,b){return r.call(this,m,b,t)}));const _=h.call(u,y,i);return f&&o?o(_):_}function Yf(t,n,r,i){const o=Mo(t);let l=r;return o!==t&&(Sn(t)?r.length>3&&(l=function(u,f,h){return r.call(this,u,f,h,t)}):l=function(u,f,h){return r.call(this,u,Ne(f),h,t)}),o[n](l,...i)}function dl(t,n,r){const i=ae(t);je(i,"iterate",li);const o=i[n](...r);return(o===-1||o===!1)&&su(r[0])?(r[0]=ae(r[0]),i[n](...r)):o}function Gs(t,n,r=[]){dr(),Xl();const i=ae(t)[n].apply(t,r);return Ql(),hr(),i}const mb=Gl("__proto__,__v_isRef,__isVue"),lh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(qn));function vb(t){qn(t)||(t=String(t));const n=ae(this);return je(n,"has",t),n.hasOwnProperty(t)}class uh{constructor(n=!1,r=!1){this._isReadonly=n,this._isShallow=r}get(n,r,i){if(r==="__v_skip")return n.__v_skip;const o=this._isReadonly,l=this._isShallow;if(r==="__v_isReactive")return!o;if(r==="__v_isReadonly")return o;if(r==="__v_isShallow")return l;if(r==="__v_raw")return i===(o?l?Eb:hh:l?dh:fh).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(i)?n:void 0;const u=Ut(n);if(!o){let h;if(u&&(h=pb[r]))return h;if(r==="hasOwnProperty")return vb}const f=Reflect.get(n,r,He(n)?n:i);if((qn(r)?lh.has(r):mb(r))||(o||je(n,"get",r),l))return f;if(He(f)){const h=u&&Yl(r)?f:f.value;return o&&ge(h)?Ol(h):h}return ge(f)?o?Ol(f):Xe(f):f}}class ch extends uh{constructor(n=!1){super(!1,n)}set(n,r,i,o){let l=n[r];if(!this._isShallow){const h=$r(l);if(!Sn(i)&&!$r(i)&&(l=ae(l),i=ae(i)),!Ut(n)&&He(l)&&!He(i))return h||(l.value=i),!0}const u=Ut(n)&&Yl(r)?Number(r)<n.length:le(n,r),f=Reflect.set(n,r,i,He(n)?n:o);return n===ae(o)&&(u?Rr(i,l)&&ar(n,"set",r,i):ar(n,"add",r,i)),f}deleteProperty(n,r){const i=le(n,r);n[r];const o=Reflect.deleteProperty(n,r);return o&&i&&ar(n,"delete",r,void 0),o}has(n,r){const i=Reflect.has(n,r);return(!qn(r)||!lh.has(r))&&je(n,"has",r),i}ownKeys(n){return je(n,"iterate",Ut(n)?"length":Zr),Reflect.ownKeys(n)}}class _b extends uh{constructor(n=!1){super(!0,n)}set(n,r){return!0}deleteProperty(n,r){return!0}}const yb=new ch,bb=new _b,xb=new ch(!0);const Rl=t=>t,oo=t=>Reflect.getPrototypeOf(t);function wb(t,n,r){return function(...i){const o=this.__v_raw,l=ae(o),u=bs(l),f=t==="entries"||t===Symbol.iterator&&u,h=t==="keys"&&u,y=o[t](...i),_=r?Rl:n?wo:Ne;return!n&&je(l,"iterate",h?Tl:Zr),{next(){const{value:m,done:b}=y.next();return b?{value:m,done:b}:{value:f?[_(m[0]),_(m[1])]:_(m),done:b}},[Symbol.iterator](){return this}}}}function ao(t){return function(...n){return t==="delete"?!1:t==="clear"?void 0:this}}function kb(t,n){const r={get(o){const l=this.__v_raw,u=ae(l),f=ae(o);t||(Rr(o,f)&&je(u,"get",o),je(u,"get",f));const{has:h}=oo(u),y=n?Rl:t?wo:Ne;if(h.call(u,o))return y(l.get(o));if(h.call(u,f))return y(l.get(f));l!==u&&l.get(o)},get size(){const o=this.__v_raw;return!t&&je(ae(o),"iterate",Zr),o.size},has(o){const l=this.__v_raw,u=ae(l),f=ae(o);return t||(Rr(o,f)&&je(u,"has",o),je(u,"has",f)),o===f?l.has(o):l.has(o)||l.has(f)},forEach(o,l){const u=this,f=u.__v_raw,h=ae(f),y=n?Rl:t?wo:Ne;return!t&&je(h,"iterate",Zr),f.forEach((_,m)=>o.call(l,y(_),y(m),u))}};return qe(r,t?{add:ao("add"),set:ao("set"),delete:ao("delete"),clear:ao("clear")}:{add(o){!n&&!Sn(o)&&!$r(o)&&(o=ae(o));const l=ae(this);return oo(l).has.call(l,o)||(l.add(o),ar(l,"add",o,o)),this},set(o,l){!n&&!Sn(l)&&!$r(l)&&(l=ae(l));const u=ae(this),{has:f,get:h}=oo(u);let y=f.call(u,o);y||(o=ae(o),y=f.call(u,o));const _=h.call(u,o);return u.set(o,l),y?Rr(l,_)&&ar(u,"set",o,l):ar(u,"add",o,l),this},delete(o){const l=ae(this),{has:u,get:f}=oo(l);let h=u.call(l,o);h||(o=ae(o),h=u.call(l,o)),f&&f.call(l,o);const y=l.delete(o);return h&&ar(l,"delete",o,void 0),y},clear(){const o=ae(this),l=o.size!==0,u=o.clear();return l&&ar(o,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=wb(o,t,n)}),r}function nu(t,n){const r=kb(t,n);return(i,o,l)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?i:Reflect.get(le(r,o)&&o in i?r:i,o,l)}const Cb={get:nu(!1,!1)},Sb={get:nu(!1,!0)},Ab={get:nu(!0,!1)};const fh=new WeakMap,dh=new WeakMap,hh=new WeakMap,Eb=new WeakMap;function Tb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rb(t){return t.__v_skip||!Object.isExtensible(t)?0:Tb(tb(t))}function Xe(t){return $r(t)?t:ru(t,!1,yb,Cb,fh)}function ph(t){return ru(t,!1,xb,Sb,dh)}function Ol(t){return ru(t,!0,bb,Ab,hh)}function ru(t,n,r,i,o){if(!ge(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const l=Rb(t);if(l===0)return t;const u=o.get(t);if(u)return u;const f=new Proxy(t,l===2?i:r);return o.set(t,f),f}function xs(t){return $r(t)?xs(t.__v_raw):!!(t&&t.__v_isReactive)}function $r(t){return!!(t&&t.__v_isReadonly)}function Sn(t){return!!(t&&t.__v_isShallow)}function su(t){return t?!!t.__v_raw:!1}function ae(t){const n=t&&t.__v_raw;return n?ae(n):t}function Ob(t){return!le(t,"__v_skip")&&Object.isExtensible(t)&&Yd(t,"__v_skip",!0),t}const Ne=t=>ge(t)?Xe(t):t,wo=t=>ge(t)?Ol(t):t;function He(t){return t?t.__v_isRef===!0:!1}function dt(t){return gh(t,!1)}function Ib(t){return gh(t,!0)}function gh(t,n){return He(t)?t:new $b(t,n)}class $b{constructor(n,r){this.dep=new eu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?n:ae(n),this._value=r?n:Ne(n),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(n){const r=this._rawValue,i=this.__v_isShallow||Sn(n)||$r(n);n=i?n:ae(n),Rr(n,r)&&(this._rawValue=n,this._value=i?n:Ne(n),this.dep.trigger())}}function ws(t){return He(t)?t.value:t}const Pb={get:(t,n,r)=>n==="__v_raw"?t:ws(Reflect.get(t,n,r)),set:(t,n,r,i)=>{const o=t[n];return He(o)&&!He(r)?(o.value=r,!0):Reflect.set(t,n,r,i)}};function mh(t){return xs(t)?t:new Proxy(t,Pb)}class Db{constructor(n,r,i){this.fn=n,this.setter=r,this._value=void 0,this.dep=new eu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ai-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&ve!==this)return nh(this,!0),!0}get value(){const n=this.dep.track();return ih(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Lb(t,n,r=!1){let i,o;return Vt(t)?i=t:(i=t.get,o=t.set),new Db(i,o,r)}const lo={},ko=new WeakMap;let Gr;function Bb(t,n=!1,r=Gr){if(r){let i=ko.get(r);i||ko.set(r,i=[]),i.push(t)}}function Mb(t,n,r=he){const{immediate:i,deep:o,once:l,scheduler:u,augmentJob:f,call:h}=r,y=N=>o?N:Sn(N)||o===!1||o===0?lr(N,1):lr(N);let _,m,b,v,C=!1,x=!1;if(He(t)?(m=()=>t.value,C=Sn(t)):xs(t)?(m=()=>y(t),C=!0):Ut(t)?(x=!0,C=t.some(N=>xs(N)||Sn(N)),m=()=>t.map(N=>{if(He(N))return N.value;if(xs(N))return y(N);if(Vt(N))return h?h(N,2):N()})):Vt(t)?n?m=h?()=>h(t,2):t:m=()=>{if(b){dr();try{b()}finally{hr()}}const N=Gr;Gr=_;try{return h?h(t,3,[v]):t(v)}finally{Gr=N}}:m=Wn,n&&o){const N=m,B=o===!0?1/0:o;m=()=>lr(N(),B)}const T=fb(),E=()=>{_.stop(),T&&T.active&&Zl(T.effects,_)};if(l&&n){const N=n;n=(...B)=>{N(...B),E()}}let D=x?new Array(t.length).fill(lo):lo;const M=N=>{if(!(!(_.flags&1)||!_.dirty&&!N))if(n){const B=_.run();if(o||C||(x?B.some((Y,V)=>Rr(Y,D[V])):Rr(B,D))){b&&b();const Y=Gr;Gr=_;try{const V=[B,D===lo?void 0:x&&D[0]===lo?[]:D,v];D=B,h?h(n,3,V):n(...V)}finally{Gr=Y}}}else _.run()};return f&&f(M),_=new th(m),_.scheduler=u?()=>u(M,!1):M,v=N=>Bb(N,!1,_),b=_.onStop=()=>{const N=ko.get(_);if(N){if(h)h(N,4);else for(const B of N)B();ko.delete(_)}},n?i?M(!0):D=_.run():u?u(M.bind(null,!0),!0):_.run(),E.pause=_.pause.bind(_),E.resume=_.resume.bind(_),E.stop=E,E}function lr(t,n=1/0,r){if(n<=0||!ge(t)||t.__v_skip||(r=r||new Map,(r.get(t)||0)>=n))return t;if(r.set(t,n),n--,He(t))lr(t.value,n,r);else if(Ut(t))for(let i=0;i<t.length;i++)lr(t[i],n,r);else if(Rs(t)||bs(t))t.forEach(i=>{lr(i,n,r)});else if(Zd(t)){for(const i in t)lr(t[i],n,r);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&lr(t[i],n,r)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gi(t,n,r,i){try{return i?t(...i):t()}catch(o){No(o,n,r)}}function Vn(t,n,r,i){if(Vt(t)){const o=gi(t,n,r,i);return o&&Gd(o)&&o.catch(l=>{No(l,n,r)}),o}if(Ut(t)){const o=[];for(let l=0;l<t.length;l++)o.push(Vn(t[l],n,r,i));return o}}function No(t,n,r,i=!0){const o=n?n.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:u}=n&&n.appContext.config||he;if(n){let f=n.parent;const h=n.proxy,y=`https://vuejs.org/error-reference/#runtime-${r}`;for(;f;){const _=f.ec;if(_){for(let m=0;m<_.length;m++)if(_[m](t,h,y)===!1)return}f=f.parent}if(l){dr(),gi(l,null,10,[t,h,y]),hr();return}}Nb(t,r,o,i,u)}function Nb(t,n,r,i=!0,o=!1){if(o)throw t;console.error(t)}const Je=[];let Fn=-1;const ks=[];let Ar=null,vs=0;const vh=Promise.resolve();let Co=null;function mi(t){const n=Co||vh;return t?n.then(this?t.bind(this):t):n}function zb(t){let n=Fn+1,r=Je.length;for(;n<r;){const i=n+r>>>1,o=Je[i],l=ui(o);l<t||l===t&&o.flags&2?n=i+1:r=i}return n}function iu(t){if(!(t.flags&1)){const n=ui(t),r=Je[Je.length-1];!r||!(t.flags&2)&&n>=ui(r)?Je.push(t):Je.splice(zb(n),0,t),t.flags|=1,_h()}}function _h(){Co||(Co=vh.then(bh))}function Ub(t){Ut(t)?ks.push(...t):Ar&&t.id===-1?Ar.splice(vs+1,0,t):t.flags&1||(ks.push(t),t.flags|=1),_h()}function Jf(t,n,r=Fn+1){for(;r<Je.length;r++){const i=Je[r];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;Je.splice(r,1),r--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function yh(t){if(ks.length){const n=[...new Set(ks)].sort((r,i)=>ui(r)-ui(i));if(ks.length=0,Ar){Ar.push(...n);return}for(Ar=n,vs=0;vs<Ar.length;vs++){const r=Ar[vs];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Ar=null,vs=0}}const ui=t=>t.id==null?t.flags&2?-1:1/0:t.id;function bh(t){try{for(Fn=0;Fn<Je.length;Fn++){const n=Je[Fn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),gi(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Fn<Je.length;Fn++){const n=Je[Fn];n&&(n.flags&=-2)}Fn=-1,Je.length=0,yh(),Co=null,(Je.length||ks.length)&&bh()}}let pn=null,xh=null;function So(t){const n=pn;return pn=t,xh=t&&t.type.__scopeId||null,n}function hn(t,n=pn,r){if(!n||t._n)return t;const i=(...o)=>{i._d&&Ro(-1);const l=So(n);let u;try{u=t(...o)}finally{So(l),i._d&&Ro(1)}return u};return i._n=!0,i._c=!0,i._d=!0,i}function Bt(t,n){if(pn===null)return t;const r=jo(pn),i=t.dirs||(t.dirs=[]);for(let o=0;o<n.length;o++){let[l,u,f,h=he]=n[o];l&&(Vt(l)&&(l={mounted:l,updated:l}),l.deep&&lr(u),i.push({dir:l,instance:r,value:u,oldValue:void 0,arg:f,modifiers:h}))}return t}function qr(t,n,r,i){const o=t.dirs,l=n&&n.dirs;for(let u=0;u<o.length;u++){const f=o[u];l&&(f.oldValue=l[u].value);let h=f.dir[i];h&&(dr(),Vn(h,r,8,[t.el,f,t,n]),hr())}}const Fb=Symbol("_vte"),jb=t=>t.__isTeleport,Wb=Symbol("_leaveCb");function ou(t,n){t.shapeFlag&6&&t.component?(t.transition=n,ou(t.component.subTree,n)):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function wh(t,n){return Vt(t)?qe({name:t.name},n,{setup:t}):t}function kh(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ao=new WeakMap;function ni(t,n,r,i,o=!1){if(Ut(t)){t.forEach((C,x)=>ni(C,n&&(Ut(n)?n[x]:n),r,i,o));return}if(ri(i)&&!o){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&ni(t,n,r,i.component.subTree);return}const l=i.shapeFlag&4?jo(i.component):i.el,u=o?null:l,{i:f,r:h}=t,y=n&&n.r,_=f.refs===he?f.refs={}:f.refs,m=f.setupState,b=ae(m),v=m===he?Vd:C=>le(b,C);if(y!=null&&y!==h){if(Xf(n),Ie(y))_[y]=null,v(y)&&(m[y]=null);else if(He(y)){y.value=null;const C=n;C.k&&(_[C.k]=null)}}if(Vt(h))gi(h,f,12,[u,_]);else{const C=Ie(h),x=He(h);if(C||x){const T=()=>{if(t.f){const E=C?v(h)?m[h]:_[h]:h.value;if(o)Ut(E)&&Zl(E,l);else if(Ut(E))E.includes(l)||E.push(l);else if(C)_[h]=[l],v(h)&&(m[h]=_[h]);else{const D=[l];h.value=D,t.k&&(_[t.k]=D)}}else C?(_[h]=u,v(h)&&(m[h]=u)):x&&(h.value=u,t.k&&(_[t.k]=u))};if(u){const E=()=>{T(),Ao.delete(t)};E.id=-1,Ao.set(t,E),dn(E,r)}else Xf(t),T()}}}function Xf(t){const n=Ao.get(t);n&&(n.flags|=8,Ao.delete(t))}Bo().requestIdleCallback;Bo().cancelIdleCallback;const ri=t=>!!t.type.__asyncLoader,Ch=t=>t.type.__isKeepAlive;function Hb(t,n){Sh(t,"a",n)}function qb(t,n){Sh(t,"da",n)}function Sh(t,n,r=We){const i=t.__wdc||(t.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(zo(n,i,r),r){let o=r.parent;for(;o&&o.parent;)Ch(o.parent.vnode)&&Vb(i,n,r,o),o=o.parent}}function Vb(t,n,r,i){const o=zo(n,t,i,!0);Qr(()=>{Zl(i[n],o)},r)}function zo(t,n,r=We,i=!1){if(r){const o=r[t]||(r[t]=[]),l=n.__weh||(n.__weh=(...u)=>{dr();const f=vi(r),h=Vn(n,r,t,u);return f(),hr(),h});return i?o.unshift(l):o.push(l),l}}const pr=t=>(n,r=We)=>{(!fi||t==="sp")&&zo(t,(...i)=>n(...i),r)},Gb=pr("bm"),Qe=pr("m"),Kb=pr("bu"),Zb=pr("u"),Yb=pr("bum"),Qr=pr("um"),Jb=pr("sp"),Xb=pr("rtg"),Qb=pr("rtc");function tx(t,n=We){zo("ec",t,n)}const ex="components";function Eo(t,n){return rx(ex,t,!0,n)||t}const nx=Symbol.for("v-ndc");function rx(t,n,r=!0,i=!1){const o=pn||We;if(o){const l=o.type;{const f=Vx(l,!1);if(f&&(f===n||f===En(n)||f===Lo(En(n))))return l}const u=Qf(o[t]||l[t],n)||Qf(o.appContext[t],n);return!u&&i?l:u}}function Qf(t,n){return t&&(t[n]||t[En(n)]||t[Lo(En(n))])}function Xt(t,n,r,i){let o;const l=r,u=Ut(t);if(u||Ie(t)){const f=u&&xs(t);let h=!1,y=!1;f&&(h=!Sn(t),y=$r(t),t=Mo(t)),o=new Array(t.length);for(let _=0,m=t.length;_<m;_++)o[_]=n(h?y?wo(Ne(t[_])):Ne(t[_]):t[_],_,void 0,l)}else if(typeof t=="number"){o=new Array(t);for(let f=0;f<t;f++)o[f]=n(f+1,f,void 0,l)}else if(ge(t))if(t[Symbol.iterator])o=Array.from(t,(f,h)=>n(f,h,void 0,l));else{const f=Object.keys(t);o=new Array(f.length);for(let h=0,y=f.length;h<y;h++){const _=f[h];o[h]=n(t[_],_,h,l)}}else o=[];return o}const Il=t=>t?qh(t)?jo(t):Il(t.parent):null,si=qe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Il(t.parent),$root:t=>Il(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Eh(t),$forceUpdate:t=>t.f||(t.f=()=>{iu(t.update)}),$nextTick:t=>t.n||(t.n=mi.bind(t.proxy)),$watch:t=>Cx.bind(t)}),hl=(t,n)=>t!==he&&!t.__isScriptSetup&&le(t,n),sx={get({_:t},n){if(n==="__v_skip")return!0;const{ctx:r,setupState:i,data:o,props:l,accessCache:u,type:f,appContext:h}=t;let y;if(n[0]!=="$"){const v=u[n];if(v!==void 0)switch(v){case 1:return i[n];case 2:return o[n];case 4:return r[n];case 3:return l[n]}else{if(hl(i,n))return u[n]=1,i[n];if(o!==he&&le(o,n))return u[n]=2,o[n];if((y=t.propsOptions[0])&&le(y,n))return u[n]=3,l[n];if(r!==he&&le(r,n))return u[n]=4,r[n];$l&&(u[n]=0)}}const _=si[n];let m,b;if(_)return n==="$attrs"&&je(t.attrs,"get",""),_(t);if((m=f.__cssModules)&&(m=m[n]))return m;if(r!==he&&le(r,n))return u[n]=4,r[n];if(b=h.config.globalProperties,le(b,n))return b[n]},set({_:t},n,r){const{data:i,setupState:o,ctx:l}=t;return hl(o,n)?(o[n]=r,!0):i!==he&&le(i,n)?(i[n]=r,!0):le(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(l[n]=r,!0)},has({_:{data:t,setupState:n,accessCache:r,ctx:i,appContext:o,propsOptions:l,type:u}},f){let h,y;return!!(r[f]||t!==he&&f[0]!=="$"&&le(t,f)||hl(n,f)||(h=l[0])&&le(h,f)||le(i,f)||le(si,f)||le(o.config.globalProperties,f)||(y=u.__cssModules)&&y[f])},defineProperty(t,n,r){return r.get!=null?t._.accessCache[n]=0:le(r,"value")&&this.set(t,n,r.value,null),Reflect.defineProperty(t,n,r)}};function td(t){return Ut(t)?t.reduce((n,r)=>(n[r]=null,n),{}):t}let $l=!0;function ix(t){const n=Eh(t),r=t.proxy,i=t.ctx;$l=!1,n.beforeCreate&&ed(n.beforeCreate,t,"bc");const{data:o,computed:l,methods:u,watch:f,provide:h,inject:y,created:_,beforeMount:m,mounted:b,beforeUpdate:v,updated:C,activated:x,deactivated:T,beforeDestroy:E,beforeUnmount:D,destroyed:M,unmounted:N,render:B,renderTracked:Y,renderTriggered:V,errorCaptured:tt,serverPrefetch:z,expose:I,inheritAttrs:G,components:k,directives:$,filters:g}=n;if(y&&ox(y,i,null),u)for(const ht in u){const Et=u[ht];Vt(Et)&&(i[ht]=Et.bind(r))}if(o){const ht=o.call(r,r);ge(ht)&&(t.data=Xe(ht))}if($l=!0,l)for(const ht in l){const Et=l[ht],xt=Vt(Et)?Et.bind(r,r):Vt(Et.get)?Et.get.bind(r,r):Wn,$t=!Vt(Et)&&Vt(Et.set)?Et.set.bind(r):Wn,it=pe({get:xt,set:$t});Object.defineProperty(i,ht,{enumerable:!0,configurable:!0,get:()=>it.value,set:st=>it.value=st})}if(f)for(const ht in f)Ah(f[ht],i,r,ht);if(h){const ht=Vt(h)?h.call(r):h;Reflect.ownKeys(ht).forEach(Et=>{po(Et,ht[Et])})}_&&ed(_,t,"c");function kt(ht,Et){Ut(Et)?Et.forEach(xt=>ht(xt.bind(r))):Et&&ht(Et.bind(r))}if(kt(Gb,m),kt(Qe,b),kt(Kb,v),kt(Zb,C),kt(Hb,x),kt(qb,T),kt(tx,tt),kt(Qb,Y),kt(Xb,V),kt(Yb,D),kt(Qr,N),kt(Jb,z),Ut(I))if(I.length){const ht=t.exposed||(t.exposed={});I.forEach(Et=>{Object.defineProperty(ht,Et,{get:()=>r[Et],set:xt=>r[Et]=xt,enumerable:!0})})}else t.exposed||(t.exposed={});B&&t.render===Wn&&(t.render=B),G!=null&&(t.inheritAttrs=G),k&&(t.components=k),$&&(t.directives=$),z&&kh(t)}function ox(t,n,r=Wn){Ut(t)&&(t=Pl(t));for(const i in t){const o=t[i];let l;ge(o)?"default"in o?l=Ln(o.from||i,o.default,!0):l=Ln(o.from||i):l=Ln(o),He(l)?Object.defineProperty(n,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:u=>l.value=u}):n[i]=l}}function ed(t,n,r){Vn(Ut(t)?t.map(i=>i.bind(n.proxy)):t.bind(n.proxy),n,r)}function Ah(t,n,r,i){let o=i.includes(".")?Uh(r,i):()=>r[i];if(Ie(t)){const l=n[t];Vt(l)&&Or(o,l)}else if(Vt(t))Or(o,t.bind(r));else if(ge(t))if(Ut(t))t.forEach(l=>Ah(l,n,r,i));else{const l=Vt(t.handler)?t.handler.bind(r):n[t.handler];Vt(l)&&Or(o,l,t)}}function Eh(t){const n=t.type,{mixins:r,extends:i}=n,{mixins:o,optionsCache:l,config:{optionMergeStrategies:u}}=t.appContext,f=l.get(n);let h;return f?h=f:!o.length&&!r&&!i?h=n:(h={},o.length&&o.forEach(y=>To(h,y,u,!0)),To(h,n,u)),ge(n)&&l.set(n,h),h}function To(t,n,r,i=!1){const{mixins:o,extends:l}=n;l&&To(t,l,r,!0),o&&o.forEach(u=>To(t,u,r,!0));for(const u in n)if(!(i&&u==="expose")){const f=ax[u]||r&&r[u];t[u]=f?f(t[u],n[u]):n[u]}return t}const ax={data:nd,props:rd,emits:rd,methods:Js,computed:Js,beforeCreate:Ze,created:Ze,beforeMount:Ze,mounted:Ze,beforeUpdate:Ze,updated:Ze,beforeDestroy:Ze,beforeUnmount:Ze,destroyed:Ze,unmounted:Ze,activated:Ze,deactivated:Ze,errorCaptured:Ze,serverPrefetch:Ze,components:Js,directives:Js,watch:ux,provide:nd,inject:lx};function nd(t,n){return n?t?function(){return qe(Vt(t)?t.call(this,this):t,Vt(n)?n.call(this,this):n)}:n:t}function lx(t,n){return Js(Pl(t),Pl(n))}function Pl(t){if(Ut(t)){const n={};for(let r=0;r<t.length;r++)n[t[r]]=t[r];return n}return t}function Ze(t,n){return t?[...new Set([].concat(t,n))]:n}function Js(t,n){return t?qe(Object.create(null),t,n):n}function rd(t,n){return t?Ut(t)&&Ut(n)?[...new Set([...t,...n])]:qe(Object.create(null),td(t),td(n??{})):n}function ux(t,n){if(!t)return n;if(!n)return t;const r=qe(Object.create(null),t);for(const i in n)r[i]=Ze(t[i],n[i]);return r}function Th(){return{app:null,config:{isNativeTag:Vd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cx=0;function fx(t,n){return function(i,o=null){Vt(i)||(i=qe({},i)),o!=null&&!ge(o)&&(o=null);const l=Th(),u=new WeakSet,f=[];let h=!1;const y=l.app={_uid:cx++,_component:i,_props:o,_container:null,_context:l,_instance:null,version:Kx,get config(){return l.config},set config(_){},use(_,...m){return u.has(_)||(_&&Vt(_.install)?(u.add(_),_.install(y,...m)):Vt(_)&&(u.add(_),_(y,...m))),y},mixin(_){return l.mixins.includes(_)||l.mixins.push(_),y},component(_,m){return m?(l.components[_]=m,y):l.components[_]},directive(_,m){return m?(l.directives[_]=m,y):l.directives[_]},mount(_,m,b){if(!h){const v=y._ceVNode||fe(i,o);return v.appContext=l,b===!0?b="svg":b===!1&&(b=void 0),t(v,_,b),h=!0,y._container=_,_.__vue_app__=y,jo(v.component)}},onUnmount(_){f.push(_)},unmount(){h&&(Vn(f,y._instance,16),t(null,y._container),delete y._container.__vue_app__)},provide(_,m){return l.provides[_]=m,y},runWithContext(_){const m=Cs;Cs=y;try{return _()}finally{Cs=m}}};return y}}let Cs=null;function po(t,n){if(We){let r=We.provides;const i=We.parent&&We.parent.provides;i===r&&(r=We.provides=Object.create(i)),r[t]=n}}function Ln(t,n,r=!1){const i=Fx();if(i||Cs){let o=Cs?Cs._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return r&&Vt(n)?n.call(i&&i.proxy):n}}const Rh={},Oh=()=>Object.create(Rh),Ih=t=>Object.getPrototypeOf(t)===Rh;function dx(t,n,r,i=!1){const o={},l=Oh();t.propsDefaults=Object.create(null),$h(t,n,o,l);for(const u in t.propsOptions[0])u in o||(o[u]=void 0);r?t.props=i?o:ph(o):t.type.props?t.props=o:t.props=l,t.attrs=l}function hx(t,n,r,i){const{props:o,attrs:l,vnode:{patchFlag:u}}=t,f=ae(o),[h]=t.propsOptions;let y=!1;if((i||u>0)&&!(u&16)){if(u&8){const _=t.vnode.dynamicProps;for(let m=0;m<_.length;m++){let b=_[m];if(Uo(t.emitsOptions,b))continue;const v=n[b];if(h)if(le(l,b))v!==l[b]&&(l[b]=v,y=!0);else{const C=En(b);o[C]=Dl(h,f,C,v,t,!1)}else v!==l[b]&&(l[b]=v,y=!0)}}}else{$h(t,n,o,l)&&(y=!0);let _;for(const m in f)(!n||!le(n,m)&&((_=Lr(m))===m||!le(n,_)))&&(h?r&&(r[m]!==void 0||r[_]!==void 0)&&(o[m]=Dl(h,f,m,void 0,t,!0)):delete o[m]);if(l!==f)for(const m in l)(!n||!le(n,m))&&(delete l[m],y=!0)}y&&ar(t.attrs,"set","")}function $h(t,n,r,i){const[o,l]=t.propsOptions;let u=!1,f;if(n)for(let h in n){if(Qs(h))continue;const y=n[h];let _;o&&le(o,_=En(h))?!l||!l.includes(_)?r[_]=y:(f||(f={}))[_]=y:Uo(t.emitsOptions,h)||(!(h in i)||y!==i[h])&&(i[h]=y,u=!0)}if(l){const h=ae(r),y=f||he;for(let _=0;_<l.length;_++){const m=l[_];r[m]=Dl(o,h,m,y[m],t,!le(y,m))}}return u}function Dl(t,n,r,i,o,l){const u=t[r];if(u!=null){const f=le(u,"default");if(f&&i===void 0){const h=u.default;if(u.type!==Function&&!u.skipFactory&&Vt(h)){const{propsDefaults:y}=o;if(r in y)i=y[r];else{const _=vi(o);i=y[r]=h.call(null,n),_()}}else i=h;o.ce&&o.ce._setProp(r,i)}u[0]&&(l&&!f?i=!1:u[1]&&(i===""||i===Lr(r))&&(i=!0))}return i}const px=new WeakMap;function Ph(t,n,r=!1){const i=r?px:n.propsCache,o=i.get(t);if(o)return o;const l=t.props,u={},f=[];let h=!1;if(!Vt(t)){const _=m=>{h=!0;const[b,v]=Ph(m,n,!0);qe(u,b),v&&f.push(...v)};!r&&n.mixins.length&&n.mixins.forEach(_),t.extends&&_(t.extends),t.mixins&&t.mixins.forEach(_)}if(!l&&!h)return ge(t)&&i.set(t,ys),ys;if(Ut(l))for(let _=0;_<l.length;_++){const m=En(l[_]);sd(m)&&(u[m]=he)}else if(l)for(const _ in l){const m=En(_);if(sd(m)){const b=l[_],v=u[m]=Ut(b)||Vt(b)?{type:b}:qe({},b),C=v.type;let x=!1,T=!0;if(Ut(C))for(let E=0;E<C.length;++E){const D=C[E],M=Vt(D)&&D.name;if(M==="Boolean"){x=!0;break}else M==="String"&&(T=!1)}else x=Vt(C)&&C.name==="Boolean";v[0]=x,v[1]=T,(x||le(v,"default"))&&f.push(m)}}const y=[u,f];return ge(t)&&i.set(t,y),y}function sd(t){return t[0]!=="$"&&!Qs(t)}const au=t=>t==="_"||t==="_ctx"||t==="$stable",lu=t=>Ut(t)?t.map(jn):[jn(t)],gx=(t,n,r)=>{if(n._n)return n;const i=hn((...o)=>lu(n(...o)),r);return i._c=!1,i},Dh=(t,n,r)=>{const i=t._ctx;for(const o in t){if(au(o))continue;const l=t[o];if(Vt(l))n[o]=gx(o,l,i);else if(l!=null){const u=lu(l);n[o]=()=>u}}},Lh=(t,n)=>{const r=lu(n);t.slots.default=()=>r},Bh=(t,n,r)=>{for(const i in n)(r||!au(i))&&(t[i]=n[i])},mx=(t,n,r)=>{const i=t.slots=Oh();if(t.vnode.shapeFlag&32){const o=n._;o?(Bh(i,n,r),r&&Yd(i,"_",o,!0)):Dh(n,i)}else n&&Lh(t,n)},vx=(t,n,r)=>{const{vnode:i,slots:o}=t;let l=!0,u=he;if(i.shapeFlag&32){const f=n._;f?r&&f===1?l=!1:Bh(o,n,r):(l=!n.$stable,Dh(n,o)),u=n}else n&&(Lh(t,n),u={default:1});if(l)for(const f in o)!au(f)&&u[f]==null&&delete o[f]},dn=$x;function _x(t){return yx(t)}function yx(t,n){const r=Bo();r.__VUE__=!0;const{insert:i,remove:o,patchProp:l,createElement:u,createText:f,createComment:h,setText:y,setElementText:_,parentNode:m,nextSibling:b,setScopeId:v=Wn,insertStaticContent:C}=t,x=(S,L,d,F=null,j=null,A=null,R=void 0,U=null,Q=!!L.dynamicChildren)=>{if(S===L)return;S&&!Ks(S,L)&&(F=J(S),st(S,j,A,!0),S=null),L.patchFlag===-2&&(Q=!1,L.dynamicChildren=null);const{type:X,ref:K,shapeFlag:at}=L;switch(X){case Fo:T(S,L,d,F);break;case Pr:E(S,L,d,F);break;case go:S==null&&D(L,d,F,R);break;case Ft:k(S,L,d,F,j,A,R,U,Q);break;default:at&1?B(S,L,d,F,j,A,R,U,Q):at&6?$(S,L,d,F,j,A,R,U,Q):(at&64||at&128)&&X.process(S,L,d,F,j,A,R,U,Q,St)}K!=null&&j?ni(K,S&&S.ref,A,L||S,!L):K==null&&S&&S.ref!=null&&ni(S.ref,null,A,S,!0)},T=(S,L,d,F)=>{if(S==null)i(L.el=f(L.children),d,F);else{const j=L.el=S.el;L.children!==S.children&&y(j,L.children)}},E=(S,L,d,F)=>{S==null?i(L.el=h(L.children||""),d,F):L.el=S.el},D=(S,L,d,F)=>{[S.el,S.anchor]=C(S.children,L,d,F,S.el,S.anchor)},M=({el:S,anchor:L},d,F)=>{let j;for(;S&&S!==L;)j=b(S),i(S,d,F),S=j;i(L,d,F)},N=({el:S,anchor:L})=>{let d;for(;S&&S!==L;)d=b(S),o(S),S=d;o(L)},B=(S,L,d,F,j,A,R,U,Q)=>{L.type==="svg"?R="svg":L.type==="math"&&(R="mathml"),S==null?Y(L,d,F,j,A,R,U,Q):z(S,L,j,A,R,U,Q)},Y=(S,L,d,F,j,A,R,U)=>{let Q,X;const{props:K,shapeFlag:at,transition:_t,dirs:pt}=S;if(Q=S.el=u(S.type,A,K&&K.is,K),at&8?_(Q,S.children):at&16&&tt(S.children,Q,null,F,j,pl(S,A),R,U),pt&&qr(S,null,F,"created"),V(Q,S,S.scopeId,R,F),K){for(const Lt in K)Lt!=="value"&&!Qs(Lt)&&l(Q,Lt,null,K[Lt],A,F);"value"in K&&l(Q,"value",null,K.value,A),(X=K.onVnodeBeforeMount)&&Un(X,F,S)}pt&&qr(S,null,F,"beforeMount");const Ct=bx(j,_t);Ct&&_t.beforeEnter(Q),i(Q,L,d),((X=K&&K.onVnodeMounted)||Ct||pt)&&dn(()=>{X&&Un(X,F,S),Ct&&_t.enter(Q),pt&&qr(S,null,F,"mounted")},j)},V=(S,L,d,F,j)=>{if(d&&v(S,d),F)for(let A=0;A<F.length;A++)v(S,F[A]);if(j){let A=j.subTree;if(L===A||jh(A.type)&&(A.ssContent===L||A.ssFallback===L)){const R=j.vnode;V(S,R,R.scopeId,R.slotScopeIds,j.parent)}}},tt=(S,L,d,F,j,A,R,U,Q=0)=>{for(let X=Q;X<S.length;X++){const K=S[X]=U?Er(S[X]):jn(S[X]);x(null,K,L,d,F,j,A,R,U)}},z=(S,L,d,F,j,A,R)=>{const U=L.el=S.el;let{patchFlag:Q,dynamicChildren:X,dirs:K}=L;Q|=S.patchFlag&16;const at=S.props||he,_t=L.props||he;let pt;if(d&&Vr(d,!1),(pt=_t.onVnodeBeforeUpdate)&&Un(pt,d,L,S),K&&qr(L,S,d,"beforeUpdate"),d&&Vr(d,!0),(at.innerHTML&&_t.innerHTML==null||at.textContent&&_t.textContent==null)&&_(U,""),X?I(S.dynamicChildren,X,U,d,F,pl(L,j),A):R||Et(S,L,U,null,d,F,pl(L,j),A,!1),Q>0){if(Q&16)G(U,at,_t,d,j);else if(Q&2&&at.class!==_t.class&&l(U,"class",null,_t.class,j),Q&4&&l(U,"style",at.style,_t.style,j),Q&8){const Ct=L.dynamicProps;for(let Lt=0;Lt<Ct.length;Lt++){const Ot=Ct[Lt],ne=at[Ot],be=_t[Ot];(be!==ne||Ot==="value")&&l(U,Ot,ne,be,j,d)}}Q&1&&S.children!==L.children&&_(U,L.children)}else!R&&X==null&&G(U,at,_t,d,j);((pt=_t.onVnodeUpdated)||K)&&dn(()=>{pt&&Un(pt,d,L,S),K&&qr(L,S,d,"updated")},F)},I=(S,L,d,F,j,A,R)=>{for(let U=0;U<L.length;U++){const Q=S[U],X=L[U],K=Q.el&&(Q.type===Ft||!Ks(Q,X)||Q.shapeFlag&198)?m(Q.el):d;x(Q,X,K,null,F,j,A,R,!0)}},G=(S,L,d,F,j)=>{if(L!==d){if(L!==he)for(const A in L)!Qs(A)&&!(A in d)&&l(S,A,L[A],null,j,F);for(const A in d){if(Qs(A))continue;const R=d[A],U=L[A];R!==U&&A!=="value"&&l(S,A,U,R,j,F)}"value"in d&&l(S,"value",L.value,d.value,j)}},k=(S,L,d,F,j,A,R,U,Q)=>{const X=L.el=S?S.el:f(""),K=L.anchor=S?S.anchor:f("");let{patchFlag:at,dynamicChildren:_t,slotScopeIds:pt}=L;pt&&(U=U?U.concat(pt):pt),S==null?(i(X,d,F),i(K,d,F),tt(L.children||[],d,K,j,A,R,U,Q)):at>0&&at&64&&_t&&S.dynamicChildren?(I(S.dynamicChildren,_t,d,j,A,R,U),(L.key!=null||j&&L===j.subTree)&&Mh(S,L,!0)):Et(S,L,d,K,j,A,R,U,Q)},$=(S,L,d,F,j,A,R,U,Q)=>{L.slotScopeIds=U,S==null?L.shapeFlag&512?j.ctx.activate(L,d,F,R,Q):g(L,d,F,j,A,R,Q):rt(S,L,Q)},g=(S,L,d,F,j,A,R)=>{const U=S.component=Ux(S,F,j);if(Ch(S)&&(U.ctx.renderer=St),jx(U,!1,R),U.asyncDep){if(j&&j.registerDep(U,kt,R),!S.el){const Q=U.subTree=fe(Pr);E(null,Q,L,d),S.placeholder=Q.el}}else kt(U,S,L,d,j,A,R)},rt=(S,L,d)=>{const F=L.component=S.component;if(Ox(S,L,d))if(F.asyncDep&&!F.asyncResolved){ht(F,L,d);return}else F.next=L,F.update();else L.el=S.el,F.vnode=L},kt=(S,L,d,F,j,A,R)=>{const U=()=>{if(S.isMounted){let{next:at,bu:_t,u:pt,parent:Ct,vnode:Lt}=S;{const Re=Nh(S);if(Re){at&&(at.el=Lt.el,ht(S,at,R)),Re.asyncDep.then(()=>{S.isUnmounted||U()});return}}let Ot=at,ne;Vr(S,!1),at?(at.el=Lt.el,ht(S,at,R)):at=Lt,_t&&ho(_t),(ne=at.props&&at.props.onVnodeBeforeUpdate)&&Un(ne,Ct,at,Lt),Vr(S,!0);const be=od(S),_e=S.subTree;S.subTree=be,x(_e,be,m(_e.el),J(_e),S,j,A),at.el=be.el,Ot===null&&Ix(S,be.el),pt&&dn(pt,j),(ne=at.props&&at.props.onVnodeUpdated)&&dn(()=>Un(ne,Ct,at,Lt),j)}else{let at;const{el:_t,props:pt}=L,{bm:Ct,m:Lt,parent:Ot,root:ne,type:be}=S,_e=ri(L);Vr(S,!1),Ct&&ho(Ct),!_e&&(at=pt&&pt.onVnodeBeforeMount)&&Un(at,Ot,L),Vr(S,!0);{ne.ce&&ne.ce._def.shadowRoot!==!1&&ne.ce._injectChildStyle(be);const Re=S.subTree=od(S);x(null,Re,d,F,S,j,A),L.el=Re.el}if(Lt&&dn(Lt,j),!_e&&(at=pt&&pt.onVnodeMounted)){const Re=L;dn(()=>Un(at,Ot,Re),j)}(L.shapeFlag&256||Ot&&ri(Ot.vnode)&&Ot.vnode.shapeFlag&256)&&S.a&&dn(S.a,j),S.isMounted=!0,L=d=F=null}};S.scope.on();const Q=S.effect=new th(U);S.scope.off();const X=S.update=Q.run.bind(Q),K=S.job=Q.runIfDirty.bind(Q);K.i=S,K.id=S.uid,Q.scheduler=()=>iu(K),Vr(S,!0),X()},ht=(S,L,d)=>{L.component=S;const F=S.vnode.props;S.vnode=L,S.next=null,hx(S,L.props,F,d),vx(S,L.children,d),dr(),Jf(S),hr()},Et=(S,L,d,F,j,A,R,U,Q=!1)=>{const X=S&&S.children,K=S?S.shapeFlag:0,at=L.children,{patchFlag:_t,shapeFlag:pt}=L;if(_t>0){if(_t&128){$t(X,at,d,F,j,A,R,U,Q);return}else if(_t&256){xt(X,at,d,F,j,A,R,U,Q);return}}pt&8?(K&16&&gt(X,j,A),at!==X&&_(d,at)):K&16?pt&16?$t(X,at,d,F,j,A,R,U,Q):gt(X,j,A,!0):(K&8&&_(d,""),pt&16&&tt(at,d,F,j,A,R,U,Q))},xt=(S,L,d,F,j,A,R,U,Q)=>{S=S||ys,L=L||ys;const X=S.length,K=L.length,at=Math.min(X,K);let _t;for(_t=0;_t<at;_t++){const pt=L[_t]=Q?Er(L[_t]):jn(L[_t]);x(S[_t],pt,d,null,j,A,R,U,Q)}X>K?gt(S,j,A,!0,!1,at):tt(L,d,F,j,A,R,U,Q,at)},$t=(S,L,d,F,j,A,R,U,Q)=>{let X=0;const K=L.length;let at=S.length-1,_t=K-1;for(;X<=at&&X<=_t;){const pt=S[X],Ct=L[X]=Q?Er(L[X]):jn(L[X]);if(Ks(pt,Ct))x(pt,Ct,d,null,j,A,R,U,Q);else break;X++}for(;X<=at&&X<=_t;){const pt=S[at],Ct=L[_t]=Q?Er(L[_t]):jn(L[_t]);if(Ks(pt,Ct))x(pt,Ct,d,null,j,A,R,U,Q);else break;at--,_t--}if(X>at){if(X<=_t){const pt=_t+1,Ct=pt<K?L[pt].el:F;for(;X<=_t;)x(null,L[X]=Q?Er(L[X]):jn(L[X]),d,Ct,j,A,R,U,Q),X++}}else if(X>_t)for(;X<=at;)st(S[X],j,A,!0),X++;else{const pt=X,Ct=X,Lt=new Map;for(X=Ct;X<=_t;X++){const Ae=L[X]=Q?Er(L[X]):jn(L[X]);Ae.key!=null&&Lt.set(Ae.key,X)}let Ot,ne=0;const be=_t-Ct+1;let _e=!1,Re=0;const re=new Array(be);for(X=0;X<be;X++)re[X]=0;for(X=pt;X<=at;X++){const Ae=S[X];if(ne>=be){st(Ae,j,A,!0);continue}let xe;if(Ae.key!=null)xe=Lt.get(Ae.key);else for(Ot=Ct;Ot<=_t;Ot++)if(re[Ot-Ct]===0&&Ks(Ae,L[Ot])){xe=Ot;break}xe===void 0?st(Ae,j,A,!0):(re[xe-Ct]=X+1,xe>=Re?Re=xe:_e=!0,x(Ae,L[xe],d,null,j,A,R,U,Q),ne++)}const Tn=_e?xx(re):ys;for(Ot=Tn.length-1,X=be-1;X>=0;X--){const Ae=Ct+X,xe=L[Ae],Kn=L[Ae+1],ts=Ae+1<K?Kn.el||Kn.placeholder:F;re[X]===0?x(null,xe,d,ts,j,A,R,U,Q):_e&&(Ot<0||X!==Tn[Ot]?it(xe,d,ts,2):Ot--)}}},it=(S,L,d,F,j=null)=>{const{el:A,type:R,transition:U,children:Q,shapeFlag:X}=S;if(X&6){it(S.component.subTree,L,d,F);return}if(X&128){S.suspense.move(L,d,F);return}if(X&64){R.move(S,L,d,St);return}if(R===Ft){i(A,L,d);for(let at=0;at<Q.length;at++)it(Q[at],L,d,F);i(S.anchor,L,d);return}if(R===go){M(S,L,d);return}if(F!==2&&X&1&&U)if(F===0)U.beforeEnter(A),i(A,L,d),dn(()=>U.enter(A),j);else{const{leave:at,delayLeave:_t,afterLeave:pt}=U,Ct=()=>{S.ctx.isUnmounted?o(A):i(A,L,d)},Lt=()=>{A._isLeaving&&A[Wb](!0),at(A,()=>{Ct(),pt&&pt()})};_t?_t(A,Ct,Lt):Lt()}else i(A,L,d)},st=(S,L,d,F=!1,j=!1)=>{const{type:A,props:R,ref:U,children:Q,dynamicChildren:X,shapeFlag:K,patchFlag:at,dirs:_t,cacheIndex:pt}=S;if(at===-2&&(j=!1),U!=null&&(dr(),ni(U,null,d,S,!0),hr()),pt!=null&&(L.renderCache[pt]=void 0),K&256){L.ctx.deactivate(S);return}const Ct=K&1&&_t,Lt=!ri(S);let Ot;if(Lt&&(Ot=R&&R.onVnodeBeforeUnmount)&&Un(Ot,L,S),K&6)ot(S.component,d,F);else{if(K&128){S.suspense.unmount(d,F);return}Ct&&qr(S,null,L,"beforeUnmount"),K&64?S.type.remove(S,L,d,St,F):X&&!X.hasOnce&&(A!==Ft||at>0&&at&64)?gt(X,L,d,!1,!0):(A===Ft&&at&384||!j&&K&16)&&gt(Q,L,d),F&&Pt(S)}(Lt&&(Ot=R&&R.onVnodeUnmounted)||Ct)&&dn(()=>{Ot&&Un(Ot,L,S),Ct&&qr(S,null,L,"unmounted")},d)},Pt=S=>{const{type:L,el:d,anchor:F,transition:j}=S;if(L===Ft){Tt(d,F);return}if(L===go){N(S);return}const A=()=>{o(d),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(S.shapeFlag&1&&j&&!j.persisted){const{leave:R,delayLeave:U}=j,Q=()=>R(d,A);U?U(S.el,A,Q):Q()}else A()},Tt=(S,L)=>{let d;for(;S!==L;)d=b(S),o(S),S=d;o(L)},ot=(S,L,d)=>{const{bum:F,scope:j,job:A,subTree:R,um:U,m:Q,a:X}=S;id(Q),id(X),F&&ho(F),j.stop(),A&&(A.flags|=8,st(R,S,L,d)),U&&dn(U,L),dn(()=>{S.isUnmounted=!0},L)},gt=(S,L,d,F=!1,j=!1,A=0)=>{for(let R=A;R<S.length;R++)st(S[R],L,d,F,j)},J=S=>{if(S.shapeFlag&6)return J(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const L=b(S.anchor||S.el),d=L&&L[Fb];return d?b(d):L};let ct=!1;const mt=(S,L,d)=>{S==null?L._vnode&&st(L._vnode,null,null,!0):x(L._vnode||null,S,L,null,null,null,d),L._vnode=S,ct||(ct=!0,Jf(),yh(),ct=!1)},St={p:x,um:st,m:it,r:Pt,mt:g,mc:tt,pc:Et,pbc:I,n:J,o:t};return{render:mt,hydrate:void 0,createApp:fx(mt)}}function pl({type:t,props:n},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:r}function Vr({effect:t,job:n},r){r?(t.flags|=32,n.flags|=4):(t.flags&=-33,n.flags&=-5)}function bx(t,n){return(!t||t&&!t.pendingBranch)&&n&&!n.persisted}function Mh(t,n,r=!1){const i=t.children,o=n.children;if(Ut(i)&&Ut(o))for(let l=0;l<i.length;l++){const u=i[l];let f=o[l];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[l]=Er(o[l]),f.el=u.el),!r&&f.patchFlag!==-2&&Mh(u,f)),f.type===Fo&&f.patchFlag!==-1&&(f.el=u.el),f.type===Pr&&!f.el&&(f.el=u.el)}}function xx(t){const n=t.slice(),r=[0];let i,o,l,u,f;const h=t.length;for(i=0;i<h;i++){const y=t[i];if(y!==0){if(o=r[r.length-1],t[o]<y){n[i]=o,r.push(i);continue}for(l=0,u=r.length-1;l<u;)f=l+u>>1,t[r[f]]<y?l=f+1:u=f;y<t[r[l]]&&(l>0&&(n[i]=r[l-1]),r[l]=i)}}for(l=r.length,u=r[l-1];l-- >0;)r[l]=u,u=n[u];return r}function Nh(t){const n=t.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Nh(n)}function id(t){if(t)for(let n=0;n<t.length;n++)t[n].flags|=8}const wx=Symbol.for("v-scx"),kx=()=>Ln(wx);function Or(t,n,r){return zh(t,n,r)}function zh(t,n,r=he){const{immediate:i,deep:o,flush:l,once:u}=r,f=qe({},r),h=n&&i||!n&&l!=="post";let y;if(fi){if(l==="sync"){const v=kx();y=v.__watcherHandles||(v.__watcherHandles=[])}else if(!h){const v=()=>{};return v.stop=Wn,v.resume=Wn,v.pause=Wn,v}}const _=We;f.call=(v,C,x)=>Vn(v,_,C,x);let m=!1;l==="post"?f.scheduler=v=>{dn(v,_&&_.suspense)}:l!=="sync"&&(m=!0,f.scheduler=(v,C)=>{C?v():iu(v)}),f.augmentJob=v=>{n&&(v.flags|=4),m&&(v.flags|=2,_&&(v.id=_.uid,v.i=_))};const b=Mb(t,n,f);return fi&&(y?y.push(b):h&&b()),b}function Cx(t,n,r){const i=this.proxy,o=Ie(t)?t.includes(".")?Uh(i,t):()=>i[t]:t.bind(i,i);let l;Vt(n)?l=n:(l=n.handler,r=n);const u=vi(this),f=zh(o,l.bind(i),r);return u(),f}function Uh(t,n){const r=n.split(".");return()=>{let i=t;for(let o=0;o<r.length&&i;o++)i=i[r[o]];return i}}const Sx=(t,n)=>n==="modelValue"||n==="model-value"?t.modelModifiers:t[`${n}Modifiers`]||t[`${En(n)}Modifiers`]||t[`${Lr(n)}Modifiers`];function Ax(t,n,...r){if(t.isUnmounted)return;const i=t.vnode.props||he;let o=r;const l=n.startsWith("update:"),u=l&&Sx(i,n.slice(7));u&&(u.trim&&(o=r.map(_=>Ie(_)?_.trim():_)),u.number&&(o=r.map(xo)));let f,h=i[f=ll(n)]||i[f=ll(En(n))];!h&&l&&(h=i[f=ll(Lr(n))]),h&&Vn(h,t,6,o);const y=i[f+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[f])return;t.emitted[f]=!0,Vn(y,t,6,o)}}const Ex=new WeakMap;function Fh(t,n,r=!1){const i=r?Ex:n.emitsCache,o=i.get(t);if(o!==void 0)return o;const l=t.emits;let u={},f=!1;if(!Vt(t)){const h=y=>{const _=Fh(y,n,!0);_&&(f=!0,qe(u,_))};!r&&n.mixins.length&&n.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!l&&!f?(ge(t)&&i.set(t,null),null):(Ut(l)?l.forEach(h=>u[h]=null):qe(u,l),ge(t)&&i.set(t,u),u)}function Uo(t,n){return!t||!Po(n)?!1:(n=n.slice(2).replace(/Once$/,""),le(t,n[0].toLowerCase()+n.slice(1))||le(t,Lr(n))||le(t,n))}function od(t){const{type:n,vnode:r,proxy:i,withProxy:o,propsOptions:[l],slots:u,attrs:f,emit:h,render:y,renderCache:_,props:m,data:b,setupState:v,ctx:C,inheritAttrs:x}=t,T=So(t);let E,D;try{if(r.shapeFlag&4){const N=o||i,B=N;E=jn(y.call(B,N,_,m,v,b,C)),D=f}else{const N=n;E=jn(N.length>1?N(m,{attrs:f,slots:u,emit:h}):N(m,null)),D=n.props?f:Tx(f)}}catch(N){ii.length=0,No(N,t,1),E=fe(Pr)}let M=E;if(D&&x!==!1){const N=Object.keys(D),{shapeFlag:B}=M;N.length&&B&7&&(l&&N.some(Kl)&&(D=Rx(D,l)),M=Ss(M,D,!1,!0))}return r.dirs&&(M=Ss(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(r.dirs):r.dirs),r.transition&&ou(M,r.transition),E=M,So(T),E}const Tx=t=>{let n;for(const r in t)(r==="class"||r==="style"||Po(r))&&((n||(n={}))[r]=t[r]);return n},Rx=(t,n)=>{const r={};for(const i in t)(!Kl(i)||!(i.slice(9)in n))&&(r[i]=t[i]);return r};function Ox(t,n,r){const{props:i,children:o,component:l}=t,{props:u,children:f,patchFlag:h}=n,y=l.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&h>=0){if(h&1024)return!0;if(h&16)return i?ad(i,u,y):!!u;if(h&8){const _=n.dynamicProps;for(let m=0;m<_.length;m++){const b=_[m];if(u[b]!==i[b]&&!Uo(y,b))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:i===u?!1:i?u?ad(i,u,y):!0:!!u;return!1}function ad(t,n,r){const i=Object.keys(n);if(i.length!==Object.keys(t).length)return!0;for(let o=0;o<i.length;o++){const l=i[o];if(n[l]!==t[l]&&!Uo(r,l))return!0}return!1}function Ix({vnode:t,parent:n},r){for(;n;){const i=n.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=n.vnode).el=r,n=n.parent;else break}}const jh=t=>t.__isSuspense;function $x(t,n){n&&n.pendingBranch?Ut(t)?n.effects.push(...t):n.effects.push(t):Ub(t)}const Ft=Symbol.for("v-fgt"),Fo=Symbol.for("v-txt"),Pr=Symbol.for("v-cmt"),go=Symbol.for("v-stc"),ii=[];let gn=null;function W(t=!1){ii.push(gn=t?null:[])}function Px(){ii.pop(),gn=ii[ii.length-1]||null}let ci=1;function Ro(t,n=!1){ci+=t,t<0&&gn&&n&&(gn.hasOnce=!0)}function Wh(t){return t.dynamicChildren=ci>0?gn||ys:null,Px(),ci>0&&gn&&gn.push(t),t}function H(t,n,r,i,o,l){return Wh(c(t,n,r,i,o,l,!0))}function Dx(t,n,r,i,o){return Wh(fe(t,n,r,i,o,!0))}function Oo(t){return t?t.__v_isVNode===!0:!1}function Ks(t,n){return t.type===n.type&&t.key===n.key}const Hh=({key:t})=>t??null,mo=({ref:t,ref_key:n,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Ie(t)||He(t)||Vt(t)?{i:pn,r:t,k:n,f:!!r}:t:null);function c(t,n=null,r=null,i=0,o=null,l=t===Ft?0:1,u=!1,f=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&Hh(n),ref:n&&mo(n),scopeId:xh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:pn};return f?(uu(h,r),l&128&&t.normalize(h)):r&&(h.shapeFlag|=Ie(r)?8:16),ci>0&&!u&&gn&&(h.patchFlag>0||l&6)&&h.patchFlag!==32&&gn.push(h),h}const fe=Lx;function Lx(t,n=null,r=null,i=0,o=null,l=!1){if((!t||t===nx)&&(t=Pr),Oo(t)){const f=Ss(t,n,!0);return r&&uu(f,r),ci>0&&!l&&gn&&(f.shapeFlag&6?gn[gn.indexOf(t)]=f:gn.push(f)),f.patchFlag=-2,f}if(Gx(t)&&(t=t.__vccOpts),n){n=Bx(n);let{class:f,style:h}=n;f&&!Ie(f)&&(n.class=ce(f)),ge(h)&&(su(h)&&!Ut(h)&&(h=qe({},h)),n.style=Xr(h))}const u=Ie(t)?1:jh(t)?128:jb(t)?64:ge(t)?4:Vt(t)?2:0;return c(t,n,r,i,o,u,l,!0)}function Bx(t){return t?su(t)||Ih(t)?qe({},t):t:null}function Ss(t,n,r=!1,i=!1){const{props:o,ref:l,patchFlag:u,children:f,transition:h}=t,y=n?Mx(o||{},n):o,_={__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&Hh(y),ref:n&&n.ref?r&&l?Ut(l)?l.concat(mo(n)):[l,mo(n)]:mo(n):l,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:f,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Ft?u===-1?16:u|16:u,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:h,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ss(t.ssContent),ssFallback:t.ssFallback&&Ss(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return h&&i&&ou(_,h.clone(_)),_}function ee(t=" ",n=0){return fe(Fo,null,t,n)}function fr(t,n){const r=fe(go,null,t);return r.staticCount=n,r}function At(t="",n=!1){return n?(W(),Dx(Pr,null,t)):fe(Pr,null,t)}function jn(t){return t==null||typeof t=="boolean"?fe(Pr):Ut(t)?fe(Ft,null,t.slice()):Oo(t)?Er(t):fe(Fo,null,String(t))}function Er(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ss(t)}function uu(t,n){let r=0;const{shapeFlag:i}=t;if(n==null)n=null;else if(Ut(n))r=16;else if(typeof n=="object")if(i&65){const o=n.default;o&&(o._c&&(o._d=!1),uu(t,o()),o._c&&(o._d=!0));return}else{r=32;const o=n._;!o&&!Ih(n)?n._ctx=pn:o===3&&pn&&(pn.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else Vt(n)?(n={default:n,_ctx:pn},r=32):(n=String(n),i&64?(r=16,n=[ee(n)]):r=8);t.children=n,t.shapeFlag|=r}function Mx(...t){const n={};for(let r=0;r<t.length;r++){const i=t[r];for(const o in i)if(o==="class")n.class!==i.class&&(n.class=ce([n.class,i.class]));else if(o==="style")n.style=Xr([n.style,i.style]);else if(Po(o)){const l=n[o],u=i[o];u&&l!==u&&!(Ut(l)&&l.includes(u))&&(n[o]=l?[].concat(l,u):u)}else o!==""&&(n[o]=i[o])}return n}function Un(t,n,r,i=null){Vn(t,n,7,[r,i])}const Nx=Th();let zx=0;function Ux(t,n,r){const i=t.type,o=(n?n.appContext:t.appContext)||Nx,l={uid:zx++,vnode:t,type:i,parent:n,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(o.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ph(i,o),emitsOptions:Fh(i,o),emit:null,emitted:null,propsDefaults:he,inheritAttrs:i.inheritAttrs,ctx:he,data:he,props:he,attrs:he,slots:he,refs:he,setupState:he,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=n?n.root:l,l.emit=Ax.bind(null,l),t.ce&&t.ce(l),l}let We=null;const Fx=()=>We||pn;let Io,Ll;{const t=Bo(),n=(r,i)=>{let o;return(o=t[r])||(o=t[r]=[]),o.push(i),l=>{o.length>1?o.forEach(u=>u(l)):o[0](l)}};Io=n("__VUE_INSTANCE_SETTERS__",r=>We=r),Ll=n("__VUE_SSR_SETTERS__",r=>fi=r)}const vi=t=>{const n=We;return Io(t),t.scope.on(),()=>{t.scope.off(),Io(n)}},ld=()=>{We&&We.scope.off(),Io(null)};function qh(t){return t.vnode.shapeFlag&4}let fi=!1;function jx(t,n=!1,r=!1){n&&Ll(n);const{props:i,children:o}=t.vnode,l=qh(t);dx(t,i,l,n),mx(t,o,r||n);const u=l?Wx(t,n):void 0;return n&&Ll(!1),u}function Wx(t,n){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,sx);const{setup:i}=r;if(i){dr();const o=t.setupContext=i.length>1?qx(t):null,l=vi(t),u=gi(i,t,0,[t.props,o]),f=Gd(u);if(hr(),l(),(f||t.sp)&&!ri(t)&&kh(t),f){if(u.then(ld,ld),n)return u.then(h=>{ud(t,h)}).catch(h=>{No(h,t,0)});t.asyncDep=u}else ud(t,u)}else Vh(t)}function ud(t,n,r){Vt(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:ge(n)&&(t.setupState=mh(n)),Vh(t)}function Vh(t,n,r){const i=t.type;t.render||(t.render=i.render||Wn);{const o=vi(t);dr();try{ix(t)}finally{hr(),o()}}}const Hx={get(t,n){return je(t,"get",""),t[n]}};function qx(t){const n=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,Hx),slots:t.slots,emit:t.emit,expose:n}}function jo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(mh(Ob(t.exposed)),{get(n,r){if(r in n)return n[r];if(r in si)return si[r](t)},has(n,r){return r in n||r in si}})):t.proxy}function Vx(t,n=!0){return Vt(t)?t.displayName||t.name:t.name||n&&t.__name}function Gx(t){return Vt(t)&&"__vccOpts"in t}const pe=(t,n)=>Lb(t,n,fi);function Gh(t,n,r){try{Ro(-1);const i=arguments.length;return i===2?ge(n)&&!Ut(n)?Oo(n)?fe(t,null,[n]):fe(t,n):fe(t,null,n):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&Oo(r)&&(r=[r]),fe(t,n,r))}finally{Ro(1)}}const Kx="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Bl;const cd=typeof window<"u"&&window.trustedTypes;if(cd)try{Bl=cd.createPolicy("vue",{createHTML:t=>t})}catch{}const Kh=Bl?t=>Bl.createHTML(t):t=>t,Zx="http://www.w3.org/2000/svg",Yx="http://www.w3.org/1998/Math/MathML",or=typeof document<"u"?document:null,fd=or&&or.createElement("template"),Jx={insert:(t,n,r)=>{n.insertBefore(t,r||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,r,i)=>{const o=n==="svg"?or.createElementNS(Zx,t):n==="mathml"?or.createElementNS(Yx,t):r?or.createElement(t,{is:r}):or.createElement(t);return t==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:t=>or.createTextNode(t),createComment:t=>or.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>or.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,r,i,o,l){const u=r?r.previousSibling:n.lastChild;if(o&&(o===l||o.nextSibling))for(;n.insertBefore(o.cloneNode(!0),r),!(o===l||!(o=o.nextSibling)););else{fd.innerHTML=Kh(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const f=fd.content;if(i==="svg"||i==="mathml"){const h=f.firstChild;for(;h.firstChild;)f.appendChild(h.firstChild);f.removeChild(h)}n.insertBefore(f,r)}return[u?u.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}},Xx=Symbol("_vtc");function Qx(t,n,r){const i=t[Xx];i&&(n=(n?[n,...i]:[...i]).join(" ")),n==null?t.removeAttribute("class"):r?t.setAttribute("class",n):t.className=n}const dd=Symbol("_vod"),tw=Symbol("_vsh"),ew=Symbol(""),nw=/(?:^|;)\s*display\s*:/;function rw(t,n,r){const i=t.style,o=Ie(r);let l=!1;if(r&&!o){if(n)if(Ie(n))for(const u of n.split(";")){const f=u.slice(0,u.indexOf(":")).trim();r[f]==null&&vo(i,f,"")}else for(const u in n)r[u]==null&&vo(i,u,"");for(const u in r)u==="display"&&(l=!0),vo(i,u,r[u])}else if(o){if(n!==r){const u=i[ew];u&&(r+=";"+u),i.cssText=r,l=nw.test(r)}}else n&&t.removeAttribute("style");dd in t&&(t[dd]=l?i.display:"",t[tw]&&(i.display="none"))}const hd=/\s*!important$/;function vo(t,n,r){if(Ut(r))r.forEach(i=>vo(t,n,i));else if(r==null&&(r=""),n.startsWith("--"))t.setProperty(n,r);else{const i=sw(t,n);hd.test(r)?t.setProperty(Lr(i),r.replace(hd,""),"important"):t[i]=r}}const pd=["Webkit","Moz","ms"],gl={};function sw(t,n){const r=gl[n];if(r)return r;let i=En(n);if(i!=="filter"&&i in t)return gl[n]=i;i=Lo(i);for(let o=0;o<pd.length;o++){const l=pd[o]+i;if(l in t)return gl[n]=l}return n}const gd="http://www.w3.org/1999/xlink";function md(t,n,r,i,o,l=lb(n)){i&&n.startsWith("xlink:")?r==null?t.removeAttributeNS(gd,n.slice(6,n.length)):t.setAttributeNS(gd,n,r):r==null||l&&!Jd(r)?t.removeAttribute(n):t.setAttribute(n,l?"":qn(r)?String(r):r)}function vd(t,n,r,i,o){if(n==="innerHTML"||n==="textContent"){r!=null&&(t[n]=n==="innerHTML"?Kh(r):r);return}const l=t.tagName;if(n==="value"&&l!=="PROGRESS"&&!l.includes("-")){const f=l==="OPTION"?t.getAttribute("value")||"":t.value,h=r==null?t.type==="checkbox"?"on":"":String(r);(f!==h||!("_value"in t))&&(t.value=h),r==null&&t.removeAttribute(n),t._value=r;return}let u=!1;if(r===""||r==null){const f=typeof t[n];f==="boolean"?r=Jd(r):r==null&&f==="string"?(r="",u=!0):f==="number"&&(r=0,u=!0)}try{t[n]=r}catch{}u&&t.removeAttribute(o||n)}function ur(t,n,r,i){t.addEventListener(n,r,i)}function iw(t,n,r,i){t.removeEventListener(n,r,i)}const _d=Symbol("_vei");function ow(t,n,r,i,o=null){const l=t[_d]||(t[_d]={}),u=l[n];if(i&&u)u.value=i;else{const[f,h]=aw(n);if(i){const y=l[n]=cw(i,o);ur(t,f,y,h)}else u&&(iw(t,f,u,h),l[n]=void 0)}}const yd=/(?:Once|Passive|Capture)$/;function aw(t){let n;if(yd.test(t)){n={};let i;for(;i=t.match(yd);)t=t.slice(0,t.length-i[0].length),n[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Lr(t.slice(2)),n]}let ml=0;const lw=Promise.resolve(),uw=()=>ml||(lw.then(()=>ml=0),ml=Date.now());function cw(t,n){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;Vn(fw(i,r.value),n,5,[i])};return r.value=t,r.attached=uw(),r}function fw(t,n){if(Ut(n)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},n.map(i=>o=>!o._stopped&&i&&i(o))}else return n}const bd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,dw=(t,n,r,i,o,l)=>{const u=o==="svg";n==="class"?Qx(t,i,u):n==="style"?rw(t,r,i):Po(n)?Kl(n)||ow(t,n,r,i,l):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):hw(t,n,i,u))?(vd(t,n,i),!t.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&md(t,n,i,u,l,n!=="value")):t._isVueCE&&(/[A-Z]/.test(n)||!Ie(i))?vd(t,En(n),i,l,n):(n==="true-value"?t._trueValue=i:n==="false-value"&&(t._falseValue=i),md(t,n,i,u))};function hw(t,n,r,i){if(i)return!!(n==="innerHTML"||n==="textContent"||n in t&&bd(n)&&Vt(r));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return bd(n)&&Ie(r)?!1:n in t}const Dr=t=>{const n=t.props["onUpdate:modelValue"]||!1;return Ut(n)?r=>ho(n,r):n};function pw(t){t.target.composing=!0}function xd(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const An=Symbol("_assign"),jt={created(t,{modifiers:{lazy:n,trim:r,number:i}},o){t[An]=Dr(o);const l=i||o.props&&o.props.type==="number";ur(t,n?"change":"input",u=>{if(u.target.composing)return;let f=t.value;r&&(f=f.trim()),l&&(f=xo(f)),t[An](f)}),r&&ur(t,"change",()=>{t.value=t.value.trim()}),n||(ur(t,"compositionstart",pw),ur(t,"compositionend",xd),ur(t,"change",xd))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,oldValue:r,modifiers:{lazy:i,trim:o,number:l}},u){if(t[An]=Dr(u),t.composing)return;const f=(l||t.type==="number")&&!/^0\d/.test(t.value)?xo(t.value):t.value,h=n??"";f!==h&&(document.activeElement===t&&t.type!=="range"&&(i&&n===r||o&&t.value.trim()===h)||(t.value=h))}},gw={deep:!0,created(t,n,r){t[An]=Dr(r),ur(t,"change",()=>{const i=t._modelValue,o=As(t),l=t.checked,u=t[An];if(Ut(i)){const f=Jl(i,o),h=f!==-1;if(l&&!h)u(i.concat(o));else if(!l&&h){const y=[...i];y.splice(f,1),u(y)}}else if(Rs(i)){const f=new Set(i);l?f.add(o):f.delete(o),u(f)}else u(Zh(t,l))})},mounted:wd,beforeUpdate(t,n,r){t[An]=Dr(r),wd(t,n,r)}};function wd(t,{value:n,oldValue:r},i){t._modelValue=n;let o;if(Ut(n))o=Jl(n,i.props.value)>-1;else if(Rs(n))o=n.has(i.props.value);else{if(n===r)return;o=Jr(n,Zh(t,!0))}t.checked!==o&&(t.checked=o)}const mw={created(t,{value:n},r){t.checked=Jr(n,r.props.value),t[An]=Dr(r),ur(t,"change",()=>{t[An](As(t))})},beforeUpdate(t,{value:n,oldValue:r},i){t[An]=Dr(i),n!==r&&(t.checked=Jr(n,i.props.value))}},di={deep:!0,created(t,{value:n,modifiers:{number:r}},i){const o=Rs(n);ur(t,"change",()=>{const l=Array.prototype.filter.call(t.options,u=>u.selected).map(u=>r?xo(As(u)):As(u));t[An](t.multiple?o?new Set(l):l:l[0]),t._assigning=!0,mi(()=>{t._assigning=!1})}),t[An]=Dr(i)},mounted(t,{value:n}){kd(t,n)},beforeUpdate(t,n,r){t[An]=Dr(r)},updated(t,{value:n}){t._assigning||kd(t,n)}};function kd(t,n){const r=t.multiple,i=Ut(n);if(!(r&&!i&&!Rs(n))){for(let o=0,l=t.options.length;o<l;o++){const u=t.options[o],f=As(u);if(r)if(i){const h=typeof f;h==="string"||h==="number"?u.selected=n.some(y=>String(y)===String(f)):u.selected=Jl(n,f)>-1}else u.selected=n.has(f);else if(Jr(As(u),n)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function As(t){return"_value"in t?t._value:t.value}function Zh(t,n){const r=n?"_trueValue":"_falseValue";return r in t?t[r]:n}const vw=["ctrl","shift","alt","meta"],_w={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>vw.some(r=>t[`${r}Key`]&&!n.includes(r))},ze=(t,n)=>{const r=t._withMods||(t._withMods={}),i=n.join(".");return r[i]||(r[i]=(o,...l)=>{for(let u=0;u<n.length;u++){const f=_w[n[u]];if(f&&f(o,n))return}return t(o,...l)})},yw={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},bw=(t,n)=>{const r=t._withKeys||(t._withKeys={}),i=n.join(".");return r[i]||(r[i]=o=>{if(!("key"in o))return;const l=Lr(o.key);if(n.some(u=>u===l||yw[u]===l))return t(o)})},xw=qe({patchProp:dw},Jx);let Cd;function ww(){return Cd||(Cd=_x(xw))}const kw=(...t)=>{const n=ww().createApp(...t),{mount:r}=n;return n.mount=i=>{const o=Sw(i);if(!o)return;const l=n._component;!Vt(l)&&!l.render&&!l.template&&(l.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const u=r(o,!1,Cw(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},n};function Cw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Sw(t){return Ie(t)?document.querySelector(t):t}/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const _s=typeof document<"u";function Yh(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Aw(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Yh(t.default)}const oe=Object.assign;function vl(t,n){const r={};for(const i in n){const o=n[i];r[i]=Bn(o)?o.map(t):t(o)}return r}const oi=()=>{},Bn=Array.isArray;function Sd(t,n){const r={};for(const i in t)r[i]=i in n?n[i]:t[i];return r}const Jh=/#/g,Ew=/&/g,Tw=/\//g,Rw=/=/g,Ow=/\?/g,Xh=/\+/g,Iw=/%5B/g,$w=/%5D/g,Qh=/%5E/g,Pw=/%60/g,tp=/%7B/g,Dw=/%7C/g,ep=/%7D/g,Lw=/%20/g;function cu(t){return t==null?"":encodeURI(""+t).replace(Dw,"|").replace(Iw,"[").replace($w,"]")}function Bw(t){return cu(t).replace(tp,"{").replace(ep,"}").replace(Qh,"^")}function Ml(t){return cu(t).replace(Xh,"%2B").replace(Lw,"+").replace(Jh,"%23").replace(Ew,"%26").replace(Pw,"`").replace(tp,"{").replace(ep,"}").replace(Qh,"^")}function Mw(t){return Ml(t).replace(Rw,"%3D")}function Nw(t){return cu(t).replace(Jh,"%23").replace(Ow,"%3F")}function zw(t){return Nw(t).replace(Tw,"%2F")}function hi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Uw=/\/$/,Fw=t=>t.replace(Uw,"");function _l(t,n,r="/"){let i,o={},l="",u="";const f=n.indexOf("#");let h=n.indexOf("?");return h=f>=0&&h>f?-1:h,h>=0&&(i=n.slice(0,h),l=n.slice(h,f>0?f:n.length),o=t(l)),f>=0&&(i=i||n.slice(0,f),u=n.slice(f,n.length)),i=qw(i??n,r),{fullPath:i+l+u,path:i,query:o,hash:hi(u)}}function jw(t,n){const r=n.query?t(n.query):"";return n.path+(r&&"?")+r+(n.hash||"")}function Ad(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function Ww(t,n,r){const i=n.matched.length-1,o=r.matched.length-1;return i>-1&&i===o&&Es(n.matched[i],r.matched[o])&&np(n.params,r.params)&&t(n.query)===t(r.query)&&n.hash===r.hash}function Es(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function np(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(!Hw(t[r],n[r]))return!1;return!0}function Hw(t,n){return Bn(t)?Ed(t,n):Bn(n)?Ed(n,t):t===n}function Ed(t,n){return Bn(n)?t.length===n.length&&t.every((r,i)=>r===n[i]):t.length===1&&t[0]===n}function qw(t,n){if(t.startsWith("/"))return t;if(!t)return n;const r=n.split("/"),i=t.split("/"),o=i[i.length-1];(o===".."||o===".")&&i.push("");let l=r.length-1,u,f;for(u=0;u<i.length;u++)if(f=i[u],f!==".")if(f==="..")l>1&&l--;else break;return r.slice(0,l).join("/")+"/"+i.slice(u).join("/")}const Sr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Nl=function(t){return t.pop="pop",t.push="push",t}({}),yl=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function Vw(t){if(!t)if(_s){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Fw(t)}const Gw=/^[^#]+#/;function Kw(t,n){return t.replace(Gw,"#")+n}function Zw(t,n){const r=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:n.behavior,left:i.left-r.left-(n.left||0),top:i.top-r.top-(n.top||0)}}const Wo=()=>({left:window.scrollX,top:window.scrollY});function Yw(t){let n;if("el"in t){const r=t.el,i=typeof r=="string"&&r.startsWith("#"),o=typeof r=="string"?i?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!o)return;n=Zw(o,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function Td(t,n){return(history.state?history.state.position-n:-1)+t}const zl=new Map;function Jw(t,n){zl.set(t,n)}function Xw(t){const n=zl.get(t);return zl.delete(t),n}function Qw(t){return typeof t=="string"||t&&typeof t=="object"}function rp(t){return typeof t=="string"||typeof t=="symbol"}let Se=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const sp=Symbol("");Se.MATCHER_NOT_FOUND+"",Se.NAVIGATION_GUARD_REDIRECT+"",Se.NAVIGATION_ABORTED+"",Se.NAVIGATION_CANCELLED+"",Se.NAVIGATION_DUPLICATED+"";function Ts(t,n){return oe(new Error,{type:t,[sp]:!0},n)}function ir(t,n){return t instanceof Error&&sp in t&&(n==null||!!(t.type&n))}const t2=["params","query","hash"];function e2(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const n={};for(const r of t2)r in t&&(n[r]=t[r]);return JSON.stringify(n,null,2)}function n2(t){const n={};if(t===""||t==="?")return n;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(Xh," "),l=o.indexOf("="),u=hi(l<0?o:o.slice(0,l)),f=l<0?null:hi(o.slice(l+1));if(u in n){let h=n[u];Bn(h)||(h=n[u]=[h]),h.push(f)}else n[u]=f}return n}function Rd(t){let n="";for(let r in t){const i=t[r];if(r=Mw(r),i==null){i!==void 0&&(n+=(n.length?"&":"")+r);continue}(Bn(i)?i.map(o=>o&&Ml(o)):[i&&Ml(i)]).forEach(o=>{o!==void 0&&(n+=(n.length?"&":"")+r,o!=null&&(n+="="+o))})}return n}function r2(t){const n={};for(const r in t){const i=t[r];i!==void 0&&(n[r]=Bn(i)?i.map(o=>o==null?null:""+o):i==null?i:""+i)}return n}const s2=Symbol(""),Od=Symbol(""),Ho=Symbol(""),fu=Symbol(""),Ul=Symbol("");function Zs(){let t=[];function n(i){return t.push(i),()=>{const o=t.indexOf(i);o>-1&&t.splice(o,1)}}function r(){t=[]}return{add:n,list:()=>t.slice(),reset:r}}function Tr(t,n,r,i,o,l=u=>u()){const u=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise((f,h)=>{const y=b=>{b===!1?h(Ts(Se.NAVIGATION_ABORTED,{from:r,to:n})):b instanceof Error?h(b):Qw(b)?h(Ts(Se.NAVIGATION_GUARD_REDIRECT,{from:n,to:b})):(u&&i.enterCallbacks[o]===u&&typeof b=="function"&&u.push(b),f())},_=l(()=>t.call(i&&i.instances[o],n,r,y));let m=Promise.resolve(_);t.length<3&&(m=m.then(y)),m.catch(b=>h(b))})}function bl(t,n,r,i,o=l=>l()){const l=[];for(const u of t)for(const f in u.components){let h=u.components[f];if(!(n!=="beforeRouteEnter"&&!u.instances[f]))if(Yh(h)){const y=(h.__vccOpts||h)[n];y&&l.push(Tr(y,r,i,u,f,o))}else{let y=h();l.push(()=>y.then(_=>{if(!_)throw new Error(`Couldn't resolve component "${f}" at "${u.path}"`);const m=Aw(_)?_.default:_;u.mods[f]=_,u.components[f]=m;const b=(m.__vccOpts||m)[n];return b&&Tr(b,r,i,u,f,o)()}))}}return l}function i2(t,n){const r=[],i=[],o=[],l=Math.max(n.matched.length,t.matched.length);for(let u=0;u<l;u++){const f=n.matched[u];f&&(t.matched.find(y=>Es(y,f))?i.push(f):r.push(f));const h=t.matched[u];h&&(n.matched.find(y=>Es(y,h))||o.push(h))}return[r,i,o]}/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let o2=()=>location.protocol+"//"+location.host;function ip(t,n){const{pathname:r,search:i,hash:o}=n,l=t.indexOf("#");if(l>-1){let u=o.includes(t.slice(l))?t.slice(l).length:1,f=o.slice(u);return f[0]!=="/"&&(f="/"+f),Ad(f,"")}return Ad(r,t)+i+o}function a2(t,n,r,i){let o=[],l=[],u=null;const f=({state:b})=>{const v=ip(t,location),C=r.value,x=n.value;let T=0;if(b){if(r.value=v,n.value=b,u&&u===C){u=null;return}T=x?b.position-x.position:0}else i(v);o.forEach(E=>{E(r.value,C,{delta:T,type:Nl.pop,direction:T?T>0?yl.forward:yl.back:yl.unknown})})};function h(){u=r.value}function y(b){o.push(b);const v=()=>{const C=o.indexOf(b);C>-1&&o.splice(C,1)};return l.push(v),v}function _(){if(document.visibilityState==="hidden"){const{history:b}=window;if(!b.state)return;b.replaceState(oe({},b.state,{scroll:Wo()}),"")}}function m(){for(const b of l)b();l=[],window.removeEventListener("popstate",f),window.removeEventListener("pagehide",_),document.removeEventListener("visibilitychange",_)}return window.addEventListener("popstate",f),window.addEventListener("pagehide",_),document.addEventListener("visibilitychange",_),{pauseListeners:h,listen:y,destroy:m}}function Id(t,n,r,i=!1,o=!1){return{back:t,current:n,forward:r,replaced:i,position:window.history.length,scroll:o?Wo():null}}function l2(t){const{history:n,location:r}=window,i={value:ip(t,r)},o={value:n.state};o.value||l(i.value,{back:null,current:i.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function l(h,y,_){const m=t.indexOf("#"),b=m>-1?(r.host&&document.querySelector("base")?t:t.slice(m))+h:o2()+t+h;try{n[_?"replaceState":"pushState"](y,"",b),o.value=y}catch(v){console.error(v),r[_?"replace":"assign"](b)}}function u(h,y){l(h,oe({},n.state,Id(o.value.back,h,o.value.forward,!0),y,{position:o.value.position}),!0),i.value=h}function f(h,y){const _=oe({},o.value,n.state,{forward:h,scroll:Wo()});l(_.current,_,!0),l(h,oe({},Id(i.value,h,null),{position:_.position+1},y),!1),i.value=h}return{location:i,state:o,push:f,replace:u}}function u2(t){t=Vw(t);const n=l2(t),r=a2(t,n.state,n.location,n.replace);function i(l,u=!0){u||r.pauseListeners(),history.go(l)}const o=oe({location:"",base:t,go:i,createHref:Kw.bind(null,t)},n,r);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>n.state.value}),o}let Kr=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var De=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(De||{});const c2={type:Kr.Static,value:""},f2=/[a-zA-Z0-9_]/;function d2(t){if(!t)return[[]];if(t==="/")return[[c2]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(v){throw new Error(`ERR (${r})/"${y}": ${v}`)}let r=De.Static,i=r;const o=[];let l;function u(){l&&o.push(l),l=[]}let f=0,h,y="",_="";function m(){y&&(r===De.Static?l.push({type:Kr.Static,value:y}):r===De.Param||r===De.ParamRegExp||r===De.ParamRegExpEnd?(l.length>1&&(h==="*"||h==="+")&&n(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),l.push({type:Kr.Param,value:y,regexp:_,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):n("Invalid state to consume buffer"),y="")}function b(){y+=h}for(;f<t.length;){if(h=t[f++],h==="\\"&&r!==De.ParamRegExp){i=r,r=De.EscapeNext;continue}switch(r){case De.Static:h==="/"?(y&&m(),u()):h===":"?(m(),r=De.Param):b();break;case De.EscapeNext:b(),r=i;break;case De.Param:h==="("?r=De.ParamRegExp:f2.test(h)?b():(m(),r=De.Static,h!=="*"&&h!=="?"&&h!=="+"&&f--);break;case De.ParamRegExp:h===")"?_[_.length-1]=="\\"?_=_.slice(0,-1)+h:r=De.ParamRegExpEnd:_+=h;break;case De.ParamRegExpEnd:m(),r=De.Static,h!=="*"&&h!=="?"&&h!=="+"&&f--,_="";break;default:n("Unknown state");break}}return r===De.ParamRegExp&&n(`Unfinished custom RegExp for param "${y}"`),m(),u(),o}const $d="[^/]+?",h2={sensitive:!1,strict:!1,start:!0,end:!0};var Ye=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(Ye||{});const p2=/[.+*?^${}()[\]/\\]/g;function g2(t,n){const r=oe({},h2,n),i=[];let o=r.start?"^":"";const l=[];for(const y of t){const _=y.length?[]:[Ye.Root];r.strict&&!y.length&&(o+="/");for(let m=0;m<y.length;m++){const b=y[m];let v=Ye.Segment+(r.sensitive?Ye.BonusCaseSensitive:0);if(b.type===Kr.Static)m||(o+="/"),o+=b.value.replace(p2,"\\$&"),v+=Ye.Static;else if(b.type===Kr.Param){const{value:C,repeatable:x,optional:T,regexp:E}=b;l.push({name:C,repeatable:x,optional:T});const D=E||$d;if(D!==$d){v+=Ye.BonusCustomRegExp;try{`${D}`}catch(N){throw new Error(`Invalid custom RegExp for param "${C}" (${D}): `+N.message)}}let M=x?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;m||(M=T&&y.length<2?`(?:/${M})`:"/"+M),T&&(M+="?"),o+=M,v+=Ye.Dynamic,T&&(v+=Ye.BonusOptional),x&&(v+=Ye.BonusRepeatable),D===".*"&&(v+=Ye.BonusWildcard)}_.push(v)}i.push(_)}if(r.strict&&r.end){const y=i.length-1;i[y][i[y].length-1]+=Ye.BonusStrict}r.strict||(o+="/?"),r.end?o+="$":r.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const u=new RegExp(o,r.sensitive?"":"i");function f(y){const _=y.match(u),m={};if(!_)return null;for(let b=1;b<_.length;b++){const v=_[b]||"",C=l[b-1];m[C.name]=v&&C.repeatable?v.split("/"):v}return m}function h(y){let _="",m=!1;for(const b of t){(!m||!_.endsWith("/"))&&(_+="/"),m=!1;for(const v of b)if(v.type===Kr.Static)_+=v.value;else if(v.type===Kr.Param){const{value:C,repeatable:x,optional:T}=v,E=C in y?y[C]:"";if(Bn(E)&&!x)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const D=Bn(E)?E.join("/"):E;if(!D)if(T)b.length<2&&(_.endsWith("/")?_=_.slice(0,-1):m=!0);else throw new Error(`Missing required param "${C}"`);_+=D}}return _||"/"}return{re:u,score:i,keys:l,parse:f,stringify:h}}function m2(t,n){let r=0;for(;r<t.length&&r<n.length;){const i=n[r]-t[r];if(i)return i;r++}return t.length<n.length?t.length===1&&t[0]===Ye.Static+Ye.Segment?-1:1:t.length>n.length?n.length===1&&n[0]===Ye.Static+Ye.Segment?1:-1:0}function op(t,n){let r=0;const i=t.score,o=n.score;for(;r<i.length&&r<o.length;){const l=m2(i[r],o[r]);if(l)return l;r++}if(Math.abs(o.length-i.length)===1){if(Pd(i))return 1;if(Pd(o))return-1}return o.length-i.length}function Pd(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const v2={strict:!1,end:!0,sensitive:!1};function _2(t,n,r){const i=g2(d2(t.path),r),o=oe(i,{record:t,parent:n,children:[],alias:[]});return n&&!o.record.aliasOf==!n.record.aliasOf&&n.children.push(o),o}function y2(t,n){const r=[],i=new Map;n=Sd(v2,n);function o(m){return i.get(m)}function l(m,b,v){const C=!v,x=Ld(m);x.aliasOf=v&&v.record;const T=Sd(n,m),E=[x];if("alias"in m){const N=typeof m.alias=="string"?[m.alias]:m.alias;for(const B of N)E.push(Ld(oe({},x,{components:v?v.record.components:x.components,path:B,aliasOf:v?v.record:x})))}let D,M;for(const N of E){const{path:B}=N;if(b&&B[0]!=="/"){const Y=b.record.path,V=Y[Y.length-1]==="/"?"":"/";N.path=b.record.path+(B&&V+B)}if(D=_2(N,b,T),v?v.alias.push(D):(M=M||D,M!==D&&M.alias.push(D),C&&m.name&&!Bd(D)&&u(m.name)),ap(D)&&h(D),x.children){const Y=x.children;for(let V=0;V<Y.length;V++)l(Y[V],D,v&&v.children[V])}v=v||D}return M?()=>{u(M)}:oi}function u(m){if(rp(m)){const b=i.get(m);b&&(i.delete(m),r.splice(r.indexOf(b),1),b.children.forEach(u),b.alias.forEach(u))}else{const b=r.indexOf(m);b>-1&&(r.splice(b,1),m.record.name&&i.delete(m.record.name),m.children.forEach(u),m.alias.forEach(u))}}function f(){return r}function h(m){const b=w2(m,r);r.splice(b,0,m),m.record.name&&!Bd(m)&&i.set(m.record.name,m)}function y(m,b){let v,C={},x,T;if("name"in m&&m.name){if(v=i.get(m.name),!v)throw Ts(Se.MATCHER_NOT_FOUND,{location:m});T=v.record.name,C=oe(Dd(b.params,v.keys.filter(M=>!M.optional).concat(v.parent?v.parent.keys.filter(M=>M.optional):[]).map(M=>M.name)),m.params&&Dd(m.params,v.keys.map(M=>M.name))),x=v.stringify(C)}else if(m.path!=null)x=m.path,v=r.find(M=>M.re.test(x)),v&&(C=v.parse(x),T=v.record.name);else{if(v=b.name?i.get(b.name):r.find(M=>M.re.test(b.path)),!v)throw Ts(Se.MATCHER_NOT_FOUND,{location:m,currentLocation:b});T=v.record.name,C=oe({},b.params,m.params),x=v.stringify(C)}const E=[];let D=v;for(;D;)E.unshift(D.record),D=D.parent;return{name:T,path:x,params:C,matched:E,meta:x2(E)}}t.forEach(m=>l(m));function _(){r.length=0,i.clear()}return{addRoute:l,resolve:y,removeRoute:u,clearRoutes:_,getRoutes:f,getRecordMatcher:o}}function Dd(t,n){const r={};for(const i of n)i in t&&(r[i]=t[i]);return r}function Ld(t){const n={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:b2(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function b2(t){const n={},r=t.props||!1;if("component"in t)n.default=r;else for(const i in t.components)n[i]=typeof r=="object"?r[i]:r;return n}function Bd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function x2(t){return t.reduce((n,r)=>oe(n,r.meta),{})}function w2(t,n){let r=0,i=n.length;for(;r!==i;){const l=r+i>>1;op(t,n[l])<0?i=l:r=l+1}const o=k2(t);return o&&(i=n.lastIndexOf(o,i-1)),i}function k2(t){let n=t;for(;n=n.parent;)if(ap(n)&&op(t,n)===0)return n}function ap({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Md(t){const n=Ln(Ho),r=Ln(fu),i=pe(()=>{const h=ws(t.to);return n.resolve(h)}),o=pe(()=>{const{matched:h}=i.value,{length:y}=h,_=h[y-1],m=r.matched;if(!_||!m.length)return-1;const b=m.findIndex(Es.bind(null,_));if(b>-1)return b;const v=Nd(h[y-2]);return y>1&&Nd(_)===v&&m[m.length-1].path!==v?m.findIndex(Es.bind(null,h[y-2])):b}),l=pe(()=>o.value>-1&&T2(r.params,i.value.params)),u=pe(()=>o.value>-1&&o.value===r.matched.length-1&&np(r.params,i.value.params));function f(h={}){if(E2(h)){const y=n[ws(t.replace)?"replace":"push"](ws(t.to)).catch(oi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>y),y}return Promise.resolve()}return{route:i,href:pe(()=>i.value.href),isActive:l,isExactActive:u,navigate:f}}function C2(t){return t.length===1?t[0]:t}const S2=wh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Md,setup(t,{slots:n}){const r=Xe(Md(t)),{options:i}=Ln(Ho),o=pe(()=>({[zd(t.activeClass,i.linkActiveClass,"router-link-active")]:r.isActive,[zd(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const l=n.default&&C2(n.default(r));return t.custom?l:Gh("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:o.value},l)}}}),A2=S2;function E2(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function T2(t,n){for(const r in n){const i=n[r],o=t[r];if(typeof i=="string"){if(i!==o)return!1}else if(!Bn(o)||o.length!==i.length||i.some((l,u)=>l!==o[u]))return!1}return!0}function Nd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const zd=(t,n,r)=>t??n??r,R2=wh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:r}){const i=Ln(Ul),o=pe(()=>t.route||i.value),l=Ln(Od,0),u=pe(()=>{let y=ws(l);const{matched:_}=o.value;let m;for(;(m=_[y])&&!m.components;)y++;return y}),f=pe(()=>o.value.matched[u.value]);po(Od,pe(()=>u.value+1)),po(s2,f),po(Ul,o);const h=dt();return Or(()=>[h.value,f.value,t.name],([y,_,m],[b,v,C])=>{_&&(_.instances[m]=y,v&&v!==_&&y&&y===b&&(_.leaveGuards.size||(_.leaveGuards=v.leaveGuards),_.updateGuards.size||(_.updateGuards=v.updateGuards))),y&&_&&(!v||!Es(_,v)||!b)&&(_.enterCallbacks[m]||[]).forEach(x=>x(y))},{flush:"post"}),()=>{const y=o.value,_=t.name,m=f.value,b=m&&m.components[_];if(!b)return Ud(r.default,{Component:b,route:y});const v=m.props[_],C=v?v===!0?y.params:typeof v=="function"?v(y):v:null,T=Gh(b,oe({},C,n,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(m.instances[_]=null)},ref:h}));return Ud(r.default,{Component:T,route:y})||T}}});function Ud(t,n){if(!t)return null;const r=t(n);return r.length===1?r[0]:r}const O2=R2;function I2(t){const n=y2(t.routes,t),r=t.parseQuery||n2,i=t.stringifyQuery||Rd,o=t.history,l=Zs(),u=Zs(),f=Zs(),h=Ib(Sr);let y=Sr;_s&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=vl.bind(null,J=>""+J),m=vl.bind(null,zw),b=vl.bind(null,hi);function v(J,ct){let mt,St;return rp(J)?(mt=n.getRecordMatcher(J),St=ct):St=J,n.addRoute(St,mt)}function C(J){const ct=n.getRecordMatcher(J);ct&&n.removeRoute(ct)}function x(){return n.getRoutes().map(J=>J.record)}function T(J){return!!n.getRecordMatcher(J)}function E(J,ct){if(ct=oe({},ct||h.value),typeof J=="string"){const d=_l(r,J,ct.path),F=n.resolve({path:d.path},ct),j=o.createHref(d.fullPath);return oe(d,F,{params:b(F.params),hash:hi(d.hash),redirectedFrom:void 0,href:j})}let mt;if(J.path!=null)mt=oe({},J,{path:_l(r,J.path,ct.path).path});else{const d=oe({},J.params);for(const F in d)d[F]==null&&delete d[F];mt=oe({},J,{params:m(d)}),ct.params=m(ct.params)}const St=n.resolve(mt,ct),ut=J.hash||"";St.params=_(b(St.params));const S=jw(i,oe({},J,{hash:Bw(ut),path:St.path})),L=o.createHref(S);return oe({fullPath:S,hash:ut,query:i===Rd?r2(J.query):J.query||{}},St,{redirectedFrom:void 0,href:L})}function D(J){return typeof J=="string"?_l(r,J,h.value.path):oe({},J)}function M(J,ct){if(y!==J)return Ts(Se.NAVIGATION_CANCELLED,{from:ct,to:J})}function N(J){return V(J)}function B(J){return N(oe(D(J),{replace:!0}))}function Y(J,ct){const mt=J.matched[J.matched.length-1];if(mt&&mt.redirect){const{redirect:St}=mt;let ut=typeof St=="function"?St(J,ct):St;return typeof ut=="string"&&(ut=ut.includes("?")||ut.includes("#")?ut=D(ut):{path:ut},ut.params={}),oe({query:J.query,hash:J.hash,params:ut.path!=null?{}:J.params},ut)}}function V(J,ct){const mt=y=E(J),St=h.value,ut=J.state,S=J.force,L=J.replace===!0,d=Y(mt,St);if(d)return V(oe(D(d),{state:typeof d=="object"?oe({},ut,d.state):ut,force:S,replace:L}),ct||mt);const F=mt;F.redirectedFrom=ct;let j;return!S&&Ww(i,St,mt)&&(j=Ts(Se.NAVIGATION_DUPLICATED,{to:F,from:St}),it(St,St,!0,!1)),(j?Promise.resolve(j):I(F,St)).catch(A=>ir(A)?ir(A,Se.NAVIGATION_GUARD_REDIRECT)?A:$t(A):Et(A,F,St)).then(A=>{if(A){if(ir(A,Se.NAVIGATION_GUARD_REDIRECT))return V(oe({replace:L},D(A.to),{state:typeof A.to=="object"?oe({},ut,A.to.state):ut,force:S}),ct||F)}else A=k(F,St,!0,L,ut);return G(F,St,A),A})}function tt(J,ct){const mt=M(J,ct);return mt?Promise.reject(mt):Promise.resolve()}function z(J){const ct=Tt.values().next().value;return ct&&typeof ct.runWithContext=="function"?ct.runWithContext(J):J()}function I(J,ct){let mt;const[St,ut,S]=i2(J,ct);mt=bl(St.reverse(),"beforeRouteLeave",J,ct);for(const d of St)d.leaveGuards.forEach(F=>{mt.push(Tr(F,J,ct))});const L=tt.bind(null,J,ct);return mt.push(L),gt(mt).then(()=>{mt=[];for(const d of l.list())mt.push(Tr(d,J,ct));return mt.push(L),gt(mt)}).then(()=>{mt=bl(ut,"beforeRouteUpdate",J,ct);for(const d of ut)d.updateGuards.forEach(F=>{mt.push(Tr(F,J,ct))});return mt.push(L),gt(mt)}).then(()=>{mt=[];for(const d of S)if(d.beforeEnter)if(Bn(d.beforeEnter))for(const F of d.beforeEnter)mt.push(Tr(F,J,ct));else mt.push(Tr(d.beforeEnter,J,ct));return mt.push(L),gt(mt)}).then(()=>(J.matched.forEach(d=>d.enterCallbacks={}),mt=bl(S,"beforeRouteEnter",J,ct,z),mt.push(L),gt(mt))).then(()=>{mt=[];for(const d of u.list())mt.push(Tr(d,J,ct));return mt.push(L),gt(mt)}).catch(d=>ir(d,Se.NAVIGATION_CANCELLED)?d:Promise.reject(d))}function G(J,ct,mt){f.list().forEach(St=>z(()=>St(J,ct,mt)))}function k(J,ct,mt,St,ut){const S=M(J,ct);if(S)return S;const L=ct===Sr,d=_s?history.state:{};mt&&(St||L?o.replace(J.fullPath,oe({scroll:L&&d&&d.scroll},ut)):o.push(J.fullPath,ut)),h.value=J,it(J,ct,mt,L),$t()}let $;function g(){$||($=o.listen((J,ct,mt)=>{if(!ot.listening)return;const St=E(J),ut=Y(St,ot.currentRoute.value);if(ut){V(oe(ut,{replace:!0,force:!0}),St).catch(oi);return}y=St;const S=h.value;_s&&Jw(Td(S.fullPath,mt.delta),Wo()),I(St,S).catch(L=>ir(L,Se.NAVIGATION_ABORTED|Se.NAVIGATION_CANCELLED)?L:ir(L,Se.NAVIGATION_GUARD_REDIRECT)?(V(oe(D(L.to),{force:!0}),St).then(d=>{ir(d,Se.NAVIGATION_ABORTED|Se.NAVIGATION_DUPLICATED)&&!mt.delta&&mt.type===Nl.pop&&o.go(-1,!1)}).catch(oi),Promise.reject()):(mt.delta&&o.go(-mt.delta,!1),Et(L,St,S))).then(L=>{L=L||k(St,S,!1),L&&(mt.delta&&!ir(L,Se.NAVIGATION_CANCELLED)?o.go(-mt.delta,!1):mt.type===Nl.pop&&ir(L,Se.NAVIGATION_ABORTED|Se.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),G(St,S,L)}).catch(oi)}))}let rt=Zs(),kt=Zs(),ht;function Et(J,ct,mt){$t(J);const St=kt.list();return St.length?St.forEach(ut=>ut(J,ct,mt)):console.error(J),Promise.reject(J)}function xt(){return ht&&h.value!==Sr?Promise.resolve():new Promise((J,ct)=>{rt.add([J,ct])})}function $t(J){return ht||(ht=!J,g(),rt.list().forEach(([ct,mt])=>J?mt(J):ct()),rt.reset()),J}function it(J,ct,mt,St){const{scrollBehavior:ut}=t;if(!_s||!ut)return Promise.resolve();const S=!mt&&Xw(Td(J.fullPath,0))||(St||!mt)&&history.state&&history.state.scroll||null;return mi().then(()=>ut(J,ct,S)).then(L=>L&&Yw(L)).catch(L=>Et(L,J,ct))}const st=J=>o.go(J);let Pt;const Tt=new Set,ot={currentRoute:h,listening:!0,addRoute:v,removeRoute:C,clearRoutes:n.clearRoutes,hasRoute:T,getRoutes:x,resolve:E,options:t,push:N,replace:B,go:st,back:()=>st(-1),forward:()=>st(1),beforeEach:l.add,beforeResolve:u.add,afterEach:f.add,onError:kt.add,isReady:xt,install(J){J.component("RouterLink",A2),J.component("RouterView",O2),J.config.globalProperties.$router=ot,Object.defineProperty(J.config.globalProperties,"$route",{enumerable:!0,get:()=>ws(h)}),_s&&!Pt&&h.value===Sr&&(Pt=!0,N(o.location).catch(St=>{}));const ct={};for(const St in Sr)Object.defineProperty(ct,St,{get:()=>h.value[St],enumerable:!0});J.provide(Ho,ot),J.provide(fu,ph(ct)),J.provide(Ul,h);const mt=J.unmount;Tt.add(J),J.unmount=function(){Tt.delete(J),Tt.size<1&&(y=Sr,$&&$(),$=null,h.value=Sr,Pt=!1,ht=!1),mt()}}};function gt(J){return J.reduce((ct,mt)=>ct.then(()=>z(mt)),Promise.resolve())}return ot}function qo(){return Ln(Ho)}function du(t){return Ln(fu)}const Ht=(t,n={})=>{const r=localStorage.getItem("studentToken")||localStorage.getItem("teacherToken"),i={...n.headers};r&&(i.Authorization=`Bearer ${r}`),n.body instanceof FormData||(i["Content-Type"]="application/json");const o={...n,headers:i};return fetch(t,o)},hu=(t,n)=>{const r=t.__vccOpts||t;for(const[i,o]of n)r[i]=o;return r},$2={key:0,class:"h-screen w-screen flex flex-col items-center justify-center bg-slate-100 text-slate-600"},P2={key:1,class:"flex h-screen bg-slate-50 font-sans"},D2={class:"w-60 bg-white border-r border-slate-200 flex flex-col"},L2={class:"p-6 border-b border-slate-200"},B2={class:"text-base text-slate-500 mt-2"},M2={class:"flex-grow p-4 space-y-2"},N2={class:"flex-1 overflow-y-auto p-10"},z2={key:2},U2={__name:"App",setup(t){const n=du(),r=qo(),i=dt(!1),o=dt({}),l=dt(!1),u=dt({}),f=dt(!0),h=async()=>{f.value=!0;const m=localStorage.getItem("teacherToken"),b=localStorage.getItem("studentToken");if(m)try{const v=await Ht(`/api/auth/teacher/verify?_=${new Date().getTime()}`);if(v.ok){const C=await v.json();i.value=!0,o.value=C.teacher,localStorage.setItem("teacherInfo",JSON.stringify(C.teacher))}else throw new Error("Teacher token invalid")}catch(v){console.error("驗證教師失敗:",v),y(),r.push("/auth")}else if(b)try{const v=await Ht(`/api/auth/student/verify?_=${new Date().getTime()}`);if(v.ok){const C=await v.json();l.value=!0,u.value=C.student,localStorage.setItem("studentInfo",JSON.stringify(C.student))}else throw new Error("Student token invalid")}catch(v){console.error("驗證學生失敗:",v),y(),r.push("/auth")}else y(),n.name!=="auth"&&(n.meta.requiresAuth||n.meta.requiresStudentAuth)&&r.push("/auth");f.value=!1},y=()=>{localStorage.removeItem("teacherToken"),localStorage.removeItem("teacherInfo"),localStorage.removeItem("studentToken"),localStorage.removeItem("studentInfo"),i.value=!1,o.value={},l.value=!1,u.value={}},_=()=>{y(),window.location.href="/auth"};return Qe(()=>{h(),window.addEventListener("storage",h)}),Qr(()=>{window.removeEventListener("storage",h)}),(m,b)=>{const v=Eo("router-link"),C=Eo("router-view");return f.value?(W(),H("div",$2,[...b[0]||(b[0]=[c("svg",{class:"animate-spin h-12 w-12 text-sky-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c("p",{class:"mt-4 text-lg font-medium"},"正在驗證您的身分...",-1)])])):i.value?(W(),H("div",P2,[c("aside",D2,[c("div",L2,[b[2]||(b[2]=c("h1",{class:"text-3xl font-bold text-sky-600"},"智慧班級",-1)),c("p",B2,"歡迎，"+lt(o.value.name)+" 老師",1),fe(v,{to:"/students",class:"btn btn-primary w-full mt-4 flex items-center justify-center gap-2"},{default:hn(()=>[...b[1]||(b[1]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),c("span",null,"學生管理",-1)])]),_:1})]),c("nav",M2,[fe(v,{to:"/dashboard",class:"nav-link"},{default:hn(()=>[...b[3]||(b[3]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2a4 4 0 00-4-4H3V9h2a4 4 0 004-4V3l4 4-4 4zm11-1V9l-4-4 4-4v2a4 4 0 014 4h2v2h-2a4 4 0 01-4 4z"})],-1),c("span",{class:"text-lg"},"課堂儀表板",-1)])]),_:1}),fe(v,{to:"/seating-chart",class:"nav-link"},{default:hn(()=>[...b[4]||(b[4]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"})],-1),c("span",{class:"text-lg"},"座位表",-1)])]),_:1}),fe(v,{to:"/grades",class:"nav-link"},{default:hn(()=>[...b[5]||(b[5]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),c("span",{class:"text-lg"},"成績管理",-1)])]),_:1}),fe(v,{to:"/assignments",class:"nav-link"},{default:hn(()=>[...b[6]||(b[6]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5V3a2 2 0 012-2h2a2 2 0 012 2v2"})],-1),c("span",{class:"text-lg"},"作業管理",-1)])]),_:1}),fe(v,{to:"/pingpong-teacher",class:"nav-link"},{default:hn(()=>[...b[7]||(b[7]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),c("span",{class:"text-lg"},"即時問答",-1)])]),_:1}),fe(v,{to:"/quiz",class:"nav-link"},{default:hn(()=>[...b[8]||(b[8]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1),c("span",{class:"text-lg"},"搶答競賽",-1)])]),_:1}),fe(v,{to:"/",class:"nav-link"},{default:hn(()=>[...b[9]||(b[9]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),c("span",{class:"text-lg"},"首頁",-1)])]),_:1})]),c("div",{class:"p-6 mt-auto"},[c("button",{onClick:_,class:"w-full flex items-center justify-center gap-3 p-4 rounded-xl text-red-600 bg-red-100 hover:bg-red-200 transition-colors font-semibold text-lg"},[...b[10]||(b[10]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),c("span",null,"登出",-1)])])])]),c("main",N2,[fe(C)])])):(W(),H("div",z2,[fe(C)]))}}},F2=hu(U2,[["__scopeId","data-v-8296e8e7"]]),j2={class:"flex justify-between items-start mb-8"},W2={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},H2={class:"card p-8 flex flex-col items-start hover:shadow-xl transition-shadow"},q2={class:"card p-8 flex flex-col items-start hover:shadow-xl transition-shadow"},V2={class:"card p-8 flex flex-col items-start hover:shadow-xl transition-shadow"},G2=["src"],K2={class:"mt-4 text-xl font-mono bg-gray-100 p-3 rounded-md"},Z2={__name:"HomeView",setup(t){const n=dt(""),r=dt(!1),i=pe(()=>n.value?`https://api.qrserver.com/v1/create-qr-code/?size=512x512&data=${encodeURIComponent(n.value)}`:"");return Qe(async()=>{try{const l=await(await Ht("/api/server-info")).json();n.value=l.url}catch(o){console.error("無法獲取伺服器資訊:",o)}}),(o,l)=>{const u=Eo("router-link");return W(),H("div",null,[c("div",j2,[l[4]||(l[4]=c("div",null,[c("h1",{class:"text-4xl font-bold text-slate-800 mb-2"},"歡迎使用智慧班級系統"),c("p",{class:"text-lg text-slate-600"},"您可以從左側導覽列選擇功能，或透過下方快速入口開始。")],-1)),c("button",{onClick:l[0]||(l[0]=f=>r.value=!0),class:"btn btn-secondary flex items-center gap-2"},[...l[3]||(l[3]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v1m6 11h2m-6.5 6.5v1M4.5 12.5h-1M12 20.5v-1m7.5-6.5h1M4 12V6a2 2 0 012-2h6v6h6v6a2 2 0 01-2 2H6a2 2 0 01-2-2v-2m-2-4h2m18 0h2M12 7.5h6.5M7.5 12v6.5m7.5-11h2"})],-1),ee(" 顯示連線 QR Code ",-1)])])]),c("div",W2,[c("div",H2,[l[6]||(l[6]=fr('<div class="bg-sky-100 p-4 rounded-xl mb-4"><svg class="w-10 h-10 text-sky-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2a4 4 0 00-4-4H3V9h2a4 4 0 004-4V3l4 4-4 4zm11-1V9l-4-4 4-4v2a4 4 0 014 4h2v2h-2a4 4 0 01-4 4z"></path></svg></div><h2 class="text-2xl font-bold text-slate-800">課堂儀表板</h2><p class="text-base text-slate-600 mt-2 flex-grow">即時掌握學生出缺席、課堂表現，並進行隨機抽籤。</p>',3)),fe(u,{to:"/dashboard",class:"btn btn-primary mt-6 w-full text-center"},{default:hn(()=>[...l[5]||(l[5]=[ee("前往儀表板",-1)])]),_:1})]),c("div",q2,[l[8]||(l[8]=fr('<div class="bg-teal-100 p-4 rounded-xl mb-4"><svg class="w-10 h-10 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><h2 class="text-2xl font-bold text-slate-800">學生管理</h2><p class="text-base text-slate-600 mt-2 flex-grow">管理班級學生名單、帳號、密碼，並支援批次匯入。</p>',3)),fe(u,{to:"/students",class:"btn bg-teal-500 hover:bg-teal-600 mt-6 w-full text-center"},{default:hn(()=>[...l[7]||(l[7]=[ee("管理學生",-1)])]),_:1})]),c("div",V2,[l[10]||(l[10]=fr('<div class="bg-amber-100 p-4 rounded-xl mb-4"><svg class="w-10 h-10 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h2 class="text-2xl font-bold text-slate-800">成績管理</h2><p class="text-base text-slate-600 mt-2 flex-grow">登錄平時測驗、定期評量成績，並查看課堂表現總分。</p>',3)),fe(u,{to:"/grades",class:"btn bg-amber-500 hover:bg-amber-600 mt-6 w-full text-center"},{default:hn(()=>[...l[9]||(l[9]=[ee("登錄成績",-1)])]),_:1})])]),r.value?(W(),H("div",{key:0,onClick:l[2]||(l[2]=f=>r.value=!1),class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4"},[c("div",{onClick:l[1]||(l[1]=ze(()=>{},["stop"])),class:"bg-white p-8 rounded-2xl text-center"},[l[11]||(l[11]=c("h3",{class:"text-2xl font-bold mb-4"},"學生連線網址",-1)),c("img",{src:i.value,alt:"Connection QR Code",class:"w-80 h-80 md:w-96 md:h-96 lg:w-[500px] lg:h-[500px] mx-auto border-8 border-gray-200 rounded-lg"},null,8,G2),c("p",K2,lt(n.value),1),l[12]||(l[12]=c("p",{class:"mt-2 text-gray-500"},"請學生使用手機掃描，或在瀏覽器輸入上方網址",-1))])])):At("",!0)])}}},Y2={class:"card p-8"},J2={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},X2={class:"flex gap-4 flex-wrap"},Q2={class:"w-full md:w-1/3"},tk={key:0,class:"text-red-500 mb-4"},ek={key:1,class:"text-green-500 mb-4"},nk={class:"overflow-x-auto"},rk={class:"min-w-full divide-y divide-gray-200"},sk={class:"bg-slate-50"},ik={key:0},ok={key:0},ak={key:0},lk={key:0},uk={key:0},ck={class:"bg-white divide-y divide-gray-200"},fk={key:0},dk={key:1},hk={class:"table-cell"},pk={class:"table-cell font-medium"},gk={class:"table-cell"},mk={class:"table-cell"},vk={class:"table-cell"},_k={class:"table-cell text-right"},yk=["onClick"],bk=["onClick"],xk={key:0,class:"fixed z-10 inset-0 overflow-y-auto"},wk={class:"flex items-center justify-center min-h-screen"},kk={class:"bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all max-w-lg w-full"},Ck={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Sk={class:"text-lg leading-6 font-medium text-gray-900"},Ak={class:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4"},Ek={class:"block text-sm font-medium text-gray-700"},Tk=["required"],Rk={class:"sm:col-span-2"},Ok={key:0,class:"text-red-500 text-sm sm:col-span-2"},Ik={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},$k={__name:"StudentManagementView",setup(t){const n=dt([]),r=dt(!1),i=dt(null),o=dt({}),l=dt(!0),u=dt(""),f=dt(""),h=dt(""),y=dt(null),_=dt(null),m=dt(""),b=dt("seat_number"),v=dt("asc"),C=z=>z==null?"":String(z).padStart(2,"0"),x=pe(()=>{let z=n.value;if(m.value){const I=m.value.toLowerCase();z=z.filter(G=>{var k,$,g;return((k=G.name)==null?void 0:k.toLowerCase().includes(I))||(($=G.student_id)==null?void 0:$.toLowerCase().includes(I))||((g=G.account)==null?void 0:g.toLowerCase().includes(I))})}return b.value&&z.sort((I,G)=>{let k=I[b.value],$=G[b.value];return b.value==="seat_number"&&(k=Number(k||1/0),$=Number($||1/0)),k<$?v.value==="asc"?-1:1:k>$?v.value==="asc"?1:-1:0}),z}),T=z=>{b.value===z?v.value=v.value==="asc"?"desc":"asc":(b.value=z,v.value="asc")},E=async()=>{l.value=!0,u.value="";try{const z=await Ht("/api/students");if(!z.ok)throw new Error("無法讀取學生資料");n.value=await z.json()}catch(z){u.value=`錯誤: ${z.message}`}finally{l.value=!1}},D=z=>{h.value="",i.value=z,o.value=z?{...z,password:""}:{student_id:"",name:"",class:"",seat_number:"",gender:"",account:"",password:""},r.value=!0},M=async()=>{h.value="";const z=i.value?"PUT":"POST",I=i.value?`/api/students/${i.value.id}`:"/api/students",G={...o.value};i.value&&!G.password&&delete G.password;try{const k=await Ht(I,{method:z,body:JSON.stringify(G)}),$=await k.json();if(!k.ok)throw new Error($.error||"儲存失敗");await E(),r.value=!1,f.value=`學生資料已成功${i.value?"更新":"新增"}！`,setTimeout(()=>f.value="",3e3)}catch(k){h.value=k.message}},N=async z=>{if(confirm("確定要刪除這位學生嗎？")){u.value="";try{const I=await Ht(`/api/students/${z}`,{method:"DELETE"});if(!I.ok)throw new Error((await I.json()).error||"刪除失敗");n.value=n.value.filter(G=>G.id!==z),f.value="學生已成功刪除！",setTimeout(()=>f.value="",3e3)}catch(I){u.value=`錯誤: ${I.message}`}}},B=()=>y.value.click(),Y=async z=>{const I=z.target.files[0];if(!I)return;const G=new FormData;G.append("file",I),u.value="",f.value="正在上傳並匯入資料...";try{const k=await Ht("/api/students/import",{method:"POST",body:G}),$=await k.json();if(!k.ok)throw new Error($.error||"匯入失敗");f.value=$.message||"匯入成功！",await E()}catch(k){u.value=`錯誤: ${k.message}`,f.value=""}finally{y.value.value=""}},V=()=>_.value.click(),tt=async z=>{const I=z.target.files;if(!I.length)return;const G=new FormData;for(const k of I)G.append("photos",k);u.value="",f.value=`正在上傳 ${I.length} 張照片...`;try{const k=await Ht("/api/students/photos/upload",{method:"POST",body:G}),$=await k.json();if(!k.ok)throw new Error($.error||"照片上傳失敗");f.value=$.message||"照片上傳完成！",setTimeout(()=>f.value="",5e3)}catch(k){u.value=`錯誤: ${k.message}`,f.value=""}finally{_.value.value=""}};return Qe(E),(z,I)=>(W(),H("div",null,[I[31]||(I[31]=c("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"學生管理",-1)),c("div",Y2,[c("div",J2,[c("div",X2,[c("button",{onClick:I[0]||(I[0]=G=>D(null)),class:"btn btn-primary"}," 新增學生 "),c("div",null,[c("input",{type:"file",ref_key:"fileInput",ref:y,onChange:Y,class:"hidden",accept:".xlsx, .xls, .csv"},null,544),c("button",{onClick:B,class:"btn btn-success"}," 從檔案匯入 ")]),c("div",null,[c("input",{type:"file",ref_key:"photoInput",ref:_,onChange:tt,multiple:"",class:"hidden",accept:"image/jpeg, image/png"},null,544),c("button",{onClick:V,class:"btn bg-orange-500 hover:bg-orange-600"}," 上傳學生照片 ")])]),c("div",Q2,[Bt(c("input",{type:"text","onUpdate:modelValue":I[1]||(I[1]=G=>m.value=G),placeholder:"搜尋姓名、學號、帳號...",class:"form-input w-full text-base py-2"},null,512),[[jt,m.value]])])]),u.value?(W(),H("p",tk,lt(u.value),1)):At("",!0),f.value?(W(),H("p",ek,lt(f.value),1)):At("",!0),c("div",nk,[c("table",rk,[c("thead",sk,[c("tr",null,[c("th",{onClick:I[2]||(I[2]=G=>T("student_id")),class:"table-header cursor-pointer"},[I[16]||(I[16]=ee("學號 ",-1)),b.value==="student_id"?(W(),H("span",ik,lt(v.value==="asc"?"▲":"▼"),1)):At("",!0)]),c("th",{onClick:I[3]||(I[3]=G=>T("name")),class:"table-header cursor-pointer"},[I[17]||(I[17]=ee("姓名 ",-1)),b.value==="name"?(W(),H("span",ok,lt(v.value==="asc"?"▲":"▼"),1)):At("",!0)]),c("th",{onClick:I[4]||(I[4]=G=>T("class")),class:"table-header cursor-pointer"},[I[18]||(I[18]=ee("班級 ",-1)),b.value==="class"?(W(),H("span",ak,lt(v.value==="asc"?"▲":"▼"),1)):At("",!0)]),c("th",{onClick:I[5]||(I[5]=G=>T("seat_number")),class:"table-header cursor-pointer"},[I[19]||(I[19]=ee("座號 ",-1)),b.value==="seat_number"?(W(),H("span",lk,lt(v.value==="asc"?"▲":"▼"),1)):At("",!0)]),c("th",{onClick:I[6]||(I[6]=G=>T("account")),class:"table-header cursor-pointer"},[I[20]||(I[20]=ee("帳號 ",-1)),b.value==="account"?(W(),H("span",uk,lt(v.value==="asc"?"▲":"▼"),1)):At("",!0)]),I[21]||(I[21]=c("th",{class:"table-header text-right"},"操作",-1))])]),c("tbody",ck,[l.value?(W(),H("tr",fk,[...I[22]||(I[22]=[c("td",{colspan:"6",class:"text-center py-4"},"正在載入學生資料...",-1)])])):x.value.length===0?(W(),H("tr",dk,[...I[23]||(I[23]=[c("td",{colspan:"6",class:"text-center py-4 text-gray-500"},"找不到符合條件的學生。",-1)])])):At("",!0),(W(!0),H(Ft,null,Xt(x.value,G=>(W(),H("tr",{key:G.id,class:"hover:bg-slate-50"},[c("td",hk,lt(G.student_id),1),c("td",pk,lt(G.name),1),c("td",gk,lt(G.class),1),c("td",mk,lt(C(G.seat_number)),1),c("td",vk,lt(G.account),1),c("td",_k,[c("button",{onClick:ze(k=>D(G),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 font-medium"},"編輯",8,yk),c("button",{onClick:ze(k=>N(G.id),["prevent"]),class:"text-red-600 hover:text-red-900 ml-4 font-medium"},"刪除",8,bk)])]))),128))])])])]),r.value?(W(),H("div",xk,[c("div",wk,[c("div",{class:"fixed inset-0 bg-gray-500 opacity-75",onClick:I[7]||(I[7]=G=>r.value=!1)}),c("div",kk,[c("form",{onSubmit:ze(M,["prevent"])},[c("div",Ck,[c("h3",Sk,lt(i.value?"編輯學生":"新增學生"),1),c("div",Ak,[c("div",null,[I[24]||(I[24]=c("label",{class:"block text-sm font-medium text-gray-700"},"學號",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[8]||(I[8]=G=>o.value.student_id=G),required:"",class:"mt-1 form-input"},null,512),[[jt,o.value.student_id]])]),c("div",null,[I[25]||(I[25]=c("label",{class:"block text-sm font-medium text-gray-700"},"姓名",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[9]||(I[9]=G=>o.value.name=G),required:"",class:"mt-1 form-input"},null,512),[[jt,o.value.name]])]),c("div",null,[I[26]||(I[26]=c("label",{class:"block text-sm font-medium text-gray-700"},"帳號",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[10]||(I[10]=G=>o.value.account=G),required:"",class:"mt-1 form-input"},null,512),[[jt,o.value.account]])]),c("div",null,[c("label",Ek,"密碼 ("+lt(i.value?"留空表示不變更":"必填")+")",1),Bt(c("input",{type:"password","onUpdate:modelValue":I[11]||(I[11]=G=>o.value.password=G),required:!i.value,class:"mt-1 form-input"},null,8,Tk),[[jt,o.value.password]])]),c("div",null,[I[27]||(I[27]=c("label",{class:"block text-sm font-medium text-gray-700"},"班級",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[12]||(I[12]=G=>o.value.class=G),class:"mt-1 form-input"},null,512),[[jt,o.value.class]])]),c("div",null,[I[28]||(I[28]=c("label",{class:"block text-sm font-medium text-gray-700"},"座號",-1)),Bt(c("input",{type:"number","onUpdate:modelValue":I[13]||(I[13]=G=>o.value.seat_number=G),class:"mt-1 form-input"},null,512),[[jt,o.value.seat_number]])]),c("div",Rk,[I[29]||(I[29]=c("label",{class:"block text-sm font-medium text-gray-700"},"性別",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[14]||(I[14]=G=>o.value.gender=G),class:"mt-1 form-input"},null,512),[[jt,o.value.gender]])]),h.value?(W(),H("p",Ok,lt(h.value),1)):At("",!0)])]),c("div",Ik,[I[30]||(I[30]=c("button",{type:"submit",class:"btn btn-primary w-full sm:w-auto"},"儲存",-1)),c("button",{type:"button",onClick:I[15]||(I[15]=G=>r.value=!1),class:"btn btn-secondary mt-2 sm:mt-0 sm:ml-3 w-full sm:w-auto"},"取消")])],32)])])])):At("",!0)]))}},Pk=hu($k,[["__scopeId","data-v-91f51160"]]),Dk={class:"card p-6 mb-8"},Lk={class:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border rounded-lg bg-slate-50"},Bk={class:"space-y-3"},Mk={class:"flex items-center"},Nk={class:"flex items-center"},zk={key:0,class:"text-green-600 mt-4 font-semibold"},Uk={key:1,class:"text-red-600 mt-4 font-semibold"},Fk={class:"card p-6 mb-8"},jk={class:"mb-4"},Wk={class:"max-h-[40vh] overflow-y-auto pr-2 border rounded-lg p-2 bg-slate-50"},Hk=["onDragstart"],qk={class:"font-bold text-sky-600"},Vk={key:0,class:"text-center py-10 text-slate-500"},Gk={class:"card p-4"},Kk={key:0,class:"text-center py-10"},Zk=["onDrop"],Yk={key:0,class:"w-full h-full p-2 relative flex flex-col justify-center items-center text-center"},Jk=["src"],Xk={class:"font-bold truncate text-slate-800"},Qk={class:"text-sky-600"},t4={class:"text-gray-500 text-sm truncate"},e4=["onClick"],n4={key:1,class:"text-slate-400 text-sm"},r4={key:0,class:"fixed z-10 inset-0 overflow-y-auto"},s4={class:"flex items-center justify-center min-h-screen"},i4={class:"bg-white rounded-lg shadow-xl transform transition-all max-w-lg w-full"},o4={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},xl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2NkY2RjZCI+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgM2MxLjY2IDAgMyAxLjM0IDMgM3MtMS4zNCAzLTMgMy0zLTEuMzQtMy0zIDEuMzQtMyAzLTMzem0wIDE0LjJjLTIuNSAwLTQuNzEtMS4yOC02LTMuMjIuMDMtMS40OSw0LTMuMDggNi0zLjA4czUuOTcgMS4wOSA2IDMuMDhjLTEuMjkgMS45NC0zLjUgMy4yMi02IDMuMjJ6Ii8+PC9zdmc+",a4={__name:"SeatingChartView",setup(t){const n=dt([]),r=dt(6),i=dt(5),o=dt({}),l=dt(!0),u=dt(""),f=dt(""),h=dt(""),y=dt(new Set),_=dt(!1),m=V=>V==null?"":String(V).padStart(2,"0"),b=pe(()=>({display:"grid",gridTemplateColumns:`repeat(${i.value}, 1fr)`})),v=pe(()=>{const V=new Set(Object.values(o.value).filter(Boolean).map(tt=>tt.id));return n.value.filter(tt=>!V.has(tt.id)).filter(tt=>tt.name.toLowerCase().includes(h.value.toLowerCase()))}),C=async()=>{l.value=!0,u.value="";try{const[V,tt,z]=await Promise.all([Ht("/api/students"),Ht("/api/seating-chart"),Ht("/api/students/photos")]);if(!V.ok)throw new Error("無法讀取學生列表");if(n.value=await V.json(),!tt.ok)throw new Error("無法讀取座位表資料");const I=await tt.json();if(!z.ok)throw new Error("無法讀取學生照片列表");y.value=new Set(await z.json()),r.value=I.rows||6,i.value=I.cols||5,o.value=I.seats||{}}catch(V){u.value=V.message}finally{l.value=!1}},x=V=>{if(!(V!=null&&V.student_id))return xl;for(const tt of[".jpg",".jpeg",".png"])if(y.value.has(V.student_id+tt))return`/photos/${V.student_id}${tt}?t=${new Date().getTime()}`;return xl},T=V=>{V.target.src=xl},E=(V,tt)=>{V.dataTransfer.setData("studentId",tt.id)},D=(V,tt)=>{var G;const z=parseInt(V.dataTransfer.getData("studentId"),10),I=n.value.find(k=>k.id===z);if(I){for(const k in o.value)((G=o.value[k])==null?void 0:G.id)===z&&(o.value[k]=null);o.value[tt]=I}},M=V=>{o.value[V]=null},N=async()=>{u.value="",f.value="";try{const V=await Ht("/api/seating-chart",{method:"POST",body:JSON.stringify({rows:r.value,cols:i.value,seats:o.value})});if(!V.ok)throw new Error((await V.json()).error||"儲存失敗");f.value="座位表已成功儲存！",setTimeout(()=>f.value="",3e3)}catch(V){u.value=V.message}},B=()=>{_.value=!0},Y=()=>{const V=[...n.value].sort((z,I)=>(Number(z.seat_number)||1/0)-(Number(I.seat_number)||1/0)),tt={};for(let z=0;z<r.value*i.value;z++)tt[z]=V[z]||null;o.value=tt,_.value=!1};return Qe(C),(V,tt)=>(W(),H("div",null,[tt[14]||(tt[14]=c("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"座位表設定",-1)),c("div",Dk,[tt[11]||(tt[11]=c("h2",{class:"text-2xl font-semibold mb-4"},"版面與操作",-1)),c("div",Lk,[c("div",null,[tt[9]||(tt[9]=c("h3",{class:"text-lg font-medium text-slate-700 mb-2"},"座位表尺寸",-1)),c("div",Bk,[c("div",Mk,[tt[7]||(tt[7]=c("label",{class:"w-1/3 font-medium text-slate-700"},"行數 (Rows):",-1)),Bt(c("input",{type:"number","onUpdate:modelValue":tt[0]||(tt[0]=z=>r.value=z),min:"1",max:"20",class:"form-input w-2/3 text-center"},null,512),[[jt,r.value,void 0,{number:!0}]])]),c("div",Nk,[tt[8]||(tt[8]=c("label",{class:"w-1/3 font-medium text-slate-700"},"列數 (Cols):",-1)),Bt(c("input",{type:"number","onUpdate:modelValue":tt[1]||(tt[1]=z=>i.value=z),min:"1",max:"20",class:"form-input w-2/3 text-center"},null,512),[[jt,i.value,void 0,{number:!0}]])])])]),c("div",null,[tt[10]||(tt[10]=c("h3",{class:"text-lg font-medium text-slate-700 mb-2"},"功能按鈕",-1)),c("div",{class:"space-y-3"},[c("button",{onClick:B,class:"w-full btn btn-success"},"依座號自動排列"),c("button",{onClick:N,class:"w-full btn btn-primary"},"儲存座位表")])])]),f.value?(W(),H("p",zk,lt(f.value),1)):At("",!0),u.value?(W(),H("p",Uk,lt(u.value),1)):At("",!0)]),c("div",Fk,[tt[12]||(tt[12]=c("h2",{class:"text-2xl font-semibold mb-4"},"未安排座位學生",-1)),c("div",jk,[Bt(c("input",{type:"text","onUpdate:modelValue":tt[2]||(tt[2]=z=>h.value=z),placeholder:"搜尋學生...",class:"form-input w-full"},null,512),[[jt,h.value]])]),c("div",Wk,[(W(!0),H(Ft,null,Xt(v.value,z=>(W(),H("div",{key:z.id,draggable:"true",onDragstart:I=>E(I,z),class:"p-3 mb-2 border rounded-lg cursor-grab bg-white hover:bg-sky-100 transition-colors flex items-center gap-3 shadow-sm"},[c("span",qk,lt(m(z.seat_number)),1),c("span",null,lt(z.name),1)],40,Hk))),128)),v.value.length===0?(W(),H("div",Vk," 所有學生皆已安排座位。 ")):At("",!0)])]),c("div",Gk,[l.value?(W(),H("div",Kk,"讀取中...")):(W(),H("div",{key:1,style:Xr(b.value),class:"grid gap-4"},[(W(!0),H(Ft,null,Xt(r.value*i.value,z=>(W(),H("div",{key:z,onDrop:I=>D(I,z-1),onDragover:tt[3]||(tt[3]=ze(()=>{},["prevent"])),onDragenter:tt[4]||(tt[4]=ze(()=>{},["prevent"])),class:ce(["border-2 border-dashed rounded-lg h-36 flex flex-col justify-center items-center relative",{"bg-slate-50 hover:border-sky-400":!o.value[z-1],"bg-sky-50 border-sky-200":o.value[z-1]}])},[o.value[z-1]?(W(),H("div",Yk,[c("img",{src:x(o.value[z-1]),onError:T,class:"w-16 h-16 object-cover rounded-full bg-gray-200 mb-2 border-2 border-white shadow"},null,40,Jk),c("p",Xk,[c("span",Qk,lt(m(o.value[z-1].seat_number))+".",1),ee(" "+lt(o.value[z-1].name),1)]),c("p",t4,lt(o.value[z-1].account),1),c("button",{onClick:I=>M(z-1),class:"absolute top-1 right-1 text-red-500 hover:text-red-700 bg-white rounded-full h-6 w-6 flex items-center justify-center shadow"},"✕",8,e4)])):(W(),H("div",n4,"(空位)"))],42,Zk))),128))],4))]),_.value?(W(),H("div",r4,[c("div",s4,[c("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:tt[5]||(tt[5]=z=>_.value=!1)}),c("div",i4,[tt[13]||(tt[13]=fr('<div class="p-6"><div class="flex items-start"><div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 sm:mx-0 sm:h-10 sm:w-10"><svg class="h-6 w-6 text-yellow-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"><h3 class="text-lg leading-6 font-medium text-gray-900"> 確認自動排列 </h3><div class="mt-2"><p class="text-sm text-gray-500"> 此操作將會覆蓋目前的座位表，您確定要依座號自動排列嗎？ </p></div></div></div></div>',1)),c("div",o4,[c("button",{onClick:Y,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-yellow-500 text-base font-medium text-white hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 sm:ml-3 sm:w-auto sm:text-sm"}," 確認排列 "),c("button",{onClick:tt[6]||(tt[6]=z=>_.value=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm"}," 取消 ")])])])])):At("",!0)]))}},l4={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8"},u4={class:"card h-full"},c4={class:"flex justify-between items-start mb-4"},f4={class:"text-xl font-semibold text-slate-700"},d4={key:0,class:"mt-2 text-center py-8"},h4={key:1,class:"grid grid-cols-3 gap-4 text-center"},p4={class:"text-5xl font-bold text-green-600"},g4={class:"text-5xl font-bold text-orange-500"},m4={class:"text-5xl font-bold text-red-600"},v4={class:"card flex flex-col items-center justify-center text-center h-full"},_4=["disabled"],y4={class:"card flex flex-col items-center justify-center text-center h-full"},b4={key:0,class:"text-5xl font-bold mt-4"},x4={key:1,class:"text-6xl font-bold text-slate-800 mt-4"},w4={key:0,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6",role:"alert"},k4={class:"card p-4"},C4={key:0,class:"text-center py-16"},S4=["onClick"],A4={class:"absolute top-2 left-2 text-slate-500"},E4={key:0,class:"w-6 h-6 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},T4={key:1,class:"w-6 h-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},R4={key:2,class:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},O4={class:"flex-grow flex flex-col items-center justify-center"},I4=["src"],$4={class:"font-bold text-xl leading-tight mt-2"},P4={class:"text-sm text-slate-600"},D4={key:1,class:"text-slate-400 text-sm"},L4={key:1,class:"fixed z-20 inset-0 overflow-y-auto"},B4={class:"flex items-center justify-center min-h-screen"},M4={class:"inline-block bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all my-8 max-w-sm w-full"},N4={class:"bg-white p-6"},z4={class:"text-2xl leading-6 font-bold text-gray-900 text-center mb-2"},U4={class:"my-4 text-center"},F4={class:"grid grid-cols-2 gap-4 mt-2"},j4={class:"bg-gray-50 px-4 py-3 text-right"},W4={key:2,class:"fixed z-30 inset-0 overflow-y-auto"},H4={class:"flex items-center justify-center min-h-screen"},q4={class:"inline-block bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all my-8 max-w-5xl w-full"},V4={class:"bg-white px-6 pt-5 pb-4"},G4={class:"max-h-[60vh] overflow-y-auto pr-4"},K4={class:"col-span-1 font-semibold text-lg"},Z4={class:"col-span-5 grid grid-cols-5 gap-2"},Y4=["onClick"],J4={class:"bg-gray-100 px-6 py-4 flex justify-end space-x-4"},X4={key:3,class:"fixed z-40 inset-0 overflow-y-auto"},Q4={class:"flex items-center justify-center min-h-screen"},t3={class:"inline-block bg-white rounded-2xl text-center overflow-hidden shadow-2xl transform transition-all my-8 max-w-md w-full relative border-4 border-yellow-400"},e3={class:"p-8 sm:p-12 relative"},n3={class:"text-8xl font-extrabold text-gray-900 my-4"},r3={class:"text-3xl text-gray-500 font-semibold"},s3={key:4,class:"fixed z-50 inset-0 overflow-y-auto"},i3={class:"flex items-center justify-center min-h-screen p-4"},o3={class:"inline-block bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all my-8 max-w-6xl w-full"},a3={class:"bg-white px-6 pt-5 pb-4"},l3={class:"flex items-center space-x-4 mb-4 p-4 bg-slate-50 rounded-md"},u3={class:"max-h-[60vh] overflow-y-auto"},c3={key:0,class:"text-center py-8"},f3={key:1,class:"min-w-full divide-y divide-gray-200"},d3={class:"bg-white divide-y divide-gray-200"},h3={class:"px-4 py-3 whitespace-nowrap"},p3={class:"px-4 py-3 whitespace-nowrap font-semibold"},g3={class:"px-4 py-3 text-center"},m3={class:"px-4 py-3 text-center"},v3={class:"px-4 py-3 text-center"},_3={class:"px-4 py-3 text-center"},y3={class:"px-4 py-3 text-center text-red-600 font-bold"},b3={class:"px-4 py-3 text-center font-medium"},x3={key:0},w3={key:1},k3={class:"bg-gray-100 px-6 py-4 flex justify-end"},wl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2NkY2RjZCI+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgM2MxLjY2IDAgMyAxLjM0IDMgM3MtMS4zNCAzLTMgMy0zLTEuMzQtMy0zIDEuMzQtMyAzLTMzem0wIDE0LjJjLTIuNSAwLTQuNzEtMS4yOC02LTMuMjIuMDMtMS45OSA0LTMuMDggNi0zLjA4czUuOTcgMS4wOSA2IDMuMDhjLTEuMjkgMS45NC0zLjUgMy4yMi02IDMuMjJ6Ii8+PC9zdmc+",C3={__name:"ClassroomDashboardView",setup(t){const n=dt([]),r=dt({rows:0,cols:0,seats:{}}),i=dt({}),o=dt({}),l=dt(!0),u=dt(""),f=dt(new Set),h=dt(!1),y=dt(!1),_=dt(!1),m=dt(null),b=dt({}),v=dt(!1),C=dt(null),x={present:{label:"出席",color:"green",bgColor:"bg-green-500",hoverBg:"hover:bg-green-200"},sick:{label:"病假",color:"orange",bgColor:"bg-orange-500",hoverBg:"hover:bg-orange-200"},official:{label:"公假",color:"blue",bgColor:"bg-blue-500",hoverBg:"hover:bg-blue-200"},personal:{label:"事假",color:"yellow",bgColor:"bg-yellow-500",hoverBg:"hover:bg-yellow-200"},absent:{label:"曠課",color:"red",bgColor:"bg-red-500",hoverBg:"hover:bg-red-200"}},T=dt(!1),E=dt(""),D=dt(""),M=dt([]),N=dt(!1),B=pe(()=>new Date().toISOString().split("T")[0]),Y=pe(()=>new Date().toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"})),V=pe(()=>({display:"grid",gridTemplateColumns:`repeat(${r.value.cols}, 1fr)`})),tt=pe(()=>Object.values(r.value.seats).filter(Boolean).length),z=pe(()=>[...n.value].sort((ut,S)=>(Number(ut.seat_number)||1/0)-(Number(S.seat_number)||1/0))),I=pe(()=>{const ut={present:0,leave:0,absent:0},S=Object.values(r.value.seats).filter(Boolean);return S.length&&S.forEach(L=>{const d=i.value[L.student_id];d==="present"?ut.present++:d==="absent"?ut.absent++:["sick","official","personal"].includes(d)?ut.leave++:ut.present++}),ut}),G=pe(()=>m.value&&o.value[m.value.student_id]||0),k=pe(()=>{const ut=G.value;return ut>0?"text-green-600":ut<0?"text-red-600":"text-gray-800"}),$=ut=>{if(!(ut!=null&&ut.student_id))return wl;for(const S of[".jpg",".jpeg",".png"])if(f.value.has(ut.student_id+S))return`/photos/${ut.student_id}${S}?t=${new Date().getTime()}`;return wl},g=ut=>{ut.target.src=wl},rt=ut=>i.value[ut]||"present",kt=ut=>{if(!ut)return"bg-slate-100 border-slate-200";if(C.value&&C.value.id===ut.id)return"ring-4 ring-offset-2 ring-indigo-500 scale-105 shadow-lg z-10 bg-white";const S=rt(ut.student_id),L=x[S],d=S!=="present"?" opacity-50":"";return L?`bg-${L.color}-100 hover:bg-${L.color}-200 border-${L.color}-300${d}`:`bg-slate-200 hover:bg-slate-300 border-slate-400${d}`},ht=ut=>{if(!ut)return"bg-slate-800";const S=o.value[ut.student_id]||0;return S>0?"bg-green-600":S<0?"bg-red-600":"bg-slate-800"},Et=(ut,S)=>b.value[ut]===S?`${x[S].bgColor} text-white`:`bg-slate-200 ${x[S].hoverBg} text-slate-700`,xt=async()=>{l.value=!0,u.value="";try{const[ut,S,L]=await Promise.all([Ht(`/api/classroom-status?date=${B.value}`),Ht("/api/students"),Ht("/api/students/photos")]);if(!ut.ok)throw new Error("無法讀取課堂儀表板資料");if(!S.ok)throw new Error("無法讀取學生列表");if(!L.ok)throw new Error("無法讀取學生照片列表");const d=await ut.json();n.value=await S.json(),f.value=new Set(await L.json()),r.value=d.seatingChart||{rows:6,cols:5,seats:{}},o.value=d.performance||{};const F=d.attendance||{},j=Object.values(r.value.seats).filter(Boolean),A={};j.forEach(R=>{A[R.student_id]=F[R.student_id]||"present"}),i.value=A}catch(ut){u.value=`錯誤: ${ut.message}`}finally{l.value=!1}},$t=ut=>{if(!ut)return;(i.value[ut.student_id]||"present")==="present"&&it(ut)},it=ut=>{m.value=ut,h.value=!0},st=()=>{const ut={};n.value.forEach(S=>{ut[S.student_id]=i.value[S.student_id]||"present"}),b.value=ut,y.value=!0},Pt=(ut,S)=>{b.value[ut]=S},Tt=async()=>{const ut=[];for(const S in b.value)b.value[S]!==i.value[S]&&ut.push(Ht("/api/attendance",{method:"POST",body:JSON.stringify({student_id:S,date:B.value,status:b.value[S]})}));if(ut.length===0){y.value=!1;return}try{await Promise.all(ut),i.value={...b.value},y.value=!1}catch{u.value="儲存出缺席狀態時發生錯誤。請重新整理頁面。"}},ot=async ut=>{if(!m.value)return;const S=m.value.student_id;o.value[S]||(o.value[S]=0),o.value[S]+=ut;try{await Ht("/api/performance",{method:"POST",body:JSON.stringify({student_id:S,date:B.value,points:ut})})}catch{u.value="新增表現分數失敗",xt()}},gt=()=>{const ut=Object.keys(i.value).filter(F=>i.value[F]==="present"),S=n.value.filter(F=>ut.includes(F.student_id));if(S.length===0){alert("目前沒有標記為「出席」的學生可以抽籤。");return}v.value=!0,C.value=null;let L=0;const d=setInterval(()=>{const F=Math.floor(Math.random()*S.length);C.value=S[F],L++,L>20&&(clearInterval(d),v.value=!1,_.value=!0)},100)},J=()=>{_.value=!1,setTimeout(()=>{C.value=null},300)},ct=()=>{const ut=new Date,S=new Date;S.setDate(ut.getDate()-90),D.value=ut.toISOString().split("T")[0],E.value=S.toISOString().split("T")[0],T.value=!0,mt()},mt=async()=>{N.value=!0,u.value="";try{const ut=await Ht(`/api/attendance-summary?startDate=${E.value}&endDate=${D.value}`);if(!ut.ok)throw new Error("無法讀取學期統計資料");M.value=await ut.json()}catch(ut){u.value=ut.message}finally{N.value=!1}},St=ut=>{const S=ut.present+ut.sick+ut.official+ut.personal+ut.absent;return S===0?null:(ut.present/S*100).toFixed(1)};return Qe(xt),(ut,S)=>(W(),H("div",null,[c("div",{class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8"},[S[10]||(S[10]=c("h1",{class:"text-4xl font-bold text-slate-800"},"班級儀表板",-1)),c("div",{class:"flex space-x-2 mt-4 md:mt-0"},[c("button",{onClick:st,class:"btn btn-secondary px-4 py-2 text-base"},"批次登記"),c("button",{onClick:ct,class:"btn bg-slate-600 hover:bg-slate-700 px-4 py-2 text-base"},"學期統計")])]),c("div",l4,[c("div",u4,[c("div",c4,[c("h2",f4,"今日出缺席 ("+lt(Y.value)+")",1)]),l.value?(W(),H("div",d4,"讀取中...")):(W(),H("div",h4,[c("div",null,[c("p",p4,lt(I.value.present),1),S[11]||(S[11]=c("p",{class:"text-base text-slate-500"},"出席",-1))]),c("div",null,[c("p",g4,lt(I.value.leave),1),S[12]||(S[12]=c("p",{class:"text-base text-slate-500"},"請假",-1))]),c("div",null,[c("p",m4,lt(I.value.absent),1),S[13]||(S[13]=c("p",{class:"text-base text-slate-500"},"曠課",-1))])]))]),c("div",v4,[S[14]||(S[14]=c("h2",{class:"text-xl font-semibold text-slate-700 mb-4"},"隨機抽籤",-1)),c("button",{onClick:gt,class:"btn btn-primary text-xl px-8 py-4 rounded-full",disabled:v.value},lt(v.value?"抽籤中...":"開始抽籤"),9,_4),S[15]||(S[15]=c("p",{class:"mt-3 text-sm h-8 text-slate-400"},"點擊按鈕從出席學生中抽籤",-1))]),c("div",y4,[S[17]||(S[17]=c("h2",{class:"text-xl font-semibold text-slate-700"},"座位表學生總數",-1)),l.value?(W(),H("p",b4,"...")):(W(),H("p",x4,[ee(lt(tt.value)+" ",1),S[16]||(S[16]=c("span",{class:"text-2xl text-slate-500"},"人",-1))]))])]),u.value?(W(),H("div",w4,[S[18]||(S[18]=c("p",{class:"font-bold"},"發生錯誤：",-1)),c("p",null,lt(u.value),1)])):At("",!0),c("div",k4,[l.value?(W(),H("div",C4,"座位表讀取中...")):(W(),H("div",{key:1,style:Xr(V.value),class:"grid gap-3"},[(W(!0),H(Ft,null,Xt(r.value.rows*r.value.cols,L=>(W(),H("div",{key:L,class:ce(["h-40 rounded-xl flex flex-col justify-center items-center text-center p-2 transition-all duration-300 relative border-2",kt(r.value.seats[L-1])])},[r.value.seats[L-1]?(W(),H("div",{key:0,onClick:d=>$t(r.value.seats[L-1]),class:ce(["w-full h-full flex flex-col justify-center items-center",(i.value[r.value.seats[L-1].student_id]||"present")==="present"?"cursor-pointer":"cursor-not-allowed"])},[c("div",{class:ce(["absolute top-2 right-2 rounded-full h-9 w-9 flex items-center justify-center text-lg font-bold text-white shadow-md",ht(r.value.seats[L-1])])},lt(o.value[r.value.seats[L-1].student_id]||0),3),c("div",A4,[rt(r.value.seats[L-1].student_id)==="sick"?(W(),H("svg",E4,[...S[19]||(S[19]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):At("",!0),["official","personal"].includes(rt(r.value.seats[L-1].student_id))?(W(),H("svg",T4,[...S[20]||(S[20]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):At("",!0),rt(r.value.seats[L-1].student_id)==="absent"?(W(),H("svg",R4,[...S[21]||(S[21]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"},null,-1)])])):At("",!0)]),c("div",O4,[c("img",{src:$(r.value.seats[L-1]),onError:g,class:"w-20 h-20 object-cover rounded-full bg-gray-200 border-2 border-white shadow-sm"},null,40,I4),c("p",$4,lt(r.value.seats[L-1].name),1),c("p",P4,"("+lt(r.value.seats[L-1].seat_number)+")",1)])],10,S4)):(W(),H("div",D4,"(空位)"))],2))),128))],4))]),h.value?(W(),H("div",L4,[c("div",B4,[c("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:S[0]||(S[0]=L=>h.value=!1)},[...S[22]||(S[22]=[c("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])]),c("div",M4,[c("div",N4,[c("h3",z4,lt(m.value.name),1),c("div",U4,[S[23]||(S[23]=c("p",{class:"text-base font-medium text-gray-500"},"本日累計分數",-1)),c("p",{class:ce(["text-7xl font-bold",k.value])},lt(G.value),3)]),c("div",null,[S[24]||(S[24]=c("h4",{class:"font-semibold text-center mt-6 text-gray-600"},"調整分數",-1)),c("div",F4,[c("button",{onClick:S[1]||(S[1]=L=>ot(1)),class:"btn btn-primary text-lg py-3"},"+1 分"),c("button",{onClick:S[2]||(S[2]=L=>ot(-1)),class:"btn btn-warning text-lg py-3"},"-1 分")])])]),c("div",j4,[c("button",{onClick:S[3]||(S[3]=L=>h.value=!1),type:"button",class:"btn btn-secondary"},"關閉")])])])])):At("",!0),y.value?(W(),H("div",W4,[c("div",H4,[c("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:S[4]||(S[4]=L=>y.value=!1)},[...S[25]||(S[25]=[c("div",{class:"absolute inset-0 bg-gray-600 opacity-75"},null,-1)])]),c("div",q4,[c("div",V4,[S[26]||(S[26]=c("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"批次登記今日出缺席",-1)),c("div",G4,[(W(!0),H(Ft,null,Xt(z.value,L=>(W(),H("div",{key:L.id,class:"grid grid-cols-6 gap-4 items-center mb-2 p-2 rounded-md hover:bg-slate-50"},[c("div",K4,lt(L.seat_number)+". "+lt(L.name),1),c("div",Z4,[(W(!0),H(Ft,null,Xt(Object.keys(x),d=>(W(),H("button",{key:d,onClick:F=>Pt(L.student_id,d),class:ce(["px-2 py-2 text-base rounded-md transition-colors",Et(L.student_id,d)])},lt(x[d].label),11,Y4))),128))])]))),128))])]),c("div",J4,[c("button",{onClick:S[5]||(S[5]=L=>y.value=!1),type:"button",class:"btn btn-secondary text-base py-2 px-6"},"取消"),c("button",{onClick:Tt,type:"button",class:"btn bg-purple-600 hover:bg-purple-700 text-base py-2 px-6"},"儲存變更")])])])])):At("",!0),_.value&&C.value?(W(),H("div",X4,[c("div",Q4,[c("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:J},[...S[27]||(S[27]=[c("div",{class:"absolute inset-0 bg-gray-800 opacity-75"},null,-1)])]),c("div",t3,[c("div",e3,[S[28]||(S[28]=c("p",{class:"text-xl font-medium text-indigo-600"},"恭喜！抽中了...",-1)),c("p",n3,lt(C.value.name),1),c("p",r3,lt(C.value.seat_number)+" 號",1),c("div",{class:"mt-8"},[c("button",{onClick:J,type:"button",class:"btn btn-primary text-lg px-8 py-3"}," 關閉 ")])])])])])):At("",!0),T.value?(W(),H("div",s3,[c("div",i3,[c("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:S[6]||(S[6]=L=>T.value=!1)},[...S[29]||(S[29]=[c("div",{class:"absolute inset-0 bg-gray-600 opacity-75"},null,-1)])]),c("div",o3,[c("div",a3,[S[33]||(S[33]=c("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"學期出缺席統計",-1)),c("div",l3,[S[30]||(S[30]=c("label",{for:"startDate",class:"text-sm font-medium"},"開始日期:",-1)),Bt(c("input",{type:"date",id:"startDate","onUpdate:modelValue":S[7]||(S[7]=L=>E.value=L),class:"form-input"},null,512),[[jt,E.value]]),S[31]||(S[31]=c("label",{for:"endDate",class:"text-sm font-medium"},"結束日期:",-1)),Bt(c("input",{type:"date",id:"endDate","onUpdate:modelValue":S[8]||(S[8]=L=>D.value=L),class:"form-input"},null,512),[[jt,D.value]]),c("button",{onClick:mt,class:"btn btn-primary"},"查詢")]),c("div",u3,[N.value?(W(),H("div",c3,"正在讀取統計資料...")):(W(),H("table",f3,[S[32]||(S[32]=c("thead",{class:"bg-slate-50 sticky top-0"},[c("tr",null,[c("th",{class:"px-4 py-3 text-left text-sm font-medium uppercase"},"座號"),c("th",{class:"px-4 py-3 text-left text-sm font-medium uppercase"},"姓名"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-green-600"},"出席"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-orange-600"},"病假"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-blue-600"},"公假"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-yellow-600"},"事假"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-red-600"},"曠課"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase"},"出席率")])],-1)),c("tbody",d3,[(W(!0),H(Ft,null,Xt(M.value,L=>(W(),H("tr",{key:L.student_id,class:"hover:bg-slate-50"},[c("td",h3,lt(L.seat_number),1),c("td",p3,lt(L.name),1),c("td",g3,lt(L.present),1),c("td",m3,lt(L.sick),1),c("td",v3,lt(L.official),1),c("td",_3,lt(L.personal),1),c("td",y3,lt(L.absent),1),c("td",b3,[St(L)!==null?(W(),H("span",x3,lt(St(L))+"%",1)):(W(),H("span",w3,"N/A"))])]))),128))])]))])]),c("div",k3,[c("button",{onClick:S[9]||(S[9]=L=>T.value=!1),type:"button",class:"btn btn-secondary"},"關閉")])])])])):At("",!0)]))}},S3={class:"card p-8 mb-8"},A3={class:"text-2xl font-semibold mb-6"},E3={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},T3=["value"],R3={class:"grid grid-cols-1 md:grid-cols-2 gap-6 items-center"},O3={class:"flex items-center pt-6"},I3={class:"flex items-center justify-end space-x-4 pt-4"},$3={type:"submit",class:"btn btn-primary text-base px-6 py-2.5"},P3={key:0,class:"text-red-500 mb-4"},D3={class:"card p-8"},L3={key:0,class:"text-center text-slate-500 py-8"},B3={key:1,class:"space-y-4"},M3={class:"px-2 py-1 text-xs font-semibold rounded-full bg-sky-100 text-sky-800"},N3={class:"font-bold text-xl mt-2"},z3={class:"text-sm text-slate-600"},U3={class:"text-xs text-slate-500 mt-2"},F3={class:"flex items-center space-x-3"},j3=["onClick"],W3=["onClick"],H3=["onClick"],q3={key:2,class:"text-slate-500 text-center py-8"},V3={key:1,class:"fixed z-10 inset-0 overflow-y-auto"},G3={class:"flex items-center justify-center min-h-screen p-4"},K3={class:"bg-white rounded-lg shadow-xl transform transition-all w-full max-w-6xl h-[80vh] flex flex-col"},Z3={class:"p-4 border-b flex justify-between items-center"},Y3={class:"text-xl font-bold"},J3={class:"flex-grow flex overflow-hidden"},X3={class:"w-1/4 bg-slate-50 border-r overflow-y-auto"},Q3={key:0,class:"p-4 text-center"},t5={key:1},e5=["onClick"],n5={class:"font-semibold"},r5={class:"text-sm text-slate-500"},s5={key:0,class:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-700"},i5={class:"w-3/4 p-6 overflow-y-auto"},o5={key:0,class:"flex items-center justify-center h-full text-slate-500"},a5={key:1},l5={class:"flex justify-between items-center mb-4"},u5={class:"text-lg font-bold"},c5={key:0,class:"px-3 py-1 text-base font-semibold rounded-full bg-red-100 text-red-700 flex items-center gap-2"},f5={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},d5=["href","onClick","download","target"],h5=["src"],p5={key:1,class:"w-full h-24 bg-slate-100 rounded-md mb-2 flex items-center justify-center relative"},g5={key:0,class:"h-12 w-12 text-red-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},m5={key:1,class:"h-12 w-12 text-blue-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},v5={key:2,class:"h-12 w-12 text-purple-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},_5={key:3,class:"h-12 w-12 text-slate-400",viewBox:"0 0 20 20",fill:"currentColor"},y5={key:4,class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 flex items-center justify-center transition-opacity rounded-md"},b5={class:"text-xs text-slate-700 truncate"},x5={class:"flex items-center justify-center min-h-screen p-4 text-center"},w5={class:"p-4 border-b flex justify-between items-center bg-slate-50"},k5={class:"text-xl font-bold text-slate-800 truncate"},C5={class:"flex-grow p-2 flex items-center justify-center bg-slate-200 overflow-hidden"},S5=["src"],A5=["src"],E5=["src"],T5=["src"],R5={__name:"AssignmentsView",setup(t){const n=dt([]),r=dt([]),i=Xe({title:"",description:"",due_date:"",subject_id:null,allow_resubmission:!0}),o=dt(!1),l=dt(null),u=dt(!0),f=dt(""),h=dt(!1),y=dt(null),_=dt([]),m=dt(!1),b=dt(null),v=dt(!1),C=dt(null),x=k=>k==null?"":String(k).padStart(2,"0"),T=async()=>{u.value=!0,f.value="";try{const[k,$]=await Promise.all([Ht("/api/assignments"),Ht("/api/subjects")]);if(!k.ok)throw new Error("無法讀取作業列表");if(!$.ok)throw new Error("無法讀取科目列表");n.value=await k.json(),r.value=await $.json()}catch(k){f.value=`錯誤: ${k.message}`}finally{u.value=!1}},E=async()=>{o.value?await M():await D()},D=async()=>{f.value="";try{const k=await Ht("/api/assignments",{method:"POST",body:JSON.stringify(i)}),$=await k.json();if(!k.ok)throw new Error($.error||"建立作業失敗");n.value.unshift($),Object.assign(i,{title:"",description:"",due_date:"",subject_id:null,allow_resubmission:!0})}catch(k){f.value=`錯誤: ${k.message}`}},M=async()=>{f.value="";try{const k=await Ht(`/api/assignments/${l.value}`,{method:"PUT",body:JSON.stringify(i)}),$=await k.json();if(!k.ok)throw new Error($.error||"更新作業失敗");const g=n.value.findIndex(rt=>rt.id===l.value);g!==-1&&(n.value[g]=$),B()}catch(k){f.value=`錯誤: ${k.message}`}},N=k=>{o.value=!0,l.value=k.id,Object.assign(i,{...k,allow_resubmission:!!k.allow_resubmission})},B=()=>{o.value=!1,l.value=null,Object.assign(i,{title:"",description:"",due_date:"",subject_id:null,allow_resubmission:!0})},Y=async k=>{if(confirm("確定要刪除這個作業嗎？")){f.value="";try{const $=await Ht(`/api/assignments/${k}`,{method:"DELETE"}),g=await $.json();if(!$.ok)throw new Error(g.error||"刪除失敗");n.value=n.value.filter(rt=>rt.id!==k)}catch($){f.value=`錯誤: ${$.message}`}}},V=async k=>{y.value=k,h.value=!0,m.value=!0,b.value=null;try{const $=await Ht(`/api/assignments/${k.id}/submissions`);if(!$.ok)throw new Error("無法讀取繳交列表");const g=await $.json();g.sort((rt,kt)=>parseInt(rt.seat_number,10)-parseInt(kt.seat_number,10)),_.value=g}catch($){f.value=`讀取繳交列表時發生錯誤: ${$.message}`}finally{m.value=!1}},tt=()=>{h.value=!1,y.value=null,_.value=[],b.value=null},z=k=>{if(!k)return"other";const $=k.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes($)?"image":["mp4","webm","ogv"].includes($)?"video":["mp3","wav","m4a","ogg"].includes($)?"audio":$==="pdf"?"pdf":"other"},I=k=>{if(!k)return"";const $=k.split("_");return $.length>3?$.slice(3).join("_"):k},G=(k,$)=>{z(k.name)!=="other"&&($.preventDefault(),C.value=k,v.value=!0)};return Qe(T),(k,$)=>(W(),H("div",null,[$[22]||($[22]=c("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"作業管理",-1)),c("div",S3,[c("h2",A3,lt(o.value?"編輯作業":"新增作業"),1),c("form",{onSubmit:ze(E,["prevent"]),class:"space-y-6"},[c("div",E3,[c("div",null,[$[8]||($[8]=c("label",{for:"title",class:"block text-base font-medium text-slate-700"},"作業標題",-1)),Bt(c("input",{type:"text",id:"title","onUpdate:modelValue":$[0]||($[0]=g=>i.title=g),required:"",class:"mt-1 form-input text-lg py-3"},null,512),[[jt,i.title]])]),c("div",null,[$[10]||($[10]=c("label",{for:"subject",class:"block text-base font-medium text-slate-700"},"科目",-1)),Bt(c("select",{id:"subject","onUpdate:modelValue":$[1]||($[1]=g=>i.subject_id=g),required:"",class:"mt-1 form-input text-lg py-3"},[$[9]||($[9]=c("option",{value:null,disabled:""},"-- 請選擇科目 --",-1)),(W(!0),H(Ft,null,Xt(r.value,g=>(W(),H("option",{key:g.id,value:g.id},lt(g.name),9,T3))),128))],512),[[di,i.subject_id]])])]),c("div",null,[$[11]||($[11]=c("label",{for:"description",class:"block text-base font-medium text-slate-700"},"作業說明 (選填)",-1)),Bt(c("textarea",{id:"description","onUpdate:modelValue":$[2]||($[2]=g=>i.description=g),rows:"3",class:"mt-1 form-input text-lg py-3"},null,512),[[jt,i.description]])]),c("div",R3,[c("div",null,[$[12]||($[12]=c("label",{for:"due_date",class:"block text-base font-medium text-slate-700"},"繳交截止日期 (選填)",-1)),Bt(c("input",{type:"datetime-local",id:"due_date","onUpdate:modelValue":$[3]||($[3]=g=>i.due_date=g),class:"mt-1 form-input text-lg py-3"},null,512),[[jt,i.due_date]])]),c("div",O3,[Bt(c("input",{type:"checkbox",id:"allow_resubmission","onUpdate:modelValue":$[4]||($[4]=g=>i.allow_resubmission=g),class:"h-5 w-5 text-sky-600 border-gray-300 rounded focus:ring-sky-500"},null,512),[[gw,i.allow_resubmission]]),$[13]||($[13]=c("label",{for:"allow_resubmission",class:"ml-2 block text-base text-slate-700"},"允許學生重複上傳",-1))])]),c("div",I3,[o.value?(W(),H("button",{key:0,onClick:B,type:"button",class:"btn btn-secondary text-base px-6 py-2.5"},"取消")):At("",!0),c("button",$3,lt(o.value?"更新作業":"建立作業"),1)])],32)]),f.value?(W(),H("p",P3,lt(f.value),1)):At("",!0),c("div",D3,[$[14]||($[14]=c("h2",{class:"text-2xl font-semibold mb-6"},"現有作業列表",-1)),u.value?(W(),H("div",L3,"讀取中...")):n.value.length>0?(W(),H("ul",B3,[(W(!0),H(Ft,null,Xt(n.value,g=>(W(),H("li",{key:g.id,class:"p-4 border rounded-lg flex justify-between items-center hover:bg-slate-50 transition-colors"},[c("div",null,[c("span",M3,lt(g.subject_name),1),c("h3",N3,lt(g.title),1),c("p",z3,lt(g.description),1),c("p",U3,[ee(" 建立於: "+lt(new Date(g.created_at).toLocaleString())+" | 截止於: "+lt(g.due_date?new Date(g.due_date).toLocaleString():"無")+" | ",1),c("span",{class:ce(g.allow_resubmission?"text-green-600":"text-red-600")},lt(g.allow_resubmission?"允許多次上傳":"僅限單次上傳"),3)])]),c("div",F3,[c("button",{onClick:rt=>V(g),class:"btn bg-teal-500 hover:bg-teal-600 text-sm"},"查看繳交",8,j3),c("button",{onClick:rt=>N(g),class:"btn bg-yellow-500 hover:bg-yellow-600 text-sm"},"編輯",8,W3),c("button",{onClick:rt=>Y(g.id),class:"btn btn-danger text-sm"},"刪除",8,H3)])]))),128))])):(W(),H("p",q3,"目前沒有任何作業。"))]),h.value?(W(),H("div",V3,[c("div",G3,[c("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:tt}),c("div",K3,[c("div",Z3,[c("h3",Y3,"查看「"+lt(y.value.title)+"」繳交狀況",1),c("button",{onClick:tt,class:"text-2xl text-gray-500 hover:text-gray-800"},"×")]),c("div",J3,[c("div",X3,[m.value?(W(),H("div",Q3,"讀取中...")):(W(),H("ul",t5,[(W(!0),H(Ft,null,Xt(_.value,g=>(W(),H("li",{key:g.studentId,onClick:rt=>b.value=g,class:ce(["p-4 cursor-pointer hover:bg-sky-100 flex justify-between items-center",{"bg-sky-200":b.value&&b.value.name===g.name}])},[c("div",null,[c("p",n5,lt(x(g.seat_number))+". "+lt(g.name),1),c("p",r5,lt(g.files.length)+" 個檔案",1)]),g.isLate?(W(),H("span",s5," 遲交 ")):At("",!0)],10,e5))),128))]))]),c("div",i5,[b.value?(W(),H("div",a5,[c("div",l5,[c("h4",u5,lt(b.value.name)+" 的檔案",1),b.value.isLate?(W(),H("div",c5,[...$[15]||($[15]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),c("span",null,"此為補交作業",-1)])])):At("",!0)]),c("div",f5,[(W(!0),H(Ft,null,Xt(b.value.files,g=>(W(),H("a",{key:g.name,href:g.url,onClick:rt=>G(g,rt),download:z(g.name)==="other"?I(g.name):null,target:z(g.name)==="other"?"_self":"_blank",class:"block border rounded-lg p-2 text-center hover:shadow-md transition-shadow group cursor-pointer"},[z(g.name)==="image"?(W(),H("img",{key:0,src:g.url,class:"w-full h-24 object-cover rounded-md mb-2 bg-slate-100"},null,8,h5)):(W(),H("div",p5,[z(g.name)==="pdf"?(W(),H("svg",g5,[...$[16]||($[16]=[fr('<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path> <polyline points="14 2 14 8 20 8"></polyline> <line x1="16" y1="13" x2="8" y2="13"></line> <line x1="16" y1="17" x2="8" y2="17"></line> <polyline points="10 9 9 9 8 9"></polyline>',9)])])):z(g.name)==="video"?(W(),H("svg",m5,[...$[17]||($[17]=[c("polygon",{points:"23 7 16 12 23 17 23 7"},null,-1),ee(),c("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},null,-1)])])):z(g.name)==="audio"?(W(),H("svg",v5,[...$[18]||($[18]=[c("path",{d:"M9 18V5l12-2v13"},null,-1),ee(),c("circle",{cx:"6",cy:"18",r:"3"},null,-1),ee(),c("circle",{cx:"18",cy:"16",r:"3"},null,-1)])])):(W(),H("svg",_5,[...$[19]||($[19]=[c("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"},null,-1)])])),z(g.name)!=="other"?(W(),H("div",y5,[...$[20]||($[20]=[c("svg",{class:"h-10 w-10 text-white opacity-0 group-hover:opacity-100",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),ee(),c("circle",{cx:"12",cy:"12",r:"3"})],-1)])])):At("",!0)])),c("p",b5,lt(I(g.name)),1)],8,d5))),128))])])):(W(),H("div",o5," 請從左側選擇一位學生以檢視檔案 "))])])])])])):At("",!0),v.value?(W(),H("div",{key:2,class:"fixed z-50 inset-0 overflow-y-auto",onClick:$[7]||($[7]=g=>v.value=!1)},[c("div",x5,[$[21]||($[21]=c("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-80 transition-opacity"},null,-1)),c("div",{onClick:$[6]||($[6]=ze(()=>{},["stop"])),class:"inline-block bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all w-[95vw] h-[90vh] flex flex-col",role:"dialog","aria-modal":"true"},[c("div",w5,[c("h3",k5,lt(C.value?I(C.value.name):""),1),c("button",{onClick:$[5]||($[5]=g=>v.value=!1),class:"text-4xl text-gray-500 hover:text-gray-800"},"×")]),c("div",C5,[C.value?(W(),H(Ft,{key:0},[z(C.value.name)==="image"?(W(),H("img",{key:0,src:C.value.url,class:"max-w-full max-h-full object-contain"},null,8,S5)):z(C.value.name)==="video"?(W(),H("video",{key:1,src:C.value.url,controls:"",class:"max-w-full max-h-full object-contain"},null,8,A5)):z(C.value.name)==="audio"?(W(),H("audio",{key:2,src:C.value.url,controls:"",class:"w-full max-w-lg"},null,8,E5)):z(C.value.name)==="pdf"?(W(),H("iframe",{key:3,src:C.value.url,class:"w-full h-full border-0"},null,8,T5)):At("",!0)],64)):At("",!0)])])])])):At("",!0)]))}};var cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $o={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */$o.exports;(function(t,n){(function(){var r,i="4.17.21",o=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",f="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",y=500,_="__lodash_placeholder__",m=1,b=2,v=4,C=1,x=2,T=1,E=2,D=4,M=8,N=16,B=32,Y=64,V=128,tt=256,z=512,I=30,G="...",k=800,$=16,g=1,rt=2,kt=3,ht=1/0,Et=9007199254740991,xt=17976931348623157e292,$t=NaN,it=4294967295,st=it-1,Pt=it>>>1,Tt=[["ary",V],["bind",T],["bindKey",E],["curry",M],["curryRight",N],["flip",z],["partial",B],["partialRight",Y],["rearg",tt]],ot="[object Arguments]",gt="[object Array]",J="[object AsyncFunction]",ct="[object Boolean]",mt="[object Date]",St="[object DOMException]",ut="[object Error]",S="[object Function]",L="[object GeneratorFunction]",d="[object Map]",F="[object Number]",j="[object Null]",A="[object Object]",R="[object Promise]",U="[object Proxy]",Q="[object RegExp]",X="[object Set]",K="[object String]",at="[object Symbol]",_t="[object Undefined]",pt="[object WeakMap]",Ct="[object WeakSet]",Lt="[object ArrayBuffer]",Ot="[object DataView]",ne="[object Float32Array]",be="[object Float64Array]",_e="[object Int8Array]",Re="[object Int16Array]",re="[object Int32Array]",Tn="[object Uint8Array]",Ae="[object Uint8ClampedArray]",xe="[object Uint16Array]",Kn="[object Uint32Array]",ts=/\b__p \+= '';/g,Ko=/\b(__p \+=) '' \+/g,Zo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Is=/&(?:amp|lt|gt|quot|#39);/g,gr=/[&<>"']/g,es=RegExp(Is.source),Cp=RegExp(gr.source),Sp=/<%-([\s\S]+?)%>/g,Ap=/<%([\s\S]+?)%>/g,yu=/<%=([\s\S]+?)%>/g,Ep=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tp=/^\w*$/,Rp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yo=/[\\^$.*+?()[\]{}|]/g,Op=RegExp(Yo.source),Jo=/^\s+/,Ip=/\s/,$p=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pp=/\{\n\/\* \[wrapped with (.+)\] \*/,Dp=/,? & /,Lp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bp=/[()=,{}\[\]\/\s]/,Mp=/\\(\\)?/g,Np=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bu=/\w*$/,zp=/^[-+]0x[0-9a-f]+$/i,Up=/^0b[01]+$/i,Fp=/^\[object .+?Constructor\]$/,jp=/^0o[0-7]+$/i,Wp=/^(?:0|[1-9]\d*)$/,Hp=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_i=/($^)/,qp=/['\n\r\u2028\u2029\\]/g,yi="\\ud800-\\udfff",Vp="\\u0300-\\u036f",Gp="\\ufe20-\\ufe2f",Kp="\\u20d0-\\u20ff",xu=Vp+Gp+Kp,wu="\\u2700-\\u27bf",ku="a-z\\xdf-\\xf6\\xf8-\\xff",Zp="\\xac\\xb1\\xd7\\xf7",Yp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Jp="\\u2000-\\u206f",Xp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cu="A-Z\\xc0-\\xd6\\xd8-\\xde",Su="\\ufe0e\\ufe0f",Au=Zp+Yp+Jp+Xp,Xo="['’]",Qp="["+yi+"]",Eu="["+Au+"]",bi="["+xu+"]",Tu="\\d+",t0="["+wu+"]",Ru="["+ku+"]",Ou="[^"+yi+Au+Tu+wu+ku+Cu+"]",Qo="\\ud83c[\\udffb-\\udfff]",e0="(?:"+bi+"|"+Qo+")",Iu="[^"+yi+"]",ta="(?:\\ud83c[\\udde6-\\uddff]){2}",ea="[\\ud800-\\udbff][\\udc00-\\udfff]",ns="["+Cu+"]",$u="\\u200d",Pu="(?:"+Ru+"|"+Ou+")",n0="(?:"+ns+"|"+Ou+")",Du="(?:"+Xo+"(?:d|ll|m|re|s|t|ve))?",Lu="(?:"+Xo+"(?:D|LL|M|RE|S|T|VE))?",Bu=e0+"?",Mu="["+Su+"]?",r0="(?:"+$u+"(?:"+[Iu,ta,ea].join("|")+")"+Mu+Bu+")*",s0="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",i0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Nu=Mu+Bu+r0,o0="(?:"+[t0,ta,ea].join("|")+")"+Nu,a0="(?:"+[Iu+bi+"?",bi,ta,ea,Qp].join("|")+")",l0=RegExp(Xo,"g"),u0=RegExp(bi,"g"),na=RegExp(Qo+"(?="+Qo+")|"+a0+Nu,"g"),c0=RegExp([ns+"?"+Ru+"+"+Du+"(?="+[Eu,ns,"$"].join("|")+")",n0+"+"+Lu+"(?="+[Eu,ns+Pu,"$"].join("|")+")",ns+"?"+Pu+"+"+Du,ns+"+"+Lu,i0,s0,Tu,o0].join("|"),"g"),f0=RegExp("["+$u+yi+xu+Su+"]"),d0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,h0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],p0=-1,ye={};ye[ne]=ye[be]=ye[_e]=ye[Re]=ye[re]=ye[Tn]=ye[Ae]=ye[xe]=ye[Kn]=!0,ye[ot]=ye[gt]=ye[Lt]=ye[ct]=ye[Ot]=ye[mt]=ye[ut]=ye[S]=ye[d]=ye[F]=ye[A]=ye[Q]=ye[X]=ye[K]=ye[pt]=!1;var me={};me[ot]=me[gt]=me[Lt]=me[Ot]=me[ct]=me[mt]=me[ne]=me[be]=me[_e]=me[Re]=me[re]=me[d]=me[F]=me[A]=me[Q]=me[X]=me[K]=me[at]=me[Tn]=me[Ae]=me[xe]=me[Kn]=!0,me[ut]=me[S]=me[pt]=!1;var g0={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},m0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},v0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},y0=parseFloat,b0=parseInt,zu=typeof cr=="object"&&cr&&cr.Object===Object&&cr,x0=typeof self=="object"&&self&&self.Object===Object&&self,Be=zu||x0||Function("return this")(),ra=n&&!n.nodeType&&n,Br=ra&&!0&&t&&!t.nodeType&&t,Uu=Br&&Br.exports===ra,sa=Uu&&zu.process,mn=function(){try{var et=Br&&Br.require&&Br.require("util").types;return et||sa&&sa.binding&&sa.binding("util")}catch{}}(),Fu=mn&&mn.isArrayBuffer,ju=mn&&mn.isDate,Wu=mn&&mn.isMap,Hu=mn&&mn.isRegExp,qu=mn&&mn.isSet,Vu=mn&&mn.isTypedArray;function on(et,vt,ft){switch(ft.length){case 0:return et.call(vt);case 1:return et.call(vt,ft[0]);case 2:return et.call(vt,ft[0],ft[1]);case 3:return et.call(vt,ft[0],ft[1],ft[2])}return et.apply(vt,ft)}function w0(et,vt,ft,It){for(var Wt=-1,se=et==null?0:et.length;++Wt<se;){var $e=et[Wt];vt(It,$e,ft($e),et)}return It}function vn(et,vt){for(var ft=-1,It=et==null?0:et.length;++ft<It&&vt(et[ft],ft,et)!==!1;);return et}function k0(et,vt){for(var ft=et==null?0:et.length;ft--&&vt(et[ft],ft,et)!==!1;);return et}function Gu(et,vt){for(var ft=-1,It=et==null?0:et.length;++ft<It;)if(!vt(et[ft],ft,et))return!1;return!0}function mr(et,vt){for(var ft=-1,It=et==null?0:et.length,Wt=0,se=[];++ft<It;){var $e=et[ft];vt($e,ft,et)&&(se[Wt++]=$e)}return se}function xi(et,vt){var ft=et==null?0:et.length;return!!ft&&rs(et,vt,0)>-1}function ia(et,vt,ft){for(var It=-1,Wt=et==null?0:et.length;++It<Wt;)if(ft(vt,et[It]))return!0;return!1}function we(et,vt){for(var ft=-1,It=et==null?0:et.length,Wt=Array(It);++ft<It;)Wt[ft]=vt(et[ft],ft,et);return Wt}function vr(et,vt){for(var ft=-1,It=vt.length,Wt=et.length;++ft<It;)et[Wt+ft]=vt[ft];return et}function oa(et,vt,ft,It){var Wt=-1,se=et==null?0:et.length;for(It&&se&&(ft=et[++Wt]);++Wt<se;)ft=vt(ft,et[Wt],Wt,et);return ft}function C0(et,vt,ft,It){var Wt=et==null?0:et.length;for(It&&Wt&&(ft=et[--Wt]);Wt--;)ft=vt(ft,et[Wt],Wt,et);return ft}function aa(et,vt){for(var ft=-1,It=et==null?0:et.length;++ft<It;)if(vt(et[ft],ft,et))return!0;return!1}var S0=la("length");function A0(et){return et.split("")}function E0(et){return et.match(Lp)||[]}function Ku(et,vt,ft){var It;return ft(et,function(Wt,se,$e){if(vt(Wt,se,$e))return It=se,!1}),It}function wi(et,vt,ft,It){for(var Wt=et.length,se=ft+(It?1:-1);It?se--:++se<Wt;)if(vt(et[se],se,et))return se;return-1}function rs(et,vt,ft){return vt===vt?z0(et,vt,ft):wi(et,Zu,ft)}function T0(et,vt,ft,It){for(var Wt=ft-1,se=et.length;++Wt<se;)if(It(et[Wt],vt))return Wt;return-1}function Zu(et){return et!==et}function Yu(et,vt){var ft=et==null?0:et.length;return ft?ca(et,vt)/ft:$t}function la(et){return function(vt){return vt==null?r:vt[et]}}function ua(et){return function(vt){return et==null?r:et[vt]}}function Ju(et,vt,ft,It,Wt){return Wt(et,function(se,$e,de){ft=It?(It=!1,se):vt(ft,se,$e,de)}),ft}function R0(et,vt){var ft=et.length;for(et.sort(vt);ft--;)et[ft]=et[ft].value;return et}function ca(et,vt){for(var ft,It=-1,Wt=et.length;++It<Wt;){var se=vt(et[It]);se!==r&&(ft=ft===r?se:ft+se)}return ft}function fa(et,vt){for(var ft=-1,It=Array(et);++ft<et;)It[ft]=vt(ft);return It}function O0(et,vt){return we(vt,function(ft){return[ft,et[ft]]})}function Xu(et){return et&&et.slice(0,nc(et)+1).replace(Jo,"")}function an(et){return function(vt){return et(vt)}}function da(et,vt){return we(vt,function(ft){return et[ft]})}function $s(et,vt){return et.has(vt)}function Qu(et,vt){for(var ft=-1,It=et.length;++ft<It&&rs(vt,et[ft],0)>-1;);return ft}function tc(et,vt){for(var ft=et.length;ft--&&rs(vt,et[ft],0)>-1;);return ft}function I0(et,vt){for(var ft=et.length,It=0;ft--;)et[ft]===vt&&++It;return It}var $0=ua(g0),P0=ua(m0);function D0(et){return"\\"+_0[et]}function L0(et,vt){return et==null?r:et[vt]}function ss(et){return f0.test(et)}function B0(et){return d0.test(et)}function M0(et){for(var vt,ft=[];!(vt=et.next()).done;)ft.push(vt.value);return ft}function ha(et){var vt=-1,ft=Array(et.size);return et.forEach(function(It,Wt){ft[++vt]=[Wt,It]}),ft}function ec(et,vt){return function(ft){return et(vt(ft))}}function _r(et,vt){for(var ft=-1,It=et.length,Wt=0,se=[];++ft<It;){var $e=et[ft];($e===vt||$e===_)&&(et[ft]=_,se[Wt++]=ft)}return se}function ki(et){var vt=-1,ft=Array(et.size);return et.forEach(function(It){ft[++vt]=It}),ft}function N0(et){var vt=-1,ft=Array(et.size);return et.forEach(function(It){ft[++vt]=[It,It]}),ft}function z0(et,vt,ft){for(var It=ft-1,Wt=et.length;++It<Wt;)if(et[It]===vt)return It;return-1}function U0(et,vt,ft){for(var It=ft+1;It--;)if(et[It]===vt)return It;return It}function is(et){return ss(et)?j0(et):S0(et)}function Rn(et){return ss(et)?W0(et):A0(et)}function nc(et){for(var vt=et.length;vt--&&Ip.test(et.charAt(vt)););return vt}var F0=ua(v0);function j0(et){for(var vt=na.lastIndex=0;na.test(et);)++vt;return vt}function W0(et){return et.match(na)||[]}function H0(et){return et.match(c0)||[]}var q0=function et(vt){vt=vt==null?Be:os.defaults(Be.Object(),vt,os.pick(Be,h0));var ft=vt.Array,It=vt.Date,Wt=vt.Error,se=vt.Function,$e=vt.Math,de=vt.Object,pa=vt.RegExp,V0=vt.String,_n=vt.TypeError,Ci=ft.prototype,G0=se.prototype,as=de.prototype,Si=vt["__core-js_shared__"],Ai=G0.toString,ue=as.hasOwnProperty,K0=0,rc=function(){var e=/[^.]+$/.exec(Si&&Si.keys&&Si.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ei=as.toString,Z0=Ai.call(de),Y0=Be._,J0=pa("^"+Ai.call(ue).replace(Yo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ti=Uu?vt.Buffer:r,yr=vt.Symbol,Ri=vt.Uint8Array,sc=Ti?Ti.allocUnsafe:r,Oi=ec(de.getPrototypeOf,de),ic=de.create,oc=as.propertyIsEnumerable,Ii=Ci.splice,ac=yr?yr.isConcatSpreadable:r,Ps=yr?yr.iterator:r,Mr=yr?yr.toStringTag:r,$i=function(){try{var e=jr(de,"defineProperty");return e({},"",{}),e}catch{}}(),X0=vt.clearTimeout!==Be.clearTimeout&&vt.clearTimeout,Q0=It&&It.now!==Be.Date.now&&It.now,tg=vt.setTimeout!==Be.setTimeout&&vt.setTimeout,Pi=$e.ceil,Di=$e.floor,ga=de.getOwnPropertySymbols,eg=Ti?Ti.isBuffer:r,lc=vt.isFinite,ng=Ci.join,rg=ec(de.keys,de),Pe=$e.max,Ue=$e.min,sg=It.now,ig=vt.parseInt,uc=$e.random,og=Ci.reverse,ma=jr(vt,"DataView"),Ds=jr(vt,"Map"),va=jr(vt,"Promise"),ls=jr(vt,"Set"),Ls=jr(vt,"WeakMap"),Bs=jr(de,"create"),Li=Ls&&new Ls,us={},ag=Wr(ma),lg=Wr(Ds),ug=Wr(va),cg=Wr(ls),fg=Wr(Ls),Bi=yr?yr.prototype:r,Ms=Bi?Bi.valueOf:r,cc=Bi?Bi.toString:r;function O(e){if(Ce(e)&&!qt(e)&&!(e instanceof Jt)){if(e instanceof yn)return e;if(ue.call(e,"__wrapped__"))return df(e)}return new yn(e)}var cs=function(){function e(){}return function(s){if(!ke(s))return{};if(ic)return ic(s);e.prototype=s;var a=new e;return e.prototype=r,a}}();function Mi(){}function yn(e,s){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=r}O.templateSettings={escape:Sp,evaluate:Ap,interpolate:yu,variable:"",imports:{_:O}},O.prototype=Mi.prototype,O.prototype.constructor=O,yn.prototype=cs(Mi.prototype),yn.prototype.constructor=yn;function Jt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=it,this.__views__=[]}function dg(){var e=new Jt(this.__wrapped__);return e.__actions__=tn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=tn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=tn(this.__views__),e}function hg(){if(this.__filtered__){var e=new Jt(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function pg(){var e=this.__wrapped__.value(),s=this.__dir__,a=qt(e),p=s<0,w=a?e.length:0,P=Am(0,w,this.__views__),q=P.start,Z=P.end,nt=Z-q,yt=p?Z:q-1,bt=this.__iteratees__,wt=bt.length,Rt=0,Dt=Ue(nt,this.__takeCount__);if(!a||!p&&w==nt&&Dt==nt)return Dc(e,this.__actions__);var Nt=[];t:for(;nt--&&Rt<Dt;){yt+=s;for(var Kt=-1,zt=e[yt];++Kt<wt;){var Yt=bt[Kt],Qt=Yt.iteratee,cn=Yt.type,Ke=Qt(zt);if(cn==rt)zt=Ke;else if(!Ke){if(cn==g)continue t;break t}}Nt[Rt++]=zt}return Nt}Jt.prototype=cs(Mi.prototype),Jt.prototype.constructor=Jt;function Nr(e){var s=-1,a=e==null?0:e.length;for(this.clear();++s<a;){var p=e[s];this.set(p[0],p[1])}}function gg(){this.__data__=Bs?Bs(null):{},this.size=0}function mg(e){var s=this.has(e)&&delete this.__data__[e];return this.size-=s?1:0,s}function vg(e){var s=this.__data__;if(Bs){var a=s[e];return a===h?r:a}return ue.call(s,e)?s[e]:r}function _g(e){var s=this.__data__;return Bs?s[e]!==r:ue.call(s,e)}function yg(e,s){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Bs&&s===r?h:s,this}Nr.prototype.clear=gg,Nr.prototype.delete=mg,Nr.prototype.get=vg,Nr.prototype.has=_g,Nr.prototype.set=yg;function Zn(e){var s=-1,a=e==null?0:e.length;for(this.clear();++s<a;){var p=e[s];this.set(p[0],p[1])}}function bg(){this.__data__=[],this.size=0}function xg(e){var s=this.__data__,a=Ni(s,e);if(a<0)return!1;var p=s.length-1;return a==p?s.pop():Ii.call(s,a,1),--this.size,!0}function wg(e){var s=this.__data__,a=Ni(s,e);return a<0?r:s[a][1]}function kg(e){return Ni(this.__data__,e)>-1}function Cg(e,s){var a=this.__data__,p=Ni(a,e);return p<0?(++this.size,a.push([e,s])):a[p][1]=s,this}Zn.prototype.clear=bg,Zn.prototype.delete=xg,Zn.prototype.get=wg,Zn.prototype.has=kg,Zn.prototype.set=Cg;function Yn(e){var s=-1,a=e==null?0:e.length;for(this.clear();++s<a;){var p=e[s];this.set(p[0],p[1])}}function Sg(){this.size=0,this.__data__={hash:new Nr,map:new(Ds||Zn),string:new Nr}}function Ag(e){var s=Yi(this,e).delete(e);return this.size-=s?1:0,s}function Eg(e){return Yi(this,e).get(e)}function Tg(e){return Yi(this,e).has(e)}function Rg(e,s){var a=Yi(this,e),p=a.size;return a.set(e,s),this.size+=a.size==p?0:1,this}Yn.prototype.clear=Sg,Yn.prototype.delete=Ag,Yn.prototype.get=Eg,Yn.prototype.has=Tg,Yn.prototype.set=Rg;function zr(e){var s=-1,a=e==null?0:e.length;for(this.__data__=new Yn;++s<a;)this.add(e[s])}function Og(e){return this.__data__.set(e,h),this}function Ig(e){return this.__data__.has(e)}zr.prototype.add=zr.prototype.push=Og,zr.prototype.has=Ig;function On(e){var s=this.__data__=new Zn(e);this.size=s.size}function $g(){this.__data__=new Zn,this.size=0}function Pg(e){var s=this.__data__,a=s.delete(e);return this.size=s.size,a}function Dg(e){return this.__data__.get(e)}function Lg(e){return this.__data__.has(e)}function Bg(e,s){var a=this.__data__;if(a instanceof Zn){var p=a.__data__;if(!Ds||p.length<o-1)return p.push([e,s]),this.size=++a.size,this;a=this.__data__=new Yn(p)}return a.set(e,s),this.size=a.size,this}On.prototype.clear=$g,On.prototype.delete=Pg,On.prototype.get=Dg,On.prototype.has=Lg,On.prototype.set=Bg;function fc(e,s){var a=qt(e),p=!a&&Hr(e),w=!a&&!p&&Cr(e),P=!a&&!p&&!w&&ps(e),q=a||p||w||P,Z=q?fa(e.length,V0):[],nt=Z.length;for(var yt in e)(s||ue.call(e,yt))&&!(q&&(yt=="length"||w&&(yt=="offset"||yt=="parent")||P&&(yt=="buffer"||yt=="byteLength"||yt=="byteOffset")||tr(yt,nt)))&&Z.push(yt);return Z}function dc(e){var s=e.length;return s?e[Ta(0,s-1)]:r}function Mg(e,s){return Ji(tn(e),Ur(s,0,e.length))}function Ng(e){return Ji(tn(e))}function _a(e,s,a){(a!==r&&!In(e[s],a)||a===r&&!(s in e))&&Jn(e,s,a)}function Ns(e,s,a){var p=e[s];(!(ue.call(e,s)&&In(p,a))||a===r&&!(s in e))&&Jn(e,s,a)}function Ni(e,s){for(var a=e.length;a--;)if(In(e[a][0],s))return a;return-1}function zg(e,s,a,p){return br(e,function(w,P,q){s(p,w,a(w),q)}),p}function hc(e,s){return e&&Nn(s,Le(s),e)}function Ug(e,s){return e&&Nn(s,nn(s),e)}function Jn(e,s,a){s=="__proto__"&&$i?$i(e,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[s]=a}function ya(e,s){for(var a=-1,p=s.length,w=ft(p),P=e==null;++a<p;)w[a]=P?r:Qa(e,s[a]);return w}function Ur(e,s,a){return e===e&&(a!==r&&(e=e<=a?e:a),s!==r&&(e=e>=s?e:s)),e}function bn(e,s,a,p,w,P){var q,Z=s&m,nt=s&b,yt=s&v;if(a&&(q=w?a(e,p,w,P):a(e)),q!==r)return q;if(!ke(e))return e;var bt=qt(e);if(bt){if(q=Tm(e),!Z)return tn(e,q)}else{var wt=Fe(e),Rt=wt==S||wt==L;if(Cr(e))return Mc(e,Z);if(wt==A||wt==ot||Rt&&!w){if(q=nt||Rt?{}:nf(e),!Z)return nt?vm(e,Ug(q,e)):mm(e,hc(q,e))}else{if(!me[wt])return w?e:{};q=Rm(e,wt,Z)}}P||(P=new On);var Dt=P.get(e);if(Dt)return Dt;P.set(e,q),$f(e)?e.forEach(function(zt){q.add(bn(zt,s,a,zt,e,P))}):Of(e)&&e.forEach(function(zt,Yt){q.set(Yt,bn(zt,s,a,Yt,e,P))});var Nt=yt?nt?za:Na:nt?nn:Le,Kt=bt?r:Nt(e);return vn(Kt||e,function(zt,Yt){Kt&&(Yt=zt,zt=e[Yt]),Ns(q,Yt,bn(zt,s,a,Yt,e,P))}),q}function Fg(e){var s=Le(e);return function(a){return pc(a,e,s)}}function pc(e,s,a){var p=a.length;if(e==null)return!p;for(e=de(e);p--;){var w=a[p],P=s[w],q=e[w];if(q===r&&!(w in e)||!P(q))return!1}return!0}function gc(e,s,a){if(typeof e!="function")throw new _n(u);return qs(function(){e.apply(r,a)},s)}function zs(e,s,a,p){var w=-1,P=xi,q=!0,Z=e.length,nt=[],yt=s.length;if(!Z)return nt;a&&(s=we(s,an(a))),p?(P=ia,q=!1):s.length>=o&&(P=$s,q=!1,s=new zr(s));t:for(;++w<Z;){var bt=e[w],wt=a==null?bt:a(bt);if(bt=p||bt!==0?bt:0,q&&wt===wt){for(var Rt=yt;Rt--;)if(s[Rt]===wt)continue t;nt.push(bt)}else P(s,wt,p)||nt.push(bt)}return nt}var br=jc(Mn),mc=jc(xa,!0);function jg(e,s){var a=!0;return br(e,function(p,w,P){return a=!!s(p,w,P),a}),a}function zi(e,s,a){for(var p=-1,w=e.length;++p<w;){var P=e[p],q=s(P);if(q!=null&&(Z===r?q===q&&!un(q):a(q,Z)))var Z=q,nt=P}return nt}function Wg(e,s,a,p){var w=e.length;for(a=Gt(a),a<0&&(a=-a>w?0:w+a),p=p===r||p>w?w:Gt(p),p<0&&(p+=w),p=a>p?0:Df(p);a<p;)e[a++]=s;return e}function vc(e,s){var a=[];return br(e,function(p,w,P){s(p,w,P)&&a.push(p)}),a}function Me(e,s,a,p,w){var P=-1,q=e.length;for(a||(a=Im),w||(w=[]);++P<q;){var Z=e[P];s>0&&a(Z)?s>1?Me(Z,s-1,a,p,w):vr(w,Z):p||(w[w.length]=Z)}return w}var ba=Wc(),_c=Wc(!0);function Mn(e,s){return e&&ba(e,s,Le)}function xa(e,s){return e&&_c(e,s,Le)}function Ui(e,s){return mr(s,function(a){return er(e[a])})}function Fr(e,s){s=wr(s,e);for(var a=0,p=s.length;e!=null&&a<p;)e=e[zn(s[a++])];return a&&a==p?e:r}function yc(e,s,a){var p=s(e);return qt(e)?p:vr(p,a(e))}function Ve(e){return e==null?e===r?_t:j:Mr&&Mr in de(e)?Sm(e):Nm(e)}function wa(e,s){return e>s}function Hg(e,s){return e!=null&&ue.call(e,s)}function qg(e,s){return e!=null&&s in de(e)}function Vg(e,s,a){return e>=Ue(s,a)&&e<Pe(s,a)}function ka(e,s,a){for(var p=a?ia:xi,w=e[0].length,P=e.length,q=P,Z=ft(P),nt=1/0,yt=[];q--;){var bt=e[q];q&&s&&(bt=we(bt,an(s))),nt=Ue(bt.length,nt),Z[q]=!a&&(s||w>=120&&bt.length>=120)?new zr(q&&bt):r}bt=e[0];var wt=-1,Rt=Z[0];t:for(;++wt<w&&yt.length<nt;){var Dt=bt[wt],Nt=s?s(Dt):Dt;if(Dt=a||Dt!==0?Dt:0,!(Rt?$s(Rt,Nt):p(yt,Nt,a))){for(q=P;--q;){var Kt=Z[q];if(!(Kt?$s(Kt,Nt):p(e[q],Nt,a)))continue t}Rt&&Rt.push(Nt),yt.push(Dt)}}return yt}function Gg(e,s,a,p){return Mn(e,function(w,P,q){s(p,a(w),P,q)}),p}function Us(e,s,a){s=wr(s,e),e=af(e,s);var p=e==null?e:e[zn(wn(s))];return p==null?r:on(p,e,a)}function bc(e){return Ce(e)&&Ve(e)==ot}function Kg(e){return Ce(e)&&Ve(e)==Lt}function Zg(e){return Ce(e)&&Ve(e)==mt}function Fs(e,s,a,p,w){return e===s?!0:e==null||s==null||!Ce(e)&&!Ce(s)?e!==e&&s!==s:Yg(e,s,a,p,Fs,w)}function Yg(e,s,a,p,w,P){var q=qt(e),Z=qt(s),nt=q?gt:Fe(e),yt=Z?gt:Fe(s);nt=nt==ot?A:nt,yt=yt==ot?A:yt;var bt=nt==A,wt=yt==A,Rt=nt==yt;if(Rt&&Cr(e)){if(!Cr(s))return!1;q=!0,bt=!1}if(Rt&&!bt)return P||(P=new On),q||ps(e)?Qc(e,s,a,p,w,P):km(e,s,nt,a,p,w,P);if(!(a&C)){var Dt=bt&&ue.call(e,"__wrapped__"),Nt=wt&&ue.call(s,"__wrapped__");if(Dt||Nt){var Kt=Dt?e.value():e,zt=Nt?s.value():s;return P||(P=new On),w(Kt,zt,a,p,P)}}return Rt?(P||(P=new On),Cm(e,s,a,p,w,P)):!1}function Jg(e){return Ce(e)&&Fe(e)==d}function Ca(e,s,a,p){var w=a.length,P=w,q=!p;if(e==null)return!P;for(e=de(e);w--;){var Z=a[w];if(q&&Z[2]?Z[1]!==e[Z[0]]:!(Z[0]in e))return!1}for(;++w<P;){Z=a[w];var nt=Z[0],yt=e[nt],bt=Z[1];if(q&&Z[2]){if(yt===r&&!(nt in e))return!1}else{var wt=new On;if(p)var Rt=p(yt,bt,nt,e,s,wt);if(!(Rt===r?Fs(bt,yt,C|x,p,wt):Rt))return!1}}return!0}function xc(e){if(!ke(e)||Pm(e))return!1;var s=er(e)?J0:Fp;return s.test(Wr(e))}function Xg(e){return Ce(e)&&Ve(e)==Q}function Qg(e){return Ce(e)&&Fe(e)==X}function tm(e){return Ce(e)&&ro(e.length)&&!!ye[Ve(e)]}function wc(e){return typeof e=="function"?e:e==null?rn:typeof e=="object"?qt(e)?Sc(e[0],e[1]):Cc(e):qf(e)}function Sa(e){if(!Hs(e))return rg(e);var s=[];for(var a in de(e))ue.call(e,a)&&a!="constructor"&&s.push(a);return s}function em(e){if(!ke(e))return Mm(e);var s=Hs(e),a=[];for(var p in e)p=="constructor"&&(s||!ue.call(e,p))||a.push(p);return a}function Aa(e,s){return e<s}function kc(e,s){var a=-1,p=en(e)?ft(e.length):[];return br(e,function(w,P,q){p[++a]=s(w,P,q)}),p}function Cc(e){var s=Fa(e);return s.length==1&&s[0][2]?sf(s[0][0],s[0][1]):function(a){return a===e||Ca(a,e,s)}}function Sc(e,s){return Wa(e)&&rf(s)?sf(zn(e),s):function(a){var p=Qa(a,e);return p===r&&p===s?tl(a,e):Fs(s,p,C|x)}}function Fi(e,s,a,p,w){e!==s&&ba(s,function(P,q){if(w||(w=new On),ke(P))nm(e,s,q,a,Fi,p,w);else{var Z=p?p(qa(e,q),P,q+"",e,s,w):r;Z===r&&(Z=P),_a(e,q,Z)}},nn)}function nm(e,s,a,p,w,P,q){var Z=qa(e,a),nt=qa(s,a),yt=q.get(nt);if(yt){_a(e,a,yt);return}var bt=P?P(Z,nt,a+"",e,s,q):r,wt=bt===r;if(wt){var Rt=qt(nt),Dt=!Rt&&Cr(nt),Nt=!Rt&&!Dt&&ps(nt);bt=nt,Rt||Dt||Nt?qt(Z)?bt=Z:Ee(Z)?bt=tn(Z):Dt?(wt=!1,bt=Mc(nt,!0)):Nt?(wt=!1,bt=Nc(nt,!0)):bt=[]:Vs(nt)||Hr(nt)?(bt=Z,Hr(Z)?bt=Lf(Z):(!ke(Z)||er(Z))&&(bt=nf(nt))):wt=!1}wt&&(q.set(nt,bt),w(bt,nt,p,P,q),q.delete(nt)),_a(e,a,bt)}function Ac(e,s){var a=e.length;if(a)return s+=s<0?a:0,tr(s,a)?e[s]:r}function Ec(e,s,a){s.length?s=we(s,function(P){return qt(P)?function(q){return Fr(q,P.length===1?P[0]:P)}:P}):s=[rn];var p=-1;s=we(s,an(Mt()));var w=kc(e,function(P,q,Z){var nt=we(s,function(yt){return yt(P)});return{criteria:nt,index:++p,value:P}});return R0(w,function(P,q){return gm(P,q,a)})}function rm(e,s){return Tc(e,s,function(a,p){return tl(e,p)})}function Tc(e,s,a){for(var p=-1,w=s.length,P={};++p<w;){var q=s[p],Z=Fr(e,q);a(Z,q)&&js(P,wr(q,e),Z)}return P}function sm(e){return function(s){return Fr(s,e)}}function Ea(e,s,a,p){var w=p?T0:rs,P=-1,q=s.length,Z=e;for(e===s&&(s=tn(s)),a&&(Z=we(e,an(a)));++P<q;)for(var nt=0,yt=s[P],bt=a?a(yt):yt;(nt=w(Z,bt,nt,p))>-1;)Z!==e&&Ii.call(Z,nt,1),Ii.call(e,nt,1);return e}function Rc(e,s){for(var a=e?s.length:0,p=a-1;a--;){var w=s[a];if(a==p||w!==P){var P=w;tr(w)?Ii.call(e,w,1):Ia(e,w)}}return e}function Ta(e,s){return e+Di(uc()*(s-e+1))}function im(e,s,a,p){for(var w=-1,P=Pe(Pi((s-e)/(a||1)),0),q=ft(P);P--;)q[p?P:++w]=e,e+=a;return q}function Ra(e,s){var a="";if(!e||s<1||s>Et)return a;do s%2&&(a+=e),s=Di(s/2),s&&(e+=e);while(s);return a}function Zt(e,s){return Va(of(e,s,rn),e+"")}function om(e){return dc(gs(e))}function am(e,s){var a=gs(e);return Ji(a,Ur(s,0,a.length))}function js(e,s,a,p){if(!ke(e))return e;s=wr(s,e);for(var w=-1,P=s.length,q=P-1,Z=e;Z!=null&&++w<P;){var nt=zn(s[w]),yt=a;if(nt==="__proto__"||nt==="constructor"||nt==="prototype")return e;if(w!=q){var bt=Z[nt];yt=p?p(bt,nt,Z):r,yt===r&&(yt=ke(bt)?bt:tr(s[w+1])?[]:{})}Ns(Z,nt,yt),Z=Z[nt]}return e}var Oc=Li?function(e,s){return Li.set(e,s),e}:rn,lm=$i?function(e,s){return $i(e,"toString",{configurable:!0,enumerable:!1,value:nl(s),writable:!0})}:rn;function um(e){return Ji(gs(e))}function xn(e,s,a){var p=-1,w=e.length;s<0&&(s=-s>w?0:w+s),a=a>w?w:a,a<0&&(a+=w),w=s>a?0:a-s>>>0,s>>>=0;for(var P=ft(w);++p<w;)P[p]=e[p+s];return P}function cm(e,s){var a;return br(e,function(p,w,P){return a=s(p,w,P),!a}),!!a}function ji(e,s,a){var p=0,w=e==null?p:e.length;if(typeof s=="number"&&s===s&&w<=Pt){for(;p<w;){var P=p+w>>>1,q=e[P];q!==null&&!un(q)&&(a?q<=s:q<s)?p=P+1:w=P}return w}return Oa(e,s,rn,a)}function Oa(e,s,a,p){var w=0,P=e==null?0:e.length;if(P===0)return 0;s=a(s);for(var q=s!==s,Z=s===null,nt=un(s),yt=s===r;w<P;){var bt=Di((w+P)/2),wt=a(e[bt]),Rt=wt!==r,Dt=wt===null,Nt=wt===wt,Kt=un(wt);if(q)var zt=p||Nt;else yt?zt=Nt&&(p||Rt):Z?zt=Nt&&Rt&&(p||!Dt):nt?zt=Nt&&Rt&&!Dt&&(p||!Kt):Dt||Kt?zt=!1:zt=p?wt<=s:wt<s;zt?w=bt+1:P=bt}return Ue(P,st)}function Ic(e,s){for(var a=-1,p=e.length,w=0,P=[];++a<p;){var q=e[a],Z=s?s(q):q;if(!a||!In(Z,nt)){var nt=Z;P[w++]=q===0?0:q}}return P}function $c(e){return typeof e=="number"?e:un(e)?$t:+e}function ln(e){if(typeof e=="string")return e;if(qt(e))return we(e,ln)+"";if(un(e))return cc?cc.call(e):"";var s=e+"";return s=="0"&&1/e==-ht?"-0":s}function xr(e,s,a){var p=-1,w=xi,P=e.length,q=!0,Z=[],nt=Z;if(a)q=!1,w=ia;else if(P>=o){var yt=s?null:xm(e);if(yt)return ki(yt);q=!1,w=$s,nt=new zr}else nt=s?[]:Z;t:for(;++p<P;){var bt=e[p],wt=s?s(bt):bt;if(bt=a||bt!==0?bt:0,q&&wt===wt){for(var Rt=nt.length;Rt--;)if(nt[Rt]===wt)continue t;s&&nt.push(wt),Z.push(bt)}else w(nt,wt,a)||(nt!==Z&&nt.push(wt),Z.push(bt))}return Z}function Ia(e,s){return s=wr(s,e),e=af(e,s),e==null||delete e[zn(wn(s))]}function Pc(e,s,a,p){return js(e,s,a(Fr(e,s)),p)}function Wi(e,s,a,p){for(var w=e.length,P=p?w:-1;(p?P--:++P<w)&&s(e[P],P,e););return a?xn(e,p?0:P,p?P+1:w):xn(e,p?P+1:0,p?w:P)}function Dc(e,s){var a=e;return a instanceof Jt&&(a=a.value()),oa(s,function(p,w){return w.func.apply(w.thisArg,vr([p],w.args))},a)}function $a(e,s,a){var p=e.length;if(p<2)return p?xr(e[0]):[];for(var w=-1,P=ft(p);++w<p;)for(var q=e[w],Z=-1;++Z<p;)Z!=w&&(P[w]=zs(P[w]||q,e[Z],s,a));return xr(Me(P,1),s,a)}function Lc(e,s,a){for(var p=-1,w=e.length,P=s.length,q={};++p<w;){var Z=p<P?s[p]:r;a(q,e[p],Z)}return q}function Pa(e){return Ee(e)?e:[]}function Da(e){return typeof e=="function"?e:rn}function wr(e,s){return qt(e)?e:Wa(e,s)?[e]:ff(ie(e))}var fm=Zt;function kr(e,s,a){var p=e.length;return a=a===r?p:a,!s&&a>=p?e:xn(e,s,a)}var Bc=X0||function(e){return Be.clearTimeout(e)};function Mc(e,s){if(s)return e.slice();var a=e.length,p=sc?sc(a):new e.constructor(a);return e.copy(p),p}function La(e){var s=new e.constructor(e.byteLength);return new Ri(s).set(new Ri(e)),s}function dm(e,s){var a=s?La(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function hm(e){var s=new e.constructor(e.source,bu.exec(e));return s.lastIndex=e.lastIndex,s}function pm(e){return Ms?de(Ms.call(e)):{}}function Nc(e,s){var a=s?La(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function zc(e,s){if(e!==s){var a=e!==r,p=e===null,w=e===e,P=un(e),q=s!==r,Z=s===null,nt=s===s,yt=un(s);if(!Z&&!yt&&!P&&e>s||P&&q&&nt&&!Z&&!yt||p&&q&&nt||!a&&nt||!w)return 1;if(!p&&!P&&!yt&&e<s||yt&&a&&w&&!p&&!P||Z&&a&&w||!q&&w||!nt)return-1}return 0}function gm(e,s,a){for(var p=-1,w=e.criteria,P=s.criteria,q=w.length,Z=a.length;++p<q;){var nt=zc(w[p],P[p]);if(nt){if(p>=Z)return nt;var yt=a[p];return nt*(yt=="desc"?-1:1)}}return e.index-s.index}function Uc(e,s,a,p){for(var w=-1,P=e.length,q=a.length,Z=-1,nt=s.length,yt=Pe(P-q,0),bt=ft(nt+yt),wt=!p;++Z<nt;)bt[Z]=s[Z];for(;++w<q;)(wt||w<P)&&(bt[a[w]]=e[w]);for(;yt--;)bt[Z++]=e[w++];return bt}function Fc(e,s,a,p){for(var w=-1,P=e.length,q=-1,Z=a.length,nt=-1,yt=s.length,bt=Pe(P-Z,0),wt=ft(bt+yt),Rt=!p;++w<bt;)wt[w]=e[w];for(var Dt=w;++nt<yt;)wt[Dt+nt]=s[nt];for(;++q<Z;)(Rt||w<P)&&(wt[Dt+a[q]]=e[w++]);return wt}function tn(e,s){var a=-1,p=e.length;for(s||(s=ft(p));++a<p;)s[a]=e[a];return s}function Nn(e,s,a,p){var w=!a;a||(a={});for(var P=-1,q=s.length;++P<q;){var Z=s[P],nt=p?p(a[Z],e[Z],Z,a,e):r;nt===r&&(nt=e[Z]),w?Jn(a,Z,nt):Ns(a,Z,nt)}return a}function mm(e,s){return Nn(e,ja(e),s)}function vm(e,s){return Nn(e,tf(e),s)}function Hi(e,s){return function(a,p){var w=qt(a)?w0:zg,P=s?s():{};return w(a,e,Mt(p,2),P)}}function fs(e){return Zt(function(s,a){var p=-1,w=a.length,P=w>1?a[w-1]:r,q=w>2?a[2]:r;for(P=e.length>3&&typeof P=="function"?(w--,P):r,q&&Ge(a[0],a[1],q)&&(P=w<3?r:P,w=1),s=de(s);++p<w;){var Z=a[p];Z&&e(s,Z,p,P)}return s})}function jc(e,s){return function(a,p){if(a==null)return a;if(!en(a))return e(a,p);for(var w=a.length,P=s?w:-1,q=de(a);(s?P--:++P<w)&&p(q[P],P,q)!==!1;);return a}}function Wc(e){return function(s,a,p){for(var w=-1,P=de(s),q=p(s),Z=q.length;Z--;){var nt=q[e?Z:++w];if(a(P[nt],nt,P)===!1)break}return s}}function _m(e,s,a){var p=s&T,w=Ws(e);function P(){var q=this&&this!==Be&&this instanceof P?w:e;return q.apply(p?a:this,arguments)}return P}function Hc(e){return function(s){s=ie(s);var a=ss(s)?Rn(s):r,p=a?a[0]:s.charAt(0),w=a?kr(a,1).join(""):s.slice(1);return p[e]()+w}}function ds(e){return function(s){return oa(Wf(jf(s).replace(l0,"")),e,"")}}function Ws(e){return function(){var s=arguments;switch(s.length){case 0:return new e;case 1:return new e(s[0]);case 2:return new e(s[0],s[1]);case 3:return new e(s[0],s[1],s[2]);case 4:return new e(s[0],s[1],s[2],s[3]);case 5:return new e(s[0],s[1],s[2],s[3],s[4]);case 6:return new e(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new e(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var a=cs(e.prototype),p=e.apply(a,s);return ke(p)?p:a}}function ym(e,s,a){var p=Ws(e);function w(){for(var P=arguments.length,q=ft(P),Z=P,nt=hs(w);Z--;)q[Z]=arguments[Z];var yt=P<3&&q[0]!==nt&&q[P-1]!==nt?[]:_r(q,nt);if(P-=yt.length,P<a)return Zc(e,s,qi,w.placeholder,r,q,yt,r,r,a-P);var bt=this&&this!==Be&&this instanceof w?p:e;return on(bt,this,q)}return w}function qc(e){return function(s,a,p){var w=de(s);if(!en(s)){var P=Mt(a,3);s=Le(s),a=function(Z){return P(w[Z],Z,w)}}var q=e(s,a,p);return q>-1?w[P?s[q]:q]:r}}function Vc(e){return Qn(function(s){var a=s.length,p=a,w=yn.prototype.thru;for(e&&s.reverse();p--;){var P=s[p];if(typeof P!="function")throw new _n(u);if(w&&!q&&Zi(P)=="wrapper")var q=new yn([],!0)}for(p=q?p:a;++p<a;){P=s[p];var Z=Zi(P),nt=Z=="wrapper"?Ua(P):r;nt&&Ha(nt[0])&&nt[1]==(V|M|B|tt)&&!nt[4].length&&nt[9]==1?q=q[Zi(nt[0])].apply(q,nt[3]):q=P.length==1&&Ha(P)?q[Z]():q.thru(P)}return function(){var yt=arguments,bt=yt[0];if(q&&yt.length==1&&qt(bt))return q.plant(bt).value();for(var wt=0,Rt=a?s[wt].apply(this,yt):bt;++wt<a;)Rt=s[wt].call(this,Rt);return Rt}})}function qi(e,s,a,p,w,P,q,Z,nt,yt){var bt=s&V,wt=s&T,Rt=s&E,Dt=s&(M|N),Nt=s&z,Kt=Rt?r:Ws(e);function zt(){for(var Yt=arguments.length,Qt=ft(Yt),cn=Yt;cn--;)Qt[cn]=arguments[cn];if(Dt)var Ke=hs(zt),fn=I0(Qt,Ke);if(p&&(Qt=Uc(Qt,p,w,Dt)),P&&(Qt=Fc(Qt,P,q,Dt)),Yt-=fn,Dt&&Yt<yt){var Te=_r(Qt,Ke);return Zc(e,s,qi,zt.placeholder,a,Qt,Te,Z,nt,yt-Yt)}var $n=wt?a:this,rr=Rt?$n[e]:e;return Yt=Qt.length,Z?Qt=zm(Qt,Z):Nt&&Yt>1&&Qt.reverse(),bt&&nt<Yt&&(Qt.length=nt),this&&this!==Be&&this instanceof zt&&(rr=Kt||Ws(rr)),rr.apply($n,Qt)}return zt}function Gc(e,s){return function(a,p){return Gg(a,e,s(p),{})}}function Vi(e,s){return function(a,p){var w;if(a===r&&p===r)return s;if(a!==r&&(w=a),p!==r){if(w===r)return p;typeof a=="string"||typeof p=="string"?(a=ln(a),p=ln(p)):(a=$c(a),p=$c(p)),w=e(a,p)}return w}}function Ba(e){return Qn(function(s){return s=we(s,an(Mt())),Zt(function(a){var p=this;return e(s,function(w){return on(w,p,a)})})})}function Gi(e,s){s=s===r?" ":ln(s);var a=s.length;if(a<2)return a?Ra(s,e):s;var p=Ra(s,Pi(e/is(s)));return ss(s)?kr(Rn(p),0,e).join(""):p.slice(0,e)}function bm(e,s,a,p){var w=s&T,P=Ws(e);function q(){for(var Z=-1,nt=arguments.length,yt=-1,bt=p.length,wt=ft(bt+nt),Rt=this&&this!==Be&&this instanceof q?P:e;++yt<bt;)wt[yt]=p[yt];for(;nt--;)wt[yt++]=arguments[++Z];return on(Rt,w?a:this,wt)}return q}function Kc(e){return function(s,a,p){return p&&typeof p!="number"&&Ge(s,a,p)&&(a=p=r),s=nr(s),a===r?(a=s,s=0):a=nr(a),p=p===r?s<a?1:-1:nr(p),im(s,a,p,e)}}function Ki(e){return function(s,a){return typeof s=="string"&&typeof a=="string"||(s=kn(s),a=kn(a)),e(s,a)}}function Zc(e,s,a,p,w,P,q,Z,nt,yt){var bt=s&M,wt=bt?q:r,Rt=bt?r:q,Dt=bt?P:r,Nt=bt?r:P;s|=bt?B:Y,s&=~(bt?Y:B),s&D||(s&=-4);var Kt=[e,s,w,Dt,wt,Nt,Rt,Z,nt,yt],zt=a.apply(r,Kt);return Ha(e)&&lf(zt,Kt),zt.placeholder=p,uf(zt,e,s)}function Ma(e){var s=$e[e];return function(a,p){if(a=kn(a),p=p==null?0:Ue(Gt(p),292),p&&lc(a)){var w=(ie(a)+"e").split("e"),P=s(w[0]+"e"+(+w[1]+p));return w=(ie(P)+"e").split("e"),+(w[0]+"e"+(+w[1]-p))}return s(a)}}var xm=ls&&1/ki(new ls([,-0]))[1]==ht?function(e){return new ls(e)}:il;function Yc(e){return function(s){var a=Fe(s);return a==d?ha(s):a==X?N0(s):O0(s,e(s))}}function Xn(e,s,a,p,w,P,q,Z){var nt=s&E;if(!nt&&typeof e!="function")throw new _n(u);var yt=p?p.length:0;if(yt||(s&=-97,p=w=r),q=q===r?q:Pe(Gt(q),0),Z=Z===r?Z:Gt(Z),yt-=w?w.length:0,s&Y){var bt=p,wt=w;p=w=r}var Rt=nt?r:Ua(e),Dt=[e,s,a,p,w,bt,wt,P,q,Z];if(Rt&&Bm(Dt,Rt),e=Dt[0],s=Dt[1],a=Dt[2],p=Dt[3],w=Dt[4],Z=Dt[9]=Dt[9]===r?nt?0:e.length:Pe(Dt[9]-yt,0),!Z&&s&(M|N)&&(s&=-25),!s||s==T)var Nt=_m(e,s,a);else s==M||s==N?Nt=ym(e,s,Z):(s==B||s==(T|B))&&!w.length?Nt=bm(e,s,a,p):Nt=qi.apply(r,Dt);var Kt=Rt?Oc:lf;return uf(Kt(Nt,Dt),e,s)}function Jc(e,s,a,p){return e===r||In(e,as[a])&&!ue.call(p,a)?s:e}function Xc(e,s,a,p,w,P){return ke(e)&&ke(s)&&(P.set(s,e),Fi(e,s,r,Xc,P),P.delete(s)),e}function wm(e){return Vs(e)?r:e}function Qc(e,s,a,p,w,P){var q=a&C,Z=e.length,nt=s.length;if(Z!=nt&&!(q&&nt>Z))return!1;var yt=P.get(e),bt=P.get(s);if(yt&&bt)return yt==s&&bt==e;var wt=-1,Rt=!0,Dt=a&x?new zr:r;for(P.set(e,s),P.set(s,e);++wt<Z;){var Nt=e[wt],Kt=s[wt];if(p)var zt=q?p(Kt,Nt,wt,s,e,P):p(Nt,Kt,wt,e,s,P);if(zt!==r){if(zt)continue;Rt=!1;break}if(Dt){if(!aa(s,function(Yt,Qt){if(!$s(Dt,Qt)&&(Nt===Yt||w(Nt,Yt,a,p,P)))return Dt.push(Qt)})){Rt=!1;break}}else if(!(Nt===Kt||w(Nt,Kt,a,p,P))){Rt=!1;break}}return P.delete(e),P.delete(s),Rt}function km(e,s,a,p,w,P,q){switch(a){case Ot:if(e.byteLength!=s.byteLength||e.byteOffset!=s.byteOffset)return!1;e=e.buffer,s=s.buffer;case Lt:return!(e.byteLength!=s.byteLength||!P(new Ri(e),new Ri(s)));case ct:case mt:case F:return In(+e,+s);case ut:return e.name==s.name&&e.message==s.message;case Q:case K:return e==s+"";case d:var Z=ha;case X:var nt=p&C;if(Z||(Z=ki),e.size!=s.size&&!nt)return!1;var yt=q.get(e);if(yt)return yt==s;p|=x,q.set(e,s);var bt=Qc(Z(e),Z(s),p,w,P,q);return q.delete(e),bt;case at:if(Ms)return Ms.call(e)==Ms.call(s)}return!1}function Cm(e,s,a,p,w,P){var q=a&C,Z=Na(e),nt=Z.length,yt=Na(s),bt=yt.length;if(nt!=bt&&!q)return!1;for(var wt=nt;wt--;){var Rt=Z[wt];if(!(q?Rt in s:ue.call(s,Rt)))return!1}var Dt=P.get(e),Nt=P.get(s);if(Dt&&Nt)return Dt==s&&Nt==e;var Kt=!0;P.set(e,s),P.set(s,e);for(var zt=q;++wt<nt;){Rt=Z[wt];var Yt=e[Rt],Qt=s[Rt];if(p)var cn=q?p(Qt,Yt,Rt,s,e,P):p(Yt,Qt,Rt,e,s,P);if(!(cn===r?Yt===Qt||w(Yt,Qt,a,p,P):cn)){Kt=!1;break}zt||(zt=Rt=="constructor")}if(Kt&&!zt){var Ke=e.constructor,fn=s.constructor;Ke!=fn&&"constructor"in e&&"constructor"in s&&!(typeof Ke=="function"&&Ke instanceof Ke&&typeof fn=="function"&&fn instanceof fn)&&(Kt=!1)}return P.delete(e),P.delete(s),Kt}function Qn(e){return Va(of(e,r,gf),e+"")}function Na(e){return yc(e,Le,ja)}function za(e){return yc(e,nn,tf)}var Ua=Li?function(e){return Li.get(e)}:il;function Zi(e){for(var s=e.name+"",a=us[s],p=ue.call(us,s)?a.length:0;p--;){var w=a[p],P=w.func;if(P==null||P==e)return w.name}return s}function hs(e){var s=ue.call(O,"placeholder")?O:e;return s.placeholder}function Mt(){var e=O.iteratee||rl;return e=e===rl?wc:e,arguments.length?e(arguments[0],arguments[1]):e}function Yi(e,s){var a=e.__data__;return $m(s)?a[typeof s=="string"?"string":"hash"]:a.map}function Fa(e){for(var s=Le(e),a=s.length;a--;){var p=s[a],w=e[p];s[a]=[p,w,rf(w)]}return s}function jr(e,s){var a=L0(e,s);return xc(a)?a:r}function Sm(e){var s=ue.call(e,Mr),a=e[Mr];try{e[Mr]=r;var p=!0}catch{}var w=Ei.call(e);return p&&(s?e[Mr]=a:delete e[Mr]),w}var ja=ga?function(e){return e==null?[]:(e=de(e),mr(ga(e),function(s){return oc.call(e,s)}))}:ol,tf=ga?function(e){for(var s=[];e;)vr(s,ja(e)),e=Oi(e);return s}:ol,Fe=Ve;(ma&&Fe(new ma(new ArrayBuffer(1)))!=Ot||Ds&&Fe(new Ds)!=d||va&&Fe(va.resolve())!=R||ls&&Fe(new ls)!=X||Ls&&Fe(new Ls)!=pt)&&(Fe=function(e){var s=Ve(e),a=s==A?e.constructor:r,p=a?Wr(a):"";if(p)switch(p){case ag:return Ot;case lg:return d;case ug:return R;case cg:return X;case fg:return pt}return s});function Am(e,s,a){for(var p=-1,w=a.length;++p<w;){var P=a[p],q=P.size;switch(P.type){case"drop":e+=q;break;case"dropRight":s-=q;break;case"take":s=Ue(s,e+q);break;case"takeRight":e=Pe(e,s-q);break}}return{start:e,end:s}}function Em(e){var s=e.match(Pp);return s?s[1].split(Dp):[]}function ef(e,s,a){s=wr(s,e);for(var p=-1,w=s.length,P=!1;++p<w;){var q=zn(s[p]);if(!(P=e!=null&&a(e,q)))break;e=e[q]}return P||++p!=w?P:(w=e==null?0:e.length,!!w&&ro(w)&&tr(q,w)&&(qt(e)||Hr(e)))}function Tm(e){var s=e.length,a=new e.constructor(s);return s&&typeof e[0]=="string"&&ue.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function nf(e){return typeof e.constructor=="function"&&!Hs(e)?cs(Oi(e)):{}}function Rm(e,s,a){var p=e.constructor;switch(s){case Lt:return La(e);case ct:case mt:return new p(+e);case Ot:return dm(e,a);case ne:case be:case _e:case Re:case re:case Tn:case Ae:case xe:case Kn:return Nc(e,a);case d:return new p;case F:case K:return new p(e);case Q:return hm(e);case X:return new p;case at:return pm(e)}}function Om(e,s){var a=s.length;if(!a)return e;var p=a-1;return s[p]=(a>1?"& ":"")+s[p],s=s.join(a>2?", ":" "),e.replace($p,`{
/* [wrapped with `+s+`] */
`)}function Im(e){return qt(e)||Hr(e)||!!(ac&&e&&e[ac])}function tr(e,s){var a=typeof e;return s=s??Et,!!s&&(a=="number"||a!="symbol"&&Wp.test(e))&&e>-1&&e%1==0&&e<s}function Ge(e,s,a){if(!ke(a))return!1;var p=typeof s;return(p=="number"?en(a)&&tr(s,a.length):p=="string"&&s in a)?In(a[s],e):!1}function Wa(e,s){if(qt(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||un(e)?!0:Tp.test(e)||!Ep.test(e)||s!=null&&e in de(s)}function $m(e){var s=typeof e;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?e!=="__proto__":e===null}function Ha(e){var s=Zi(e),a=O[s];if(typeof a!="function"||!(s in Jt.prototype))return!1;if(e===a)return!0;var p=Ua(a);return!!p&&e===p[0]}function Pm(e){return!!rc&&rc in e}var Dm=Si?er:al;function Hs(e){var s=e&&e.constructor,a=typeof s=="function"&&s.prototype||as;return e===a}function rf(e){return e===e&&!ke(e)}function sf(e,s){return function(a){return a==null?!1:a[e]===s&&(s!==r||e in de(a))}}function Lm(e){var s=eo(e,function(p){return a.size===y&&a.clear(),p}),a=s.cache;return s}function Bm(e,s){var a=e[1],p=s[1],w=a|p,P=w<(T|E|V),q=p==V&&a==M||p==V&&a==tt&&e[7].length<=s[8]||p==(V|tt)&&s[7].length<=s[8]&&a==M;if(!(P||q))return e;p&T&&(e[2]=s[2],w|=a&T?0:D);var Z=s[3];if(Z){var nt=e[3];e[3]=nt?Uc(nt,Z,s[4]):Z,e[4]=nt?_r(e[3],_):s[4]}return Z=s[5],Z&&(nt=e[5],e[5]=nt?Fc(nt,Z,s[6]):Z,e[6]=nt?_r(e[5],_):s[6]),Z=s[7],Z&&(e[7]=Z),p&V&&(e[8]=e[8]==null?s[8]:Ue(e[8],s[8])),e[9]==null&&(e[9]=s[9]),e[0]=s[0],e[1]=w,e}function Mm(e){var s=[];if(e!=null)for(var a in de(e))s.push(a);return s}function Nm(e){return Ei.call(e)}function of(e,s,a){return s=Pe(s===r?e.length-1:s,0),function(){for(var p=arguments,w=-1,P=Pe(p.length-s,0),q=ft(P);++w<P;)q[w]=p[s+w];w=-1;for(var Z=ft(s+1);++w<s;)Z[w]=p[w];return Z[s]=a(q),on(e,this,Z)}}function af(e,s){return s.length<2?e:Fr(e,xn(s,0,-1))}function zm(e,s){for(var a=e.length,p=Ue(s.length,a),w=tn(e);p--;){var P=s[p];e[p]=tr(P,a)?w[P]:r}return e}function qa(e,s){if(!(s==="constructor"&&typeof e[s]=="function")&&s!="__proto__")return e[s]}var lf=cf(Oc),qs=tg||function(e,s){return Be.setTimeout(e,s)},Va=cf(lm);function uf(e,s,a){var p=s+"";return Va(e,Om(p,Um(Em(p),a)))}function cf(e){var s=0,a=0;return function(){var p=sg(),w=$-(p-a);if(a=p,w>0){if(++s>=k)return arguments[0]}else s=0;return e.apply(r,arguments)}}function Ji(e,s){var a=-1,p=e.length,w=p-1;for(s=s===r?p:s;++a<s;){var P=Ta(a,w),q=e[P];e[P]=e[a],e[a]=q}return e.length=s,e}var ff=Lm(function(e){var s=[];return e.charCodeAt(0)===46&&s.push(""),e.replace(Rp,function(a,p,w,P){s.push(w?P.replace(Mp,"$1"):p||a)}),s});function zn(e){if(typeof e=="string"||un(e))return e;var s=e+"";return s=="0"&&1/e==-ht?"-0":s}function Wr(e){if(e!=null){try{return Ai.call(e)}catch{}try{return e+""}catch{}}return""}function Um(e,s){return vn(Tt,function(a){var p="_."+a[0];s&a[1]&&!xi(e,p)&&e.push(p)}),e.sort()}function df(e){if(e instanceof Jt)return e.clone();var s=new yn(e.__wrapped__,e.__chain__);return s.__actions__=tn(e.__actions__),s.__index__=e.__index__,s.__values__=e.__values__,s}function Fm(e,s,a){(a?Ge(e,s,a):s===r)?s=1:s=Pe(Gt(s),0);var p=e==null?0:e.length;if(!p||s<1)return[];for(var w=0,P=0,q=ft(Pi(p/s));w<p;)q[P++]=xn(e,w,w+=s);return q}function jm(e){for(var s=-1,a=e==null?0:e.length,p=0,w=[];++s<a;){var P=e[s];P&&(w[p++]=P)}return w}function Wm(){var e=arguments.length;if(!e)return[];for(var s=ft(e-1),a=arguments[0],p=e;p--;)s[p-1]=arguments[p];return vr(qt(a)?tn(a):[a],Me(s,1))}var Hm=Zt(function(e,s){return Ee(e)?zs(e,Me(s,1,Ee,!0)):[]}),qm=Zt(function(e,s){var a=wn(s);return Ee(a)&&(a=r),Ee(e)?zs(e,Me(s,1,Ee,!0),Mt(a,2)):[]}),Vm=Zt(function(e,s){var a=wn(s);return Ee(a)&&(a=r),Ee(e)?zs(e,Me(s,1,Ee,!0),r,a):[]});function Gm(e,s,a){var p=e==null?0:e.length;return p?(s=a||s===r?1:Gt(s),xn(e,s<0?0:s,p)):[]}function Km(e,s,a){var p=e==null?0:e.length;return p?(s=a||s===r?1:Gt(s),s=p-s,xn(e,0,s<0?0:s)):[]}function Zm(e,s){return e&&e.length?Wi(e,Mt(s,3),!0,!0):[]}function Ym(e,s){return e&&e.length?Wi(e,Mt(s,3),!0):[]}function Jm(e,s,a,p){var w=e==null?0:e.length;return w?(a&&typeof a!="number"&&Ge(e,s,a)&&(a=0,p=w),Wg(e,s,a,p)):[]}function hf(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var w=a==null?0:Gt(a);return w<0&&(w=Pe(p+w,0)),wi(e,Mt(s,3),w)}function pf(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var w=p-1;return a!==r&&(w=Gt(a),w=a<0?Pe(p+w,0):Ue(w,p-1)),wi(e,Mt(s,3),w,!0)}function gf(e){var s=e==null?0:e.length;return s?Me(e,1):[]}function Xm(e){var s=e==null?0:e.length;return s?Me(e,ht):[]}function Qm(e,s){var a=e==null?0:e.length;return a?(s=s===r?1:Gt(s),Me(e,s)):[]}function tv(e){for(var s=-1,a=e==null?0:e.length,p={};++s<a;){var w=e[s];p[w[0]]=w[1]}return p}function mf(e){return e&&e.length?e[0]:r}function ev(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var w=a==null?0:Gt(a);return w<0&&(w=Pe(p+w,0)),rs(e,s,w)}function nv(e){var s=e==null?0:e.length;return s?xn(e,0,-1):[]}var rv=Zt(function(e){var s=we(e,Pa);return s.length&&s[0]===e[0]?ka(s):[]}),sv=Zt(function(e){var s=wn(e),a=we(e,Pa);return s===wn(a)?s=r:a.pop(),a.length&&a[0]===e[0]?ka(a,Mt(s,2)):[]}),iv=Zt(function(e){var s=wn(e),a=we(e,Pa);return s=typeof s=="function"?s:r,s&&a.pop(),a.length&&a[0]===e[0]?ka(a,r,s):[]});function ov(e,s){return e==null?"":ng.call(e,s)}function wn(e){var s=e==null?0:e.length;return s?e[s-1]:r}function av(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var w=p;return a!==r&&(w=Gt(a),w=w<0?Pe(p+w,0):Ue(w,p-1)),s===s?U0(e,s,w):wi(e,Zu,w,!0)}function lv(e,s){return e&&e.length?Ac(e,Gt(s)):r}var uv=Zt(vf);function vf(e,s){return e&&e.length&&s&&s.length?Ea(e,s):e}function cv(e,s,a){return e&&e.length&&s&&s.length?Ea(e,s,Mt(a,2)):e}function fv(e,s,a){return e&&e.length&&s&&s.length?Ea(e,s,r,a):e}var dv=Qn(function(e,s){var a=e==null?0:e.length,p=ya(e,s);return Rc(e,we(s,function(w){return tr(w,a)?+w:w}).sort(zc)),p});function hv(e,s){var a=[];if(!(e&&e.length))return a;var p=-1,w=[],P=e.length;for(s=Mt(s,3);++p<P;){var q=e[p];s(q,p,e)&&(a.push(q),w.push(p))}return Rc(e,w),a}function Ga(e){return e==null?e:og.call(e)}function pv(e,s,a){var p=e==null?0:e.length;return p?(a&&typeof a!="number"&&Ge(e,s,a)?(s=0,a=p):(s=s==null?0:Gt(s),a=a===r?p:Gt(a)),xn(e,s,a)):[]}function gv(e,s){return ji(e,s)}function mv(e,s,a){return Oa(e,s,Mt(a,2))}function vv(e,s){var a=e==null?0:e.length;if(a){var p=ji(e,s);if(p<a&&In(e[p],s))return p}return-1}function _v(e,s){return ji(e,s,!0)}function yv(e,s,a){return Oa(e,s,Mt(a,2),!0)}function bv(e,s){var a=e==null?0:e.length;if(a){var p=ji(e,s,!0)-1;if(In(e[p],s))return p}return-1}function xv(e){return e&&e.length?Ic(e):[]}function wv(e,s){return e&&e.length?Ic(e,Mt(s,2)):[]}function kv(e){var s=e==null?0:e.length;return s?xn(e,1,s):[]}function Cv(e,s,a){return e&&e.length?(s=a||s===r?1:Gt(s),xn(e,0,s<0?0:s)):[]}function Sv(e,s,a){var p=e==null?0:e.length;return p?(s=a||s===r?1:Gt(s),s=p-s,xn(e,s<0?0:s,p)):[]}function Av(e,s){return e&&e.length?Wi(e,Mt(s,3),!1,!0):[]}function Ev(e,s){return e&&e.length?Wi(e,Mt(s,3)):[]}var Tv=Zt(function(e){return xr(Me(e,1,Ee,!0))}),Rv=Zt(function(e){var s=wn(e);return Ee(s)&&(s=r),xr(Me(e,1,Ee,!0),Mt(s,2))}),Ov=Zt(function(e){var s=wn(e);return s=typeof s=="function"?s:r,xr(Me(e,1,Ee,!0),r,s)});function Iv(e){return e&&e.length?xr(e):[]}function $v(e,s){return e&&e.length?xr(e,Mt(s,2)):[]}function Pv(e,s){return s=typeof s=="function"?s:r,e&&e.length?xr(e,r,s):[]}function Ka(e){if(!(e&&e.length))return[];var s=0;return e=mr(e,function(a){if(Ee(a))return s=Pe(a.length,s),!0}),fa(s,function(a){return we(e,la(a))})}function _f(e,s){if(!(e&&e.length))return[];var a=Ka(e);return s==null?a:we(a,function(p){return on(s,r,p)})}var Dv=Zt(function(e,s){return Ee(e)?zs(e,s):[]}),Lv=Zt(function(e){return $a(mr(e,Ee))}),Bv=Zt(function(e){var s=wn(e);return Ee(s)&&(s=r),$a(mr(e,Ee),Mt(s,2))}),Mv=Zt(function(e){var s=wn(e);return s=typeof s=="function"?s:r,$a(mr(e,Ee),r,s)}),Nv=Zt(Ka);function zv(e,s){return Lc(e||[],s||[],Ns)}function Uv(e,s){return Lc(e||[],s||[],js)}var Fv=Zt(function(e){var s=e.length,a=s>1?e[s-1]:r;return a=typeof a=="function"?(e.pop(),a):r,_f(e,a)});function yf(e){var s=O(e);return s.__chain__=!0,s}function jv(e,s){return s(e),e}function Xi(e,s){return s(e)}var Wv=Qn(function(e){var s=e.length,a=s?e[0]:0,p=this.__wrapped__,w=function(P){return ya(P,e)};return s>1||this.__actions__.length||!(p instanceof Jt)||!tr(a)?this.thru(w):(p=p.slice(a,+a+(s?1:0)),p.__actions__.push({func:Xi,args:[w],thisArg:r}),new yn(p,this.__chain__).thru(function(P){return s&&!P.length&&P.push(r),P}))});function Hv(){return yf(this)}function qv(){return new yn(this.value(),this.__chain__)}function Vv(){this.__values__===r&&(this.__values__=Pf(this.value()));var e=this.__index__>=this.__values__.length,s=e?r:this.__values__[this.__index__++];return{done:e,value:s}}function Gv(){return this}function Kv(e){for(var s,a=this;a instanceof Mi;){var p=df(a);p.__index__=0,p.__values__=r,s?w.__wrapped__=p:s=p;var w=p;a=a.__wrapped__}return w.__wrapped__=e,s}function Zv(){var e=this.__wrapped__;if(e instanceof Jt){var s=e;return this.__actions__.length&&(s=new Jt(this)),s=s.reverse(),s.__actions__.push({func:Xi,args:[Ga],thisArg:r}),new yn(s,this.__chain__)}return this.thru(Ga)}function Yv(){return Dc(this.__wrapped__,this.__actions__)}var Jv=Hi(function(e,s,a){ue.call(e,a)?++e[a]:Jn(e,a,1)});function Xv(e,s,a){var p=qt(e)?Gu:jg;return a&&Ge(e,s,a)&&(s=r),p(e,Mt(s,3))}function Qv(e,s){var a=qt(e)?mr:vc;return a(e,Mt(s,3))}var t1=qc(hf),e1=qc(pf);function n1(e,s){return Me(Qi(e,s),1)}function r1(e,s){return Me(Qi(e,s),ht)}function s1(e,s,a){return a=a===r?1:Gt(a),Me(Qi(e,s),a)}function bf(e,s){var a=qt(e)?vn:br;return a(e,Mt(s,3))}function xf(e,s){var a=qt(e)?k0:mc;return a(e,Mt(s,3))}var i1=Hi(function(e,s,a){ue.call(e,a)?e[a].push(s):Jn(e,a,[s])});function o1(e,s,a,p){e=en(e)?e:gs(e),a=a&&!p?Gt(a):0;var w=e.length;return a<0&&(a=Pe(w+a,0)),so(e)?a<=w&&e.indexOf(s,a)>-1:!!w&&rs(e,s,a)>-1}var a1=Zt(function(e,s,a){var p=-1,w=typeof s=="function",P=en(e)?ft(e.length):[];return br(e,function(q){P[++p]=w?on(s,q,a):Us(q,s,a)}),P}),l1=Hi(function(e,s,a){Jn(e,a,s)});function Qi(e,s){var a=qt(e)?we:kc;return a(e,Mt(s,3))}function u1(e,s,a,p){return e==null?[]:(qt(s)||(s=s==null?[]:[s]),a=p?r:a,qt(a)||(a=a==null?[]:[a]),Ec(e,s,a))}var c1=Hi(function(e,s,a){e[a?0:1].push(s)},function(){return[[],[]]});function f1(e,s,a){var p=qt(e)?oa:Ju,w=arguments.length<3;return p(e,Mt(s,4),a,w,br)}function d1(e,s,a){var p=qt(e)?C0:Ju,w=arguments.length<3;return p(e,Mt(s,4),a,w,mc)}function h1(e,s){var a=qt(e)?mr:vc;return a(e,no(Mt(s,3)))}function p1(e){var s=qt(e)?dc:om;return s(e)}function g1(e,s,a){(a?Ge(e,s,a):s===r)?s=1:s=Gt(s);var p=qt(e)?Mg:am;return p(e,s)}function m1(e){var s=qt(e)?Ng:um;return s(e)}function v1(e){if(e==null)return 0;if(en(e))return so(e)?is(e):e.length;var s=Fe(e);return s==d||s==X?e.size:Sa(e).length}function _1(e,s,a){var p=qt(e)?aa:cm;return a&&Ge(e,s,a)&&(s=r),p(e,Mt(s,3))}var y1=Zt(function(e,s){if(e==null)return[];var a=s.length;return a>1&&Ge(e,s[0],s[1])?s=[]:a>2&&Ge(s[0],s[1],s[2])&&(s=[s[0]]),Ec(e,Me(s,1),[])}),to=Q0||function(){return Be.Date.now()};function b1(e,s){if(typeof s!="function")throw new _n(u);return e=Gt(e),function(){if(--e<1)return s.apply(this,arguments)}}function wf(e,s,a){return s=a?r:s,s=e&&s==null?e.length:s,Xn(e,V,r,r,r,r,s)}function kf(e,s){var a;if(typeof s!="function")throw new _n(u);return e=Gt(e),function(){return--e>0&&(a=s.apply(this,arguments)),e<=1&&(s=r),a}}var Za=Zt(function(e,s,a){var p=T;if(a.length){var w=_r(a,hs(Za));p|=B}return Xn(e,p,s,a,w)}),Cf=Zt(function(e,s,a){var p=T|E;if(a.length){var w=_r(a,hs(Cf));p|=B}return Xn(s,p,e,a,w)});function Sf(e,s,a){s=a?r:s;var p=Xn(e,M,r,r,r,r,r,s);return p.placeholder=Sf.placeholder,p}function Af(e,s,a){s=a?r:s;var p=Xn(e,N,r,r,r,r,r,s);return p.placeholder=Af.placeholder,p}function Ef(e,s,a){var p,w,P,q,Z,nt,yt=0,bt=!1,wt=!1,Rt=!0;if(typeof e!="function")throw new _n(u);s=kn(s)||0,ke(a)&&(bt=!!a.leading,wt="maxWait"in a,P=wt?Pe(kn(a.maxWait)||0,s):P,Rt="trailing"in a?!!a.trailing:Rt);function Dt(Te){var $n=p,rr=w;return p=w=r,yt=Te,q=e.apply(rr,$n),q}function Nt(Te){return yt=Te,Z=qs(Yt,s),bt?Dt(Te):q}function Kt(Te){var $n=Te-nt,rr=Te-yt,Vf=s-$n;return wt?Ue(Vf,P-rr):Vf}function zt(Te){var $n=Te-nt,rr=Te-yt;return nt===r||$n>=s||$n<0||wt&&rr>=P}function Yt(){var Te=to();if(zt(Te))return Qt(Te);Z=qs(Yt,Kt(Te))}function Qt(Te){return Z=r,Rt&&p?Dt(Te):(p=w=r,q)}function cn(){Z!==r&&Bc(Z),yt=0,p=nt=w=Z=r}function Ke(){return Z===r?q:Qt(to())}function fn(){var Te=to(),$n=zt(Te);if(p=arguments,w=this,nt=Te,$n){if(Z===r)return Nt(nt);if(wt)return Bc(Z),Z=qs(Yt,s),Dt(nt)}return Z===r&&(Z=qs(Yt,s)),q}return fn.cancel=cn,fn.flush=Ke,fn}var x1=Zt(function(e,s){return gc(e,1,s)}),w1=Zt(function(e,s,a){return gc(e,kn(s)||0,a)});function k1(e){return Xn(e,z)}function eo(e,s){if(typeof e!="function"||s!=null&&typeof s!="function")throw new _n(u);var a=function(){var p=arguments,w=s?s.apply(this,p):p[0],P=a.cache;if(P.has(w))return P.get(w);var q=e.apply(this,p);return a.cache=P.set(w,q)||P,q};return a.cache=new(eo.Cache||Yn),a}eo.Cache=Yn;function no(e){if(typeof e!="function")throw new _n(u);return function(){var s=arguments;switch(s.length){case 0:return!e.call(this);case 1:return!e.call(this,s[0]);case 2:return!e.call(this,s[0],s[1]);case 3:return!e.call(this,s[0],s[1],s[2])}return!e.apply(this,s)}}function C1(e){return kf(2,e)}var S1=fm(function(e,s){s=s.length==1&&qt(s[0])?we(s[0],an(Mt())):we(Me(s,1),an(Mt()));var a=s.length;return Zt(function(p){for(var w=-1,P=Ue(p.length,a);++w<P;)p[w]=s[w].call(this,p[w]);return on(e,this,p)})}),Ya=Zt(function(e,s){var a=_r(s,hs(Ya));return Xn(e,B,r,s,a)}),Tf=Zt(function(e,s){var a=_r(s,hs(Tf));return Xn(e,Y,r,s,a)}),A1=Qn(function(e,s){return Xn(e,tt,r,r,r,s)});function E1(e,s){if(typeof e!="function")throw new _n(u);return s=s===r?s:Gt(s),Zt(e,s)}function T1(e,s){if(typeof e!="function")throw new _n(u);return s=s==null?0:Pe(Gt(s),0),Zt(function(a){var p=a[s],w=kr(a,0,s);return p&&vr(w,p),on(e,this,w)})}function R1(e,s,a){var p=!0,w=!0;if(typeof e!="function")throw new _n(u);return ke(a)&&(p="leading"in a?!!a.leading:p,w="trailing"in a?!!a.trailing:w),Ef(e,s,{leading:p,maxWait:s,trailing:w})}function O1(e){return wf(e,1)}function I1(e,s){return Ya(Da(s),e)}function $1(){if(!arguments.length)return[];var e=arguments[0];return qt(e)?e:[e]}function P1(e){return bn(e,v)}function D1(e,s){return s=typeof s=="function"?s:r,bn(e,v,s)}function L1(e){return bn(e,m|v)}function B1(e,s){return s=typeof s=="function"?s:r,bn(e,m|v,s)}function M1(e,s){return s==null||pc(e,s,Le(s))}function In(e,s){return e===s||e!==e&&s!==s}var N1=Ki(wa),z1=Ki(function(e,s){return e>=s}),Hr=bc(function(){return arguments}())?bc:function(e){return Ce(e)&&ue.call(e,"callee")&&!oc.call(e,"callee")},qt=ft.isArray,U1=Fu?an(Fu):Kg;function en(e){return e!=null&&ro(e.length)&&!er(e)}function Ee(e){return Ce(e)&&en(e)}function F1(e){return e===!0||e===!1||Ce(e)&&Ve(e)==ct}var Cr=eg||al,j1=ju?an(ju):Zg;function W1(e){return Ce(e)&&e.nodeType===1&&!Vs(e)}function H1(e){if(e==null)return!0;if(en(e)&&(qt(e)||typeof e=="string"||typeof e.splice=="function"||Cr(e)||ps(e)||Hr(e)))return!e.length;var s=Fe(e);if(s==d||s==X)return!e.size;if(Hs(e))return!Sa(e).length;for(var a in e)if(ue.call(e,a))return!1;return!0}function q1(e,s){return Fs(e,s)}function V1(e,s,a){a=typeof a=="function"?a:r;var p=a?a(e,s):r;return p===r?Fs(e,s,r,a):!!p}function Ja(e){if(!Ce(e))return!1;var s=Ve(e);return s==ut||s==St||typeof e.message=="string"&&typeof e.name=="string"&&!Vs(e)}function G1(e){return typeof e=="number"&&lc(e)}function er(e){if(!ke(e))return!1;var s=Ve(e);return s==S||s==L||s==J||s==U}function Rf(e){return typeof e=="number"&&e==Gt(e)}function ro(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Et}function ke(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}function Ce(e){return e!=null&&typeof e=="object"}var Of=Wu?an(Wu):Jg;function K1(e,s){return e===s||Ca(e,s,Fa(s))}function Z1(e,s,a){return a=typeof a=="function"?a:r,Ca(e,s,Fa(s),a)}function Y1(e){return If(e)&&e!=+e}function J1(e){if(Dm(e))throw new Wt(l);return xc(e)}function X1(e){return e===null}function Q1(e){return e==null}function If(e){return typeof e=="number"||Ce(e)&&Ve(e)==F}function Vs(e){if(!Ce(e)||Ve(e)!=A)return!1;var s=Oi(e);if(s===null)return!0;var a=ue.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&Ai.call(a)==Z0}var Xa=Hu?an(Hu):Xg;function t_(e){return Rf(e)&&e>=-Et&&e<=Et}var $f=qu?an(qu):Qg;function so(e){return typeof e=="string"||!qt(e)&&Ce(e)&&Ve(e)==K}function un(e){return typeof e=="symbol"||Ce(e)&&Ve(e)==at}var ps=Vu?an(Vu):tm;function e_(e){return e===r}function n_(e){return Ce(e)&&Fe(e)==pt}function r_(e){return Ce(e)&&Ve(e)==Ct}var s_=Ki(Aa),i_=Ki(function(e,s){return e<=s});function Pf(e){if(!e)return[];if(en(e))return so(e)?Rn(e):tn(e);if(Ps&&e[Ps])return M0(e[Ps]());var s=Fe(e),a=s==d?ha:s==X?ki:gs;return a(e)}function nr(e){if(!e)return e===0?e:0;if(e=kn(e),e===ht||e===-ht){var s=e<0?-1:1;return s*xt}return e===e?e:0}function Gt(e){var s=nr(e),a=s%1;return s===s?a?s-a:s:0}function Df(e){return e?Ur(Gt(e),0,it):0}function kn(e){if(typeof e=="number")return e;if(un(e))return $t;if(ke(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=ke(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=Xu(e);var a=Up.test(e);return a||jp.test(e)?b0(e.slice(2),a?2:8):zp.test(e)?$t:+e}function Lf(e){return Nn(e,nn(e))}function o_(e){return e?Ur(Gt(e),-Et,Et):e===0?e:0}function ie(e){return e==null?"":ln(e)}var a_=fs(function(e,s){if(Hs(s)||en(s)){Nn(s,Le(s),e);return}for(var a in s)ue.call(s,a)&&Ns(e,a,s[a])}),Bf=fs(function(e,s){Nn(s,nn(s),e)}),io=fs(function(e,s,a,p){Nn(s,nn(s),e,p)}),l_=fs(function(e,s,a,p){Nn(s,Le(s),e,p)}),u_=Qn(ya);function c_(e,s){var a=cs(e);return s==null?a:hc(a,s)}var f_=Zt(function(e,s){e=de(e);var a=-1,p=s.length,w=p>2?s[2]:r;for(w&&Ge(s[0],s[1],w)&&(p=1);++a<p;)for(var P=s[a],q=nn(P),Z=-1,nt=q.length;++Z<nt;){var yt=q[Z],bt=e[yt];(bt===r||In(bt,as[yt])&&!ue.call(e,yt))&&(e[yt]=P[yt])}return e}),d_=Zt(function(e){return e.push(r,Xc),on(Mf,r,e)});function h_(e,s){return Ku(e,Mt(s,3),Mn)}function p_(e,s){return Ku(e,Mt(s,3),xa)}function g_(e,s){return e==null?e:ba(e,Mt(s,3),nn)}function m_(e,s){return e==null?e:_c(e,Mt(s,3),nn)}function v_(e,s){return e&&Mn(e,Mt(s,3))}function __(e,s){return e&&xa(e,Mt(s,3))}function y_(e){return e==null?[]:Ui(e,Le(e))}function b_(e){return e==null?[]:Ui(e,nn(e))}function Qa(e,s,a){var p=e==null?r:Fr(e,s);return p===r?a:p}function x_(e,s){return e!=null&&ef(e,s,Hg)}function tl(e,s){return e!=null&&ef(e,s,qg)}var w_=Gc(function(e,s,a){s!=null&&typeof s.toString!="function"&&(s=Ei.call(s)),e[s]=a},nl(rn)),k_=Gc(function(e,s,a){s!=null&&typeof s.toString!="function"&&(s=Ei.call(s)),ue.call(e,s)?e[s].push(a):e[s]=[a]},Mt),C_=Zt(Us);function Le(e){return en(e)?fc(e):Sa(e)}function nn(e){return en(e)?fc(e,!0):em(e)}function S_(e,s){var a={};return s=Mt(s,3),Mn(e,function(p,w,P){Jn(a,s(p,w,P),p)}),a}function A_(e,s){var a={};return s=Mt(s,3),Mn(e,function(p,w,P){Jn(a,w,s(p,w,P))}),a}var E_=fs(function(e,s,a){Fi(e,s,a)}),Mf=fs(function(e,s,a,p){Fi(e,s,a,p)}),T_=Qn(function(e,s){var a={};if(e==null)return a;var p=!1;s=we(s,function(P){return P=wr(P,e),p||(p=P.length>1),P}),Nn(e,za(e),a),p&&(a=bn(a,m|b|v,wm));for(var w=s.length;w--;)Ia(a,s[w]);return a});function R_(e,s){return Nf(e,no(Mt(s)))}var O_=Qn(function(e,s){return e==null?{}:rm(e,s)});function Nf(e,s){if(e==null)return{};var a=we(za(e),function(p){return[p]});return s=Mt(s),Tc(e,a,function(p,w){return s(p,w[0])})}function I_(e,s,a){s=wr(s,e);var p=-1,w=s.length;for(w||(w=1,e=r);++p<w;){var P=e==null?r:e[zn(s[p])];P===r&&(p=w,P=a),e=er(P)?P.call(e):P}return e}function $_(e,s,a){return e==null?e:js(e,s,a)}function P_(e,s,a,p){return p=typeof p=="function"?p:r,e==null?e:js(e,s,a,p)}var zf=Yc(Le),Uf=Yc(nn);function D_(e,s,a){var p=qt(e),w=p||Cr(e)||ps(e);if(s=Mt(s,4),a==null){var P=e&&e.constructor;w?a=p?new P:[]:ke(e)?a=er(P)?cs(Oi(e)):{}:a={}}return(w?vn:Mn)(e,function(q,Z,nt){return s(a,q,Z,nt)}),a}function L_(e,s){return e==null?!0:Ia(e,s)}function B_(e,s,a){return e==null?e:Pc(e,s,Da(a))}function M_(e,s,a,p){return p=typeof p=="function"?p:r,e==null?e:Pc(e,s,Da(a),p)}function gs(e){return e==null?[]:da(e,Le(e))}function N_(e){return e==null?[]:da(e,nn(e))}function z_(e,s,a){return a===r&&(a=s,s=r),a!==r&&(a=kn(a),a=a===a?a:0),s!==r&&(s=kn(s),s=s===s?s:0),Ur(kn(e),s,a)}function U_(e,s,a){return s=nr(s),a===r?(a=s,s=0):a=nr(a),e=kn(e),Vg(e,s,a)}function F_(e,s,a){if(a&&typeof a!="boolean"&&Ge(e,s,a)&&(s=a=r),a===r&&(typeof s=="boolean"?(a=s,s=r):typeof e=="boolean"&&(a=e,e=r)),e===r&&s===r?(e=0,s=1):(e=nr(e),s===r?(s=e,e=0):s=nr(s)),e>s){var p=e;e=s,s=p}if(a||e%1||s%1){var w=uc();return Ue(e+w*(s-e+y0("1e-"+((w+"").length-1))),s)}return Ta(e,s)}var j_=ds(function(e,s,a){return s=s.toLowerCase(),e+(a?Ff(s):s)});function Ff(e){return el(ie(e).toLowerCase())}function jf(e){return e=ie(e),e&&e.replace(Hp,$0).replace(u0,"")}function W_(e,s,a){e=ie(e),s=ln(s);var p=e.length;a=a===r?p:Ur(Gt(a),0,p);var w=a;return a-=s.length,a>=0&&e.slice(a,w)==s}function H_(e){return e=ie(e),e&&Cp.test(e)?e.replace(gr,P0):e}function q_(e){return e=ie(e),e&&Op.test(e)?e.replace(Yo,"\\$&"):e}var V_=ds(function(e,s,a){return e+(a?"-":"")+s.toLowerCase()}),G_=ds(function(e,s,a){return e+(a?" ":"")+s.toLowerCase()}),K_=Hc("toLowerCase");function Z_(e,s,a){e=ie(e),s=Gt(s);var p=s?is(e):0;if(!s||p>=s)return e;var w=(s-p)/2;return Gi(Di(w),a)+e+Gi(Pi(w),a)}function Y_(e,s,a){e=ie(e),s=Gt(s);var p=s?is(e):0;return s&&p<s?e+Gi(s-p,a):e}function J_(e,s,a){e=ie(e),s=Gt(s);var p=s?is(e):0;return s&&p<s?Gi(s-p,a)+e:e}function X_(e,s,a){return a||s==null?s=0:s&&(s=+s),ig(ie(e).replace(Jo,""),s||0)}function Q_(e,s,a){return(a?Ge(e,s,a):s===r)?s=1:s=Gt(s),Ra(ie(e),s)}function ty(){var e=arguments,s=ie(e[0]);return e.length<3?s:s.replace(e[1],e[2])}var ey=ds(function(e,s,a){return e+(a?"_":"")+s.toLowerCase()});function ny(e,s,a){return a&&typeof a!="number"&&Ge(e,s,a)&&(s=a=r),a=a===r?it:a>>>0,a?(e=ie(e),e&&(typeof s=="string"||s!=null&&!Xa(s))&&(s=ln(s),!s&&ss(e))?kr(Rn(e),0,a):e.split(s,a)):[]}var ry=ds(function(e,s,a){return e+(a?" ":"")+el(s)});function sy(e,s,a){return e=ie(e),a=a==null?0:Ur(Gt(a),0,e.length),s=ln(s),e.slice(a,a+s.length)==s}function iy(e,s,a){var p=O.templateSettings;a&&Ge(e,s,a)&&(s=r),e=ie(e),s=io({},s,p,Jc);var w=io({},s.imports,p.imports,Jc),P=Le(w),q=da(w,P),Z,nt,yt=0,bt=s.interpolate||_i,wt="__p += '",Rt=pa((s.escape||_i).source+"|"+bt.source+"|"+(bt===yu?Np:_i).source+"|"+(s.evaluate||_i).source+"|$","g"),Dt="//# sourceURL="+(ue.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++p0+"]")+`
`;e.replace(Rt,function(zt,Yt,Qt,cn,Ke,fn){return Qt||(Qt=cn),wt+=e.slice(yt,fn).replace(qp,D0),Yt&&(Z=!0,wt+=`' +
__e(`+Yt+`) +
'`),Ke&&(nt=!0,wt+=`';
`+Ke+`;
__p += '`),Qt&&(wt+=`' +
((__t = (`+Qt+`)) == null ? '' : __t) +
'`),yt=fn+zt.length,zt}),wt+=`';
`;var Nt=ue.call(s,"variable")&&s.variable;if(!Nt)wt=`with (obj) {
`+wt+`
}
`;else if(Bp.test(Nt))throw new Wt(f);wt=(nt?wt.replace(ts,""):wt).replace(Ko,"$1").replace(Zo,"$1;"),wt="function("+(Nt||"obj")+`) {
`+(Nt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Z?", __e = _.escape":"")+(nt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+wt+`return __p
}`;var Kt=Hf(function(){return se(P,Dt+"return "+wt).apply(r,q)});if(Kt.source=wt,Ja(Kt))throw Kt;return Kt}function oy(e){return ie(e).toLowerCase()}function ay(e){return ie(e).toUpperCase()}function ly(e,s,a){if(e=ie(e),e&&(a||s===r))return Xu(e);if(!e||!(s=ln(s)))return e;var p=Rn(e),w=Rn(s),P=Qu(p,w),q=tc(p,w)+1;return kr(p,P,q).join("")}function uy(e,s,a){if(e=ie(e),e&&(a||s===r))return e.slice(0,nc(e)+1);if(!e||!(s=ln(s)))return e;var p=Rn(e),w=tc(p,Rn(s))+1;return kr(p,0,w).join("")}function cy(e,s,a){if(e=ie(e),e&&(a||s===r))return e.replace(Jo,"");if(!e||!(s=ln(s)))return e;var p=Rn(e),w=Qu(p,Rn(s));return kr(p,w).join("")}function fy(e,s){var a=I,p=G;if(ke(s)){var w="separator"in s?s.separator:w;a="length"in s?Gt(s.length):a,p="omission"in s?ln(s.omission):p}e=ie(e);var P=e.length;if(ss(e)){var q=Rn(e);P=q.length}if(a>=P)return e;var Z=a-is(p);if(Z<1)return p;var nt=q?kr(q,0,Z).join(""):e.slice(0,Z);if(w===r)return nt+p;if(q&&(Z+=nt.length-Z),Xa(w)){if(e.slice(Z).search(w)){var yt,bt=nt;for(w.global||(w=pa(w.source,ie(bu.exec(w))+"g")),w.lastIndex=0;yt=w.exec(bt);)var wt=yt.index;nt=nt.slice(0,wt===r?Z:wt)}}else if(e.indexOf(ln(w),Z)!=Z){var Rt=nt.lastIndexOf(w);Rt>-1&&(nt=nt.slice(0,Rt))}return nt+p}function dy(e){return e=ie(e),e&&es.test(e)?e.replace(Is,F0):e}var hy=ds(function(e,s,a){return e+(a?" ":"")+s.toUpperCase()}),el=Hc("toUpperCase");function Wf(e,s,a){return e=ie(e),s=a?r:s,s===r?B0(e)?H0(e):E0(e):e.match(s)||[]}var Hf=Zt(function(e,s){try{return on(e,r,s)}catch(a){return Ja(a)?a:new Wt(a)}}),py=Qn(function(e,s){return vn(s,function(a){a=zn(a),Jn(e,a,Za(e[a],e))}),e});function gy(e){var s=e==null?0:e.length,a=Mt();return e=s?we(e,function(p){if(typeof p[1]!="function")throw new _n(u);return[a(p[0]),p[1]]}):[],Zt(function(p){for(var w=-1;++w<s;){var P=e[w];if(on(P[0],this,p))return on(P[1],this,p)}})}function my(e){return Fg(bn(e,m))}function nl(e){return function(){return e}}function vy(e,s){return e==null||e!==e?s:e}var _y=Vc(),yy=Vc(!0);function rn(e){return e}function rl(e){return wc(typeof e=="function"?e:bn(e,m))}function by(e){return Cc(bn(e,m))}function xy(e,s){return Sc(e,bn(s,m))}var wy=Zt(function(e,s){return function(a){return Us(a,e,s)}}),ky=Zt(function(e,s){return function(a){return Us(e,a,s)}});function sl(e,s,a){var p=Le(s),w=Ui(s,p);a==null&&!(ke(s)&&(w.length||!p.length))&&(a=s,s=e,e=this,w=Ui(s,Le(s)));var P=!(ke(a)&&"chain"in a)||!!a.chain,q=er(e);return vn(w,function(Z){var nt=s[Z];e[Z]=nt,q&&(e.prototype[Z]=function(){var yt=this.__chain__;if(P||yt){var bt=e(this.__wrapped__),wt=bt.__actions__=tn(this.__actions__);return wt.push({func:nt,args:arguments,thisArg:e}),bt.__chain__=yt,bt}return nt.apply(e,vr([this.value()],arguments))})}),e}function Cy(){return Be._===this&&(Be._=Y0),this}function il(){}function Sy(e){return e=Gt(e),Zt(function(s){return Ac(s,e)})}var Ay=Ba(we),Ey=Ba(Gu),Ty=Ba(aa);function qf(e){return Wa(e)?la(zn(e)):sm(e)}function Ry(e){return function(s){return e==null?r:Fr(e,s)}}var Oy=Kc(),Iy=Kc(!0);function ol(){return[]}function al(){return!1}function $y(){return{}}function Py(){return""}function Dy(){return!0}function Ly(e,s){if(e=Gt(e),e<1||e>Et)return[];var a=it,p=Ue(e,it);s=Mt(s),e-=it;for(var w=fa(p,s);++a<e;)s(a);return w}function By(e){return qt(e)?we(e,zn):un(e)?[e]:tn(ff(ie(e)))}function My(e){var s=++K0;return ie(e)+s}var Ny=Vi(function(e,s){return e+s},0),zy=Ma("ceil"),Uy=Vi(function(e,s){return e/s},1),Fy=Ma("floor");function jy(e){return e&&e.length?zi(e,rn,wa):r}function Wy(e,s){return e&&e.length?zi(e,Mt(s,2),wa):r}function Hy(e){return Yu(e,rn)}function qy(e,s){return Yu(e,Mt(s,2))}function Vy(e){return e&&e.length?zi(e,rn,Aa):r}function Gy(e,s){return e&&e.length?zi(e,Mt(s,2),Aa):r}var Ky=Vi(function(e,s){return e*s},1),Zy=Ma("round"),Yy=Vi(function(e,s){return e-s},0);function Jy(e){return e&&e.length?ca(e,rn):0}function Xy(e,s){return e&&e.length?ca(e,Mt(s,2)):0}return O.after=b1,O.ary=wf,O.assign=a_,O.assignIn=Bf,O.assignInWith=io,O.assignWith=l_,O.at=u_,O.before=kf,O.bind=Za,O.bindAll=py,O.bindKey=Cf,O.castArray=$1,O.chain=yf,O.chunk=Fm,O.compact=jm,O.concat=Wm,O.cond=gy,O.conforms=my,O.constant=nl,O.countBy=Jv,O.create=c_,O.curry=Sf,O.curryRight=Af,O.debounce=Ef,O.defaults=f_,O.defaultsDeep=d_,O.defer=x1,O.delay=w1,O.difference=Hm,O.differenceBy=qm,O.differenceWith=Vm,O.drop=Gm,O.dropRight=Km,O.dropRightWhile=Zm,O.dropWhile=Ym,O.fill=Jm,O.filter=Qv,O.flatMap=n1,O.flatMapDeep=r1,O.flatMapDepth=s1,O.flatten=gf,O.flattenDeep=Xm,O.flattenDepth=Qm,O.flip=k1,O.flow=_y,O.flowRight=yy,O.fromPairs=tv,O.functions=y_,O.functionsIn=b_,O.groupBy=i1,O.initial=nv,O.intersection=rv,O.intersectionBy=sv,O.intersectionWith=iv,O.invert=w_,O.invertBy=k_,O.invokeMap=a1,O.iteratee=rl,O.keyBy=l1,O.keys=Le,O.keysIn=nn,O.map=Qi,O.mapKeys=S_,O.mapValues=A_,O.matches=by,O.matchesProperty=xy,O.memoize=eo,O.merge=E_,O.mergeWith=Mf,O.method=wy,O.methodOf=ky,O.mixin=sl,O.negate=no,O.nthArg=Sy,O.omit=T_,O.omitBy=R_,O.once=C1,O.orderBy=u1,O.over=Ay,O.overArgs=S1,O.overEvery=Ey,O.overSome=Ty,O.partial=Ya,O.partialRight=Tf,O.partition=c1,O.pick=O_,O.pickBy=Nf,O.property=qf,O.propertyOf=Ry,O.pull=uv,O.pullAll=vf,O.pullAllBy=cv,O.pullAllWith=fv,O.pullAt=dv,O.range=Oy,O.rangeRight=Iy,O.rearg=A1,O.reject=h1,O.remove=hv,O.rest=E1,O.reverse=Ga,O.sampleSize=g1,O.set=$_,O.setWith=P_,O.shuffle=m1,O.slice=pv,O.sortBy=y1,O.sortedUniq=xv,O.sortedUniqBy=wv,O.split=ny,O.spread=T1,O.tail=kv,O.take=Cv,O.takeRight=Sv,O.takeRightWhile=Av,O.takeWhile=Ev,O.tap=jv,O.throttle=R1,O.thru=Xi,O.toArray=Pf,O.toPairs=zf,O.toPairsIn=Uf,O.toPath=By,O.toPlainObject=Lf,O.transform=D_,O.unary=O1,O.union=Tv,O.unionBy=Rv,O.unionWith=Ov,O.uniq=Iv,O.uniqBy=$v,O.uniqWith=Pv,O.unset=L_,O.unzip=Ka,O.unzipWith=_f,O.update=B_,O.updateWith=M_,O.values=gs,O.valuesIn=N_,O.without=Dv,O.words=Wf,O.wrap=I1,O.xor=Lv,O.xorBy=Bv,O.xorWith=Mv,O.zip=Nv,O.zipObject=zv,O.zipObjectDeep=Uv,O.zipWith=Fv,O.entries=zf,O.entriesIn=Uf,O.extend=Bf,O.extendWith=io,sl(O,O),O.add=Ny,O.attempt=Hf,O.camelCase=j_,O.capitalize=Ff,O.ceil=zy,O.clamp=z_,O.clone=P1,O.cloneDeep=L1,O.cloneDeepWith=B1,O.cloneWith=D1,O.conformsTo=M1,O.deburr=jf,O.defaultTo=vy,O.divide=Uy,O.endsWith=W_,O.eq=In,O.escape=H_,O.escapeRegExp=q_,O.every=Xv,O.find=t1,O.findIndex=hf,O.findKey=h_,O.findLast=e1,O.findLastIndex=pf,O.findLastKey=p_,O.floor=Fy,O.forEach=bf,O.forEachRight=xf,O.forIn=g_,O.forInRight=m_,O.forOwn=v_,O.forOwnRight=__,O.get=Qa,O.gt=N1,O.gte=z1,O.has=x_,O.hasIn=tl,O.head=mf,O.identity=rn,O.includes=o1,O.indexOf=ev,O.inRange=U_,O.invoke=C_,O.isArguments=Hr,O.isArray=qt,O.isArrayBuffer=U1,O.isArrayLike=en,O.isArrayLikeObject=Ee,O.isBoolean=F1,O.isBuffer=Cr,O.isDate=j1,O.isElement=W1,O.isEmpty=H1,O.isEqual=q1,O.isEqualWith=V1,O.isError=Ja,O.isFinite=G1,O.isFunction=er,O.isInteger=Rf,O.isLength=ro,O.isMap=Of,O.isMatch=K1,O.isMatchWith=Z1,O.isNaN=Y1,O.isNative=J1,O.isNil=Q1,O.isNull=X1,O.isNumber=If,O.isObject=ke,O.isObjectLike=Ce,O.isPlainObject=Vs,O.isRegExp=Xa,O.isSafeInteger=t_,O.isSet=$f,O.isString=so,O.isSymbol=un,O.isTypedArray=ps,O.isUndefined=e_,O.isWeakMap=n_,O.isWeakSet=r_,O.join=ov,O.kebabCase=V_,O.last=wn,O.lastIndexOf=av,O.lowerCase=G_,O.lowerFirst=K_,O.lt=s_,O.lte=i_,O.max=jy,O.maxBy=Wy,O.mean=Hy,O.meanBy=qy,O.min=Vy,O.minBy=Gy,O.stubArray=ol,O.stubFalse=al,O.stubObject=$y,O.stubString=Py,O.stubTrue=Dy,O.multiply=Ky,O.nth=lv,O.noConflict=Cy,O.noop=il,O.now=to,O.pad=Z_,O.padEnd=Y_,O.padStart=J_,O.parseInt=X_,O.random=F_,O.reduce=f1,O.reduceRight=d1,O.repeat=Q_,O.replace=ty,O.result=I_,O.round=Zy,O.runInContext=et,O.sample=p1,O.size=v1,O.snakeCase=ey,O.some=_1,O.sortedIndex=gv,O.sortedIndexBy=mv,O.sortedIndexOf=vv,O.sortedLastIndex=_v,O.sortedLastIndexBy=yv,O.sortedLastIndexOf=bv,O.startCase=ry,O.startsWith=sy,O.subtract=Yy,O.sum=Jy,O.sumBy=Xy,O.template=iy,O.times=Ly,O.toFinite=nr,O.toInteger=Gt,O.toLength=Df,O.toLower=oy,O.toNumber=kn,O.toSafeInteger=o_,O.toString=ie,O.toUpper=ay,O.trim=ly,O.trimEnd=uy,O.trimStart=cy,O.truncate=fy,O.unescape=dy,O.uniqueId=My,O.upperCase=hy,O.upperFirst=el,O.each=bf,O.eachRight=xf,O.first=mf,sl(O,function(){var e={};return Mn(O,function(s,a){ue.call(O.prototype,a)||(e[a]=s)}),e}(),{chain:!1}),O.VERSION=i,vn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){O[e].placeholder=O}),vn(["drop","take"],function(e,s){Jt.prototype[e]=function(a){a=a===r?1:Pe(Gt(a),0);var p=this.__filtered__&&!s?new Jt(this):this.clone();return p.__filtered__?p.__takeCount__=Ue(a,p.__takeCount__):p.__views__.push({size:Ue(a,it),type:e+(p.__dir__<0?"Right":"")}),p},Jt.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),vn(["filter","map","takeWhile"],function(e,s){var a=s+1,p=a==g||a==kt;Jt.prototype[e]=function(w){var P=this.clone();return P.__iteratees__.push({iteratee:Mt(w,3),type:a}),P.__filtered__=P.__filtered__||p,P}}),vn(["head","last"],function(e,s){var a="take"+(s?"Right":"");Jt.prototype[e]=function(){return this[a](1).value()[0]}}),vn(["initial","tail"],function(e,s){var a="drop"+(s?"":"Right");Jt.prototype[e]=function(){return this.__filtered__?new Jt(this):this[a](1)}}),Jt.prototype.compact=function(){return this.filter(rn)},Jt.prototype.find=function(e){return this.filter(e).head()},Jt.prototype.findLast=function(e){return this.reverse().find(e)},Jt.prototype.invokeMap=Zt(function(e,s){return typeof e=="function"?new Jt(this):this.map(function(a){return Us(a,e,s)})}),Jt.prototype.reject=function(e){return this.filter(no(Mt(e)))},Jt.prototype.slice=function(e,s){e=Gt(e);var a=this;return a.__filtered__&&(e>0||s<0)?new Jt(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),s!==r&&(s=Gt(s),a=s<0?a.dropRight(-s):a.take(s-e)),a)},Jt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Jt.prototype.toArray=function(){return this.take(it)},Mn(Jt.prototype,function(e,s){var a=/^(?:filter|find|map|reject)|While$/.test(s),p=/^(?:head|last)$/.test(s),w=O[p?"take"+(s=="last"?"Right":""):s],P=p||/^find/.test(s);w&&(O.prototype[s]=function(){var q=this.__wrapped__,Z=p?[1]:arguments,nt=q instanceof Jt,yt=Z[0],bt=nt||qt(q),wt=function(Yt){var Qt=w.apply(O,vr([Yt],Z));return p&&Rt?Qt[0]:Qt};bt&&a&&typeof yt=="function"&&yt.length!=1&&(nt=bt=!1);var Rt=this.__chain__,Dt=!!this.__actions__.length,Nt=P&&!Rt,Kt=nt&&!Dt;if(!P&&bt){q=Kt?q:new Jt(this);var zt=e.apply(q,Z);return zt.__actions__.push({func:Xi,args:[wt],thisArg:r}),new yn(zt,Rt)}return Nt&&Kt?e.apply(this,Z):(zt=this.thru(wt),Nt?p?zt.value()[0]:zt.value():zt)})}),vn(["pop","push","shift","sort","splice","unshift"],function(e){var s=Ci[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",p=/^(?:pop|shift)$/.test(e);O.prototype[e]=function(){var w=arguments;if(p&&!this.__chain__){var P=this.value();return s.apply(qt(P)?P:[],w)}return this[a](function(q){return s.apply(qt(q)?q:[],w)})}}),Mn(Jt.prototype,function(e,s){var a=O[s];if(a){var p=a.name+"";ue.call(us,p)||(us[p]=[]),us[p].push({name:s,func:a})}}),us[qi(r,E).name]=[{name:"wrapper",func:r}],Jt.prototype.clone=dg,Jt.prototype.reverse=hg,Jt.prototype.value=pg,O.prototype.at=Wv,O.prototype.chain=Hv,O.prototype.commit=qv,O.prototype.next=Vv,O.prototype.plant=Kv,O.prototype.reverse=Zv,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=Yv,O.prototype.first=O.prototype.head,Ps&&(O.prototype[Ps]=Gv),O},os=q0();Br?((Br.exports=os)._=os,ra._=os):Be._=os}).call(cr)})($o,$o.exports);var I5=$o.exports;const $5={class:"mb-8 border-b border-gray-200"},P5={class:"-mb-px flex space-x-8","aria-label":"Tabs"},D5=["onClick"],L5={key:0},B5={class:"card p-8"},M5={class:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end mb-6 p-6 bg-sky-50 border border-sky-200 rounded-lg"},N5={class:"md:col-span-2"},z5={class:"md:col-span-2"},U5={key:0,class:"text-center py-8 text-slate-500"},F5={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"},j5={class:"text-sm text-slate-500"},W5={class:"text-xl font-bold text-slate-800 text-center"},H5={key:1},q5={key:0,class:"card p-8 max-w-4xl mx-auto"},V5={class:"space-y-6"},G5=["value"],K5={class:"text-right"},Z5=["disabled"],Y5={key:1},J5={class:"card p-8"},X5={class:"text-2xl font-semibold mb-6"},Q5={class:"overflow-x-auto"},tC={class:"min-w-full divide-y divide-gray-200"},eC={class:"bg-white divide-y divide-gray-200"},nC={class:"table-cell"},rC={class:"table-cell font-medium"},sC={class:"table-cell"},iC=["onUpdate:modelValue","onInput","onKeydown","data-index"],oC={key:2},aC={class:"card p-8"},lC={class:"space-y-8"},uC={class:"text-xl font-bold text-sky-700 border-b-2 border-sky-200 pb-2 mb-4"},cC={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},fC=["onClick"],dC={class:"font-bold text-lg text-slate-800"},hC={class:"text-sm text-slate-500"},pC={class:"text-xs text-slate-400 mt-2"},gC={key:3},mC={class:"card p-8"},vC={class:"max-w-xl mx-auto"},_C={class:"flex items-center space-x-4 mb-8 p-4 bg-slate-50 rounded-lg border"},yC={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},bC=["onUpdate:modelValue","onChange"],xC=["onClick"],wC={__name:"GradeManagementView",setup(t){const n=dt([{key:"performance",name:"課堂表現"},{key:"grade_entry",name:"登錄新成績"},{key:"grade_overview",name:"總覽與修改成績"},{key:"settings",name:"科目設定"}]),r=dt("performance"),i=Xe({category:"",subject_id:null,name:"",grade_item_id:null}),o=dt(!1),l=dt([]),u=dt([]),f=dt([]),h=dt([]),y=dt(!1),_=Xe({start:"",end:""}),m=dt(""),b=pe(()=>i.grade_item_id?u.value.find(k=>k.id===i.grade_item_id):null),v=pe(()=>{const k={平時測驗:[],定期評量:[]};return[...u.value].sort((g,rt)=>new Date(rt.date)-new Date(g.date)).forEach(g=>{k[g.category]&&k[g.category].push(g)}),k}),C=()=>{Object.assign(i,{category:"",subject_id:null,name:"",grade_item_id:null}),f.value=[]},x=async()=>{const k={category:i.category,subject_id:i.subject_id,name:i.name};try{const g=await(await Ht("/api/grade-items",{method:"POST",body:JSON.stringify(k)})).json();u.value.unshift(g),i.grade_item_id=g.id,await tt(g.id),o.value=!0}catch($){console.error("建立成績項目失敗:",$)}},T=()=>{o.value=!1,C(),r.value==="grade_entry"||(r.value="grade_overview")},E=async k=>{i.grade_item_id=k.id,await tt(k.id),r.value="grade_entry",o.value=!0},D=()=>{const k=new Date,$=new Date;$.setDate(k.getDate()-30),_.end=k.toISOString().split("T")[0],_.start=$.toISOString().split("T")[0]},M=async()=>{try{const[k,$]=await Promise.all([Ht("/api/subjects"),Ht("/api/grade-items")]);l.value=await k.json(),u.value=await $.json(),await N()}catch(k){console.error("讀取初始資料失敗:",k)}},N=async()=>{y.value=!0;try{const k=await Ht(`/api/performance-summary?startDate=${_.start}&endDate=${_.end}`);h.value=await k.json()}catch(k){console.error("讀取表現統計失敗:",k)}finally{y.value=!1}};Qe(()=>{D(),M()});const B=async()=>{if(!m.value)return;const k=await Ht("/api/subjects",{method:"POST",body:JSON.stringify({name:m.value})});l.value.push(await k.json()),m.value=""},Y=async k=>{Ht(`/api/subjects/${k.id}`,{method:"PUT",body:JSON.stringify({name:k.name})})},V=async k=>{confirm("確定刪除此科目嗎？所有相關的成績項目和分數將會一併刪除！")&&(await Ht(`/api/subjects/${k}`,{method:"DELETE"}),l.value=l.value.filter($=>$.id!==k),u.value=u.value.filter($=>$.subject_id!==k))},tt=async k=>{const $=await Ht(`/api/grades/${k}`);f.value=await $.json()},z=I5.debounce((k,$)=>{b.value&&Ht("/api/grades",{method:"POST",body:JSON.stringify({grade_item_id:b.value.id,student_id:k,score:$})})},500),I=(k,$)=>{z(k,$)},G=k=>{const $=k+1;if($<f.value.length){const g=document.querySelector(`input[data-index='${$}']`);g&&(g.focus(),g.select())}};return Or(r,k=>{k!=="grade_entry"&&(o.value=!1,C()),k==="performance"&&N()}),(k,$)=>(W(),H("div",null,[$[19]||($[19]=c("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"成績管理",-1)),c("div",$5,[c("nav",P5,[(W(!0),H(Ft,null,Xt(n.value,g=>(W(),H("a",{key:g.key,onClick:rt=>r.value=g.key,class:ce([r.value===g.key?"border-sky-500 text-sky-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg cursor-pointer"])},lt(g.name),11,D5))),128))])]),r.value==="performance"?(W(),H("div",L5,[c("div",B5,[$[9]||($[9]=c("h2",{class:"text-2xl font-semibold mb-6"},"課堂表現區間統計",-1)),c("div",M5,[c("div",N5,[$[6]||($[6]=c("label",{for:"startDate",class:"block text-sm font-medium text-slate-700 mb-1"},"開始日期",-1)),Bt(c("input",{type:"date",id:"startDate","onUpdate:modelValue":$[0]||($[0]=g=>_.start=g),class:"form-input text-base w-full py-2.5"},null,512),[[jt,_.start]])]),c("div",z5,[$[7]||($[7]=c("label",{for:"endDate",class:"block text-sm font-medium text-slate-700 mb-1"},"結束日期",-1)),Bt(c("input",{type:"date",id:"endDate","onUpdate:modelValue":$[1]||($[1]=g=>_.end=g),class:"form-input text-base w-full py-2.5"},null,512),[[jt,_.end]])]),c("div",{class:"md:col-span-1"},[c("button",{onClick:N,class:"btn btn-primary w-full text-base py-2.5 px-6 flex items-center justify-center gap-2"},[...$[8]||($[8]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})],-1),c("span",null,"查詢",-1)])])])]),y.value?(W(),H("div",U5,"正在讀取統計資料...")):(W(),H("div",F5,[(W(!0),H(Ft,null,Xt(h.value,g=>(W(),H("div",{key:g.id,class:"bg-white rounded-xl shadow-md p-4 flex flex-col items-center justify-center space-y-2 transition-transform hover:scale-105 hover:shadow-lg border"},[c("div",j5,lt(g.seat_number)+".",1),c("div",W5,lt(g.name),1),c("div",{class:ce(["px-5 py-2 rounded-full text-2xl font-extrabold",{"bg-green-100 text-green-700":g.total_score>0,"bg-red-100 text-red-700":g.total_score<0,"bg-slate-100 text-slate-600":g.total_score===0||g.total_score===null}])},lt(g.total_score),3)]))),128))]))])])):At("",!0),r.value==="grade_entry"?(W(),H("div",H5,[o.value?At("",!0):(W(),H("div",q5,[$[15]||($[15]=c("h2",{class:"text-2xl font-semibold mb-6"},"登錄新成績",-1)),c("div",V5,[c("div",null,[$[11]||($[11]=c("label",{class:"block text-base font-medium text-slate-700"},"1. 選擇成績類別",-1)),Bt(c("select",{"onUpdate:modelValue":$[2]||($[2]=g=>i.category=g),class:"mt-1 form-input text-lg py-3"},[...$[10]||($[10]=[c("option",{disabled:"",value:""},"-- 請選擇 --",-1),c("option",null,"平時測驗",-1),c("option",null,"定期評量",-1)])],512),[[di,i.category]])]),c("div",null,[$[13]||($[13]=c("label",{class:"block text-base font-medium text-slate-700"},"2. 選擇科目",-1)),Bt(c("select",{"onUpdate:modelValue":$[3]||($[3]=g=>i.subject_id=g),class:"mt-1 form-input text-lg py-3"},[$[12]||($[12]=c("option",{value:null},"-- 請選擇 --",-1)),(W(!0),H(Ft,null,Xt(l.value,g=>(W(),H("option",{key:g.id,value:g.id},lt(g.name),9,G5))),128))],512),[[di,i.subject_id]])]),c("div",null,[$[14]||($[14]=c("label",{class:"block text-base font-medium text-slate-700"},"3. 輸入成績項目名稱",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":$[4]||($[4]=g=>i.name=g),placeholder:"例如: 第一次月考",class:"mt-1 form-input text-lg py-3"},null,512),[[jt,i.name]])]),c("div",K5,[c("button",{onClick:x,disabled:!i.category||!i.subject_id||!i.name,class:"btn btn-primary text-lg px-8 py-3"}," 下一步：輸入分數 ",8,Z5)])])])),o.value&&b.value?(W(),H("div",Y5,[c("button",{onClick:T,class:"text-sky-600 hover:text-sky-800 mb-4"},"← 返回"),c("div",J5,[c("h2",X5,lt(b.value.subject_name)+" - "+lt(b.value.name)+" ("+lt(b.value.category)+")",1),c("div",Q5,[c("table",tC,[$[16]||($[16]=c("thead",{class:"bg-slate-50"},[c("tr",null,[c("th",{class:"table-header"},"座號"),c("th",{class:"table-header"},"姓名"),c("th",{class:"table-header"},"分數")])],-1)),c("tbody",eC,[(W(!0),H(Ft,null,Xt(f.value,(g,rt)=>(W(),H("tr",{key:g.id,class:"hover:bg-slate-50"},[c("td",nC,lt(g.seat_number),1),c("td",rC,lt(g.name),1),c("td",sC,[Bt(c("input",{type:"number","onUpdate:modelValue":kt=>g.score=kt,onInput:kt=>I(g.student_id,kt.target.value),onKeydown:bw(ze(kt=>G(rt),["prevent"]),["enter"]),"data-index":rt,class:"form-input w-32 text-lg py-2 text-center"},null,40,iC),[[jt,g.score]])])]))),128))])])])])])):At("",!0)])):At("",!0),r.value==="grade_overview"?(W(),H("div",oC,[c("div",aC,[$[17]||($[17]=c("h2",{class:"text-2xl font-semibold mb-6"},"成績項目總覽與修改",-1)),c("div",lC,[(W(!0),H(Ft,null,Xt(v.value,(g,rt)=>(W(),H("div",{key:rt},[c("h3",uC,lt(rt),1),c("div",cC,[(W(!0),H(Ft,null,Xt(g,kt=>(W(),H("div",{key:kt.id,onClick:ht=>E(kt),class:"p-4 border rounded-lg cursor-pointer hover:bg-sky-50 hover:shadow-lg transition-all"},[c("p",dC,lt(kt.name),1),c("p",hC,lt(kt.subject_name),1),c("p",pC,lt(new Date(kt.date).toLocaleDateString()),1)],8,fC))),128))])]))),128))])])])):At("",!0),r.value==="settings"?(W(),H("div",gC,[c("div",mC,[$[18]||($[18]=c("h2",{class:"text-2xl font-semibold mb-6"},"科目管理",-1)),c("div",vC,[c("div",_C,[Bt(c("input",{type:"text","onUpdate:modelValue":$[5]||($[5]=g=>m.value=g),placeholder:"新增科目名稱...",class:"form-input text-lg flex-grow py-3"},null,512),[[jt,m.value]]),c("button",{onClick:B,class:"btn btn-primary text-base py-3 px-6"},"新增")]),c("div",yC,[(W(!0),H(Ft,null,Xt(l.value,g=>(W(),H("div",{key:g.id,class:"bg-white rounded-lg shadow border p-4 flex flex-col"},[Bt(c("input",{type:"text","onUpdate:modelValue":rt=>g.name=rt,onChange:rt=>Y(g),class:"form-input text-xl font-bold border-0 text-center p-2 mb-4"},null,40,bC),[[jt,g.name]]),c("button",{onClick:rt=>V(g.id),class:"mt-auto w-full btn btn-danger btn-sm text-xs py-1"},"刪除",8,xC)]))),128))])])])])):At("",!0)]))}},kC=hu(wC,[["__scopeId","data-v-657e628f"]]),CC={class:"min-h-screen bg-sky-50 p-4 sm:p-8"},SC={class:"max-w-4xl mx-auto"},AC={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 pb-4"},EC={class:"text-xl text-slate-600 mt-2"},TC={class:"flex items-center space-x-2 mt-4 sm:mt-0"},RC={class:"space-y-8"},OC={key:0,class:"text-center text-slate-500 py-10"},IC={key:1,class:"text-center text-slate-500 bg-white p-10 rounded-lg shadow"},$C={key:2,class:"space-y-6"},PC={class:"flex flex-col md:flex-row justify-between items-start"},DC={class:"mb-4 md:mb-0 flex-1"},LC={class:"px-2 py-1 text-xs font-semibold rounded-full bg-sky-100 text-sky-800"},BC={class:"text-2xl font-bold text-slate-800 mt-2"},MC={class:"text-slate-600 mt-2"},NC={key:0},zC={key:1},UC={class:"w-full md:w-auto md:ml-6 flex flex-col items-stretch",style:{"min-width":"150px"}},FC=["onChange","id"],jC=["onClick"],WC={key:2},HC=["onClick"],qC={key:0,class:"fixed z-20 inset-0 overflow-y-auto"},VC={class:"flex items-center justify-center min-h-screen"},GC={class:"bg-white rounded-lg shadow-xl transform transition-all max-w-lg w-full"},KC={class:"p-6"},ZC={class:"mb-2"},YC={class:"text-indigo-600"},JC={class:"text-sm text-slate-600 bg-slate-50 p-3 rounded-md max-h-40 overflow-y-auto border"},XC={key:1,class:"fixed z-10 inset-0 overflow-y-auto"},QC={class:"flex items-center justify-center min-h-screen"},t6={class:"bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all max-w-lg w-full"},e6={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},n6={class:"mt-4 space-y-4"},r6={key:0,class:"text-red-500 text-sm"},s6={__name:"StudentDashboardView",setup(t){const n=qo(),r=dt(JSON.parse(localStorage.getItem("studentInfo")||"{}")),i=dt([]),o=dt(!0);Xe({text:"",type:"success"});const l=dt(!1),u=Xe({currentPassword:"",newPassword:"",confirmPassword:"",error:""}),f=Xe({show:!1,files:[],assignmentId:null,assignmentTitle:"",fileInputRef:null}),h=N=>N.due_date&&new Date(N.due_date)<new Date,y=(N,B="success",Y=5e3)=>{const V=document.createElement("div");V.className=`fixed top-5 right-5 p-4 rounded-lg shadow-lg text-white ${B==="success"?"bg-green-500":"bg-red-500"}`,V.textContent=N,document.body.appendChild(V),setTimeout(()=>{V.remove()},Y)},_=()=>{localStorage.clear(),window.location.href="/auth"},m=()=>{n.push({name:"pingpong-student"})},b=()=>{n.push({name:"quiz-game-student"})},v=async()=>{o.value=!0;try{const N=await Ht("/api/student/assignments");if(!N.ok)throw new Error("無法讀取作業列表");i.value=await N.json()}catch(N){y(N.message,"error")}finally{o.value=!1}},C=N=>{const B=document.getElementById(`file-upload-${N}`);B&&B.click()},x=(N,B)=>{const Y=Array.from(N.target.files);if(Y.length===0)return;const V=i.value.find(tt=>tt.id===B);Object.assign(f,{show:!0,files:Y,assignmentId:B,assignmentTitle:V.title,fileInputRef:N.target})},T=()=>{f.fileInputRef&&(f.fileInputRef.value=""),Object.assign(f,{show:!1,files:[],assignmentId:null,assignmentTitle:"",fileInputRef:null})},E=async()=>{const N=new FormData;f.files.forEach(B=>{N.append("files",B)});try{const B=await Ht(`/api/student/upload/${f.assignmentId}`,{method:"POST",body:N}),Y=await B.json();if(!B.ok)throw new Error(Y.error||"上傳失敗");y(Y.message,"success"),v()}catch(B){y(B.message,"error")}finally{T()}},D=()=>{l.value=!1,Object.assign(u,{currentPassword:"",newPassword:"",confirmPassword:"",error:""})},M=async()=>{if(u.error="",u.newPassword!==u.confirmPassword)return u.error="新密碼與確認密碼不相符。";if(u.newPassword.length<6)return u.error="新密碼長度至少需要 6 個字元。";try{const N=await Ht("/api/student/change-password",{method:"POST",body:JSON.stringify({currentPassword:u.currentPassword,newPassword:u.newPassword})}),B=await N.json();if(!N.ok)throw new Error(B.error);y("密碼已成功更新！您無需重新登入。","success"),D()}catch(N){u.error=N.message}};return Qe(v),(N,B)=>(W(),H("div",CC,[c("div",SC,[c("div",AC,[c("div",null,[B[5]||(B[5]=c("h1",{class:"text-4xl font-bold text-slate-800"},"學生儀表板",-1)),c("p",EC,lt(r.value.name)+" 同學，您好！",1)]),c("div",TC,[c("button",{onClick:b,class:"btn bg-yellow-500 hover:bg-yellow-600"},"加入搶答競賽"),c("button",{onClick:m,class:"btn bg-teal-500 hover:bg-teal-600"},"加入 PingPong"),c("button",{onClick:B[0]||(B[0]=Y=>l.value=!0),class:"btn bg-slate-500 hover:bg-slate-600"},"修改密碼"),c("button",{onClick:_,class:"btn bg-red-500 hover:bg-red-600"},"登出")])]),c("div",RC,[B[9]||(B[9]=c("h2",{class:"text-3xl font-semibold text-slate-700"},"待繳交作業",-1)),o.value?(W(),H("div",OC,"作業列表讀取中...")):i.value.length===0?(W(),H("div",IC,"目前沒有需要繳交的作業。")):(W(),H("div",$C,[(W(!0),H(Ft,null,Xt(i.value,Y=>(W(),H("div",{key:Y.id,class:"card p-6"},[c("div",PC,[c("div",DC,[c("span",LC,lt(Y.subject_name),1),c("h3",BC,lt(Y.title),1),c("p",MC,lt(Y.description),1),c("p",{class:ce(["text-sm mt-3 font-medium",Y.due_date?new Date(Y.due_date)<new Date?"text-gray-500":"text-red-600":"text-green-600"])},[Y.due_date?(W(),H("span",NC,"繳交截止："+lt(new Date(Y.due_date).toLocaleString()),1)):(W(),H("span",zC,"沒有繳交期限"))],2)]),c("div",UC,[c("input",{type:"file",onChange:V=>x(V,Y.id),id:"file-upload-"+Y.id,class:"hidden",multiple:""},null,40,FC),Y.hasSubmitted?(W(),H("div",{key:0,class:ce(["w-full text-center py-3 px-6 text-base flex items-center justify-center gap-2 rounded-md font-bold",Y.isLate?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"])},[B[6]||(B[6]=c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c("span",null,lt(Y.isLate?"已補交":"已繳交"),1)],2)):At("",!0),Y.hasSubmitted&&Y.allow_resubmission?(W(),H("button",{key:1,onClick:V=>C(Y.id),class:"w-full mt-2 btn btn-secondary py-3 px-6 text-base flex items-center justify-center gap-2"},[...B[7]||(B[7]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h5"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 12a8 8 0 018-8v0a8 8 0 018 8v0a8 8 0 01-8 8v0a8 8 0 01-8-8v0z"})],-1),c("span",null,"重新上傳",-1)])],8,jC)):At("",!0),Y.hasSubmitted?At("",!0):(W(),H("div",WC,[c("button",{onClick:V=>C(Y.id),class:ce(["w-full btn py-3 px-6 text-base flex items-center justify-center gap-2",h(Y)?"btn-danger":"btn-primary"])},[B[8]||(B[8]=c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),c("span",null,lt(h(Y)?"請補交作業":"選擇檔案上傳"),1)],10,HC)]))])])]))),128))]))])]),f.show?(W(),H("div",qC,[c("div",VC,[c("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:T}),c("div",GC,[c("div",KC,[B[13]||(B[13]=c("h3",{class:"text-xl font-bold mb-4"},"確認上傳",-1)),c("p",ZC,[B[10]||(B[10]=ee("您確定要將以下 ",-1)),c("strong",YC,lt(f.files.length),1),B[11]||(B[11]=ee(" 個檔案上傳至「",-1)),c("strong",null,lt(f.assignmentTitle),1),B[12]||(B[12]=ee("」嗎？",-1))]),c("ul",JC,[(W(!0),H(Ft,null,Xt(f.files,Y=>(W(),H("li",{key:Y.name,class:"truncate"},lt(Y.name),1))),128))])]),c("div",{class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"},[c("button",{onClick:T,class:"btn btn-secondary"},"取消"),c("button",{onClick:E,class:"btn btn-primary"},"確認上傳")])])])])):At("",!0),l.value?(W(),H("div",XC,[c("div",QC,[c("div",{class:"fixed inset-0 bg-gray-500 opacity-75",onClick:B[1]||(B[1]=Y=>l.value=!1)}),c("div",t6,[c("form",{onSubmit:ze(M,["prevent"])},[c("div",e6,[B[17]||(B[17]=c("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"修改密碼",-1)),c("div",n6,[c("div",null,[B[14]||(B[14]=c("label",{class:"block text-sm font-medium text-gray-700"},"目前的密碼",-1)),Bt(c("input",{type:"password","onUpdate:modelValue":B[2]||(B[2]=Y=>u.currentPassword=Y),required:"",class:"mt-1 form-input"},null,512),[[jt,u.currentPassword]])]),c("div",null,[B[15]||(B[15]=c("label",{class:"block text-sm font-medium text-gray-700"},"新密碼 (至少 6 個字元)",-1)),Bt(c("input",{type:"password","onUpdate:modelValue":B[3]||(B[3]=Y=>u.newPassword=Y),required:"",class:"mt-1 form-input"},null,512),[[jt,u.newPassword]])]),c("div",null,[B[16]||(B[16]=c("label",{class:"block text-sm font-medium text-gray-700"},"確認新密碼",-1)),Bt(c("input",{type:"password","onUpdate:modelValue":B[4]||(B[4]=Y=>u.confirmPassword=Y),required:"",class:"mt-1 form-input"},null,512),[[jt,u.confirmPassword]])]),u.error?(W(),H("p",r6,lt(u.error),1)):At("",!0)])]),c("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[B[18]||(B[18]=c("button",{type:"submit",class:"btn btn-primary"},"確認修改",-1)),c("button",{type:"button",onClick:D,class:"btn btn-secondary sm:ml-3 mt-2 sm:mt-0"},"取消")])],32)])])])):At("",!0)]))}},i6={class:"min-h-screen bg-slate-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},o6={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-lg"},a6={class:"bg-white py-8 px-4 shadow-2xl rounded-2xl sm:px-10"},l6={key:0,class:"mb-6"},u6={class:"flex border-b border-slate-200"},c6={key:0,class:"text-red-500 text-base text-center font-semibold"},f6={key:0},d6={class:"mt-4"},h6={key:1},p6={class:"mt-4"},g6={key:2,class:"text-red-500 text-base text-center font-semibold"},m6={key:3,class:"mt-6"},v6={__name:"AuthView",setup(t){const n=dt(!1),r=dt(""),i=qo(),o=dt("teacher"),l=Xe({name:"",username:"",account:"",password:"",passwordConfirm:""});Or(o,()=>{r.value="",Object.keys(l).forEach(_=>l[_]="")}),Qe(async()=>{try{const m=await(await fetch("/api/auth/teacher/setup-status")).json();n.value=m.setupNeeded}catch{r.value="無法連接到伺服器，請確認後端是否已啟動。"}});const f=async()=>{if(r.value="",l.password!==l.passwordConfirm)return r.value="兩次輸入的密碼不一致。";if(l.password.length<6)return r.value="密碼長度至少需要 6 個字元。";try{const _=await fetch("/api/auth/teacher/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l.name,username:l.username,password:l.password})});if(!_.ok)throw new Error((await _.json()).error);alert("帳號建立成功！請使用剛剛建立的帳號密碼登入。"),window.location.reload()}catch(_){r.value=_.message}},h=async()=>{r.value="";const _=o.value==="teacher",m=_?"/api/auth/teacher/login":"/api/auth/student/login",b=_?{username:l.username,password:l.password}:{account:l.account,password:l.password};try{const v=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),C=await v.json();if(!v.ok)throw new Error(C.error);_?(localStorage.setItem("teacherToken",C.token),localStorage.setItem("teacherInfo",JSON.stringify(C.teacher)),window.location.href="/"):(localStorage.setItem("studentToken",C.token),localStorage.setItem("studentInfo",JSON.stringify(C.student)),window.location.href="/student/dashboard")}catch(v){r.value=v.message}},y=()=>i.push({name:"pingpong-student"});return(_,m)=>(W(),H("div",i6,[m[23]||(m[23]=c("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[c("h2",{class:"mt-6 text-center text-4xl font-extrabold text-sky-600"}," 智慧班級 "),c("p",{class:"mt-2 text-center text-lg text-slate-500"},"一個為課堂而生的互動平台")],-1)),c("div",o6,[c("div",a6,[n.value?At("",!0):(W(),H("div",l6,[c("div",u6,[c("button",{onClick:m[0]||(m[0]=b=>o.value="teacher"),class:ce(["w-1/2 py-4 text-center font-semibold text-lg transition-colors duration-200",o.value==="teacher"?"border-b-4 border-sky-500 text-sky-600":"text-slate-500 hover:text-slate-800"])}," 教師登入 ",2),c("button",{onClick:m[1]||(m[1]=b=>o.value="student"),class:ce(["w-1/2 py-4 text-center font-semibold text-lg transition-colors duration-200",o.value==="student"?"border-b-4 border-sky-500 text-sky-600":"text-slate-500 hover:text-slate-800"])}," 學生登入 ",2)])])),n.value&&o.value==="teacher"?(W(),H("form",{key:1,class:"space-y-6",onSubmit:ze(f,["prevent"])},[m[14]||(m[14]=c("h3",{class:"text-xl font-medium text-center text-slate-800"},"建立您的教師帳號",-1)),m[15]||(m[15]=c("p",{class:"text-center text-base text-slate-600"},"這是您第一次啟動，請設定第一位管理者帳號。",-1)),c("div",null,[m[10]||(m[10]=c("label",{for:"name",class:"block text-base font-medium text-slate-700"},"姓名",-1)),Bt(c("input",{"onUpdate:modelValue":m[2]||(m[2]=b=>l.name=b),id:"name",type:"text",required:"",placeholder:"請輸入您的姓名",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.name]])]),c("div",null,[m[11]||(m[11]=c("label",{for:"username",class:"block text-base font-medium text-slate-700"},"帳號",-1)),Bt(c("input",{"onUpdate:modelValue":m[3]||(m[3]=b=>l.username=b),id:"username",type:"text",required:"",placeholder:"設定您的登入帳號",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.username]])]),c("div",null,[m[12]||(m[12]=c("label",{for:"password",class:"block text-base font-medium text-slate-700"},"密碼",-1)),Bt(c("input",{"onUpdate:modelValue":m[4]||(m[4]=b=>l.password=b),id:"password",type:"password",required:"",placeholder:"至少 6 個字元",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.password]])]),c("div",null,[m[13]||(m[13]=c("label",{for:"passwordConfirm",class:"block text-base font-medium text-slate-700"},"確認密碼",-1)),Bt(c("input",{"onUpdate:modelValue":m[5]||(m[5]=b=>l.passwordConfirm=b),id:"passwordConfirm",type:"password",required:"",placeholder:"再次輸入您的密碼",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.passwordConfirm]])]),r.value?(W(),H("div",c6,lt(r.value),1)):At("",!0),m[16]||(m[16]=c("div",null,[c("button",{type:"submit",class:"w-full btn btn-success text-xl py-4"},"建立帳號")],-1))],32)):(W(),H("form",{key:2,class:"space-y-6",onSubmit:ze(h,["prevent"])},[o.value==="teacher"?(W(),H("div",f6,[c("div",null,[m[17]||(m[17]=c("label",{for:"login-username",class:"block text-base font-medium text-slate-700"},"教師帳號",-1)),Bt(c("input",{"onUpdate:modelValue":m[6]||(m[6]=b=>l.username=b),id:"login-username",type:"text",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.username]])]),c("div",d6,[m[18]||(m[18]=c("label",{for:"login-password",class:"block text-base font-medium text-slate-700"},"密碼",-1)),Bt(c("input",{"onUpdate:modelValue":m[7]||(m[7]=b=>l.password=b),id:"login-password",type:"password",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.password]])])])):At("",!0),o.value==="student"?(W(),H("div",h6,[c("div",null,[m[19]||(m[19]=c("label",{for:"student-account",class:"block text-base font-medium text-slate-700"},"學生帳號",-1)),Bt(c("input",{"onUpdate:modelValue":m[8]||(m[8]=b=>l.account=b),id:"student-account",type:"text",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.account]])]),c("div",p6,[m[20]||(m[20]=c("label",{for:"student-password",class:"block text-base font-medium text-slate-700"},"密碼",-1)),Bt(c("input",{"onUpdate:modelValue":m[9]||(m[9]=b=>l.password=b),id:"student-password",type:"password",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.password]])])])):At("",!0),r.value?(W(),H("div",g6,lt(r.value),1)):At("",!0),m[21]||(m[21]=c("div",null,[c("button",{type:"submit",class:"w-full btn btn-primary text-xl py-4"},"登入")],-1))],32)),n.value?At("",!0):(W(),H("div",m6,[m[22]||(m[22]=fr('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-slate-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-slate-500 text-base">或者</span></div></div>',1)),c("div",{class:"mt-6"},[c("button",{onClick:y,class:"w-full btn bg-teal-500 hover:bg-teal-600 text-xl py-4"},"加入 即時問答 活動")])]))])])]))}},Gn=Object.create(null);Gn.open="0";Gn.close="1";Gn.ping="2";Gn.pong="3";Gn.message="4";Gn.upgrade="5";Gn.noop="6";const _o=Object.create(null);Object.keys(Gn).forEach(t=>{_o[Gn[t]]=t});const Fl={type:"error",data:"parser error"},lp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",up=typeof ArrayBuffer=="function",cp=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,pu=({type:t,data:n},r,i)=>lp&&n instanceof Blob?r?i(n):Fd(n,i):up&&(n instanceof ArrayBuffer||cp(n))?r?i(n):Fd(new Blob([n]),i):i(Gn[t]+(n||"")),Fd=(t,n)=>{const r=new FileReader;return r.onload=function(){const i=r.result.split(",")[1];n("b"+(i||""))},r.readAsDataURL(t)};function jd(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let kl;function _6(t,n){if(lp&&t.data instanceof Blob)return t.data.arrayBuffer().then(jd).then(n);if(up&&(t.data instanceof ArrayBuffer||cp(t.data)))return n(jd(t.data));pu(t,!1,r=>{kl||(kl=new TextEncoder),n(kl.encode(r))})}const Wd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Wd.length;t++)Xs[Wd.charCodeAt(t)]=t;const y6=t=>{let n=t.length*.75,r=t.length,i,o=0,l,u,f,h;t[t.length-1]==="="&&(n--,t[t.length-2]==="="&&n--);const y=new ArrayBuffer(n),_=new Uint8Array(y);for(i=0;i<r;i+=4)l=Xs[t.charCodeAt(i)],u=Xs[t.charCodeAt(i+1)],f=Xs[t.charCodeAt(i+2)],h=Xs[t.charCodeAt(i+3)],_[o++]=l<<2|u>>4,_[o++]=(u&15)<<4|f>>2,_[o++]=(f&3)<<6|h&63;return y},b6=typeof ArrayBuffer=="function",gu=(t,n)=>{if(typeof t!="string")return{type:"message",data:fp(t,n)};const r=t.charAt(0);return r==="b"?{type:"message",data:x6(t.substring(1),n)}:_o[r]?t.length>1?{type:_o[r],data:t.substring(1)}:{type:_o[r]}:Fl},x6=(t,n)=>{if(b6){const r=y6(t);return fp(r,n)}else return{base64:!0,data:t}},fp=(t,n)=>{switch(n){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},dp="",w6=(t,n)=>{const r=t.length,i=new Array(r);let o=0;t.forEach((l,u)=>{pu(l,!1,f=>{i[u]=f,++o===r&&n(i.join(dp))})})},k6=(t,n)=>{const r=t.split(dp),i=[];for(let o=0;o<r.length;o++){const l=gu(r[o],n);if(i.push(l),l.type==="error")break}return i};function C6(){return new TransformStream({transform(t,n){_6(t,r=>{const i=r.length;let o;if(i<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,i);else if(i<65536){o=new Uint8Array(3);const l=new DataView(o.buffer);l.setUint8(0,126),l.setUint16(1,i)}else{o=new Uint8Array(9);const l=new DataView(o.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(o[0]|=128),n.enqueue(o),n.enqueue(r)})}})}let Cl;function uo(t){return t.reduce((n,r)=>n+r.length,0)}function co(t,n){if(t[0].length===n)return t.shift();const r=new Uint8Array(n);let i=0;for(let o=0;o<n;o++)r[o]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),r}function S6(t,n){Cl||(Cl=new TextDecoder);const r=[];let i=0,o=-1,l=!1;return new TransformStream({transform(u,f){for(r.push(u);;){if(i===0){if(uo(r)<1)break;const h=co(r,1);l=(h[0]&128)===128,o=h[0]&127,o<126?i=3:o===126?i=1:i=2}else if(i===1){if(uo(r)<2)break;const h=co(r,2);o=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),i=3}else if(i===2){if(uo(r)<8)break;const h=co(r,8),y=new DataView(h.buffer,h.byteOffset,h.length),_=y.getUint32(0);if(_>Math.pow(2,21)-1){f.enqueue(Fl);break}o=_*Math.pow(2,32)+y.getUint32(4),i=3}else{if(uo(r)<o)break;const h=co(r,o);f.enqueue(gu(l?h:Cl.decode(h),n)),i=0}if(o===0||o>t){f.enqueue(Fl);break}}}})}const hp=4;function Oe(t){if(t)return A6(t)}function A6(t){for(var n in Oe.prototype)t[n]=Oe.prototype[n];return t}Oe.prototype.on=Oe.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(n),this};Oe.prototype.once=function(t,n){function r(){this.off(t,r),n.apply(this,arguments)}return r.fn=n,this.on(t,r),this};Oe.prototype.off=Oe.prototype.removeListener=Oe.prototype.removeAllListeners=Oe.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,o=0;o<r.length;o++)if(i=r[o],i===n||i.fn===n){r.splice(o,1);break}return r.length===0&&delete this._callbacks["$"+t],this};Oe.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),r=this._callbacks["$"+t],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,o=r.length;i<o;++i)r[i].apply(this,n)}return this};Oe.prototype.emitReserved=Oe.prototype.emit;Oe.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Oe.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Vo=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,r)=>r(n,0),Cn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),E6="arraybuffer";function pp(t,...n){return n.reduce((r,i)=>(t.hasOwnProperty(i)&&(r[i]=t[i]),r),{})}const T6=Cn.setTimeout,R6=Cn.clearTimeout;function Go(t,n){n.useNativeTimers?(t.setTimeoutFn=T6.bind(Cn),t.clearTimeoutFn=R6.bind(Cn)):(t.setTimeoutFn=Cn.setTimeout.bind(Cn),t.clearTimeoutFn=Cn.clearTimeout.bind(Cn))}const O6=1.33;function I6(t){return typeof t=="string"?$6(t):Math.ceil((t.byteLength||t.size)*O6)}function $6(t){let n=0,r=0;for(let i=0,o=t.length;i<o;i++)n=t.charCodeAt(i),n<128?r+=1:n<2048?r+=2:n<55296||n>=57344?r+=3:(i++,r+=4);return r}function gp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function P6(t){let n="";for(let r in t)t.hasOwnProperty(r)&&(n.length&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n}function D6(t){let n={},r=t.split("&");for(let i=0,o=r.length;i<o;i++){let l=r[i].split("=");n[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return n}class L6 extends Error{constructor(n,r,i){super(n),this.description=r,this.context=i,this.type="TransportError"}}class mu extends Oe{constructor(n){super(),this.writable=!1,Go(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,r,i){return super.emitReserved("error",new L6(n,r,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const r=gu(n,this.socket.binaryType);this.onPacket(r)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,r={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const r=P6(n);return r.length?"?"+r:""}}class B6 extends mu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const r=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||r()})),this.writable||(i++,this.once("drain",function(){--i||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};k6(n,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,w6(n,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=gp()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(n,r)}}let mp=!1;try{mp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const M6=mp;function N6(){}class z6 extends B6{constructor(n){if(super(n),typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||i!==n.port}}doWrite(n,r){const i=this.request({method:"POST",data:n});i.on("success",r),i.on("error",(o,l)=>{this.onError("xhr post error",o,l)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(r,i)=>{this.onError("xhr poll error",r,i)}),this.pollXhr=n}}class Hn extends Oe{constructor(n,r,i){super(),this.createRequest=n,Go(this,i),this._opts=i,this._method=i.method||"GET",this._uri=r,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var n;const r=pp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(r);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var o;i.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=Hn.requestsCount++,Hn.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=N6,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Hn.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Hn.requestsCount=0;Hn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Hd);else if(typeof addEventListener=="function"){const t="onpagehide"in Cn?"pagehide":"unload";addEventListener(t,Hd,!1)}}function Hd(){for(let t in Hn.requests)Hn.requests.hasOwnProperty(t)&&Hn.requests[t].abort()}const U6=function(){const t=vp({xdomain:!1});return t&&t.responseType!==null}();class F6 extends z6{constructor(n){super(n);const r=n&&n.forceBase64;this.supportsBinary=U6&&!r}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new Hn(vp,this.uri(),n)}}function vp(t){const n=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||M6))return new XMLHttpRequest}catch{}if(!n)try{return new Cn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const _p=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class j6 extends mu{get name(){return"websocket"}doOpen(){const n=this.uri(),r=this.opts.protocols,i=_p?{}:pp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,r,i)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const i=n[r],o=r===n.length-1;pu(i,this.supportsBinary,l=>{try{this.doWrite(i,l)}catch{}o&&Vo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=gp()),this.supportsBinary||(r.b64=1),this.createUri(n,r)}}const Sl=Cn.WebSocket||Cn.MozWebSocket;class W6 extends j6{createSocket(n,r,i){return _p?new Sl(n,r,i):r?new Sl(n,r):new Sl(n)}doWrite(n,r){this.ws.send(r)}}class H6 extends mu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const r=S6(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=n.readable.pipeThrough(r).getReader(),o=C6();o.readable.pipeTo(n.writable),this._writer=o.writable.getWriter();const l=()=>{i.read().then(({done:f,value:h})=>{f||(this.onPacket(h),l())}).catch(f=>{})};l();const u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this._writer.write(u).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const i=n[r],o=r===n.length-1;this._writer.write(i).then(()=>{o&&Vo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const q6={websocket:W6,webtransport:H6,polling:F6},V6=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,G6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jl(t){if(t.length>8e3)throw"URI too long";const n=t,r=t.indexOf("["),i=t.indexOf("]");r!=-1&&i!=-1&&(t=t.substring(0,r)+t.substring(r,i).replace(/:/g,";")+t.substring(i,t.length));let o=V6.exec(t||""),l={},u=14;for(;u--;)l[G6[u]]=o[u]||"";return r!=-1&&i!=-1&&(l.source=n,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=K6(l,l.path),l.queryKey=Z6(l,l.query),l}function K6(t,n){const r=/\/{2,9}/g,i=n.replace(r,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&i.splice(0,1),n.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Z6(t,n){const r={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,o,l){o&&(r[o]=l)}),r}const Wl=typeof addEventListener=="function"&&typeof removeEventListener=="function",yo=[];Wl&&addEventListener("offline",()=>{yo.forEach(t=>t())},!1);class Ir extends Oe{constructor(n,r){if(super(),this.binaryType=E6,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){const i=jl(n);r.hostname=i.host,r.secure=i.protocol==="https"||i.protocol==="wss",r.port=i.port,i.query&&(r.query=i.query)}else r.host&&(r.hostname=jl(r.host).host);Go(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(i=>{const o=i.prototype.name;this.transports.push(o),this._transportsByName[o]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=D6(this.opts.query)),Wl&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},yo.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const r=Object.assign({},this.opts.query);r.EIO=hp,r.transport=n,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&Ir.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Ir.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const o=this.writeBuffer[i].data;if(o&&(r+=I6(o)),i>0&&r>this._maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,Vo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,i){return this._sendPacket("message",n,r,i),this}send(n,r,i){return this._sendPacket("message",n,r,i),this}_sendPacket(n,r,i,o){if(typeof r=="function"&&(o=r,r=void 0),typeof i=="function"&&(o=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const l={type:n,data:r,options:i};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),o&&this.once("flush",o),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():n()}):this.upgrading?i():n()),this}_onError(n){if(Ir.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Wl&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=yo.indexOf(this._offlineEventListener);i!==-1&&yo.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}Ir.protocol=hp;class Y6 extends Ir{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let r=this.createTransport(n),i=!1;Ir.priorWebsocketSuccess=!1;const o=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!i)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Ir.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(_(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=r.name,this.emitReserved("upgradeError",b)}}))};function l(){i||(i=!0,_(),r.close(),r=null)}const u=m=>{const b=new Error("probe error: "+m);b.transport=r.name,l(),this.emitReserved("upgradeError",b)};function f(){u("transport closed")}function h(){u("socket closed")}function y(m){r&&m.name!==r.name&&l()}const _=()=>{r.removeListener("open",o),r.removeListener("error",u),r.removeListener("close",f),this.off("close",h),this.off("upgrading",y)};r.once("open",o),r.once("error",u),r.once("close",f),this.once("close",h),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{i||r.open()},200):r.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const r=[];for(let i=0;i<n.length;i++)~this.transports.indexOf(n[i])&&r.push(n[i]);return r}}let J6=class extends Y6{constructor(n,r={}){const i=typeof n=="object"?n:r;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(o=>q6[o]).filter(o=>!!o)),super(n,i)}};function X6(t,n="",r){let i=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),i=jl(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const l=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+l+":"+i.port+n,i.href=i.protocol+"://"+l+(r&&r.port===i.port?"":":"+i.port),i}const Q6=typeof ArrayBuffer=="function",tS=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,yp=Object.prototype.toString,eS=typeof Blob=="function"||typeof Blob<"u"&&yp.call(Blob)==="[object BlobConstructor]",nS=typeof File=="function"||typeof File<"u"&&yp.call(File)==="[object FileConstructor]";function vu(t){return Q6&&(t instanceof ArrayBuffer||tS(t))||eS&&t instanceof Blob||nS&&t instanceof File}function bo(t,n){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,i=t.length;r<i;r++)if(bo(t[r]))return!0;return!1}if(vu(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return bo(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&bo(t[r]))return!0;return!1}function rS(t){const n=[],r=t.data,i=t;return i.data=Hl(r,n),i.attachments=n.length,{packet:i,buffers:n}}function Hl(t,n){if(!t)return t;if(vu(t)){const r={_placeholder:!0,num:n.length};return n.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=Hl(t[i],n);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=Hl(t[i],n));return r}return t}function sS(t,n){return t.data=ql(t.data,n),delete t.attachments,t}function ql(t,n){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<n.length)return n[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=ql(t[r],n);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=ql(t[r],n));return t}const iS=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],oS=5;var te;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(te||(te={}));class aS{constructor(n){this.replacer=n}encode(n){return(n.type===te.EVENT||n.type===te.ACK)&&bo(n)?this.encodeAsBinary({type:n.type===te.EVENT?te.BINARY_EVENT:te.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let r=""+n.type;return(n.type===te.BINARY_EVENT||n.type===te.BINARY_ACK)&&(r+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(r+=n.nsp+","),n.id!=null&&(r+=n.id),n.data!=null&&(r+=JSON.stringify(n.data,this.replacer)),r}encodeAsBinary(n){const r=rS(n),i=this.encodeAsString(r.packet),o=r.buffers;return o.unshift(i),o}}function qd(t){return Object.prototype.toString.call(t)==="[object Object]"}class _u extends Oe{constructor(n){super(),this.reviver=n}add(n){let r;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(n);const i=r.type===te.BINARY_EVENT;i||r.type===te.BINARY_ACK?(r.type=i?te.EVENT:te.ACK,this.reconstructor=new lS(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(vu(n)||n.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(n),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let r=0;const i={type:Number(n.charAt(0))};if(te[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===te.BINARY_EVENT||i.type===te.BINARY_ACK){const l=r+1;for(;n.charAt(++r)!=="-"&&r!=n.length;);const u=n.substring(l,r);if(u!=Number(u)||n.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(u)}if(n.charAt(r+1)==="/"){const l=r+1;for(;++r&&!(n.charAt(r)===","||r===n.length););i.nsp=n.substring(l,r)}else i.nsp="/";const o=n.charAt(r+1);if(o!==""&&Number(o)==o){const l=r+1;for(;++r;){const u=n.charAt(r);if(u==null||Number(u)!=u){--r;break}if(r===n.length)break}i.id=Number(n.substring(l,r+1))}if(n.charAt(++r)){const l=this.tryParse(n.substr(r));if(_u.isPayloadValid(i.type,l))i.data=l;else throw new Error("invalid payload")}return i}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,r){switch(n){case te.CONNECT:return qd(r);case te.DISCONNECT:return r===void 0;case te.CONNECT_ERROR:return typeof r=="string"||qd(r);case te.EVENT:case te.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&iS.indexOf(r[0])===-1);case te.ACK:case te.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class lS{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const r=sS(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const uS=Object.freeze(Object.defineProperty({__proto__:null,Decoder:_u,Encoder:aS,get PacketType(){return te},protocol:oS},Symbol.toStringTag,{value:"Module"}));function Pn(t,n,r){return t.on(n,r),function(){t.off(n,r)}}const cS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class bp extends Oe{constructor(n,r,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[Pn(n,"open",this.onopen.bind(this)),Pn(n,"packet",this.onpacket.bind(this)),Pn(n,"error",this.onerror.bind(this)),Pn(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...r){var i,o,l;if(cS.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(r.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const u={type:te.EVENT,data:r};if(u.options={},u.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const _=this.ids++,m=r.pop();this._registerAckCallback(_,m),u.id=_}const f=(o=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||o===void 0?void 0:o.writable,h=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!f||(h?(this.notifyOutgoingListeners(u),this.packet(u)):this.sendBuffer.push(u)),this.flags={},this}_registerAckCallback(n,r){var i;const o=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(o===void 0){this.acks[n]=r;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let f=0;f<this.sendBuffer.length;f++)this.sendBuffer[f].id===n&&this.sendBuffer.splice(f,1);r.call(this,new Error("operation has timed out"))},o),u=(...f)=>{this.io.clearTimeoutFn(l),r.apply(this,f)};u.withError=!0,this.acks[n]=u}emitWithAck(n,...r){return new Promise((i,o)=>{const l=(u,f)=>u?o(u):i(f);l.withError=!0,r.push(l),this.emit(n,...r)})}_addToQueue(n){let r;typeof n[n.length-1]=="function"&&(r=n.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((o,...l)=>i!==this._queue[0]?void 0:(o!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(o)):(this._queue.shift(),r&&r(null,...l)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!n||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:te.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(i=>String(i.id)===n)){const i=this.acks[n];delete this.acks[n],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case te.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case te.EVENT:case te.BINARY_EVENT:this.onevent(n);break;case te.ACK:case te.BINARY_ACK:this.onack(n);break;case te.DISCONNECT:this.ondisconnect();break;case te.CONNECT_ERROR:this.destroy();const i=new Error(n.data.message);i.data=n.data.data,this.emitReserved("connect_error",i);break}}onevent(n){const r=n.data||[];n.id!=null&&r.push(this.ack(n.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const i of r)i.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const r=this;let i=!1;return function(...o){i||(i=!0,r.packet({type:te.ACK,id:n,data:o}))}}onack(n){const r=this.acks[n.id];typeof r=="function"&&(delete this.acks[n.id],r.withError&&n.data.unshift(null),r.apply(this,n.data))}onconnect(n,r){this.id=n,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:te.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const r=this._anyListeners;for(let i=0;i<r.length;i++)if(n===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const r=this._anyOutgoingListeners;for(let i=0;i<r.length;i++)if(n===r[i])return r.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const i of r)i.apply(this,n.data)}}}function Os(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Os.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*t);t=Math.floor(n*10)&1?t+r:t-r}return Math.min(t,this.max)|0};Os.prototype.reset=function(){this.attempts=0};Os.prototype.setMin=function(t){this.ms=t};Os.prototype.setMax=function(t){this.max=t};Os.prototype.setJitter=function(t){this.jitter=t};class Vl extends Oe{constructor(n,r){var i;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(r=n,n=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Go(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Os({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=n;const o=r.parser||uS;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var r;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(r=this.backoff)===null||r===void 0||r.setMin(n),this)}randomizationFactor(n){var r;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(r=this.backoff)===null||r===void 0||r.setJitter(n),this)}reconnectionDelayMax(n){var r;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(r=this.backoff)===null||r===void 0||r.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new J6(this.uri,this.opts);const r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const o=Pn(r,"open",function(){i.onopen(),n&&n()}),l=f=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",f),n?n(f):this.maybeReconnectOnOpen()},u=Pn(r,"error",l);if(this._timeout!==!1){const f=this._timeout,h=this.setTimeoutFn(()=>{o(),l(new Error("timeout")),r.close()},f);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(o),this.subs.push(u),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(Pn(n,"ping",this.onping.bind(this)),Pn(n,"data",this.ondata.bind(this)),Pn(n,"error",this.onerror.bind(this)),Pn(n,"close",this.onclose.bind(this)),Pn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(r){this.onclose("parse error",r)}}ondecoded(n){Vo(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,r){let i=this.nsps[n];return i?this._autoConnect&&!i.active&&i.connect():(i=new bp(this,n,r),this.nsps[n]=i),i}_destroy(n){const r=Object.keys(this.nsps);for(const i of r)if(this.nsps[i].active)return;this._close()}_packet(n){const r=this.encoder.encode(n);for(let i=0;i<r.length;i++)this.engine.write(r[i],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,r){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(o=>{o?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",o)):n.onreconnect()}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const Ys={};function Yr(t,n){typeof t=="object"&&(n=t,t=void 0),n=n||{};const r=X6(t,n.path||"/socket.io"),i=r.source,o=r.id,l=r.path,u=Ys[o]&&l in Ys[o].nsps,f=n.forceNew||n["force new connection"]||n.multiplex===!1||u;let h;return f?h=new Vl(i,n):(Ys[o]||(Ys[o]=new Vl(i,n)),h=Ys[o]),r.query&&!n.query&&(n.query=r.queryKey),h.socket(r.path,n)}Object.assign(Yr,{Manager:Vl,Socket:bp,io:Yr,connect:Yr});function fo(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xp={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,n){(function(r){t.exports=r()})(function(){return function r(i,o,l){function u(y,_){if(!o[y]){if(!i[y]){var m=typeof fo=="function"&&fo;if(!_&&m)return m(y,!0);if(f)return f(y,!0);var b=new Error("Cannot find module '"+y+"'");throw b.code="MODULE_NOT_FOUND",b}var v=o[y]={exports:{}};i[y][0].call(v.exports,function(C){var x=i[y][1][C];return u(x||C)},v,v.exports,r,i,o,l)}return o[y].exports}for(var f=typeof fo=="function"&&fo,h=0;h<l.length;h++)u(l[h]);return u}({1:[function(r,i,o){var l=r("./utils"),u=r("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(h){for(var y,_,m,b,v,C,x,T=[],E=0,D=h.length,M=D,N=l.getTypeOf(h)!=="string";E<h.length;)M=D-E,m=N?(y=h[E++],_=E<D?h[E++]:0,E<D?h[E++]:0):(y=h.charCodeAt(E++),_=E<D?h.charCodeAt(E++):0,E<D?h.charCodeAt(E++):0),b=y>>2,v=(3&y)<<4|_>>4,C=1<M?(15&_)<<2|m>>6:64,x=2<M?63&m:64,T.push(f.charAt(b)+f.charAt(v)+f.charAt(C)+f.charAt(x));return T.join("")},o.decode=function(h){var y,_,m,b,v,C,x=0,T=0,E="data:";if(h.substr(0,E.length)===E)throw new Error("Invalid base64 input, it looks like a data url.");var D,M=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===f.charAt(64)&&M--,h.charAt(h.length-2)===f.charAt(64)&&M--,M%1!=0)throw new Error("Invalid base64 input, bad content length.");for(D=u.uint8array?new Uint8Array(0|M):new Array(0|M);x<h.length;)y=f.indexOf(h.charAt(x++))<<2|(b=f.indexOf(h.charAt(x++)))>>4,_=(15&b)<<4|(v=f.indexOf(h.charAt(x++)))>>2,m=(3&v)<<6|(C=f.indexOf(h.charAt(x++))),D[T++]=y,v!==64&&(D[T++]=_),C!==64&&(D[T++]=m);return D}},{"./support":30,"./utils":32}],2:[function(r,i,o){var l=r("./external"),u=r("./stream/DataWorker"),f=r("./stream/Crc32Probe"),h=r("./stream/DataLengthProbe");function y(_,m,b,v,C){this.compressedSize=_,this.uncompressedSize=m,this.crc32=b,this.compression=v,this.compressedContent=C}y.prototype={getContentWorker:function(){var _=new u(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),m=this;return _.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_},getCompressedWorker:function(){return new u(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(_,m,b){return _.pipe(new f).pipe(new h("uncompressedSize")).pipe(m.compressWorker(b)).pipe(new h("compressedSize")).withStreamInfo("compression",m)},i.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,i,o){var l=r("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},o.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,i,o){var l=r("./utils"),u=function(){for(var f,h=[],y=0;y<256;y++){f=y;for(var _=0;_<8;_++)f=1&f?3988292384^f>>>1:f>>>1;h[y]=f}return h}();i.exports=function(f,h){return f!==void 0&&f.length?l.getTypeOf(f)!=="string"?function(y,_,m,b){var v=u,C=b+m;y^=-1;for(var x=b;x<C;x++)y=y>>>8^v[255&(y^_[x])];return-1^y}(0|h,f,f.length,0):function(y,_,m,b){var v=u,C=b+m;y^=-1;for(var x=b;x<C;x++)y=y>>>8^v[255&(y^_.charCodeAt(x))];return-1^y}(0|h,f,f.length,0):0}},{"./utils":32}],5:[function(r,i,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(r,i,o){var l=null;l=typeof Promise<"u"?Promise:r("lie"),i.exports={Promise:l}},{lie:37}],7:[function(r,i,o){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=r("pako"),f=r("./utils"),h=r("./stream/GenericWorker"),y=l?"uint8array":"array";function _(m,b){h.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=b,this.meta={}}o.magic="\b\0",f.inherits(_,h),_.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(f.transformTo(y,m.data),!1)},_.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},_.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(b){m.push({data:b,meta:m.meta})}},o.compressWorker=function(m){return new _("Deflate",m)},o.uncompressWorker=function(){return new _("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,i,o){function l(v,C){var x,T="";for(x=0;x<C;x++)T+=String.fromCharCode(255&v),v>>>=8;return T}function u(v,C,x,T,E,D){var M,N,B=v.file,Y=v.compression,V=D!==y.utf8encode,tt=f.transformTo("string",D(B.name)),z=f.transformTo("string",y.utf8encode(B.name)),I=B.comment,G=f.transformTo("string",D(I)),k=f.transformTo("string",y.utf8encode(I)),$=z.length!==B.name.length,g=k.length!==I.length,rt="",kt="",ht="",Et=B.dir,xt=B.date,$t={crc32:0,compressedSize:0,uncompressedSize:0};C&&!x||($t.crc32=v.crc32,$t.compressedSize=v.compressedSize,$t.uncompressedSize=v.uncompressedSize);var it=0;C&&(it|=8),V||!$&&!g||(it|=2048);var st=0,Pt=0;Et&&(st|=16),E==="UNIX"?(Pt=798,st|=function(ot,gt){var J=ot;return ot||(J=gt?16893:33204),(65535&J)<<16}(B.unixPermissions,Et)):(Pt=20,st|=function(ot){return 63&(ot||0)}(B.dosPermissions)),M=xt.getUTCHours(),M<<=6,M|=xt.getUTCMinutes(),M<<=5,M|=xt.getUTCSeconds()/2,N=xt.getUTCFullYear()-1980,N<<=4,N|=xt.getUTCMonth()+1,N<<=5,N|=xt.getUTCDate(),$&&(kt=l(1,1)+l(_(tt),4)+z,rt+="up"+l(kt.length,2)+kt),g&&(ht=l(1,1)+l(_(G),4)+k,rt+="uc"+l(ht.length,2)+ht);var Tt="";return Tt+=`
\0`,Tt+=l(it,2),Tt+=Y.magic,Tt+=l(M,2),Tt+=l(N,2),Tt+=l($t.crc32,4),Tt+=l($t.compressedSize,4),Tt+=l($t.uncompressedSize,4),Tt+=l(tt.length,2),Tt+=l(rt.length,2),{fileRecord:m.LOCAL_FILE_HEADER+Tt+tt+rt,dirRecord:m.CENTRAL_FILE_HEADER+l(Pt,2)+Tt+l(G.length,2)+"\0\0\0\0"+l(st,4)+l(T,4)+tt+rt+G}}var f=r("../utils"),h=r("../stream/GenericWorker"),y=r("../utf8"),_=r("../crc32"),m=r("../signature");function b(v,C,x,T){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=C,this.zipPlatform=x,this.encodeFileName=T,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}f.inherits(b,h),b.prototype.push=function(v){var C=v.meta.percent||0,x=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,h.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:x?(C+100*(x-T-1))/x:100}}))},b.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var C=this.streamFiles&&!v.file.dir;if(C){var x=u(v,C,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(v){this.accumulate=!1;var C=this.streamFiles&&!v.file.dir,x=u(v,C,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),C)this.push({data:function(T){return m.DATA_DESCRIPTOR+l(T.crc32,4)+l(T.compressedSize,4)+l(T.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var v=this.bytesWritten,C=0;C<this.dirRecords.length;C++)this.push({data:this.dirRecords[C],meta:{percent:100}});var x=this.bytesWritten-v,T=function(E,D,M,N,B){var Y=f.transformTo("string",B(N));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(E,2)+l(E,2)+l(D,4)+l(M,4)+l(Y.length,2)+Y}(this.dirRecords.length,x,v,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(v){this._sources.push(v);var C=this;return v.on("data",function(x){C.processChunk(x)}),v.on("end",function(){C.closedSource(C.previous.streamInfo),C._sources.length?C.prepareNextSource():C.end()}),v.on("error",function(x){C.error(x)}),this},b.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(v){var C=this._sources;if(!h.prototype.error.call(this,v))return!1;for(var x=0;x<C.length;x++)try{C[x].error(v)}catch{}return!0},b.prototype.lock=function(){h.prototype.lock.call(this);for(var v=this._sources,C=0;C<v.length;C++)v[C].lock()},i.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,i,o){var l=r("../compressions"),u=r("./ZipFileWorker");o.generateWorker=function(f,h,y){var _=new u(h.streamFiles,y,h.platform,h.encodeFileName),m=0;try{f.forEach(function(b,v){m++;var C=function(D,M){var N=D||M,B=l[N];if(!B)throw new Error(N+" is not a valid compression method !");return B}(v.options.compression,h.compression),x=v.options.compressionOptions||h.compressionOptions||{},T=v.dir,E=v.date;v._compressWorker(C,x).withStreamInfo("file",{name:b,dir:T,date:E,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(_)}),_.entriesCount=m}catch(b){_.error(b)}return _}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,i,o){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new l;for(var f in this)typeof this[f]!="function"&&(u[f]=this[f]);return u}}(l.prototype=r("./object")).loadAsync=r("./load"),l.support=r("./support"),l.defaults=r("./defaults"),l.version="3.10.1",l.loadAsync=function(u,f){return new l().loadAsync(u,f)},l.external=r("./external"),i.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,i,o){var l=r("./utils"),u=r("./external"),f=r("./utf8"),h=r("./zipEntries"),y=r("./stream/Crc32Probe"),_=r("./nodejsUtils");function m(b){return new u.Promise(function(v,C){var x=b.decompressed.getContentWorker().pipe(new y);x.on("error",function(T){C(T)}).on("end",function(){x.streamInfo.crc32!==b.decompressed.crc32?C(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}i.exports=function(b,v){var C=this;return v=l.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:f.utf8decode}),_.isNode&&_.isStream(b)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",b,!0,v.optimizedBinaryString,v.base64).then(function(x){var T=new h(v);return T.load(x),T}).then(function(x){var T=[u.Promise.resolve(x)],E=x.files;if(v.checkCRC32)for(var D=0;D<E.length;D++)T.push(m(E[D]));return u.Promise.all(T)}).then(function(x){for(var T=x.shift(),E=T.files,D=0;D<E.length;D++){var M=E[D],N=M.fileNameStr,B=l.resolve(M.fileNameStr);C.file(B,M.decompressed,{binary:!0,optimizedBinaryString:!0,date:M.date,dir:M.dir,comment:M.fileCommentStr.length?M.fileCommentStr:null,unixPermissions:M.unixPermissions,dosPermissions:M.dosPermissions,createFolders:v.createFolders}),M.dir||(C.file(B).unsafeOriginalName=N)}return T.zipComment.length&&(C.comment=T.zipComment),C})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,i,o){var l=r("../utils"),u=r("../stream/GenericWorker");function f(h,y){u.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(y)}l.inherits(f,u),f.prototype._bindStream=function(h){var y=this;(this._stream=h).pause(),h.on("data",function(_){y.push({data:_,meta:{percent:0}})}).on("error",function(_){y.isPaused?this.generatedError=_:y.error(_)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},f.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},f.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=f},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,i,o){var l=r("readable-stream").Readable;function u(f,h,y){l.call(this,h),this._helper=f;var _=this;f.on("data",function(m,b){_.push(m)||_._helper.pause(),y&&y(b)}).on("error",function(m){_.emit("error",m)}).on("end",function(){_.push(null)})}r("../utils").inherits(u,l),u.prototype._read=function(){this._helper.resume()},i.exports=u},{"../utils":32,"readable-stream":16}],14:[function(r,i,o){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,u);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,u)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var u=new Buffer(l);return u.fill(0),u},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(r,i,o){function l(B,Y,V){var tt,z=f.getTypeOf(Y),I=f.extend(V||{},_);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(B=E(B)),I.createFolders&&(tt=T(B))&&D.call(this,tt,!0);var G=z==="string"&&I.binary===!1&&I.base64===!1;V&&V.binary!==void 0||(I.binary=!G),(Y instanceof m&&Y.uncompressedSize===0||I.dir||!Y||Y.length===0)&&(I.base64=!1,I.binary=!0,Y="",I.compression="STORE",z="string");var k=null;k=Y instanceof m||Y instanceof h?Y:C.isNode&&C.isStream(Y)?new x(B,Y):f.prepareContent(B,Y,I.binary,I.optimizedBinaryString,I.base64);var $=new b(B,k,I);this.files[B]=$}var u=r("./utf8"),f=r("./utils"),h=r("./stream/GenericWorker"),y=r("./stream/StreamHelper"),_=r("./defaults"),m=r("./compressedObject"),b=r("./zipObject"),v=r("./generate"),C=r("./nodejsUtils"),x=r("./nodejs/NodejsStreamInputAdapter"),T=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var Y=B.lastIndexOf("/");return 0<Y?B.substring(0,Y):""},E=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},D=function(B,Y){return Y=Y!==void 0?Y:_.createFolders,B=E(B),this.files[B]||l.call(this,B,null,{dir:!0,createFolders:Y}),this.files[B]};function M(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var Y,V,tt;for(Y in this.files)tt=this.files[Y],(V=Y.slice(this.root.length,Y.length))&&Y.slice(0,this.root.length)===this.root&&B(V,tt)},filter:function(B){var Y=[];return this.forEach(function(V,tt){B(V,tt)&&Y.push(tt)}),Y},file:function(B,Y,V){if(arguments.length!==1)return B=this.root+B,l.call(this,B,Y,V),this;if(M(B)){var tt=B;return this.filter(function(I,G){return!G.dir&&tt.test(I)})}var z=this.files[this.root+B];return z&&!z.dir?z:null},folder:function(B){if(!B)return this;if(M(B))return this.filter(function(z,I){return I.dir&&B.test(z)});var Y=this.root+B,V=D.call(this,Y),tt=this.clone();return tt.root=V.name,tt},remove:function(B){B=this.root+B;var Y=this.files[B];if(Y||(B.slice(-1)!=="/"&&(B+="/"),Y=this.files[B]),Y&&!Y.dir)delete this.files[B];else for(var V=this.filter(function(z,I){return I.name.slice(0,B.length)===B}),tt=0;tt<V.length;tt++)delete this.files[V[tt].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var Y,V={};try{if((V=f.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=V.type.toLowerCase(),V.compression=V.compression.toUpperCase(),V.type==="binarystring"&&(V.type="string"),!V.type)throw new Error("No output type specified.");f.checkSupport(V.type),V.platform!=="darwin"&&V.platform!=="freebsd"&&V.platform!=="linux"&&V.platform!=="sunos"||(V.platform="UNIX"),V.platform==="win32"&&(V.platform="DOS");var tt=V.comment||this.comment||"";Y=v.generateWorker(this,V,tt)}catch(z){(Y=new h("error")).error(z)}return new y(Y,V.type||"string",V.mimeType)},generateAsync:function(B,Y){return this.generateInternalStream(B).accumulate(Y)},generateNodeStream:function(B,Y){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(Y)}};i.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,i,o){i.exports=r("stream")},{stream:void 0}],17:[function(r,i,o){var l=r("./DataReader");function u(f){l.call(this,f);for(var h=0;h<this.data.length;h++)f[h]=255&f[h]}r("../utils").inherits(u,l),u.prototype.byteAt=function(f){return this.data[this.zero+f]},u.prototype.lastIndexOfSignature=function(f){for(var h=f.charCodeAt(0),y=f.charCodeAt(1),_=f.charCodeAt(2),m=f.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===h&&this.data[b+1]===y&&this.data[b+2]===_&&this.data[b+3]===m)return b-this.zero;return-1},u.prototype.readAndCheckSignature=function(f){var h=f.charCodeAt(0),y=f.charCodeAt(1),_=f.charCodeAt(2),m=f.charCodeAt(3),b=this.readData(4);return h===b[0]&&y===b[1]&&_===b[2]&&m===b[3]},u.prototype.readData=function(f){if(this.checkOffset(f),f===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,h},i.exports=u},{"../utils":32,"./DataReader":18}],18:[function(r,i,o){var l=r("../utils");function u(f){this.data=f,this.length=f.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(f){this.checkIndex(this.index+f)},checkIndex:function(f){if(this.length<this.zero+f||f<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+f+"). Corrupted zip ?")},setIndex:function(f){this.checkIndex(f),this.index=f},skip:function(f){this.setIndex(this.index+f)},byteAt:function(){},readInt:function(f){var h,y=0;for(this.checkOffset(f),h=this.index+f-1;h>=this.index;h--)y=(y<<8)+this.byteAt(h);return this.index+=f,y},readString:function(f){return l.transformTo("string",this.readData(f))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var f=this.readInt(4);return new Date(Date.UTC(1980+(f>>25&127),(f>>21&15)-1,f>>16&31,f>>11&31,f>>5&63,(31&f)<<1))}},i.exports=u},{"../utils":32}],19:[function(r,i,o){var l=r("./Uint8ArrayReader");function u(f){l.call(this,f)}r("../utils").inherits(u,l),u.prototype.readData=function(f){this.checkOffset(f);var h=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,h},i.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,i,o){var l=r("./DataReader");function u(f){l.call(this,f)}r("../utils").inherits(u,l),u.prototype.byteAt=function(f){return this.data.charCodeAt(this.zero+f)},u.prototype.lastIndexOfSignature=function(f){return this.data.lastIndexOf(f)-this.zero},u.prototype.readAndCheckSignature=function(f){return f===this.readData(4)},u.prototype.readData=function(f){this.checkOffset(f);var h=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,h},i.exports=u},{"../utils":32,"./DataReader":18}],21:[function(r,i,o){var l=r("./ArrayReader");function u(f){l.call(this,f)}r("../utils").inherits(u,l),u.prototype.readData=function(f){if(this.checkOffset(f),f===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+f);return this.index+=f,h},i.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(r,i,o){var l=r("../utils"),u=r("../support"),f=r("./ArrayReader"),h=r("./StringReader"),y=r("./NodeBufferReader"),_=r("./Uint8ArrayReader");i.exports=function(m){var b=l.getTypeOf(m);return l.checkSupport(b),b!=="string"||u.uint8array?b==="nodebuffer"?new y(m):u.uint8array?new _(l.transformTo("uint8array",m)):new f(l.transformTo("array",m)):new h(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,i,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,i,o){var l=r("./GenericWorker"),u=r("../utils");function f(h){l.call(this,"ConvertWorker to "+h),this.destType=h}u.inherits(f,l),f.prototype.processChunk=function(h){this.push({data:u.transformTo(this.destType,h.data),meta:h.meta})},i.exports=f},{"../utils":32,"./GenericWorker":28}],25:[function(r,i,o){var l=r("./GenericWorker"),u=r("../crc32");function f(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(f,l),f.prototype.processChunk=function(h){this.streamInfo.crc32=u(h.data,this.streamInfo.crc32||0),this.push(h)},i.exports=f},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,i,o){var l=r("../utils"),u=r("./GenericWorker");function f(h){u.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}l.inherits(f,u),f.prototype.processChunk=function(h){if(h){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+h.data.length}u.prototype.processChunk.call(this,h)},i.exports=f},{"../utils":32,"./GenericWorker":28}],27:[function(r,i,o){var l=r("../utils"),u=r("./GenericWorker");function f(h){u.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(_){y.dataIsReady=!0,y.data=_,y.max=_&&_.length||0,y.type=l.getTypeOf(_),y.isPaused||y._tickAndRepeat()},function(_){y.error(_)})}l.inherits(f,u),f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},f.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},f.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},f.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,y);break;case"uint8array":h=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":h=this.data.slice(this.index,y)}return this.index=y,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=f},{"../utils":32,"./GenericWorker":28}],28:[function(r,i,o){function l(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,f){return this._listeners[u].push(f),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,f){if(this._listeners[u])for(var h=0;h<this._listeners[u].length;h++)this._listeners[u][h].call(this,f)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var f=this;return u.on("data",function(h){f.processChunk(h)}),u.on("end",function(){f.end()}),u.on("error",function(h){f.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,f){return this.extraStreamInfo[u]=f,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},i.exports=l},{}],29:[function(r,i,o){var l=r("../utils"),u=r("./ConvertWorker"),f=r("./GenericWorker"),h=r("../base64"),y=r("../support"),_=r("../external"),m=null;if(y.nodestream)try{m=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(C,x){return new _.Promise(function(T,E){var D=[],M=C._internalType,N=C._outputType,B=C._mimeType;C.on("data",function(Y,V){D.push(Y),x&&x(V)}).on("error",function(Y){D=[],E(Y)}).on("end",function(){try{var Y=function(V,tt,z){switch(V){case"blob":return l.newBlob(l.transformTo("arraybuffer",tt),z);case"base64":return h.encode(tt);default:return l.transformTo(V,tt)}}(N,function(V,tt){var z,I=0,G=null,k=0;for(z=0;z<tt.length;z++)k+=tt[z].length;switch(V){case"string":return tt.join("");case"array":return Array.prototype.concat.apply([],tt);case"uint8array":for(G=new Uint8Array(k),z=0;z<tt.length;z++)G.set(tt[z],I),I+=tt[z].length;return G;case"nodebuffer":return Buffer.concat(tt);default:throw new Error("concat : unsupported type '"+V+"'")}}(M,D),B);T(Y)}catch(V){E(V)}D=[]}).resume()})}function v(C,x,T){var E=x;switch(x){case"blob":case"arraybuffer":E="uint8array";break;case"base64":E="string"}try{this._internalType=E,this._outputType=x,this._mimeType=T,l.checkSupport(E),this._worker=C.pipe(new u(E)),C.lock()}catch(D){this._worker=new f("error"),this._worker.error(D)}}v.prototype={accumulate:function(C){return b(this,C)},on:function(C,x){var T=this;return C==="data"?this._worker.on(C,function(E){x.call(T,E.data,E.meta)}):this._worker.on(C,function(){l.delay(x,arguments,T)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(C){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},C)}},i.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,i,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var l=new ArrayBuffer(0);try{o.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(l),o.blob=u.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!r("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(r,i,o){for(var l=r("./utils"),u=r("./support"),f=r("./nodejsUtils"),h=r("./stream/GenericWorker"),y=new Array(256),_=0;_<256;_++)y[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;y[254]=y[254]=1;function m(){h.call(this,"utf-8 decode"),this.leftOver=null}function b(){h.call(this,"utf-8 encode")}o.utf8encode=function(v){return u.nodebuffer?f.newBufferFrom(v,"utf-8"):function(C){var x,T,E,D,M,N=C.length,B=0;for(D=0;D<N;D++)(64512&(T=C.charCodeAt(D)))==55296&&D+1<N&&(64512&(E=C.charCodeAt(D+1)))==56320&&(T=65536+(T-55296<<10)+(E-56320),D++),B+=T<128?1:T<2048?2:T<65536?3:4;for(x=u.uint8array?new Uint8Array(B):new Array(B),D=M=0;M<B;D++)(64512&(T=C.charCodeAt(D)))==55296&&D+1<N&&(64512&(E=C.charCodeAt(D+1)))==56320&&(T=65536+(T-55296<<10)+(E-56320),D++),T<128?x[M++]=T:(T<2048?x[M++]=192|T>>>6:(T<65536?x[M++]=224|T>>>12:(x[M++]=240|T>>>18,x[M++]=128|T>>>12&63),x[M++]=128|T>>>6&63),x[M++]=128|63&T);return x}(v)},o.utf8decode=function(v){return u.nodebuffer?l.transformTo("nodebuffer",v).toString("utf-8"):function(C){var x,T,E,D,M=C.length,N=new Array(2*M);for(x=T=0;x<M;)if((E=C[x++])<128)N[T++]=E;else if(4<(D=y[E]))N[T++]=65533,x+=D-1;else{for(E&=D===2?31:D===3?15:7;1<D&&x<M;)E=E<<6|63&C[x++],D--;1<D?N[T++]=65533:E<65536?N[T++]=E:(E-=65536,N[T++]=55296|E>>10&1023,N[T++]=56320|1023&E)}return N.length!==T&&(N.subarray?N=N.subarray(0,T):N.length=T),l.applyFromCharCode(N)}(v=l.transformTo(u.uint8array?"uint8array":"array",v))},l.inherits(m,h),m.prototype.processChunk=function(v){var C=l.transformTo(u.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var x=C;(C=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),C.set(x,this.leftOver.length)}else C=this.leftOver.concat(C);this.leftOver=null}var T=function(D,M){var N;for((M=M||D.length)>D.length&&(M=D.length),N=M-1;0<=N&&(192&D[N])==128;)N--;return N<0||N===0?M:N+y[D[N]]>M?N:M}(C),E=C;T!==C.length&&(u.uint8array?(E=C.subarray(0,T),this.leftOver=C.subarray(T,C.length)):(E=C.slice(0,T),this.leftOver=C.slice(T,C.length))),this.push({data:o.utf8decode(E),meta:v.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=m,l.inherits(b,h),b.prototype.processChunk=function(v){this.push({data:o.utf8encode(v.data),meta:v.meta})},o.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,i,o){var l=r("./support"),u=r("./base64"),f=r("./nodejsUtils"),h=r("./external");function y(x){return x}function _(x,T){for(var E=0;E<x.length;++E)T[E]=255&x.charCodeAt(E);return T}r("setimmediate"),o.newBlob=function(x,T){o.checkSupport("blob");try{return new Blob([x],{type:T})}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return E.append(x),E.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(x,T,E){var D=[],M=0,N=x.length;if(N<=E)return String.fromCharCode.apply(null,x);for(;M<N;)T==="array"||T==="nodebuffer"?D.push(String.fromCharCode.apply(null,x.slice(M,Math.min(M+E,N)))):D.push(String.fromCharCode.apply(null,x.subarray(M,Math.min(M+E,N)))),M+=E;return D.join("")},stringifyByChar:function(x){for(var T="",E=0;E<x.length;E++)T+=String.fromCharCode(x[E]);return T},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,f.allocBuffer(1)).length===1}catch{return!1}}()}};function b(x){var T=65536,E=o.getTypeOf(x),D=!0;if(E==="uint8array"?D=m.applyCanBeUsed.uint8array:E==="nodebuffer"&&(D=m.applyCanBeUsed.nodebuffer),D)for(;1<T;)try{return m.stringifyByChunk(x,E,T)}catch{T=Math.floor(T/2)}return m.stringifyByChar(x)}function v(x,T){for(var E=0;E<x.length;E++)T[E]=x[E];return T}o.applyFromCharCode=b;var C={};C.string={string:y,array:function(x){return _(x,new Array(x.length))},arraybuffer:function(x){return C.string.uint8array(x).buffer},uint8array:function(x){return _(x,new Uint8Array(x.length))},nodebuffer:function(x){return _(x,f.allocBuffer(x.length))}},C.array={string:b,array:y,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return f.newBufferFrom(x)}},C.arraybuffer={string:function(x){return b(new Uint8Array(x))},array:function(x){return v(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:y,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return f.newBufferFrom(new Uint8Array(x))}},C.uint8array={string:b,array:function(x){return v(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:y,nodebuffer:function(x){return f.newBufferFrom(x)}},C.nodebuffer={string:b,array:function(x){return v(x,new Array(x.length))},arraybuffer:function(x){return C.nodebuffer.uint8array(x).buffer},uint8array:function(x){return v(x,new Uint8Array(x.length))},nodebuffer:y},o.transformTo=function(x,T){if(T=T||"",!x)return T;o.checkSupport(x);var E=o.getTypeOf(T);return C[E][x](T)},o.resolve=function(x){for(var T=x.split("/"),E=[],D=0;D<T.length;D++){var M=T[D];M==="."||M===""&&D!==0&&D!==T.length-1||(M===".."?E.pop():E.push(M))}return E.join("/")},o.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":l.nodebuffer&&f.isBuffer(x)?"nodebuffer":l.uint8array&&x instanceof Uint8Array?"uint8array":l.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(x){if(!l[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(x){var T,E,D="";for(E=0;E<(x||"").length;E++)D+="\\x"+((T=x.charCodeAt(E))<16?"0":"")+T.toString(16).toUpperCase();return D},o.delay=function(x,T,E){setImmediate(function(){x.apply(E||null,T||[])})},o.inherits=function(x,T){function E(){}E.prototype=T.prototype,x.prototype=new E},o.extend=function(){var x,T,E={};for(x=0;x<arguments.length;x++)for(T in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],T)&&E[T]===void 0&&(E[T]=arguments[x][T]);return E},o.prepareContent=function(x,T,E,D,M){return h.Promise.resolve(T).then(function(N){return l.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new h.Promise(function(B,Y){var V=new FileReader;V.onload=function(tt){B(tt.target.result)},V.onerror=function(tt){Y(tt.target.error)},V.readAsArrayBuffer(N)}):N}).then(function(N){var B=o.getTypeOf(N);return B?(B==="arraybuffer"?N=o.transformTo("uint8array",N):B==="string"&&(M?N=u.decode(N):E&&D!==!0&&(N=function(Y){return _(Y,l.uint8array?new Uint8Array(Y.length):new Array(Y.length))}(N))),N):h.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,i,o){var l=r("./reader/readerFor"),u=r("./utils"),f=r("./signature"),h=r("./zipEntry"),y=r("./support");function _(m){this.files=[],this.loadOptions=m}_.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(b)+", expected "+u.pretty(m)+")")}},isSignature:function(m,b){var v=this.reader.index;this.reader.setIndex(m);var C=this.reader.readString(4)===b;return this.reader.setIndex(v),C},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),b=y.uint8array?"uint8array":"array",v=u.transformTo(b,m);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,b,v,C=this.zip64EndOfCentralSize-44;0<C;)m=this.reader.readInt(2),b=this.reader.readInt(4),v=this.reader.readData(b),this.zip64ExtensibleData[m]={id:m,length:b,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,b;for(m=0;m<this.files.length;m++)b=this.files[m],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(f.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(f.CENTRAL_FILE_HEADER);)(m=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(f.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,f.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var b=m;if(this.checkSignature(f.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,f.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var C=b-v;if(0<C)this.isSignature(b,f.CENTRAL_FILE_HEADER)||(this.reader.zero=C);else if(C<0)throw new Error("Corrupted zip: missing "+Math.abs(C)+" bytes.")},prepareReader:function(m){this.reader=l(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=_},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,i,o){var l=r("./reader/readerFor"),u=r("./utils"),f=r("./compressedObject"),h=r("./crc32"),y=r("./utf8"),_=r("./compressions"),m=r("./support");function b(v,C){this.options=v,this.loadOptions=C}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var C,x;if(v.skip(22),this.fileNameLength=v.readInt(2),x=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((C=function(T){for(var E in _)if(Object.prototype.hasOwnProperty.call(_,E)&&_[E].magic===T)return _[E];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new f(this.compressedSize,this.uncompressedSize,this.crc32,C,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var C=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(C),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=l(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var C,x,T,E=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<E;)C=v.readInt(2),x=v.readInt(2),T=v.readData(x),this.extraFields[C]={id:C,length:x,value:T};v.setIndex(E)},handleUTF8:function(){var v=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var C=this.findExtraFieldUnicodePath();if(C!==null)this.fileNameStr=C;else{var x=u.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var E=u.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(E)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var C=l(v.value);return C.readInt(1)!==1||h(this.fileName)!==C.readInt(4)?null:y.utf8decode(C.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var C=l(v.value);return C.readInt(1)!==1||h(this.fileComment)!==C.readInt(4)?null:y.utf8decode(C.readData(v.length-5))}return null}},i.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,i,o){function l(C,x,T){this.name=C,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=x,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var u=r("./stream/StreamHelper"),f=r("./stream/DataWorker"),h=r("./utf8"),y=r("./compressedObject"),_=r("./stream/GenericWorker");l.prototype={internalStream:function(C){var x=null,T="string";try{if(!C)throw new Error("No output type specified.");var E=(T=C.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),x=this._decompressWorker();var D=!this._dataBinary;D&&!E&&(x=x.pipe(new h.Utf8EncodeWorker)),!D&&E&&(x=x.pipe(new h.Utf8DecodeWorker))}catch(M){(x=new _("error")).error(M)}return new u(x,T,"")},async:function(C,x){return this.internalStream(C).accumulate(x)},nodeStream:function(C,x){return this.internalStream(C||"nodebuffer").toNodejsStream(x)},_compressWorker:function(C,x){if(this._data instanceof y&&this._data.compression.magic===C.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new h.Utf8EncodeWorker)),y.createWorkerFrom(T,C,x)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof _?this._data:new f(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<m.length;v++)l.prototype[m[v]]=b;i.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,i,o){(function(l){var u,f,h=l.MutationObserver||l.WebKitMutationObserver;if(h){var y=0,_=new h(C),m=l.document.createTextNode("");_.observe(m,{characterData:!0}),u=function(){m.data=y=++y%2}}else if(l.setImmediate||l.MessageChannel===void 0)u="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var x=l.document.createElement("script");x.onreadystatechange=function(){C(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},l.document.documentElement.appendChild(x)}:function(){setTimeout(C,0)};else{var b=new l.MessageChannel;b.port1.onmessage=C,u=function(){b.port2.postMessage(0)}}var v=[];function C(){var x,T;f=!0;for(var E=v.length;E;){for(T=v,v=[],x=-1;++x<E;)T[x]();E=v.length}f=!1}i.exports=function(x){v.push(x)!==1||f||u()}}).call(this,typeof cr<"u"?cr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,i,o){var l=r("immediate");function u(){}var f={},h=["REJECTED"],y=["FULFILLED"],_=["PENDING"];function m(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,E!==u&&x(this,E)}function b(E,D,M){this.promise=E,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof M=="function"&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}function v(E,D,M){l(function(){var N;try{N=D(M)}catch(B){return f.reject(E,B)}N===E?f.reject(E,new TypeError("Cannot resolve promise with itself")):f.resolve(E,N)})}function C(E){var D=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof D=="function")return function(){D.apply(E,arguments)}}function x(E,D){var M=!1;function N(V){M||(M=!0,f.reject(E,V))}function B(V){M||(M=!0,f.resolve(E,V))}var Y=T(function(){D(B,N)});Y.status==="error"&&N(Y.value)}function T(E,D){var M={};try{M.value=E(D),M.status="success"}catch(N){M.status="error",M.value=N}return M}(i.exports=m).prototype.finally=function(E){if(typeof E!="function")return this;var D=this.constructor;return this.then(function(M){return D.resolve(E()).then(function(){return M})},function(M){return D.resolve(E()).then(function(){throw M})})},m.prototype.catch=function(E){return this.then(null,E)},m.prototype.then=function(E,D){if(typeof E!="function"&&this.state===y||typeof D!="function"&&this.state===h)return this;var M=new this.constructor(u);return this.state!==_?v(M,this.state===y?E:D,this.outcome):this.queue.push(new b(M,E,D)),M},b.prototype.callFulfilled=function(E){f.resolve(this.promise,E)},b.prototype.otherCallFulfilled=function(E){v(this.promise,this.onFulfilled,E)},b.prototype.callRejected=function(E){f.reject(this.promise,E)},b.prototype.otherCallRejected=function(E){v(this.promise,this.onRejected,E)},f.resolve=function(E,D){var M=T(C,D);if(M.status==="error")return f.reject(E,M.value);var N=M.value;if(N)x(E,N);else{E.state=y,E.outcome=D;for(var B=-1,Y=E.queue.length;++B<Y;)E.queue[B].callFulfilled(D)}return E},f.reject=function(E,D){E.state=h,E.outcome=D;for(var M=-1,N=E.queue.length;++M<N;)E.queue[M].callRejected(D);return E},m.resolve=function(E){return E instanceof this?E:f.resolve(new this(u),E)},m.reject=function(E){var D=new this(u);return f.reject(D,E)},m.all=function(E){var D=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=E.length,N=!1;if(!M)return this.resolve([]);for(var B=new Array(M),Y=0,V=-1,tt=new this(u);++V<M;)z(E[V],V);return tt;function z(I,G){D.resolve(I).then(function(k){B[G]=k,++Y!==M||N||(N=!0,f.resolve(tt,B))},function(k){N||(N=!0,f.reject(tt,k))})}},m.race=function(E){var D=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=E.length,N=!1;if(!M)return this.resolve([]);for(var B=-1,Y=new this(u);++B<M;)V=E[B],D.resolve(V).then(function(tt){N||(N=!0,f.resolve(Y,tt))},function(tt){N||(N=!0,f.reject(Y,tt))});var V;return Y}},{immediate:36}],38:[function(r,i,o){var l={};(0,r("./lib/utils/common").assign)(l,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),i.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,i,o){var l=r("./zlib/deflate"),u=r("./utils/common"),f=r("./utils/strings"),h=r("./zlib/messages"),y=r("./zlib/zstream"),_=Object.prototype.toString,m=0,b=-1,v=0,C=8;function x(E){if(!(this instanceof x))return new x(E);this.options=u.assign({level:b,method:C,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},E||{});var D=this.options;D.raw&&0<D.windowBits?D.windowBits=-D.windowBits:D.gzip&&0<D.windowBits&&D.windowBits<16&&(D.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var M=l.deflateInit2(this.strm,D.level,D.method,D.windowBits,D.memLevel,D.strategy);if(M!==m)throw new Error(h[M]);if(D.header&&l.deflateSetHeader(this.strm,D.header),D.dictionary){var N;if(N=typeof D.dictionary=="string"?f.string2buf(D.dictionary):_.call(D.dictionary)==="[object ArrayBuffer]"?new Uint8Array(D.dictionary):D.dictionary,(M=l.deflateSetDictionary(this.strm,N))!==m)throw new Error(h[M]);this._dict_set=!0}}function T(E,D){var M=new x(D);if(M.push(E,!0),M.err)throw M.msg||h[M.err];return M.result}x.prototype.push=function(E,D){var M,N,B=this.strm,Y=this.options.chunkSize;if(this.ended)return!1;N=D===~~D?D:D===!0?4:0,typeof E=="string"?B.input=f.string2buf(E):_.call(E)==="[object ArrayBuffer]"?B.input=new Uint8Array(E):B.input=E,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new u.Buf8(Y),B.next_out=0,B.avail_out=Y),(M=l.deflate(B,N))!==1&&M!==m)return this.onEnd(M),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(f.buf2binstring(u.shrinkBuf(B.output,B.next_out))):this.onData(u.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&M!==1);return N===4?(M=l.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===m):N!==2||(this.onEnd(m),!(B.avail_out=0))},x.prototype.onData=function(E){this.chunks.push(E)},x.prototype.onEnd=function(E){E===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg},o.Deflate=x,o.deflate=T,o.deflateRaw=function(E,D){return(D=D||{}).raw=!0,T(E,D)},o.gzip=function(E,D){return(D=D||{}).gzip=!0,T(E,D)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,i,o){var l=r("./zlib/inflate"),u=r("./utils/common"),f=r("./utils/strings"),h=r("./zlib/constants"),y=r("./zlib/messages"),_=r("./zlib/zstream"),m=r("./zlib/gzheader"),b=Object.prototype.toString;function v(x){if(!(this instanceof v))return new v(x);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},x||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||x&&x.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var E=l.inflateInit2(this.strm,T.windowBits);if(E!==h.Z_OK)throw new Error(y[E]);this.header=new m,l.inflateGetHeader(this.strm,this.header)}function C(x,T){var E=new v(T);if(E.push(x,!0),E.err)throw E.msg||y[E.err];return E.result}v.prototype.push=function(x,T){var E,D,M,N,B,Y,V=this.strm,tt=this.options.chunkSize,z=this.options.dictionary,I=!1;if(this.ended)return!1;D=T===~~T?T:T===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof x=="string"?V.input=f.binstring2buf(x):b.call(x)==="[object ArrayBuffer]"?V.input=new Uint8Array(x):V.input=x,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new u.Buf8(tt),V.next_out=0,V.avail_out=tt),(E=l.inflate(V,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&z&&(Y=typeof z=="string"?f.string2buf(z):b.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,E=l.inflateSetDictionary(this.strm,Y)),E===h.Z_BUF_ERROR&&I===!0&&(E=h.Z_OK,I=!1),E!==h.Z_STREAM_END&&E!==h.Z_OK)return this.onEnd(E),!(this.ended=!0);V.next_out&&(V.avail_out!==0&&E!==h.Z_STREAM_END&&(V.avail_in!==0||D!==h.Z_FINISH&&D!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(M=f.utf8border(V.output,V.next_out),N=V.next_out-M,B=f.buf2string(V.output,M),V.next_out=N,V.avail_out=tt-N,N&&u.arraySet(V.output,V.output,M,N,0),this.onData(B)):this.onData(u.shrinkBuf(V.output,V.next_out)))),V.avail_in===0&&V.avail_out===0&&(I=!0)}while((0<V.avail_in||V.avail_out===0)&&E!==h.Z_STREAM_END);return E===h.Z_STREAM_END&&(D=h.Z_FINISH),D===h.Z_FINISH?(E=l.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h.Z_OK):D!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(V.avail_out=0))},v.prototype.onData=function(x){this.chunks.push(x)},v.prototype.onEnd=function(x){x===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},o.Inflate=v,o.inflate=C,o.inflateRaw=function(x,T){return(T=T||{}).raw=!0,C(x,T)},o.ungzip=C},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,i,o){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(h){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var _=y.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var m in _)_.hasOwnProperty(m)&&(h[m]=_[m])}}return h},o.shrinkBuf=function(h,y){return h.length===y?h:h.subarray?h.subarray(0,y):(h.length=y,h)};var u={arraySet:function(h,y,_,m,b){if(y.subarray&&h.subarray)h.set(y.subarray(_,_+m),b);else for(var v=0;v<m;v++)h[b+v]=y[_+v]},flattenChunks:function(h){var y,_,m,b,v,C;for(y=m=0,_=h.length;y<_;y++)m+=h[y].length;for(C=new Uint8Array(m),y=b=0,_=h.length;y<_;y++)v=h[y],C.set(v,b),b+=v.length;return C}},f={arraySet:function(h,y,_,m,b){for(var v=0;v<m;v++)h[b+v]=y[_+v]},flattenChunks:function(h){return[].concat.apply([],h)}};o.setTyped=function(h){h?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,u)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,f))},o.setTyped(l)},{}],42:[function(r,i,o){var l=r("./common"),u=!0,f=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f=!1}for(var h=new l.Buf8(256),y=0;y<256;y++)h[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function _(m,b){if(b<65537&&(m.subarray&&f||!m.subarray&&u))return String.fromCharCode.apply(null,l.shrinkBuf(m,b));for(var v="",C=0;C<b;C++)v+=String.fromCharCode(m[C]);return v}h[254]=h[254]=1,o.string2buf=function(m){var b,v,C,x,T,E=m.length,D=0;for(x=0;x<E;x++)(64512&(v=m.charCodeAt(x)))==55296&&x+1<E&&(64512&(C=m.charCodeAt(x+1)))==56320&&(v=65536+(v-55296<<10)+(C-56320),x++),D+=v<128?1:v<2048?2:v<65536?3:4;for(b=new l.Buf8(D),x=T=0;T<D;x++)(64512&(v=m.charCodeAt(x)))==55296&&x+1<E&&(64512&(C=m.charCodeAt(x+1)))==56320&&(v=65536+(v-55296<<10)+(C-56320),x++),v<128?b[T++]=v:(v<2048?b[T++]=192|v>>>6:(v<65536?b[T++]=224|v>>>12:(b[T++]=240|v>>>18,b[T++]=128|v>>>12&63),b[T++]=128|v>>>6&63),b[T++]=128|63&v);return b},o.buf2binstring=function(m){return _(m,m.length)},o.binstring2buf=function(m){for(var b=new l.Buf8(m.length),v=0,C=b.length;v<C;v++)b[v]=m.charCodeAt(v);return b},o.buf2string=function(m,b){var v,C,x,T,E=b||m.length,D=new Array(2*E);for(v=C=0;v<E;)if((x=m[v++])<128)D[C++]=x;else if(4<(T=h[x]))D[C++]=65533,v+=T-1;else{for(x&=T===2?31:T===3?15:7;1<T&&v<E;)x=x<<6|63&m[v++],T--;1<T?D[C++]=65533:x<65536?D[C++]=x:(x-=65536,D[C++]=55296|x>>10&1023,D[C++]=56320|1023&x)}return _(D,C)},o.utf8border=function(m,b){var v;for((b=b||m.length)>m.length&&(b=m.length),v=b-1;0<=v&&(192&m[v])==128;)v--;return v<0||v===0?b:v+h[m[v]]>b?v:b}},{"./common":41}],43:[function(r,i,o){i.exports=function(l,u,f,h){for(var y=65535&l|0,_=l>>>16&65535|0,m=0;f!==0;){for(f-=m=2e3<f?2e3:f;_=_+(y=y+u[h++]|0)|0,--m;);y%=65521,_%=65521}return y|_<<16|0}},{}],44:[function(r,i,o){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,i,o){var l=function(){for(var u,f=[],h=0;h<256;h++){u=h;for(var y=0;y<8;y++)u=1&u?3988292384^u>>>1:u>>>1;f[h]=u}return f}();i.exports=function(u,f,h,y){var _=l,m=y+h;u^=-1;for(var b=y;b<m;b++)u=u>>>8^_[255&(u^f[b])];return-1^u}},{}],46:[function(r,i,o){var l,u=r("../utils/common"),f=r("./trees"),h=r("./adler32"),y=r("./crc32"),_=r("./messages"),m=0,b=4,v=0,C=-2,x=-1,T=4,E=2,D=8,M=9,N=286,B=30,Y=19,V=2*N+1,tt=15,z=3,I=258,G=I+z+1,k=42,$=113,g=1,rt=2,kt=3,ht=4;function Et(d,F){return d.msg=_[F],F}function xt(d){return(d<<1)-(4<d?9:0)}function $t(d){for(var F=d.length;0<=--F;)d[F]=0}function it(d){var F=d.state,j=F.pending;j>d.avail_out&&(j=d.avail_out),j!==0&&(u.arraySet(d.output,F.pending_buf,F.pending_out,j,d.next_out),d.next_out+=j,F.pending_out+=j,d.total_out+=j,d.avail_out-=j,F.pending-=j,F.pending===0&&(F.pending_out=0))}function st(d,F){f._tr_flush_block(d,0<=d.block_start?d.block_start:-1,d.strstart-d.block_start,F),d.block_start=d.strstart,it(d.strm)}function Pt(d,F){d.pending_buf[d.pending++]=F}function Tt(d,F){d.pending_buf[d.pending++]=F>>>8&255,d.pending_buf[d.pending++]=255&F}function ot(d,F){var j,A,R=d.max_chain_length,U=d.strstart,Q=d.prev_length,X=d.nice_match,K=d.strstart>d.w_size-G?d.strstart-(d.w_size-G):0,at=d.window,_t=d.w_mask,pt=d.prev,Ct=d.strstart+I,Lt=at[U+Q-1],Ot=at[U+Q];d.prev_length>=d.good_match&&(R>>=2),X>d.lookahead&&(X=d.lookahead);do if(at[(j=F)+Q]===Ot&&at[j+Q-1]===Lt&&at[j]===at[U]&&at[++j]===at[U+1]){U+=2,j++;do;while(at[++U]===at[++j]&&at[++U]===at[++j]&&at[++U]===at[++j]&&at[++U]===at[++j]&&at[++U]===at[++j]&&at[++U]===at[++j]&&at[++U]===at[++j]&&at[++U]===at[++j]&&U<Ct);if(A=I-(Ct-U),U=Ct-I,Q<A){if(d.match_start=F,X<=(Q=A))break;Lt=at[U+Q-1],Ot=at[U+Q]}}while((F=pt[F&_t])>K&&--R!=0);return Q<=d.lookahead?Q:d.lookahead}function gt(d){var F,j,A,R,U,Q,X,K,at,_t,pt=d.w_size;do{if(R=d.window_size-d.lookahead-d.strstart,d.strstart>=pt+(pt-G)){for(u.arraySet(d.window,d.window,pt,pt,0),d.match_start-=pt,d.strstart-=pt,d.block_start-=pt,F=j=d.hash_size;A=d.head[--F],d.head[F]=pt<=A?A-pt:0,--j;);for(F=j=pt;A=d.prev[--F],d.prev[F]=pt<=A?A-pt:0,--j;);R+=pt}if(d.strm.avail_in===0)break;if(Q=d.strm,X=d.window,K=d.strstart+d.lookahead,at=R,_t=void 0,_t=Q.avail_in,at<_t&&(_t=at),j=_t===0?0:(Q.avail_in-=_t,u.arraySet(X,Q.input,Q.next_in,_t,K),Q.state.wrap===1?Q.adler=h(Q.adler,X,_t,K):Q.state.wrap===2&&(Q.adler=y(Q.adler,X,_t,K)),Q.next_in+=_t,Q.total_in+=_t,_t),d.lookahead+=j,d.lookahead+d.insert>=z)for(U=d.strstart-d.insert,d.ins_h=d.window[U],d.ins_h=(d.ins_h<<d.hash_shift^d.window[U+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[U+z-1])&d.hash_mask,d.prev[U&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=U,U++,d.insert--,!(d.lookahead+d.insert<z)););}while(d.lookahead<G&&d.strm.avail_in!==0)}function J(d,F){for(var j,A;;){if(d.lookahead<G){if(gt(d),d.lookahead<G&&F===m)return g;if(d.lookahead===0)break}if(j=0,d.lookahead>=z&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+z-1])&d.hash_mask,j=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),j!==0&&d.strstart-j<=d.w_size-G&&(d.match_length=ot(d,j)),d.match_length>=z)if(A=f._tr_tally(d,d.strstart-d.match_start,d.match_length-z),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=z){for(d.match_length--;d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+z-1])&d.hash_mask,j=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart,--d.match_length!=0;);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else A=f._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(A&&(st(d,!1),d.strm.avail_out===0))return g}return d.insert=d.strstart<z-1?d.strstart:z-1,F===b?(st(d,!0),d.strm.avail_out===0?kt:ht):d.last_lit&&(st(d,!1),d.strm.avail_out===0)?g:rt}function ct(d,F){for(var j,A,R;;){if(d.lookahead<G){if(gt(d),d.lookahead<G&&F===m)return g;if(d.lookahead===0)break}if(j=0,d.lookahead>=z&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+z-1])&d.hash_mask,j=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=z-1,j!==0&&d.prev_length<d.max_lazy_match&&d.strstart-j<=d.w_size-G&&(d.match_length=ot(d,j),d.match_length<=5&&(d.strategy===1||d.match_length===z&&4096<d.strstart-d.match_start)&&(d.match_length=z-1)),d.prev_length>=z&&d.match_length<=d.prev_length){for(R=d.strstart+d.lookahead-z,A=f._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-z),d.lookahead-=d.prev_length-1,d.prev_length-=2;++d.strstart<=R&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+z-1])&d.hash_mask,j=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),--d.prev_length!=0;);if(d.match_available=0,d.match_length=z-1,d.strstart++,A&&(st(d,!1),d.strm.avail_out===0))return g}else if(d.match_available){if((A=f._tr_tally(d,0,d.window[d.strstart-1]))&&st(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return g}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(A=f._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<z-1?d.strstart:z-1,F===b?(st(d,!0),d.strm.avail_out===0?kt:ht):d.last_lit&&(st(d,!1),d.strm.avail_out===0)?g:rt}function mt(d,F,j,A,R){this.good_length=d,this.max_lazy=F,this.nice_length=j,this.max_chain=A,this.func=R}function St(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*V),this.dyn_dtree=new u.Buf16(2*(2*B+1)),this.bl_tree=new u.Buf16(2*(2*Y+1)),$t(this.dyn_ltree),$t(this.dyn_dtree),$t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(tt+1),this.heap=new u.Buf16(2*N+1),$t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*N+1),$t(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ut(d){var F;return d&&d.state?(d.total_in=d.total_out=0,d.data_type=E,(F=d.state).pending=0,F.pending_out=0,F.wrap<0&&(F.wrap=-F.wrap),F.status=F.wrap?k:$,d.adler=F.wrap===2?0:1,F.last_flush=m,f._tr_init(F),v):Et(d,C)}function S(d){var F=ut(d);return F===v&&function(j){j.window_size=2*j.w_size,$t(j.head),j.max_lazy_match=l[j.level].max_lazy,j.good_match=l[j.level].good_length,j.nice_match=l[j.level].nice_length,j.max_chain_length=l[j.level].max_chain,j.strstart=0,j.block_start=0,j.lookahead=0,j.insert=0,j.match_length=j.prev_length=z-1,j.match_available=0,j.ins_h=0}(d.state),F}function L(d,F,j,A,R,U){if(!d)return C;var Q=1;if(F===x&&(F=6),A<0?(Q=0,A=-A):15<A&&(Q=2,A-=16),R<1||M<R||j!==D||A<8||15<A||F<0||9<F||U<0||T<U)return Et(d,C);A===8&&(A=9);var X=new St;return(d.state=X).strm=d,X.wrap=Q,X.gzhead=null,X.w_bits=A,X.w_size=1<<X.w_bits,X.w_mask=X.w_size-1,X.hash_bits=R+7,X.hash_size=1<<X.hash_bits,X.hash_mask=X.hash_size-1,X.hash_shift=~~((X.hash_bits+z-1)/z),X.window=new u.Buf8(2*X.w_size),X.head=new u.Buf16(X.hash_size),X.prev=new u.Buf16(X.w_size),X.lit_bufsize=1<<R+6,X.pending_buf_size=4*X.lit_bufsize,X.pending_buf=new u.Buf8(X.pending_buf_size),X.d_buf=1*X.lit_bufsize,X.l_buf=3*X.lit_bufsize,X.level=F,X.strategy=U,X.method=j,S(d)}l=[new mt(0,0,0,0,function(d,F){var j=65535;for(j>d.pending_buf_size-5&&(j=d.pending_buf_size-5);;){if(d.lookahead<=1){if(gt(d),d.lookahead===0&&F===m)return g;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var A=d.block_start+j;if((d.strstart===0||d.strstart>=A)&&(d.lookahead=d.strstart-A,d.strstart=A,st(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-G&&(st(d,!1),d.strm.avail_out===0))return g}return d.insert=0,F===b?(st(d,!0),d.strm.avail_out===0?kt:ht):(d.strstart>d.block_start&&(st(d,!1),d.strm.avail_out),g)}),new mt(4,4,8,4,J),new mt(4,5,16,8,J),new mt(4,6,32,32,J),new mt(4,4,16,16,ct),new mt(8,16,32,32,ct),new mt(8,16,128,128,ct),new mt(8,32,128,256,ct),new mt(32,128,258,1024,ct),new mt(32,258,258,4096,ct)],o.deflateInit=function(d,F){return L(d,F,D,15,8,0)},o.deflateInit2=L,o.deflateReset=S,o.deflateResetKeep=ut,o.deflateSetHeader=function(d,F){return d&&d.state?d.state.wrap!==2?C:(d.state.gzhead=F,v):C},o.deflate=function(d,F){var j,A,R,U;if(!d||!d.state||5<F||F<0)return d?Et(d,C):C;if(A=d.state,!d.output||!d.input&&d.avail_in!==0||A.status===666&&F!==b)return Et(d,d.avail_out===0?-5:C);if(A.strm=d,j=A.last_flush,A.last_flush=F,A.status===k)if(A.wrap===2)d.adler=0,Pt(A,31),Pt(A,139),Pt(A,8),A.gzhead?(Pt(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),Pt(A,255&A.gzhead.time),Pt(A,A.gzhead.time>>8&255),Pt(A,A.gzhead.time>>16&255),Pt(A,A.gzhead.time>>24&255),Pt(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),Pt(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(Pt(A,255&A.gzhead.extra.length),Pt(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(d.adler=y(d.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(Pt(A,0),Pt(A,0),Pt(A,0),Pt(A,0),Pt(A,0),Pt(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),Pt(A,3),A.status=$);else{var Q=D+(A.w_bits-8<<4)<<8;Q|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(Q|=32),Q+=31-Q%31,A.status=$,Tt(A,Q),A.strstart!==0&&(Tt(A,d.adler>>>16),Tt(A,65535&d.adler)),d.adler=1}if(A.status===69)if(A.gzhead.extra){for(R=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>R&&(d.adler=y(d.adler,A.pending_buf,A.pending-R,R)),it(d),R=A.pending,A.pending!==A.pending_buf_size));)Pt(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>R&&(d.adler=y(d.adler,A.pending_buf,A.pending-R,R)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){R=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>R&&(d.adler=y(d.adler,A.pending_buf,A.pending-R,R)),it(d),R=A.pending,A.pending===A.pending_buf_size)){U=1;break}U=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,Pt(A,U)}while(U!==0);A.gzhead.hcrc&&A.pending>R&&(d.adler=y(d.adler,A.pending_buf,A.pending-R,R)),U===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){R=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>R&&(d.adler=y(d.adler,A.pending_buf,A.pending-R,R)),it(d),R=A.pending,A.pending===A.pending_buf_size)){U=1;break}U=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,Pt(A,U)}while(U!==0);A.gzhead.hcrc&&A.pending>R&&(d.adler=y(d.adler,A.pending_buf,A.pending-R,R)),U===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&it(d),A.pending+2<=A.pending_buf_size&&(Pt(A,255&d.adler),Pt(A,d.adler>>8&255),d.adler=0,A.status=$)):A.status=$),A.pending!==0){if(it(d),d.avail_out===0)return A.last_flush=-1,v}else if(d.avail_in===0&&xt(F)<=xt(j)&&F!==b)return Et(d,-5);if(A.status===666&&d.avail_in!==0)return Et(d,-5);if(d.avail_in!==0||A.lookahead!==0||F!==m&&A.status!==666){var X=A.strategy===2?function(K,at){for(var _t;;){if(K.lookahead===0&&(gt(K),K.lookahead===0)){if(at===m)return g;break}if(K.match_length=0,_t=f._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++,_t&&(st(K,!1),K.strm.avail_out===0))return g}return K.insert=0,at===b?(st(K,!0),K.strm.avail_out===0?kt:ht):K.last_lit&&(st(K,!1),K.strm.avail_out===0)?g:rt}(A,F):A.strategy===3?function(K,at){for(var _t,pt,Ct,Lt,Ot=K.window;;){if(K.lookahead<=I){if(gt(K),K.lookahead<=I&&at===m)return g;if(K.lookahead===0)break}if(K.match_length=0,K.lookahead>=z&&0<K.strstart&&(pt=Ot[Ct=K.strstart-1])===Ot[++Ct]&&pt===Ot[++Ct]&&pt===Ot[++Ct]){Lt=K.strstart+I;do;while(pt===Ot[++Ct]&&pt===Ot[++Ct]&&pt===Ot[++Ct]&&pt===Ot[++Ct]&&pt===Ot[++Ct]&&pt===Ot[++Ct]&&pt===Ot[++Ct]&&pt===Ot[++Ct]&&Ct<Lt);K.match_length=I-(Lt-Ct),K.match_length>K.lookahead&&(K.match_length=K.lookahead)}if(K.match_length>=z?(_t=f._tr_tally(K,1,K.match_length-z),K.lookahead-=K.match_length,K.strstart+=K.match_length,K.match_length=0):(_t=f._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++),_t&&(st(K,!1),K.strm.avail_out===0))return g}return K.insert=0,at===b?(st(K,!0),K.strm.avail_out===0?kt:ht):K.last_lit&&(st(K,!1),K.strm.avail_out===0)?g:rt}(A,F):l[A.level].func(A,F);if(X!==kt&&X!==ht||(A.status=666),X===g||X===kt)return d.avail_out===0&&(A.last_flush=-1),v;if(X===rt&&(F===1?f._tr_align(A):F!==5&&(f._tr_stored_block(A,0,0,!1),F===3&&($t(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),it(d),d.avail_out===0))return A.last_flush=-1,v}return F!==b?v:A.wrap<=0?1:(A.wrap===2?(Pt(A,255&d.adler),Pt(A,d.adler>>8&255),Pt(A,d.adler>>16&255),Pt(A,d.adler>>24&255),Pt(A,255&d.total_in),Pt(A,d.total_in>>8&255),Pt(A,d.total_in>>16&255),Pt(A,d.total_in>>24&255)):(Tt(A,d.adler>>>16),Tt(A,65535&d.adler)),it(d),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?v:1)},o.deflateEnd=function(d){var F;return d&&d.state?(F=d.state.status)!==k&&F!==69&&F!==73&&F!==91&&F!==103&&F!==$&&F!==666?Et(d,C):(d.state=null,F===$?Et(d,-3):v):C},o.deflateSetDictionary=function(d,F){var j,A,R,U,Q,X,K,at,_t=F.length;if(!d||!d.state||(U=(j=d.state).wrap)===2||U===1&&j.status!==k||j.lookahead)return C;for(U===1&&(d.adler=h(d.adler,F,_t,0)),j.wrap=0,_t>=j.w_size&&(U===0&&($t(j.head),j.strstart=0,j.block_start=0,j.insert=0),at=new u.Buf8(j.w_size),u.arraySet(at,F,_t-j.w_size,j.w_size,0),F=at,_t=j.w_size),Q=d.avail_in,X=d.next_in,K=d.input,d.avail_in=_t,d.next_in=0,d.input=F,gt(j);j.lookahead>=z;){for(A=j.strstart,R=j.lookahead-(z-1);j.ins_h=(j.ins_h<<j.hash_shift^j.window[A+z-1])&j.hash_mask,j.prev[A&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=A,A++,--R;);j.strstart=A,j.lookahead=z-1,gt(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=z-1,j.match_available=0,d.next_in=X,d.input=K,d.avail_in=Q,j.wrap=U,v},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,i,o){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,i,o){i.exports=function(l,u){var f,h,y,_,m,b,v,C,x,T,E,D,M,N,B,Y,V,tt,z,I,G,k,$,g,rt;f=l.state,h=l.next_in,g=l.input,y=h+(l.avail_in-5),_=l.next_out,rt=l.output,m=_-(u-l.avail_out),b=_+(l.avail_out-257),v=f.dmax,C=f.wsize,x=f.whave,T=f.wnext,E=f.window,D=f.hold,M=f.bits,N=f.lencode,B=f.distcode,Y=(1<<f.lenbits)-1,V=(1<<f.distbits)-1;t:do{M<15&&(D+=g[h++]<<M,M+=8,D+=g[h++]<<M,M+=8),tt=N[D&Y];e:for(;;){if(D>>>=z=tt>>>24,M-=z,(z=tt>>>16&255)===0)rt[_++]=65535&tt;else{if(!(16&z)){if(!(64&z)){tt=N[(65535&tt)+(D&(1<<z)-1)];continue e}if(32&z){f.mode=12;break t}l.msg="invalid literal/length code",f.mode=30;break t}I=65535&tt,(z&=15)&&(M<z&&(D+=g[h++]<<M,M+=8),I+=D&(1<<z)-1,D>>>=z,M-=z),M<15&&(D+=g[h++]<<M,M+=8,D+=g[h++]<<M,M+=8),tt=B[D&V];n:for(;;){if(D>>>=z=tt>>>24,M-=z,!(16&(z=tt>>>16&255))){if(!(64&z)){tt=B[(65535&tt)+(D&(1<<z)-1)];continue n}l.msg="invalid distance code",f.mode=30;break t}if(G=65535&tt,M<(z&=15)&&(D+=g[h++]<<M,(M+=8)<z&&(D+=g[h++]<<M,M+=8)),v<(G+=D&(1<<z)-1)){l.msg="invalid distance too far back",f.mode=30;break t}if(D>>>=z,M-=z,(z=_-m)<G){if(x<(z=G-z)&&f.sane){l.msg="invalid distance too far back",f.mode=30;break t}if($=E,(k=0)===T){if(k+=C-z,z<I){for(I-=z;rt[_++]=E[k++],--z;);k=_-G,$=rt}}else if(T<z){if(k+=C+T-z,(z-=T)<I){for(I-=z;rt[_++]=E[k++],--z;);if(k=0,T<I){for(I-=z=T;rt[_++]=E[k++],--z;);k=_-G,$=rt}}}else if(k+=T-z,z<I){for(I-=z;rt[_++]=E[k++],--z;);k=_-G,$=rt}for(;2<I;)rt[_++]=$[k++],rt[_++]=$[k++],rt[_++]=$[k++],I-=3;I&&(rt[_++]=$[k++],1<I&&(rt[_++]=$[k++]))}else{for(k=_-G;rt[_++]=rt[k++],rt[_++]=rt[k++],rt[_++]=rt[k++],2<(I-=3););I&&(rt[_++]=rt[k++],1<I&&(rt[_++]=rt[k++]))}break}}break}}while(h<y&&_<b);h-=I=M>>3,D&=(1<<(M-=I<<3))-1,l.next_in=h,l.next_out=_,l.avail_in=h<y?y-h+5:5-(h-y),l.avail_out=_<b?b-_+257:257-(_-b),f.hold=D,f.bits=M}},{}],49:[function(r,i,o){var l=r("../utils/common"),u=r("./adler32"),f=r("./crc32"),h=r("./inffast"),y=r("./inftrees"),_=1,m=2,b=0,v=-2,C=1,x=852,T=592;function E(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function D(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function M(k){var $;return k&&k.state?($=k.state,k.total_in=k.total_out=$.total=0,k.msg="",$.wrap&&(k.adler=1&$.wrap),$.mode=C,$.last=0,$.havedict=0,$.dmax=32768,$.head=null,$.hold=0,$.bits=0,$.lencode=$.lendyn=new l.Buf32(x),$.distcode=$.distdyn=new l.Buf32(T),$.sane=1,$.back=-1,b):v}function N(k){var $;return k&&k.state?(($=k.state).wsize=0,$.whave=0,$.wnext=0,M(k)):v}function B(k,$){var g,rt;return k&&k.state?(rt=k.state,$<0?(g=0,$=-$):(g=1+($>>4),$<48&&($&=15)),$&&($<8||15<$)?v:(rt.window!==null&&rt.wbits!==$&&(rt.window=null),rt.wrap=g,rt.wbits=$,N(k))):v}function Y(k,$){var g,rt;return k?(rt=new D,(k.state=rt).window=null,(g=B(k,$))!==b&&(k.state=null),g):v}var V,tt,z=!0;function I(k){if(z){var $;for(V=new l.Buf32(512),tt=new l.Buf32(32),$=0;$<144;)k.lens[$++]=8;for(;$<256;)k.lens[$++]=9;for(;$<280;)k.lens[$++]=7;for(;$<288;)k.lens[$++]=8;for(y(_,k.lens,0,288,V,0,k.work,{bits:9}),$=0;$<32;)k.lens[$++]=5;y(m,k.lens,0,32,tt,0,k.work,{bits:5}),z=!1}k.lencode=V,k.lenbits=9,k.distcode=tt,k.distbits=5}function G(k,$,g,rt){var kt,ht=k.state;return ht.window===null&&(ht.wsize=1<<ht.wbits,ht.wnext=0,ht.whave=0,ht.window=new l.Buf8(ht.wsize)),rt>=ht.wsize?(l.arraySet(ht.window,$,g-ht.wsize,ht.wsize,0),ht.wnext=0,ht.whave=ht.wsize):(rt<(kt=ht.wsize-ht.wnext)&&(kt=rt),l.arraySet(ht.window,$,g-rt,kt,ht.wnext),(rt-=kt)?(l.arraySet(ht.window,$,g-rt,rt,0),ht.wnext=rt,ht.whave=ht.wsize):(ht.wnext+=kt,ht.wnext===ht.wsize&&(ht.wnext=0),ht.whave<ht.wsize&&(ht.whave+=kt))),0}o.inflateReset=N,o.inflateReset2=B,o.inflateResetKeep=M,o.inflateInit=function(k){return Y(k,15)},o.inflateInit2=Y,o.inflate=function(k,$){var g,rt,kt,ht,Et,xt,$t,it,st,Pt,Tt,ot,gt,J,ct,mt,St,ut,S,L,d,F,j,A,R=0,U=new l.Buf8(4),Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return v;(g=k.state).mode===12&&(g.mode=13),Et=k.next_out,kt=k.output,$t=k.avail_out,ht=k.next_in,rt=k.input,xt=k.avail_in,it=g.hold,st=g.bits,Pt=xt,Tt=$t,F=b;t:for(;;)switch(g.mode){case C:if(g.wrap===0){g.mode=13;break}for(;st<16;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}if(2&g.wrap&&it===35615){U[g.check=0]=255&it,U[1]=it>>>8&255,g.check=f(g.check,U,2,0),st=it=0,g.mode=2;break}if(g.flags=0,g.head&&(g.head.done=!1),!(1&g.wrap)||(((255&it)<<8)+(it>>8))%31){k.msg="incorrect header check",g.mode=30;break}if((15&it)!=8){k.msg="unknown compression method",g.mode=30;break}if(st-=4,d=8+(15&(it>>>=4)),g.wbits===0)g.wbits=d;else if(d>g.wbits){k.msg="invalid window size",g.mode=30;break}g.dmax=1<<d,k.adler=g.check=1,g.mode=512&it?10:12,st=it=0;break;case 2:for(;st<16;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}if(g.flags=it,(255&g.flags)!=8){k.msg="unknown compression method",g.mode=30;break}if(57344&g.flags){k.msg="unknown header flags set",g.mode=30;break}g.head&&(g.head.text=it>>8&1),512&g.flags&&(U[0]=255&it,U[1]=it>>>8&255,g.check=f(g.check,U,2,0)),st=it=0,g.mode=3;case 3:for(;st<32;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}g.head&&(g.head.time=it),512&g.flags&&(U[0]=255&it,U[1]=it>>>8&255,U[2]=it>>>16&255,U[3]=it>>>24&255,g.check=f(g.check,U,4,0)),st=it=0,g.mode=4;case 4:for(;st<16;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}g.head&&(g.head.xflags=255&it,g.head.os=it>>8),512&g.flags&&(U[0]=255&it,U[1]=it>>>8&255,g.check=f(g.check,U,2,0)),st=it=0,g.mode=5;case 5:if(1024&g.flags){for(;st<16;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}g.length=it,g.head&&(g.head.extra_len=it),512&g.flags&&(U[0]=255&it,U[1]=it>>>8&255,g.check=f(g.check,U,2,0)),st=it=0}else g.head&&(g.head.extra=null);g.mode=6;case 6:if(1024&g.flags&&(xt<(ot=g.length)&&(ot=xt),ot&&(g.head&&(d=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Array(g.head.extra_len)),l.arraySet(g.head.extra,rt,ht,ot,d)),512&g.flags&&(g.check=f(g.check,rt,ot,ht)),xt-=ot,ht+=ot,g.length-=ot),g.length))break t;g.length=0,g.mode=7;case 7:if(2048&g.flags){if(xt===0)break t;for(ot=0;d=rt[ht+ot++],g.head&&d&&g.length<65536&&(g.head.name+=String.fromCharCode(d)),d&&ot<xt;);if(512&g.flags&&(g.check=f(g.check,rt,ot,ht)),xt-=ot,ht+=ot,d)break t}else g.head&&(g.head.name=null);g.length=0,g.mode=8;case 8:if(4096&g.flags){if(xt===0)break t;for(ot=0;d=rt[ht+ot++],g.head&&d&&g.length<65536&&(g.head.comment+=String.fromCharCode(d)),d&&ot<xt;);if(512&g.flags&&(g.check=f(g.check,rt,ot,ht)),xt-=ot,ht+=ot,d)break t}else g.head&&(g.head.comment=null);g.mode=9;case 9:if(512&g.flags){for(;st<16;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}if(it!==(65535&g.check)){k.msg="header crc mismatch",g.mode=30;break}st=it=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),k.adler=g.check=0,g.mode=12;break;case 10:for(;st<32;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}k.adler=g.check=E(it),st=it=0,g.mode=11;case 11:if(g.havedict===0)return k.next_out=Et,k.avail_out=$t,k.next_in=ht,k.avail_in=xt,g.hold=it,g.bits=st,2;k.adler=g.check=1,g.mode=12;case 12:if($===5||$===6)break t;case 13:if(g.last){it>>>=7&st,st-=7&st,g.mode=27;break}for(;st<3;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}switch(g.last=1&it,st-=1,3&(it>>>=1)){case 0:g.mode=14;break;case 1:if(I(g),g.mode=20,$!==6)break;it>>>=2,st-=2;break t;case 2:g.mode=17;break;case 3:k.msg="invalid block type",g.mode=30}it>>>=2,st-=2;break;case 14:for(it>>>=7&st,st-=7&st;st<32;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}if((65535&it)!=(it>>>16^65535)){k.msg="invalid stored block lengths",g.mode=30;break}if(g.length=65535&it,st=it=0,g.mode=15,$===6)break t;case 15:g.mode=16;case 16:if(ot=g.length){if(xt<ot&&(ot=xt),$t<ot&&(ot=$t),ot===0)break t;l.arraySet(kt,rt,ht,ot,Et),xt-=ot,ht+=ot,$t-=ot,Et+=ot,g.length-=ot;break}g.mode=12;break;case 17:for(;st<14;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}if(g.nlen=257+(31&it),it>>>=5,st-=5,g.ndist=1+(31&it),it>>>=5,st-=5,g.ncode=4+(15&it),it>>>=4,st-=4,286<g.nlen||30<g.ndist){k.msg="too many length or distance symbols",g.mode=30;break}g.have=0,g.mode=18;case 18:for(;g.have<g.ncode;){for(;st<3;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}g.lens[Q[g.have++]]=7&it,it>>>=3,st-=3}for(;g.have<19;)g.lens[Q[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,j={bits:g.lenbits},F=y(0,g.lens,0,19,g.lencode,0,g.work,j),g.lenbits=j.bits,F){k.msg="invalid code lengths set",g.mode=30;break}g.have=0,g.mode=19;case 19:for(;g.have<g.nlen+g.ndist;){for(;mt=(R=g.lencode[it&(1<<g.lenbits)-1])>>>16&255,St=65535&R,!((ct=R>>>24)<=st);){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}if(St<16)it>>>=ct,st-=ct,g.lens[g.have++]=St;else{if(St===16){for(A=ct+2;st<A;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}if(it>>>=ct,st-=ct,g.have===0){k.msg="invalid bit length repeat",g.mode=30;break}d=g.lens[g.have-1],ot=3+(3&it),it>>>=2,st-=2}else if(St===17){for(A=ct+3;st<A;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}st-=ct,d=0,ot=3+(7&(it>>>=ct)),it>>>=3,st-=3}else{for(A=ct+7;st<A;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}st-=ct,d=0,ot=11+(127&(it>>>=ct)),it>>>=7,st-=7}if(g.have+ot>g.nlen+g.ndist){k.msg="invalid bit length repeat",g.mode=30;break}for(;ot--;)g.lens[g.have++]=d}}if(g.mode===30)break;if(g.lens[256]===0){k.msg="invalid code -- missing end-of-block",g.mode=30;break}if(g.lenbits=9,j={bits:g.lenbits},F=y(_,g.lens,0,g.nlen,g.lencode,0,g.work,j),g.lenbits=j.bits,F){k.msg="invalid literal/lengths set",g.mode=30;break}if(g.distbits=6,g.distcode=g.distdyn,j={bits:g.distbits},F=y(m,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,j),g.distbits=j.bits,F){k.msg="invalid distances set",g.mode=30;break}if(g.mode=20,$===6)break t;case 20:g.mode=21;case 21:if(6<=xt&&258<=$t){k.next_out=Et,k.avail_out=$t,k.next_in=ht,k.avail_in=xt,g.hold=it,g.bits=st,h(k,Tt),Et=k.next_out,kt=k.output,$t=k.avail_out,ht=k.next_in,rt=k.input,xt=k.avail_in,it=g.hold,st=g.bits,g.mode===12&&(g.back=-1);break}for(g.back=0;mt=(R=g.lencode[it&(1<<g.lenbits)-1])>>>16&255,St=65535&R,!((ct=R>>>24)<=st);){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}if(mt&&!(240&mt)){for(ut=ct,S=mt,L=St;mt=(R=g.lencode[L+((it&(1<<ut+S)-1)>>ut)])>>>16&255,St=65535&R,!(ut+(ct=R>>>24)<=st);){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}it>>>=ut,st-=ut,g.back+=ut}if(it>>>=ct,st-=ct,g.back+=ct,g.length=St,mt===0){g.mode=26;break}if(32&mt){g.back=-1,g.mode=12;break}if(64&mt){k.msg="invalid literal/length code",g.mode=30;break}g.extra=15&mt,g.mode=22;case 22:if(g.extra){for(A=g.extra;st<A;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}g.length+=it&(1<<g.extra)-1,it>>>=g.extra,st-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=23;case 23:for(;mt=(R=g.distcode[it&(1<<g.distbits)-1])>>>16&255,St=65535&R,!((ct=R>>>24)<=st);){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}if(!(240&mt)){for(ut=ct,S=mt,L=St;mt=(R=g.distcode[L+((it&(1<<ut+S)-1)>>ut)])>>>16&255,St=65535&R,!(ut+(ct=R>>>24)<=st);){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}it>>>=ut,st-=ut,g.back+=ut}if(it>>>=ct,st-=ct,g.back+=ct,64&mt){k.msg="invalid distance code",g.mode=30;break}g.offset=St,g.extra=15&mt,g.mode=24;case 24:if(g.extra){for(A=g.extra;st<A;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}g.offset+=it&(1<<g.extra)-1,it>>>=g.extra,st-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){k.msg="invalid distance too far back",g.mode=30;break}g.mode=25;case 25:if($t===0)break t;if(ot=Tt-$t,g.offset>ot){if((ot=g.offset-ot)>g.whave&&g.sane){k.msg="invalid distance too far back",g.mode=30;break}gt=ot>g.wnext?(ot-=g.wnext,g.wsize-ot):g.wnext-ot,ot>g.length&&(ot=g.length),J=g.window}else J=kt,gt=Et-g.offset,ot=g.length;for($t<ot&&(ot=$t),$t-=ot,g.length-=ot;kt[Et++]=J[gt++],--ot;);g.length===0&&(g.mode=21);break;case 26:if($t===0)break t;kt[Et++]=g.length,$t--,g.mode=21;break;case 27:if(g.wrap){for(;st<32;){if(xt===0)break t;xt--,it|=rt[ht++]<<st,st+=8}if(Tt-=$t,k.total_out+=Tt,g.total+=Tt,Tt&&(k.adler=g.check=g.flags?f(g.check,kt,Tt,Et-Tt):u(g.check,kt,Tt,Et-Tt)),Tt=$t,(g.flags?it:E(it))!==g.check){k.msg="incorrect data check",g.mode=30;break}st=it=0}g.mode=28;case 28:if(g.wrap&&g.flags){for(;st<32;){if(xt===0)break t;xt--,it+=rt[ht++]<<st,st+=8}if(it!==(4294967295&g.total)){k.msg="incorrect length check",g.mode=30;break}st=it=0}g.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;case 32:default:return v}return k.next_out=Et,k.avail_out=$t,k.next_in=ht,k.avail_in=xt,g.hold=it,g.bits=st,(g.wsize||Tt!==k.avail_out&&g.mode<30&&(g.mode<27||$!==4))&&G(k,k.output,k.next_out,Tt-k.avail_out)?(g.mode=31,-4):(Pt-=k.avail_in,Tt-=k.avail_out,k.total_in+=Pt,k.total_out+=Tt,g.total+=Tt,g.wrap&&Tt&&(k.adler=g.check=g.flags?f(g.check,kt,Tt,k.next_out-Tt):u(g.check,kt,Tt,k.next_out-Tt)),k.data_type=g.bits+(g.last?64:0)+(g.mode===12?128:0)+(g.mode===20||g.mode===15?256:0),(Pt==0&&Tt===0||$===4)&&F===b&&(F=-5),F)},o.inflateEnd=function(k){if(!k||!k.state)return v;var $=k.state;return $.window&&($.window=null),k.state=null,b},o.inflateGetHeader=function(k,$){var g;return k&&k.state&&2&(g=k.state).wrap?((g.head=$).done=!1,b):v},o.inflateSetDictionary=function(k,$){var g,rt=$.length;return k&&k.state?(g=k.state).wrap!==0&&g.mode!==11?v:g.mode===11&&u(1,$,rt,0)!==g.check?-3:G(k,$,rt,rt)?(g.mode=31,-4):(g.havedict=1,b):v},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,i,o){var l=r("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(_,m,b,v,C,x,T,E){var D,M,N,B,Y,V,tt,z,I,G=E.bits,k=0,$=0,g=0,rt=0,kt=0,ht=0,Et=0,xt=0,$t=0,it=0,st=null,Pt=0,Tt=new l.Buf16(16),ot=new l.Buf16(16),gt=null,J=0;for(k=0;k<=15;k++)Tt[k]=0;for($=0;$<v;$++)Tt[m[b+$]]++;for(kt=G,rt=15;1<=rt&&Tt[rt]===0;rt--);if(rt<kt&&(kt=rt),rt===0)return C[x++]=20971520,C[x++]=20971520,E.bits=1,0;for(g=1;g<rt&&Tt[g]===0;g++);for(kt<g&&(kt=g),k=xt=1;k<=15;k++)if(xt<<=1,(xt-=Tt[k])<0)return-1;if(0<xt&&(_===0||rt!==1))return-1;for(ot[1]=0,k=1;k<15;k++)ot[k+1]=ot[k]+Tt[k];for($=0;$<v;$++)m[b+$]!==0&&(T[ot[m[b+$]]++]=$);if(V=_===0?(st=gt=T,19):_===1?(st=u,Pt-=257,gt=f,J-=257,256):(st=h,gt=y,-1),k=g,Y=x,Et=$=it=0,N=-1,B=($t=1<<(ht=kt))-1,_===1&&852<$t||_===2&&592<$t)return 1;for(;;){for(tt=k-Et,I=T[$]<V?(z=0,T[$]):T[$]>V?(z=gt[J+T[$]],st[Pt+T[$]]):(z=96,0),D=1<<k-Et,g=M=1<<ht;C[Y+(it>>Et)+(M-=D)]=tt<<24|z<<16|I|0,M!==0;);for(D=1<<k-1;it&D;)D>>=1;if(D!==0?(it&=D-1,it+=D):it=0,$++,--Tt[k]==0){if(k===rt)break;k=m[b+T[$]]}if(kt<k&&(it&B)!==N){for(Et===0&&(Et=kt),Y+=g,xt=1<<(ht=k-Et);ht+Et<rt&&!((xt-=Tt[ht+Et])<=0);)ht++,xt<<=1;if($t+=1<<ht,_===1&&852<$t||_===2&&592<$t)return 1;C[N=it&B]=kt<<24|ht<<16|Y-x|0}}return it!==0&&(C[Y+it]=k-Et<<24|64<<16|0),E.bits=kt,0}},{"../utils/common":41}],51:[function(r,i,o){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,i,o){var l=r("../utils/common"),u=0,f=1;function h(R){for(var U=R.length;0<=--U;)R[U]=0}var y=0,_=29,m=256,b=m+1+_,v=30,C=19,x=2*b+1,T=15,E=16,D=7,M=256,N=16,B=17,Y=18,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(b+2));h(G);var k=new Array(2*v);h(k);var $=new Array(512);h($);var g=new Array(256);h(g);var rt=new Array(_);h(rt);var kt,ht,Et,xt=new Array(v);function $t(R,U,Q,X,K){this.static_tree=R,this.extra_bits=U,this.extra_base=Q,this.elems=X,this.max_length=K,this.has_stree=R&&R.length}function it(R,U){this.dyn_tree=R,this.max_code=0,this.stat_desc=U}function st(R){return R<256?$[R]:$[256+(R>>>7)]}function Pt(R,U){R.pending_buf[R.pending++]=255&U,R.pending_buf[R.pending++]=U>>>8&255}function Tt(R,U,Q){R.bi_valid>E-Q?(R.bi_buf|=U<<R.bi_valid&65535,Pt(R,R.bi_buf),R.bi_buf=U>>E-R.bi_valid,R.bi_valid+=Q-E):(R.bi_buf|=U<<R.bi_valid&65535,R.bi_valid+=Q)}function ot(R,U,Q){Tt(R,Q[2*U],Q[2*U+1])}function gt(R,U){for(var Q=0;Q|=1&R,R>>>=1,Q<<=1,0<--U;);return Q>>>1}function J(R,U,Q){var X,K,at=new Array(T+1),_t=0;for(X=1;X<=T;X++)at[X]=_t=_t+Q[X-1]<<1;for(K=0;K<=U;K++){var pt=R[2*K+1];pt!==0&&(R[2*K]=gt(at[pt]++,pt))}}function ct(R){var U;for(U=0;U<b;U++)R.dyn_ltree[2*U]=0;for(U=0;U<v;U++)R.dyn_dtree[2*U]=0;for(U=0;U<C;U++)R.bl_tree[2*U]=0;R.dyn_ltree[2*M]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function mt(R){8<R.bi_valid?Pt(R,R.bi_buf):0<R.bi_valid&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function St(R,U,Q,X){var K=2*U,at=2*Q;return R[K]<R[at]||R[K]===R[at]&&X[U]<=X[Q]}function ut(R,U,Q){for(var X=R.heap[Q],K=Q<<1;K<=R.heap_len&&(K<R.heap_len&&St(U,R.heap[K+1],R.heap[K],R.depth)&&K++,!St(U,X,R.heap[K],R.depth));)R.heap[Q]=R.heap[K],Q=K,K<<=1;R.heap[Q]=X}function S(R,U,Q){var X,K,at,_t,pt=0;if(R.last_lit!==0)for(;X=R.pending_buf[R.d_buf+2*pt]<<8|R.pending_buf[R.d_buf+2*pt+1],K=R.pending_buf[R.l_buf+pt],pt++,X===0?ot(R,K,U):(ot(R,(at=g[K])+m+1,U),(_t=V[at])!==0&&Tt(R,K-=rt[at],_t),ot(R,at=st(--X),Q),(_t=tt[at])!==0&&Tt(R,X-=xt[at],_t)),pt<R.last_lit;);ot(R,M,U)}function L(R,U){var Q,X,K,at=U.dyn_tree,_t=U.stat_desc.static_tree,pt=U.stat_desc.has_stree,Ct=U.stat_desc.elems,Lt=-1;for(R.heap_len=0,R.heap_max=x,Q=0;Q<Ct;Q++)at[2*Q]!==0?(R.heap[++R.heap_len]=Lt=Q,R.depth[Q]=0):at[2*Q+1]=0;for(;R.heap_len<2;)at[2*(K=R.heap[++R.heap_len]=Lt<2?++Lt:0)]=1,R.depth[K]=0,R.opt_len--,pt&&(R.static_len-=_t[2*K+1]);for(U.max_code=Lt,Q=R.heap_len>>1;1<=Q;Q--)ut(R,at,Q);for(K=Ct;Q=R.heap[1],R.heap[1]=R.heap[R.heap_len--],ut(R,at,1),X=R.heap[1],R.heap[--R.heap_max]=Q,R.heap[--R.heap_max]=X,at[2*K]=at[2*Q]+at[2*X],R.depth[K]=(R.depth[Q]>=R.depth[X]?R.depth[Q]:R.depth[X])+1,at[2*Q+1]=at[2*X+1]=K,R.heap[1]=K++,ut(R,at,1),2<=R.heap_len;);R.heap[--R.heap_max]=R.heap[1],function(Ot,ne){var be,_e,Re,re,Tn,Ae,xe=ne.dyn_tree,Kn=ne.max_code,ts=ne.stat_desc.static_tree,Ko=ne.stat_desc.has_stree,Zo=ne.stat_desc.extra_bits,Is=ne.stat_desc.extra_base,gr=ne.stat_desc.max_length,es=0;for(re=0;re<=T;re++)Ot.bl_count[re]=0;for(xe[2*Ot.heap[Ot.heap_max]+1]=0,be=Ot.heap_max+1;be<x;be++)gr<(re=xe[2*xe[2*(_e=Ot.heap[be])+1]+1]+1)&&(re=gr,es++),xe[2*_e+1]=re,Kn<_e||(Ot.bl_count[re]++,Tn=0,Is<=_e&&(Tn=Zo[_e-Is]),Ae=xe[2*_e],Ot.opt_len+=Ae*(re+Tn),Ko&&(Ot.static_len+=Ae*(ts[2*_e+1]+Tn)));if(es!==0){do{for(re=gr-1;Ot.bl_count[re]===0;)re--;Ot.bl_count[re]--,Ot.bl_count[re+1]+=2,Ot.bl_count[gr]--,es-=2}while(0<es);for(re=gr;re!==0;re--)for(_e=Ot.bl_count[re];_e!==0;)Kn<(Re=Ot.heap[--be])||(xe[2*Re+1]!==re&&(Ot.opt_len+=(re-xe[2*Re+1])*xe[2*Re],xe[2*Re+1]=re),_e--)}}(R,U),J(at,Lt,R.bl_count)}function d(R,U,Q){var X,K,at=-1,_t=U[1],pt=0,Ct=7,Lt=4;for(_t===0&&(Ct=138,Lt=3),U[2*(Q+1)+1]=65535,X=0;X<=Q;X++)K=_t,_t=U[2*(X+1)+1],++pt<Ct&&K===_t||(pt<Lt?R.bl_tree[2*K]+=pt:K!==0?(K!==at&&R.bl_tree[2*K]++,R.bl_tree[2*N]++):pt<=10?R.bl_tree[2*B]++:R.bl_tree[2*Y]++,at=K,Lt=(pt=0)===_t?(Ct=138,3):K===_t?(Ct=6,3):(Ct=7,4))}function F(R,U,Q){var X,K,at=-1,_t=U[1],pt=0,Ct=7,Lt=4;for(_t===0&&(Ct=138,Lt=3),X=0;X<=Q;X++)if(K=_t,_t=U[2*(X+1)+1],!(++pt<Ct&&K===_t)){if(pt<Lt)for(;ot(R,K,R.bl_tree),--pt!=0;);else K!==0?(K!==at&&(ot(R,K,R.bl_tree),pt--),ot(R,N,R.bl_tree),Tt(R,pt-3,2)):pt<=10?(ot(R,B,R.bl_tree),Tt(R,pt-3,3)):(ot(R,Y,R.bl_tree),Tt(R,pt-11,7));at=K,Lt=(pt=0)===_t?(Ct=138,3):K===_t?(Ct=6,3):(Ct=7,4)}}h(xt);var j=!1;function A(R,U,Q,X){Tt(R,(y<<1)+(X?1:0),3),function(K,at,_t,pt){mt(K),Pt(K,_t),Pt(K,~_t),l.arraySet(K.pending_buf,K.window,at,_t,K.pending),K.pending+=_t}(R,U,Q)}o._tr_init=function(R){j||(function(){var U,Q,X,K,at,_t=new Array(T+1);for(K=X=0;K<_-1;K++)for(rt[K]=X,U=0;U<1<<V[K];U++)g[X++]=K;for(g[X-1]=K,K=at=0;K<16;K++)for(xt[K]=at,U=0;U<1<<tt[K];U++)$[at++]=K;for(at>>=7;K<v;K++)for(xt[K]=at<<7,U=0;U<1<<tt[K]-7;U++)$[256+at++]=K;for(Q=0;Q<=T;Q++)_t[Q]=0;for(U=0;U<=143;)G[2*U+1]=8,U++,_t[8]++;for(;U<=255;)G[2*U+1]=9,U++,_t[9]++;for(;U<=279;)G[2*U+1]=7,U++,_t[7]++;for(;U<=287;)G[2*U+1]=8,U++,_t[8]++;for(J(G,b+1,_t),U=0;U<v;U++)k[2*U+1]=5,k[2*U]=gt(U,5);kt=new $t(G,V,m+1,b,T),ht=new $t(k,tt,0,v,T),Et=new $t(new Array(0),z,0,C,D)}(),j=!0),R.l_desc=new it(R.dyn_ltree,kt),R.d_desc=new it(R.dyn_dtree,ht),R.bl_desc=new it(R.bl_tree,Et),R.bi_buf=0,R.bi_valid=0,ct(R)},o._tr_stored_block=A,o._tr_flush_block=function(R,U,Q,X){var K,at,_t=0;0<R.level?(R.strm.data_type===2&&(R.strm.data_type=function(pt){var Ct,Lt=4093624447;for(Ct=0;Ct<=31;Ct++,Lt>>>=1)if(1&Lt&&pt.dyn_ltree[2*Ct]!==0)return u;if(pt.dyn_ltree[18]!==0||pt.dyn_ltree[20]!==0||pt.dyn_ltree[26]!==0)return f;for(Ct=32;Ct<m;Ct++)if(pt.dyn_ltree[2*Ct]!==0)return f;return u}(R)),L(R,R.l_desc),L(R,R.d_desc),_t=function(pt){var Ct;for(d(pt,pt.dyn_ltree,pt.l_desc.max_code),d(pt,pt.dyn_dtree,pt.d_desc.max_code),L(pt,pt.bl_desc),Ct=C-1;3<=Ct&&pt.bl_tree[2*I[Ct]+1]===0;Ct--);return pt.opt_len+=3*(Ct+1)+5+5+4,Ct}(R),K=R.opt_len+3+7>>>3,(at=R.static_len+3+7>>>3)<=K&&(K=at)):K=at=Q+5,Q+4<=K&&U!==-1?A(R,U,Q,X):R.strategy===4||at===K?(Tt(R,2+(X?1:0),3),S(R,G,k)):(Tt(R,4+(X?1:0),3),function(pt,Ct,Lt,Ot){var ne;for(Tt(pt,Ct-257,5),Tt(pt,Lt-1,5),Tt(pt,Ot-4,4),ne=0;ne<Ot;ne++)Tt(pt,pt.bl_tree[2*I[ne]+1],3);F(pt,pt.dyn_ltree,Ct-1),F(pt,pt.dyn_dtree,Lt-1)}(R,R.l_desc.max_code+1,R.d_desc.max_code+1,_t+1),S(R,R.dyn_ltree,R.dyn_dtree)),ct(R),X&&mt(R)},o._tr_tally=function(R,U,Q){return R.pending_buf[R.d_buf+2*R.last_lit]=U>>>8&255,R.pending_buf[R.d_buf+2*R.last_lit+1]=255&U,R.pending_buf[R.l_buf+R.last_lit]=255&Q,R.last_lit++,U===0?R.dyn_ltree[2*Q]++:(R.matches++,U--,R.dyn_ltree[2*(g[Q]+m+1)]++,R.dyn_dtree[2*st(U)]++),R.last_lit===R.lit_bufsize-1},o._tr_align=function(R){Tt(R,2,3),ot(R,M,G),function(U){U.bi_valid===16?(Pt(U,U.bi_buf),U.bi_buf=0,U.bi_valid=0):8<=U.bi_valid&&(U.pending_buf[U.pending++]=255&U.bi_buf,U.bi_buf>>=8,U.bi_valid-=8)}(R)}},{"../utils/common":41}],53:[function(r,i,o){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,i,o){(function(l){(function(u,f){if(!u.setImmediate){var h,y,_,m,b=1,v={},C=!1,x=u.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(u);T=T&&T.setTimeout?T:u,h={}.toString.call(u.process)==="[object process]"?function(N){process.nextTick(function(){D(N)})}:function(){if(u.postMessage&&!u.importScripts){var N=!0,B=u.onmessage;return u.onmessage=function(){N=!1},u.postMessage("","*"),u.onmessage=B,N}}()?(m="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",M,!1):u.attachEvent("onmessage",M),function(N){u.postMessage(m+N,"*")}):u.MessageChannel?((_=new MessageChannel).port1.onmessage=function(N){D(N.data)},function(N){_.port2.postMessage(N)}):x&&"onreadystatechange"in x.createElement("script")?(y=x.documentElement,function(N){var B=x.createElement("script");B.onreadystatechange=function(){D(N),B.onreadystatechange=null,y.removeChild(B),B=null},y.appendChild(B)}):function(N){setTimeout(D,0,N)},T.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var B=new Array(arguments.length-1),Y=0;Y<B.length;Y++)B[Y]=arguments[Y+1];var V={callback:N,args:B};return v[b]=V,h(b),b++},T.clearImmediate=E}function E(N){delete v[N]}function D(N){if(C)setTimeout(D,0,N);else{var B=v[N];if(B){C=!0;try{(function(Y){var V=Y.callback,tt=Y.args;switch(tt.length){case 0:V();break;case 1:V(tt[0]);break;case 2:V(tt[0],tt[1]);break;case 3:V(tt[0],tt[1],tt[2]);break;default:V.apply(f,tt)}})(B)}finally{E(N),C=!1}}}}function M(N){N.source===u&&typeof N.data=="string"&&N.data.indexOf(m)===0&&D(+N.data.slice(m.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof cr<"u"?cr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(xp);var fS=xp.exports;const dS=O5(fS),hS={key:0,class:"text-center p-10 card max-w-2xl mx-auto"},pS={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},gS={class:"lg:col-span-1 card flex flex-col"},mS={class:"mt-4 p-4 bg-slate-800 rounded-lg text-center"},vS={class:"text-5xl font-bold text-white tracking-widest"},_S={class:"text-lg font-semibold text-slate-800 mb-2"},yS={class:"h-48 overflow-y-auto bg-slate-100 p-3 rounded-md border space-y-2 flex-grow"},bS={key:0,class:"text-slate-400 text-center pt-10"},xS={class:"lg:col-span-2 card"},wS={key:0},kS={class:"space-y-6"},CS={class:"mt-1 border border-gray-300 rounded-lg"},SS={class:"border-b bg-slate-50 p-2 flex items-center gap-3"},AS={key:0},ES={class:"mt-2 flex space-x-4"},TS=["onClick"],RS={key:1},OS={class:"mt-2 flex space-x-4"},IS={key:1},$S=["innerHTML"],PS={class:"text-center my-6 text-2xl text-slate-600"},DS={class:"font-bold text-sky-600 text-3xl"},LS={key:2,class:"fixed inset-0 bg-gray-900 bg-opacity-90 flex flex-col items-center justify-center p-4 z-50"},BS={class:"w-full max-w-7xl h-[90vh] bg-white rounded-lg shadow-2xl flex flex-col p-6"},MS={class:"flex-grow overflow-y-auto"},NS={key:0,class:"space-y-6 p-4"},zS={class:"flex justify-between items-center mb-2"},US={key:0,class:"w-8 h-8 ml-2 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},FS={class:"text-2xl font-bold"},jS={class:"w-full bg-slate-200 rounded-full h-12"},WS={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},HS=["onClick"],qS={class:"text-lg font-semibold text-center truncate mb-2"},VS=["src"],GS={key:1,class:"text-base p-2 bg-slate-100 rounded h-32 overflow-hidden"},KS={key:3,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50"},ZS={class:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col"},YS={class:"p-4 border-b flex justify-between items-center bg-slate-50 rounded-t-lg"},JS={class:"text-2xl font-bold"},XS={class:"p-6 overflow-y-auto flex-grow flex items-center justify-center"},QS=["src"],tA={key:1,class:"text-3xl whitespace-pre-wrap"},eA={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},nA={class:"bg-white rounded-lg shadow-xl p-4 w-full max-w-3xl"},rA={class:"bg-slate-100 p-2 rounded-t-lg flex items-center justify-center gap-4 flex-wrap"},sA={class:"text-base font-medium"},iA={class:"text-base font-medium flex items-center gap-2"},oA={__name:"TeacherPingPongView",setup(t){const n=dt(null),r=dt(""),i=dt([]),o=dt("waiting"),l=Xe({type:"multiple-choice",htmlContent:"",correctAnswer:"A"}),u=dt({}),f=dt(null),h=dt(null),y=dt(null),_=dt(!1),m=dt({name:"",answer:""}),b=dt(!1),v=dt(!1),C=dt({}),x=dt({}),T=dt(null),E=dt(!1),D=dt("#ff0000"),M=dt(5),N=pe(()=>{if(!v.value||C.value.type!=="multiple-choice"&&C.value.type!=="true-false")return[];const ot={},gt=C.value.type==="multiple-choice"?["A","B","C","D"]:["O","X"];gt.forEach(ct=>ot[ct]=0);for(const ct in x.value){const mt=x.value[ct].answer;ot[mt]!==void 0&&ot[mt]++}const J=Object.keys(x.value).length;return gt.map(ct=>({option:ct,count:ot[ct],percentage:J>0?(ot[ct]/J*100).toFixed(0):0,isCorrect:ct===C.value.correctAnswer}))}),B=()=>n.value.emit("teacher:createRoom",ot=>{ot.roomCode&&(r.value=ot.roomCode)}),Y=()=>{l.htmlContent=f.value.innerHTML,n.value.emit("teacher:startQuestion",{roomCode:r.value,question:l})},V=()=>n.value.emit("teacher:stopAnswering",{roomCode:r.value}),tt=()=>{confirm("確定要結束活動嗎？")&&(n.value.emit("teacher:endActivity",{roomCode:r.value}),r.value="")},z=ot=>{m.value=ot,_.value=!0},I=()=>{b.value=!1,ht()},G=()=>{v.value=!1,o.value="results",f.value&&(f.value.innerHTML="")},k=()=>{if(!y.value)return;T.value=y.value.getContext("2d");const ot=y.value,gt=ot.getBoundingClientRect();ot.width=gt.width,ot.height=gt.height,ot.addEventListener("mousedown",g),ot.addEventListener("mousemove",rt),ot.addEventListener("mouseup",kt),ot.addEventListener("mouseleave",kt),ot.addEventListener("touchstart",g,{passive:!1}),ot.addEventListener("touchmove",rt,{passive:!1}),ot.addEventListener("touchend",kt)},$=ot=>{const gt=y.value,J=gt.getBoundingClientRect(),ct=gt.width/J.width,mt=gt.height/J.height,St=ot.touches?ot.touches[0].clientX:ot.clientX,ut=ot.touches?ot.touches[0].clientY:ot.clientY;return{x:(St-J.left)*ct,y:(ut-J.top)*mt}},g=ot=>{ot.preventDefault(),E.value=!0;const{x:gt,y:J}=$(ot);T.value.beginPath(),T.value.moveTo(gt,J)},rt=ot=>{if(!E.value)return;ot.preventDefault();const{x:gt,y:J}=$(ot);T.value.lineTo(gt,J),T.value.strokeStyle=D.value,T.value.lineWidth=M.value,T.value.lineCap="round",T.value.lineJoin="round",T.value.stroke()},kt=()=>{E.value&&(E.value=!1,T.value.closePath())},ht=()=>T.value.clearRect(0,0,y.value.width,y.value.height),Et=()=>{const ot=y.value.toDataURL("image/png"),gt=document.createElement("img");gt.src=ot,gt.style.maxWidth="100%",gt.style.maxHeight="200px",gt.style.display="block",gt.style.margin="0.5rem auto",f.value.appendChild(gt),I()},xt=()=>h.value.click(),$t=ot=>{const gt=ot.target.files[0];gt&&(it(gt,800,800,.8).then(J=>{const ct=document.createElement("img");ct.src=J,ct.style.maxWidth="100%",ct.style.maxHeight="200px",ct.style.display="block",ct.style.margin="0.5rem auto",f.value.appendChild(ct)}).catch(J=>console.error("圖片處理失敗:",J)),ot.target.value="")};function it(ot,gt,J,ct){return new Promise((mt,St)=>{const ut=new FileReader;ut.onload=S=>{const L=new Image;L.onload=()=>{let{width:d,height:F}=L;d>F?d>gt&&(F*=gt/d,d=gt):F>J&&(d*=J/F,F=J);const j=document.createElement("canvas");j.width=d,j.height=F,j.getContext("2d").drawImage(L,0,0,d,F),mt(j.toDataURL(ot.type,ct))},L.onerror=St,L.src=S.target.result},ut.onerror=St,ut.readAsDataURL(ot)})}const st=async()=>{const ot=new Date,gt=`${ot.getFullYear()}-${String(ot.getMonth()+1).padStart(2,"0")}-${String(ot.getDate()).padStart(2,"0")}_${String(ot.getHours()).padStart(2,"0")}${String(ot.getMinutes()).padStart(2,"0")}`,J=Object.values(x.value);if(C.value.type==="image"){const ct=new dS;for(const St of J){const ut=await Pt(St.answer),S=await(await fetch(ut)).blob(),L=`${St.name}_${gt}.png`;ct.file(L,S)}const mt=await ct.generateAsync({type:"blob"});Tt(mt,`繪圖作品_${r.value}_${gt}.zip`)}else{let ct=`\uFEFF學生暱稱,回答內容
`;J.forEach(St=>{const ut=`"${St.name.replace(/"/g,'""')}"`,S=`"${String(St.answer).replace(/"/g,'""')}"`;ct+=`${ut},${S}
`});const mt=new Blob([ct],{type:"text/csv;charset=utf-8;"});Tt(mt,`答題記錄_${r.value}_${gt}.csv`)}},Pt=ot=>new Promise(gt=>{const J=new Image;J.onload=()=>{const ct=document.createElement("canvas");ct.width=J.width,ct.height=J.height;const mt=ct.getContext("2d");mt.fillStyle="white",mt.fillRect(0,0,ct.width,ct.height),mt.drawImage(J,0,0),gt(ct.toDataURL("image/png"))},J.src=ot}),Tt=(ot,gt)=>{const J=document.createElement("a");J.href=URL.createObjectURL(ot),J.download=gt,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(J.href)};return Or(b,ot=>{ot&&mi(k)}),Qe(()=>{n.value=Yr("http://localhost:3000"),n.value.on("connect",()=>console.log("成功連接到 Socket.IO 伺服器")),n.value.on("student:joined",ot=>i.value=ot),n.value.on("student:left",ot=>i.value=ot),n.value.on("teacher:questionStarted",()=>{o.value="question",u.value={}}),n.value.on("student:answered",ot=>u.value=ot),n.value.on("question:ended",ot=>{C.value={...l},x.value=ot,o.value="results",v.value=!0}),n.value.on("activity:ended",ot=>{alert(ot||"活動已結束"),r.value="",o.value="waiting"})}),Qr(()=>{n.value&&(r.value&&n.value.emit("teacher:endActivity",{roomCode:r.value}),n.value.disconnect())}),(ot,gt)=>(W(),H("div",null,[gt[27]||(gt[27]=c("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"即時問答",-1)),r.value?(W(),H("div",pS,[c("div",gS,[gt[11]||(gt[11]=c("h2",{class:"text-xl font-semibold text-slate-800"},"活動進行中",-1)),c("div",mS,[gt[10]||(gt[10]=c("p",{class:"text-sm text-slate-300"},"房間代碼",-1)),c("p",vS,lt(r.value),1)]),gt[12]||(gt[12]=c("p",{class:"text-center text-slate-500 mt-4 text-base"},"請學生輸入此代碼加入活動",-1)),gt[13]||(gt[13]=c("hr",{class:"my-6"},null,-1)),c("h3",_S,"已連線學生 ("+lt(i.value.length)+")",1),c("ul",yS,[(W(!0),H(Ft,null,Xt(i.value,J=>(W(),H("li",{key:J.id,class:"text-slate-700 py-1 px-2 bg-white rounded shadow-sm"},lt(J.name),1))),128)),i.value.length===0?(W(),H("li",bS,"尚無學生加入...")):At("",!0)]),c("button",{onClick:tt,class:"btn btn-danger w-full mt-6 py-3 text-lg"}," 結束活動 ")]),c("div",xS,[o.value==="waiting"||o.value==="results"?(W(),H("div",wS,[gt[19]||(gt[19]=c("h2",{class:"text-2xl font-semibold text-slate-800 mb-6"},"設定新問題",-1)),c("div",kS,[c("div",null,[gt[15]||(gt[15]=c("label",{class:"block text-base font-medium text-slate-700"},"問題類型",-1)),Bt(c("select",{"onUpdate:modelValue":gt[0]||(gt[0]=J=>l.type=J),class:"mt-1 form-input text-lg py-3"},[...gt[14]||(gt[14]=[c("option",{value:"multiple-choice"},"單選題 (4選1)",-1),c("option",{value:"true-false"},"是非題",-1),c("option",{value:"short-answer"},"簡答題",-1),c("option",{value:"image"},"繪圖題",-1)])],512),[[di,l.type]])]),c("div",null,[gt[16]||(gt[16]=c("label",{class:"block text-base font-medium text-slate-700"},"題目內容 (可選)",-1)),c("div",CS,[c("div",SS,[c("button",{onClick:gt[1]||(gt[1]=J=>b.value=!0),class:"btn btn-secondary text-sm"},"繪圖"),c("button",{onClick:xt,class:"btn btn-secondary text-sm"},"插入圖片"),c("input",{type:"file",ref_key:"imageUploader",ref:h,onChange:$t,class:"hidden",accept:"image/*"},null,544)]),c("div",{ref_key:"questionEditor",ref:f,contenteditable:"true",class:"w-full min-h-[150px] p-3 text-lg bg-white overflow-y-auto focus:outline-none focus:ring-2 focus:ring-sky-400 rounded-b-lg",style:{"-webkit-user-modify":"read-write-plaintext-only"}},null,512)])]),l.type==="multiple-choice"?(W(),H("div",AS,[gt[17]||(gt[17]=c("label",{class:"block text-base font-medium text-slate-700"},"正確答案",-1)),c("div",ES,[(W(),H(Ft,null,Xt(["A","B","C","D"],J=>c("button",{key:J,onClick:ct=>l.correctAnswer=J,class:ce(["w-16 h-16 rounded-full font-bold text-2xl",l.correctAnswer===J?"bg-green-500 text-white ring-2 ring-offset-2 ring-green-500":"bg-slate-200 text-slate-700 hover:bg-slate-300"])},lt(J),11,TS)),64))])])):At("",!0),l.type==="true-false"?(W(),H("div",RS,[gt[18]||(gt[18]=c("label",{class:"block text-base font-medium text-slate-700"},"正確答案",-1)),c("div",OS,[c("button",{onClick:gt[2]||(gt[2]=J=>l.correctAnswer="O"),class:ce(["px-8 py-4 rounded-lg font-bold text-2xl",l.correctAnswer==="O"?"bg-green-500 text-white ring-2 ring-offset-2 ring-green-500":"bg-slate-200 text-slate-700 hover:bg-slate-300"])},"O (是)",2),c("button",{onClick:gt[3]||(gt[3]=J=>l.correctAnswer="X"),class:ce(["px-8 py-4 rounded-lg font-bold text-2xl",l.correctAnswer==="X"?"bg-red-500 text-white ring-2 ring-offset-2 ring-red-500":"bg-slate-200 text-slate-700 hover:bg-slate-300"])},"X (否)",2)])])):At("",!0),c("button",{onClick:Y,class:"btn bg-green-500 hover:bg-green-600 w-full text-xl py-4"}," 開始提問 ")])])):At("",!0),o.value==="question"?(W(),H("div",IS,[gt[21]||(gt[21]=c("h2",{class:"text-2xl font-semibold text-slate-800 mb-4"},"問題進行中...",-1)),c("div",{class:"p-4 border-2 border-sky-500 rounded-lg bg-sky-50 min-h-[150px]",innerHTML:l.htmlContent},null,8,$S),c("p",PS,[gt[20]||(gt[20]=ee("已作答人數: ",-1)),c("span",DS,lt(Object.keys(u.value).length),1),ee(" / "+lt(i.value.length),1)]),c("button",{onClick:V,class:"btn btn-danger w-full text-xl py-4"}," 結束作答 ")])):At("",!0)])])):(W(),H("div",hS,[gt[7]||(gt[7]=c("svg",{class:"mx-auto h-24 w-24 text-sky-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),gt[8]||(gt[8]=c("h2",{class:"mt-6 text-2xl font-semibold text-slate-700"},"開始一個新的問答活動",-1)),gt[9]||(gt[9]=c("p",{class:"mt-2 text-slate-500"},"點擊下方按鈕以產生一個活動房間代碼，讓學生可以加入。",-1)),c("button",{onClick:B,class:"btn btn-primary text-xl px-8 py-4 rounded-full mt-8"}," 建立新活動 ")])),v.value?(W(),H("div",LS,[c("div",BS,[c("div",{class:"flex justify-between items-center border-b pb-4 mb-6"},[gt[22]||(gt[22]=c("h2",{class:"text-3xl font-bold"},"作答結果",-1)),c("div",{class:"flex items-center gap-4"},[c("button",{onClick:st,class:"btn btn-success text-base"}," 匯出答題記錄 "),c("button",{onClick:G,class:"text-4xl text-slate-400 hover:text-slate-800"},"×")])]),c("div",MS,[C.value.type==="multiple-choice"||C.value.type==="true-false"?(W(),H("div",NS,[(W(!0),H(Ft,null,Xt(N.value,J=>(W(),H("div",{key:J.option,class:"w-full"},[c("div",zS,[c("span",{class:ce(["font-semibold text-3xl flex items-center",[J.isCorrect?"text-green-600":"text-slate-700"]])},[ee(lt(J.option)+" ",1),J.isCorrect?(W(),H("svg",US,[...gt[23]||(gt[23]=[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):At("",!0)],2),c("span",FS,lt(J.count)+"人 ("+lt(J.percentage)+"%)",1)]),c("div",jS,[c("div",{class:ce(["h-12 rounded-full flex items-center justify-center text-white font-bold text-lg",[J.isCorrect?"bg-green-500":"bg-sky-500"]]),style:Xr({width:J.percentage+"%"})},lt(J.percentage>10?J.percentage+"%":""),7)])]))),128))])):At("",!0),C.value.type==="image"||C.value.type==="short-answer"?(W(),H("div",WS,[(W(!0),H(Ft,null,Xt(x.value,J=>(W(),H("div",{key:J.id,onClick:ct=>z(J),class:"card p-2 cursor-pointer hover:shadow-xl hover:-translate-y-1 transition-all"},[c("p",qS,lt(J.name),1),C.value.type==="image"?(W(),H("img",{key:0,src:J.answer,class:"w-full rounded-md aspect-video object-contain bg-slate-100"},null,8,VS)):(W(),H("p",GS,lt(J.answer),1))],8,HS))),128))])):At("",!0)])])])):At("",!0),_.value?(W(),H("div",KS,[c("div",ZS,[c("div",YS,[c("h3",JS,lt(m.value.name)+" 的回應",1),c("button",{onClick:gt[4]||(gt[4]=J=>_.value=!1),class:"text-4xl text-slate-400 hover:text-slate-800"},"×")]),c("div",XS,[C.value.type==="image"?(W(),H("img",{key:0,src:m.value.answer,class:"max-w-full max-h-full object-contain"},null,8,QS)):(W(),H("p",tA,lt(m.value.answer),1))])])])):At("",!0),b.value?(W(),H("div",eA,[c("div",nA,[gt[26]||(gt[26]=c("h3",{class:"text-2xl font-bold mb-4"},"繪製題目插圖",-1)),c("div",rA,[c("label",sA,[gt[24]||(gt[24]=ee("顏色: ",-1)),Bt(c("input",{type:"color","onUpdate:modelValue":gt[5]||(gt[5]=J=>D.value=J)},null,512),[[jt,D.value]])]),c("label",iA,[gt[25]||(gt[25]=ee("筆刷: ",-1)),Bt(c("input",{type:"range","onUpdate:modelValue":gt[6]||(gt[6]=J=>M.value=J),min:"1",max:"50"},null,512),[[jt,M.value]])])]),c("canvas",{ref_key:"drawingCanvas",ref:y,class:"border bg-white w-full aspect-video",style:{"touch-action":"none"}},null,512),c("div",{class:"flex justify-end gap-4 mt-4"},[c("button",{onClick:I,class:"btn btn-secondary text-base"},"取消"),c("button",{onClick:Et,class:"btn bg-teal-500 hover:bg-teal-600 text-base"},"儲存繪圖")])])])):At("",!0)]))}},aA={class:"min-h-screen bg-sky-100 flex items-center justify-center p-4 font-sans"},lA={key:0,class:"card p-8 text-center"},uA={class:"text-3xl font-bold text-slate-700"},cA={key:1,class:"card p-8 transform transition-all hover:shadow-2xl duration-300"},fA={key:0,class:"text-red-500 text-sm text-center pt-2"},dA={key:2,class:"card p-8 text-center"},hA={key:0},pA={key:0},gA={key:1},mA={key:0,class:"text-slate-500 mt-4 text-2xl"},vA={class:"font-bold text-slate-700"},_A={key:1},yA={key:0},bA=["src"],xA={key:1,class:"text-2xl text-slate-600 bg-slate-100 p-4 rounded-lg break-words whitespace-pre-wrap"},wA=["innerHTML"],kA={key:1,class:"mb-6"},CA={class:"text-3xl font-semibold text-center text-slate-800"},SA={key:2,class:"grid grid-cols-2 gap-4"},AA=["onClick"],EA={key:3,class:"grid grid-cols-2 gap-4"},TA={key:5},RA={class:"bg-slate-100 p-2 rounded-t-lg flex items-center justify-center gap-2 md:gap-4 flex-wrap"},OA={class:"text-base font-medium"},IA={class:"flex items-center gap-2"},$A={class:"w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center"},PA={key:4,class:"text-center p-8 card"},DA={key:5,class:"text-center p-8 card"},LA={__name:"StudentPingPongView",setup(t){const n=dt(null),r=du(),i=Xe({roomCode:"",name:""}),o=Xe({joined:!1}),l=dt(""),u=dt(null),f=dt(!1),h=dt(""),y=dt(""),_=dt(null),m=dt(null),b=dt(null),v=dt(null),C=dt(!1),x=dt("#000000"),T=dt(5),E=()=>{if(!b.value)return;v.value=b.value.getContext("2d");const I=b.value,G=I.getBoundingClientRect();I.width=G.width,I.height=G.height,I.addEventListener("mousedown",M),I.addEventListener("mousemove",N),I.addEventListener("mouseup",B),I.addEventListener("mouseleave",B),I.addEventListener("touchstart",M,{passive:!1}),I.addEventListener("touchmove",N,{passive:!1}),I.addEventListener("touchend",B)},D=I=>{const G=b.value,k=G.getBoundingClientRect(),$=G.width/k.width,g=G.height/k.height,rt=I.touches?I.touches[0].clientX:I.clientX,kt=I.touches?I.touches[0].clientY:I.clientY;return{x:(rt-k.left)*$,y:(kt-k.top)*g}},M=I=>{I.preventDefault(),C.value=!0;const{x:G,y:k}=D(I);v.value.beginPath(),v.value.moveTo(G,k)},N=I=>{if(!C.value)return;I.preventDefault();const{x:G,y:k}=D(I);v.value.lineTo(G,k),v.value.strokeStyle=x.value,v.value.lineWidth=T.value,v.value.lineCap="round",v.value.lineJoin="round",v.value.stroke()},B=()=>{C.value&&(C.value=!1,v.value.closePath())},Y=()=>{v.value.clearRect(0,0,b.value.width,b.value.height)},V=()=>{const I=b.value,G=document.createElement("canvas");G.width=I.width,G.height=I.height;const k=G.getContext("2d");k.fillStyle="white",k.fillRect(0,0,G.width,G.height),k.drawImage(I,0,0),z(G.toDataURL("image/png"))};Or(u,I=>{(I==null?void 0:I.type)==="image"&&mi(E)});const tt=()=>{if(!i.roomCode||!i.name){l.value="房間代碼和姓名為必填項。";return}l.value="",n.value.emit("student:joinRoom",{roomCode:i.roomCode.toUpperCase(),name:i.name},I=>{I.success?o.joined=!0:l.value=I.message})},z=I=>{typeof I=="string"&&!I.trim()||(_.value=I,n.value.emit("student:submitAnswer",{roomCode:i.roomCode.toUpperCase(),answer:I}),f.value=!0)};return Qe(()=>{const I=r.query.room;I&&(i.roomCode=I.toUpperCase());const G=localStorage.getItem("studentInfo");G&&(i.name=JSON.parse(G).name),n.value=Yr(),n.value.on("connect",()=>console.log("成功連接到 Socket.IO 伺服器")),n.value.on("question:started",k=>{u.value=k,f.value=!1,h.value=""}),n.value.on("question:ended",k=>{var kt,ht;const $=(kt=u.value)==null?void 0:kt.type,g=(ht=u.value)==null?void 0:ht.correctAnswer;let rt=null;($==="multiple-choice"||$==="true-false")&&(rt=_.value===g),m.value={myAnswer:_.value,correctAnswer:g,questionType:$,isCorrect:rt},u.value=null,f.value=!1,setTimeout(()=>{m.value=null,_.value=null},5e3)}),n.value.on("activity:ended",k=>{y.value=k||"老師已結束活動。",o.joined=!1,u.value=null,f.value=!1,setTimeout(()=>{y.value="",l.value=""},5e3)})}),Qr(()=>{n.value&&n.value.disconnect()}),(I,G)=>{var k,$;return W(),H("div",aA,[c("div",{class:ce(["w-full transition-all duration-300",((k=u.value)==null?void 0:k.type)==="image"||(($=m.value)==null?void 0:$.questionType)==="image"?"max-w-4xl":"max-w-lg"])},[y.value?(W(),H("div",lA,[c("h2",uA,lt(y.value),1),G[8]||(G[8]=c("p",{class:"text-slate-500 mt-2 text-xl"},"此頁面將在幾秒後重設。",-1)),G[9]||(G[9]=c("div",{class:"mt-8"},[c("svg",{class:"h-16 w-16 text-slate-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])):o.joined?m.value?(W(),H("div",dA,[m.value.isCorrect!==null?(W(),H("div",hA,[m.value.isCorrect?(W(),H("div",pA,[...G[15]||(G[15]=[c("svg",{class:"mx-auto h-24 w-24 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),c("h2",{class:"mt-6 text-5xl font-bold text-green-600"},"答對了！",-1)])])):(W(),H("div",gA,[G[17]||(G[17]=c("svg",{class:"mx-auto h-24 w-24 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),G[18]||(G[18]=c("h2",{class:"mt-6 text-5xl font-bold text-red-600"},"答錯了",-1)),m.value.correctAnswer?(W(),H("p",mA,[G[16]||(G[16]=ee("正確答案是： ",-1)),c("span",vA,lt(m.value.correctAnswer),1)])):At("",!0)]))])):(W(),H("div",_A,[G[19]||(G[19]=c("h2",{class:"text-3xl font-bold text-slate-700 mb-6"},"您回答的內容：",-1)),m.value.questionType==="image"?(W(),H("div",yA,[c("img",{src:m.value.myAnswer,class:"max-w-full max-h-80 mx-auto border rounded-lg bg-white p-2"},null,8,bA)])):(W(),H("div",xA,lt(m.value.myAnswer),1))])),G[20]||(G[20]=c("p",{class:"text-slate-400 mt-8 text-lg animate-pulse"},"準備下一題...",-1))])):o.joined&&u.value&&!f.value?(W(),H("div",{key:3,class:ce(["card",u.value.type==="image"?"p-4":"p-8"])},[u.value.htmlContent?(W(),H("div",{key:0,id:"question-area",class:"mb-6 max-h-60 overflow-y-auto p-2 text-xl",innerHTML:u.value.htmlContent},null,8,wA)):u.value.text?(W(),H("div",kA,[c("p",CA,lt(u.value.text),1)])):At("",!0),u.value.type==="multiple-choice"?(W(),H("div",SA,[(W(),H(Ft,null,Xt(["A","B","C","D"],g=>c("button",{key:g,onClick:rt=>z(g),class:"answer-btn-student text-7xl font-bold h-40"},lt(g),9,AA)),64))])):At("",!0),u.value.type==="true-false"?(W(),H("div",EA,[c("button",{onClick:G[2]||(G[2]=g=>z("O")),class:"answer-btn-student h-40"},[...G[21]||(G[21]=[c("svg",{class:"w-24 h-24 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])]),c("button",{onClick:G[3]||(G[3]=g=>z("X")),class:"answer-btn-student h-40"},[...G[22]||(G[22]=[c("svg",{class:"w-24 h-24 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])])):At("",!0),u.value.type==="short-answer"?(W(),H("form",{key:4,onSubmit:G[5]||(G[5]=ze(g=>z(h.value),["prevent"]))},[Bt(c("textarea",{"onUpdate:modelValue":G[4]||(G[4]=g=>h.value=g),rows:"6",class:"form-input text-xl",placeholder:"請在此輸入您的答案..."},null,512),[[jt,h.value]]),G[23]||(G[23]=c("button",{type:"submit",class:"w-full mt-4 btn btn-primary py-4 text-xl font-bold"},"送出答案",-1))],32)):At("",!0),u.value.type==="image"?(W(),H("div",TA,[c("div",RA,[c("label",OA,[G[24]||(G[24]=ee("顏色: ",-1)),Bt(c("input",{type:"color","onUpdate:modelValue":G[6]||(G[6]=g=>x.value=g),class:"w-10 h-10"},null,512),[[jt,x.value]])]),c("div",IA,[G[25]||(G[25]=c("label",{class:"text-base font-medium"},"筆刷:",-1)),Bt(c("input",{type:"range","onUpdate:modelValue":G[7]||(G[7]=g=>T.value=g),min:"1",max:"50",class:"w-32 md:w-48"},null,512),[[jt,T.value]]),c("span",$A,[c("span",{class:"rounded-full bg-black",style:Xr({width:T.value+"px",height:T.value+"px"})},null,4)])]),c("button",{onClick:Y,class:"btn btn-secondary text-base"},"清除")]),c("canvas",{ref_key:"drawingCanvas",ref:b,class:"border-x border-b border-gray-300 bg-white w-full aspect-video",style:{"touch-action":"none"}},null,512),c("button",{onClick:V,class:"mt-4 w-full btn bg-orange-500 hover:bg-orange-600 text-xl font-bold py-4"},"送出我的作品")])):At("",!0)],2)):o.joined&&f.value?(W(),H("div",PA,[...G[26]||(G[26]=[c("svg",{class:"mx-auto h-24 w-24 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),c("h2",{class:"mt-6 text-3xl font-bold text-green-600"},"已成功送出答案！",-1),c("p",{class:"text-slate-500 mt-2 text-lg"},"請等待下一題或老師公佈結果...",-1)])])):o.joined&&!u.value?(W(),H("div",DA,[...G[27]||(G[27]=[fr('<h2 class="text-4xl font-bold text-slate-700">已成功加入！</h2><p class="text-slate-500 mt-2 text-xl">請等待老師開始提問...</p><div class="mt-12"><svg class="animate-spin h-16 w-16 text-sky-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>',3)])])):At("",!0):(W(),H("div",cA,[G[13]||(G[13]=c("h1",{class:"text-3xl font-bold text-center text-sky-600 mb-2"},"加入 即時問答 活動",-1)),G[14]||(G[14]=c("p",{class:"text-center text-slate-500 mb-8"},"請輸入老師提供的房間代碼",-1)),c("form",{onSubmit:ze(tt,["prevent"]),class:"space-y-6"},[c("div",null,[G[10]||(G[10]=c("label",{for:"roomCode",class:"block text-lg font-bold text-slate-600 mb-1"},"房間代碼",-1)),Bt(c("input",{"onUpdate:modelValue":G[0]||(G[0]=g=>i.roomCode=g),type:"text",id:"roomCode",placeholder:"ABCDEF",class:"form-input text-4xl tracking-widest text-center uppercase py-3"},null,512),[[jt,i.roomCode,void 0,{trim:!0}]])]),c("div",null,[G[11]||(G[11]=c("label",{for:"studentName",class:"block text-lg font-bold text-slate-600 mb-1"},"你的名字",-1)),Bt(c("input",{"onUpdate:modelValue":G[1]||(G[1]=g=>i.name=g),type:"text",id:"studentName",placeholder:"請輸入姓名或座號",class:"form-input text-2xl py-3"},null,512),[[jt,i.name,void 0,{trim:!0}]])]),l.value?(W(),H("p",fA,lt(l.value),1)):At("",!0),G[12]||(G[12]=c("button",{type:"submit",class:"w-full btn btn-primary py-4 text-2xl font-bold"}," 加入 ",-1))],32)]))],2)])}}},BA={class:"flex justify-between items-center mb-8"},MA={key:0,class:"text-center py-10 text-slate-500"},NA={key:1,class:"text-center bg-white rounded-lg p-12 shadow"},zA={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},UA={class:"flex-grow"},FA={key:0,class:"px-2 py-1 text-xs font-semibold rounded-full bg-sky-100 text-sky-800"},jA={class:"text-2xl font-bold text-slate-800 mt-2"},WA={class:"text-sm text-slate-500 mt-2"},HA={class:"text-sm text-slate-500 mt-1"},qA={class:"mt-6 grid grid-cols-2 gap-3"},VA=["onClick"],GA={class:"mt-3 flex justify-end items-center text-sm"},KA=["onClick"],ZA=["onClick"],YA={key:3,class:"fixed z-10 inset-0 overflow-y-auto"},JA={class:"flex items-center justify-center min-h-screen"},XA={class:"p-6"},QA={class:"text-xl font-bold mb-4"},tE={class:"space-y-4"},eE=["value"],nE={class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"},rE={key:4,class:"fixed z-20 inset-0 overflow-y-auto"},sE={class:"flex items-center justify-center min-h-screen p-4"},iE={class:"bg-white rounded-lg shadow-xl transform transition-all w-full max-w-5xl h-[90vh] flex flex-col"},oE={class:"p-4 border-b flex justify-between items-center"},aE={class:"text-2xl font-bold"},lE={class:"flex-grow p-6 overflow-y-auto"},uE={class:"flex justify-end items-center gap-4 mb-6"},cE={key:0,class:"text-center text-slate-500 py-10"},fE={key:1,class:"space-y-4"},dE={class:"flex justify-between items-start"},hE={class:"font-bold text-lg"},pE=["innerHTML"],gE={class:"grid grid-cols-2 gap-x-8 gap-y-2 mt-2 pl-6"},mE={key:0,class:"w-5 h-5 ml-1 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},vE={class:"flex items-center space-x-2"},_E=["onClick"],yE=["onClick"],bE={key:5,class:"fixed z-30 inset-0 overflow-y-auto"},xE={class:"flex items-center justify-center min-h-screen"},wE={class:"p-6"},kE={class:"text-xl font-bold mb-4"},CE={class:"space-y-4"},SE=["onUpdate:modelValue","placeholder"],AE={class:"flex items-center gap-1.5"},EE=["name","value"],TE=["onClick"],RE={class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"},OE={__name:"QuizManagerView",setup(t){const n=dt(!0),r=dt([]),i=dt([]),o=dt(!1),l=dt({}),u=dt(!1),f=dt(null),h=dt([]),y=dt(!1),_=dt({}),m=dt(null),b=z=>{l.value=z?{...z}:{title:"",subject_id:null},o.value=!0},v=async()=>{const z=!!l.value.id,I=z?`/api/quiz-sets/${l.value.id}`:"/api/quiz-sets",G=z?"PUT":"POST";try{const k=await Ht(I,{method:G,body:JSON.stringify(l.value)});if(!k.ok){const g=await k.json();throw new Error(g.error||"儲存失敗，請檢查您的輸入")}const $=await k.json();if(z){const g=r.value.findIndex(rt=>rt.id===$.id);g!==-1&&(r.value[g]=$)}else r.value.unshift($);o.value=!1}catch(k){console.error("儲存測驗集失敗:",k),alert(`儲存失敗: ${k.message}`)}},C=async z=>{if(confirm("確定要刪除這個測驗集嗎？所有相關的題目將會一併刪除！"))try{await Ht(`/api/quiz-sets/${z}`,{method:"DELETE"}),r.value=r.value.filter(I=>I.id!==z)}catch(I){console.error("刪除測驗集失敗:",I)}},x=async z=>{try{const I=await Ht(`/api/quiz-questions/${z.id}`);if(!I.ok)throw new Error("讀取題目失敗");h.value=await I.json()}catch(I){console.error("讀取題目失敗:",I),alert(I.message)}},T=async z=>{f.value=z,u.value=!0,await x(z)},E=()=>{u.value=!1,f.value=null,h.value=[]},D=z=>{z?(_.value={...z,options:JSON.parse(z.options).map(I=>({text:I}))},_.value.correct_answer=z.correct_answer):_.value={quiz_set_id:f.value.id,question_text:"",options:[{text:""},{text:""}],correct_answer:""},y.value=!0},M=()=>{_.value.options.length<4&&_.value.options.push({text:""})},N=z=>{_.value.options.length>2&&_.value.options.splice(z,1)},B=async()=>{const z=!!_.value.id,I=z?`/api/quiz-questions/${_.value.id}`:"/api/quiz-questions",G=z?"PUT":"POST",k={..._.value,options:_.value.options.map($=>$.text)};try{const $=await Ht(I,{method:G,body:JSON.stringify(k)});if(!$.ok){const rt=await $.json();throw new Error(rt.error||"儲存題目失敗")}const g=await $.json();if(z){const rt=h.value.findIndex(kt=>kt.id===g.id);rt!==-1&&(h.value[rt]=g)}else h.value.push(g);y.value=!1}catch($){console.error("儲存題目失敗:",$),alert(`儲存失敗: ${$.message}`)}},Y=async z=>{if(confirm("確定要刪除這個題目嗎？"))try{await Ht(`/api/quiz-questions/${z}`,{method:"DELETE"}),h.value=h.value.filter(I=>I.id!==z)}catch(I){console.error("刪除題目失敗:",I)}},V=()=>{m.value.click()},tt=async z=>{const I=z.target.files[0];if(!I||!f.value)return;const G=new FormData;G.append("file",I);try{const k=await Ht(`/api/quiz-questions/import/${f.value.id}`,{method:"POST",body:G}),$=await k.json();if(!k.ok)throw new Error($.error);alert($.message),await x(f.value)}catch(k){console.error("匯入題庫失敗:",k),alert(`匯入失敗: ${k.message}`)}finally{m.value.value=""}};return Qe(async()=>{try{const[z,I]=await Promise.all([Ht("/api/quiz-sets"),Ht("/api/subjects")]);if(!z.ok||!I.ok)throw new Error("無法載入初始資料");r.value=await z.json(),i.value=await I.json()}catch(z){console.error("初始化失敗:",z)}finally{n.value=!1}}),(z,I)=>{const G=Eo("router-link");return W(),H("div",null,[c("div",BA,[I[10]||(I[10]=c("h1",{class:"text-4xl font-bold text-slate-800"},"搶答競賽 (QuizRace)",-1)),c("button",{onClick:I[0]||(I[0]=k=>b(null)),class:"btn btn-primary"},"建立新測驗集")]),n.value?(W(),H("div",MA,"正在載入題庫...")):r.value.length===0?(W(),H("div",NA,[...I[11]||(I[11]=[c("h3",{class:"text-2xl font-semibold text-slate-700"},"尚未建立任何測驗集",-1),c("p",{class:"text-slate-500 mt-2"},"點擊右上角的「建立新測驗集」來開始吧！",-1)])])):(W(),H("div",zA,[(W(!0),H(Ft,null,Xt(r.value,k=>(W(),H("div",{key:k.id,class:"card flex flex-col"},[c("div",UA,[k.subject_name?(W(),H("span",FA,lt(k.subject_name),1)):At("",!0),c("h3",jA,lt(k.title),1),c("p",WA,"題目數量: "+lt(k.question_count||0)+" 題",1),c("p",HA,"建立於: "+lt(new Date(k.created_at).toLocaleDateString()),1)]),c("div",qA,[c("button",{onClick:$=>T(k),class:"btn bg-slate-600 hover:bg-slate-700 w-full"},"管理題目",8,VA),fe(G,{to:{name:"quiz-game-teacher",params:{setId:k.id}},class:"btn btn-success w-full text-center"},{default:hn(()=>[...I[12]||(I[12]=[ee("開始競賽",-1)])]),_:1},8,["to"])]),c("div",GA,[c("button",{onClick:$=>b(k),class:"text-blue-500 hover:text-blue-700 font-medium"},"編輯資訊",8,KA),I[13]||(I[13]=c("span",{class:"mx-2 text-slate-300"},"|",-1)),c("button",{onClick:$=>C(k.id),class:"text-red-500 hover:text-red-700 font-medium"},"刪除",8,ZA)])]))),128))])),o.value?(W(),H("div",YA,[c("div",JA,[c("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:I[1]||(I[1]=k=>o.value=!1)}),c("form",{onSubmit:ze(v,["prevent"]),class:"bg-white rounded-lg shadow-xl transform transition-all max-w-lg w-full"},[c("div",XA,[c("h3",QA,lt(l.value.id?"編輯測驗集":"建立新測驗集"),1),c("div",tE,[c("div",null,[I[14]||(I[14]=c("label",{class:"block text-sm font-medium text-slate-700"},"測驗集標題",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[2]||(I[2]=k=>l.value.title=k),required:"",class:"mt-1 form-input"},null,512),[[jt,l.value.title]])]),c("div",null,[I[16]||(I[16]=c("label",{class:"block text-sm font-medium text-slate-700"},"關聯科目 (選填)",-1)),Bt(c("select",{"onUpdate:modelValue":I[3]||(I[3]=k=>l.value.subject_id=k),class:"mt-1 form-input"},[I[15]||(I[15]=c("option",{value:null},"-- 無 --",-1)),(W(!0),H(Ft,null,Xt(i.value,k=>(W(),H("option",{key:k.id,value:k.id},lt(k.name),9,eE))),128))],512),[[di,l.value.subject_id]])])])]),c("div",nE,[c("button",{type:"button",onClick:I[4]||(I[4]=k=>o.value=!1),class:"btn btn-secondary"},"取消"),I[17]||(I[17]=c("button",{type:"submit",class:"btn btn-primary"},"儲存",-1))])],32)])])):At("",!0),u.value&&f.value?(W(),H("div",rE,[c("div",sE,[c("div",{class:"fixed inset-0 bg-gray-800 bg-opacity-80",onClick:E}),c("div",iE,[c("div",oE,[c("h3",aE,"管理題目: "+lt(f.value.title),1),c("button",{onClick:E,class:"text-3xl text-gray-500 hover:text-gray-800"},"×")]),c("div",lE,[c("div",uE,[c("input",{type:"file",ref_key:"quizFileInput",ref:m,onChange:tt,class:"hidden",accept:".xlsx, .xls, .csv"},null,544),c("button",{onClick:V,class:"btn bg-emerald-500 hover:bg-emerald-600"},"匯入題庫"),c("button",{onClick:I[5]||(I[5]=k=>D(null)),class:"btn btn-primary"},"新增題目")]),h.value.length===0?(W(),H("div",cE,[...I[18]||(I[18]=[c("p",null,"這個測驗集還沒有題目喔！",-1)])])):(W(),H("div",fE,[(W(!0),H(Ft,null,Xt(h.value,(k,$)=>(W(),H("div",{key:k.id,class:"border rounded-lg p-4 bg-slate-50"},[c("div",dE,[c("div",null,[c("p",hE,[ee(lt($+1)+". ",1),c("span",{innerHTML:k.question_text||"無題目文字"},null,8,pE)]),c("div",gE,[(W(!0),H(Ft,null,Xt(JSON.parse(k.options),(g,rt)=>(W(),H("div",{key:rt,class:ce(["flex items-center",{"font-bold text-green-600":g===k.correct_answer}])},[ee(lt(g)+" ",1),g===k.correct_answer?(W(),H("svg",mE,[...I[19]||(I[19]=[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):At("",!0)],2))),128))])]),c("div",vE,[c("button",{onClick:g=>D(k),class:"btn bg-yellow-500 hover:bg-yellow-600 text-sm"},"編輯",8,_E),c("button",{onClick:g=>Y(k.id),class:"btn btn-danger text-sm"},"刪除",8,yE)])])]))),128))]))])])])])):At("",!0),y.value?(W(),H("div",bE,[c("div",xE,[c("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50",onClick:I[6]||(I[6]=k=>y.value=!1)}),c("form",{onSubmit:ze(B,["prevent"]),class:"bg-white rounded-lg shadow-xl transform transition-all max-w-2xl w-full"},[c("div",wE,[c("h3",kE,lt(_.value.id?"編輯題目":"新增題目"),1),c("div",CE,[c("div",null,[I[20]||(I[20]=c("label",{class:"block text-sm font-medium text-slate-700"},"題目內容",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[7]||(I[7]=k=>_.value.question_text=k),class:"mt-1 form-input"},null,512),[[jt,_.value.question_text]])]),c("div",null,[I[22]||(I[22]=c("label",{class:"block text-sm font-medium text-slate-700"},"選項與答案",-1)),(W(!0),H(Ft,null,Xt(_.value.options,(k,$)=>(W(),H("div",{key:$,class:"flex items-center mt-2 gap-2"},[Bt(c("input",{type:"text","onUpdate:modelValue":g=>k.text=g,class:"form-input flex-grow",required:"",placeholder:`選項 ${$+1}`},null,8,SE),[[jt,k.text]]),c("label",AE,[Bt(c("input",{type:"radio",name:"correct-option-"+_.value.id,value:k.text,"onUpdate:modelValue":I[8]||(I[8]=g=>_.value.correct_answer=g)},null,8,EE),[[mw,_.value.correct_answer]]),I[21]||(I[21]=ee(" 正確 ",-1))]),_.value.options.length>2?(W(),H("button",{key:0,type:"button",onClick:g=>N($),class:"text-red-500 text-xl font-bold"},"×",8,TE)):At("",!0)]))),128)),_.value.options.length<4?(W(),H("button",{key:0,type:"button",onClick:M,class:"text-sm text-sky-600 mt-2"},"新增選項")):At("",!0)])])]),c("div",RE,[c("button",{type:"button",onClick:I[9]||(I[9]=k=>y.value=!1),class:"btn btn-secondary"},"取消"),I[23]||(I[23]=c("button",{type:"submit",class:"btn btn-primary"},"儲存題目",-1))])],32)])])):At("",!0)])}}},IE={class:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-4 font-sans"},$E={key:0,class:"text-center"},PE={key:1,class:"w-full max-w-5xl text-center relative"},DE={class:"mt-8 p-8 bg-gray-800 rounded-2xl shadow-lg flex items-center justify-center"},LE={class:"text-center"},BE={class:"text-8xl font-mono font-bold tracking-widest text-white"},ME=["disabled"],NE={class:"mt-8"},zE={key:0,class:"text-gray-400 mt-4 text-lg"},UE={key:1,class:"flex flex-wrap justify-center gap-4 mt-4 max-w-4xl mx-auto"},FE={class:"font-bold text-sky-300"},jE={key:2,class:"w-full max-w-6xl mx-auto flex flex-col h-full"},WE={class:"flex justify-between items-center bg-gray-800 p-4 rounded-t-lg"},HE={class:"text-2xl font-bold"},qE={class:"text-5xl font-bold text-yellow-300"},VE={class:"text-2xl font-bold"},GE={class:"flex-grow bg-white text-gray-900 flex flex-col items-center justify-center p-8 text-center rounded-b-lg"},KE=["innerHTML"],ZE={class:"grid grid-cols-2 gap-4 p-4 mt-4"},YE={class:"text-5xl mr-6 font-black"},JE={key:3,class:"w-full max-w-4xl mx-auto text-center"},XE={class:"space-y-4"},QE={class:"flex items-center"},t8={class:"font-bold w-12"},e8={class:"font-bold text-yellow-300"},n8={key:4,class:"w-full max-w-4xl mx-auto text-center"},r8={class:"space-y-4"},s8={class:"flex items-center gap-4"},i8={class:"font-bold text-5xl w-16"},o8={class:"font-bold"},a8={__name:"QuizGameTeacher",props:{setId:{type:String,required:!0}},setup(t){const n=t,r=qo(),i=dt(null),o=dt(!0),l=dt(""),u=dt("lobby"),f=dt([]),h=dt(null),y=dt(0),_=dt(0),m=dt(15),b=dt(null),v=dt(0),C=dt([]),x=["bg-red-600","bg-blue-600","bg-yellow-500","bg-green-600"],T=pe(()=>y.value>=_.value-1),E=B=>B===0?"bg-yellow-400 text-gray-900 scale-110 shadow-lg":B===1?"bg-gray-300 text-gray-900":B===2?"bg-yellow-700 text-white":"bg-gray-800",D=()=>{i.value.emit("quiz:teacher:start",{roomCode:l.value})},M=()=>{i.value.emit("quiz:teacher:nextQuestion",{roomCode:l.value})},N=()=>{r.push({name:"quiz-manager"})};return Qe(()=>{i.value=Yr("http://localhost:3000"),i.value.on("connect",()=>{i.value.emit("quiz:teacher:create",{quizSetId:n.setId},B=>{o.value=!1,B.roomCode?l.value=B.roomCode:(alert(B.error||"無法建立遊戲室"),r.back())})}),i.value.on("quiz:updatePlayers",B=>{f.value=B,v.value=B.filter(Y=>Y.answered).length}),i.value.on("quiz:newQuestion",B=>{h.value=B,y.value=B.index,_.value=B.total,m.value=15,v.value=0,u.value="question",clearInterval(b.value),b.value=setInterval(()=>{m.value>0?m.value--:clearInterval(b.value)},1e3)}),i.value.on("quiz:showLeaderboard",B=>{u.value="leaderboard",C.value=B,clearInterval(b.value)}),i.value.on("quiz:finished",B=>{u.value="finished",C.value=B})}),Qr(()=>{i.value&&i.value.disconnect(),clearInterval(b.value)}),(B,Y)=>(W(),H("div",IE,[o.value?(W(),H("div",$E,[...Y[0]||(Y[0]=[fr('<svg class="animate-spin h-12 w-12 text-yellow-300 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><h2 class="text-3xl font-bold mt-4">正在建立遊戲房間...</h2><p class="text-gray-400 mt-2">請稍候</p>',3)])])):u.value==="lobby"?(W(),H("div",PE,[c("button",{onClick:N,class:"absolute top-0 left-0 btn btn-secondary flex items-center gap-2 text-lg"},[...Y[1]||(Y[1]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1),ee(" 返回題庫管理 ",-1)])]),Y[4]||(Y[4]=c("h1",{class:"text-5xl font-bold text-yellow-300"},"遊戲大廳",-1)),Y[5]||(Y[5]=c("p",{class:"text-2xl text-gray-300 mt-4"},"請學生輸入以下房間代碼加入",-1)),c("div",DE,[c("div",LE,[Y[2]||(Y[2]=c("p",{class:"text-3xl text-gray-400"},"房間代碼",-1)),c("p",BE,lt(l.value),1),c("button",{onClick:D,class:"mt-6 w-full btn bg-green-500 hover:bg-green-600 text-2xl px-12 py-4 rounded-full",disabled:f.value.length===0},lt(f.value.length===0?"等待玩家加入...":`開始遊戲 (${f.value.length}人)`),9,ME)])]),c("div",NE,[Y[3]||(Y[3]=c("h2",{class:"text-3xl font-semibold"},"已加入的玩家:",-1)),f.value.length===0?(W(),H("div",zE,"還沒有玩家加入...")):(W(),H("div",UE,[(W(!0),H(Ft,null,Xt(f.value,(V,tt)=>(W(),H("span",{key:V.id,class:"bg-gray-700 text-white px-4 py-2 rounded-full text-xl"},[c("span",FE,lt(tt+1)+".",1),ee(" "+lt(V.name),1)]))),128))]))])])):At("",!0),u.value==="question"&&h.value?(W(),H("div",jE,[c("div",WE,[c("div",HE,"第 "+lt(y.value+1)+" / "+lt(_.value)+" 題",1),c("div",qE,lt(m.value),1),c("div",VE,lt(v.value)+" / "+lt(f.value.length)+" 人已作答",1)]),c("div",GE,[h.value.text?(W(),H("div",{key:0,innerHTML:h.value.text,class:"text-5xl font-bold"},null,8,KE)):At("",!0)]),c("div",ZE,[(W(!0),H(Ft,null,Xt(h.value.options,(V,tt)=>(W(),H("div",{key:tt,class:ce(["p-6 rounded-lg text-3xl font-bold flex items-center transition-all duration-300",[x[tt]]])},[c("div",YE,lt(["A","B","C","D"][tt]),1),c("div",null,lt(V),1)],2))),128))])])):At("",!0),u.value==="leaderboard"?(W(),H("div",JE,[Y[6]||(Y[6]=c("h1",{class:"text-5xl font-bold text-yellow-300 mb-8"},"排行榜",-1)),c("div",XE,[(W(!0),H(Ft,null,Xt(C.value,(V,tt)=>(W(),H("div",{key:V.id,class:"bg-gray-800 p-4 rounded-lg flex items-center justify-between text-2xl"},[c("div",QE,[c("span",t8,lt(tt+1)+".",1),c("span",null,lt(V.name),1)]),c("span",e8,lt(V.score)+" 分",1)]))),128))]),c("button",{onClick:M,class:"btn btn-primary text-2xl px-12 py-4 rounded-full mt-10"},lt(T.value?"查看最終結果":"下一題"),1)])):At("",!0),u.value==="finished"?(W(),H("div",n8,[Y[7]||(Y[7]=c("h1",{class:"text-6xl font-bold text-yellow-300 mb-8"},"遊戲結束！",-1)),c("div",r8,[(W(!0),H(Ft,null,Xt(C.value.slice(0,3),(V,tt)=>(W(),H("div",{key:V.id,class:ce(["p-6 rounded-lg flex items-center justify-between text-4xl",E(tt)])},[c("div",s8,[c("span",i8,lt(tt+1),1),c("span",null,lt(V.name),1)]),c("span",o8,lt(V.score)+" 分",1)],2))),128))]),c("button",{onClick:N,class:"btn btn-secondary text-2xl px-12 py-4 rounded-full mt-12"},"返回題庫管理")])):At("",!0)]))}},l8={class:"min-h-screen bg-gray-800 text-white flex items-center justify-center p-4 font-sans"},u8={class:"w-full max-w-2xl mx-auto"},c8={key:0,class:"card bg-gray-900 p-8 shadow-2xl"},f8={key:0,class:"text-red-400 text-sm text-center pt-2"},d8={key:1,class:"text-center p-8 card bg-gray-900"},h8={key:2,class:"w-full max-w-4xl mx-auto"},p8={class:"flex justify-between items-center bg-gray-900 p-4 rounded-t-lg"},g8={class:"text-2xl font-bold"},m8={class:"text-5xl font-bold text-yellow-300"},v8={class:"p-8 bg-white text-gray-900 rounded-b-lg text-center"},_8={class:"text-4xl font-bold"},y8={class:"mt-6 grid grid-cols-2 gap-4"},b8=["onClick"],x8={key:3,class:"text-center p-8 card bg-gray-900"},w8={key:4,class:"w-full max-w-2xl mx-auto text-center"},k8={class:"text-5xl font-bold text-yellow-300 mb-8"},C8={class:"space-y-4"},S8={class:"font-bold"},A8={class:"font-semibold text-sky-300"},E8={key:0,class:"mt-8"},T8={__name:"QuizGameStudent",setup(t){const n=dt(null),r=du(),i=Xe({roomCode:"",name:""}),o=dt("joining"),l=dt(""),u=dt(null),f=dt(0),h=dt(null),y=dt([]),_=["bg-red-600","bg-blue-600","bg-yellow-500","bg-green-600"],m=()=>{if(!i.roomCode||!i.name){l.value="房間代碼和姓名為必填項。";return}l.value="",n.value.emit("quiz:student:join",{roomCode:i.roomCode.toUpperCase(),name:i.name},v=>{v.success?o.value="lobby":l.value=v.message})},b=v=>{n.value.emit("quiz:student:answer",{roomCode:i.roomCode.toUpperCase(),answer:v}),o.value="answered"};return Qe(()=>{const v=r.query.room;v&&(i.roomCode=v.toUpperCase());const C=localStorage.getItem("studentInfo");C&&(i.name=JSON.parse(C).name),n.value=Yr(),n.value.on("connect",()=>console.log("已連接到遊戲伺服器")),n.value.on("quiz:newQuestion",x=>{u.value=x,f.value=15,o.value="question",clearInterval(h.value),h.value=setInterval(()=>{f.value>0?f.value--:clearInterval(h.value)},1e3)}),n.value.on("quiz:showLeaderboard",x=>{y.value=x,o.value="leaderboard"}),n.value.on("quiz:finished",x=>{y.value=x,o.value="finished",clearInterval(h.value)})}),Qr(()=>{n.value&&n.value.disconnect(),clearInterval(h.value)}),(v,C)=>(W(),H("div",l8,[c("div",u8,[o.value==="joining"?(W(),H("div",c8,[C[5]||(C[5]=c("h1",{class:"text-3xl font-bold text-center text-sky-400 mb-2"},"加入搶答競賽",-1)),C[6]||(C[6]=c("p",{class:"text-center text-gray-400 mb-8"},"請輸入老師提供的房間代碼",-1)),c("form",{onSubmit:ze(m,["prevent"]),class:"space-y-6"},[c("div",null,[C[2]||(C[2]=c("label",{for:"roomCode",class:"block text-lg font-bold text-black mb-1 text-center"},"房間代碼",-1)),Bt(c("input",{"onUpdate:modelValue":C[0]||(C[0]=x=>i.roomCode=x),type:"text",id:"roomCode",placeholder:"000000",class:"form-input bg-gray-800 border-gray-700 text-sky-400 font-bold text-4xl tracking-widest text-center uppercase py-3 focus:ring-yellow-400 focus:border-yellow-500"},null,512),[[jt,i.roomCode,void 0,{trim:!0}]])]),c("div",null,[C[3]||(C[3]=c("label",{for:"studentName",class:"block text-lg font-bold text-black mb-1 text-center"},"你的名字",-1)),Bt(c("input",{"onUpdate:modelValue":C[1]||(C[1]=x=>i.name=x),type:"text",id:"studentName",placeholder:"請輸入姓名或座號",class:"form-input bg-gray-800 border-gray-700 text-sky-400 font-bold text-2xl py-3 focus:ring-yellow-400 focus:border-yellow-500 text-center"},null,512),[[jt,i.name,void 0,{trim:!0}]])]),l.value?(W(),H("p",f8,lt(l.value),1)):At("",!0),C[4]||(C[4]=c("button",{type:"submit",class:"w-full btn bg-green-500 hover:bg-green-600 py-4 text-2xl font-bold"}," 加入遊戲 ",-1))],32)])):At("",!0),o.value==="lobby"?(W(),H("div",d8,[...C[7]||(C[7]=[fr('<h2 class="text-4xl font-bold text-white">已成功加入！</h2><p class="text-gray-400 mt-2 text-xl">請等待老師開始遊戲...</p><div class="mt-12"><svg class="animate-spin h-16 w-16 text-yellow-300 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>',3)])])):At("",!0),o.value==="question"&&u.value?(W(),H("div",h8,[c("div",p8,[c("div",g8,"第 "+lt(u.value.index+1)+" / "+lt(u.value.total)+" 題",1),c("div",m8,lt(f.value),1)]),c("div",v8,[c("p",_8,lt(u.value.text),1)]),c("div",y8,[(W(!0),H(Ft,null,Xt(u.value.options,(x,T)=>(W(),H("button",{key:T,onClick:E=>b(x),class:ce(["p-6 rounded-lg text-3xl font-bold flex items-center justify-center h-32 transition-transform transform hover:scale-105",_[T]])},lt(x),11,b8))),128))])])):At("",!0),o.value==="answered"?(W(),H("div",x8,[...C[8]||(C[8]=[c("svg",{class:"mx-auto h-24 w-24 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),c("h2",{class:"mt-6 text-3xl font-bold text-white"},"已送出答案！",-1),c("p",{class:"text-gray-400 mt-2 text-lg"},"等待其他玩家...",-1)])])):At("",!0),o.value==="leaderboard"||o.value==="finished"?(W(),H("div",w8,[c("h1",k8,lt(o.value==="finished"?"最終結果":"即時排行榜"),1),c("div",C8,[(W(!0),H(Ft,null,Xt(y.value,(x,T)=>(W(),H("div",{key:x.id,class:"bg-gray-700 p-4 rounded-lg flex justify-between items-center text-2xl"},[c("span",S8,lt(T+1)+". "+lt(x.name),1),c("span",A8,lt(x.score)+" 分",1)]))),128))]),o.value==="finished"?(W(),H("div",E8,[...C[9]||(C[9]=[c("p",{class:"text-2xl"},"遊戲結束！感謝參與！",-1)])])):At("",!0)])):At("",!0)])]))}},wp=I2({history:u2("/"),routes:[{path:"/auth",name:"auth",component:v6,meta:{layout:"clean"}},{path:"/",name:"home",component:Z2,meta:{requiresAuth:!0,layout:"default"}},{path:"/students",name:"student-management",component:Pk,meta:{requiresAuth:!0,layout:"default"}},{path:"/seating-chart",name:"seating-chart",component:a4,meta:{requiresAuth:!0,layout:"default"}},{path:"/dashboard",name:"classroom-dashboard",component:C3,meta:{requiresAuth:!0,layout:"default"}},{path:"/assignments",name:"assignments",component:R5,meta:{requiresAuth:!0,layout:"default"}},{path:"/grades",name:"grade-management",component:kC,meta:{requiresAuth:!0,layout:"default"}},{path:"/pingpong-teacher",name:"pingpong-teacher",component:oA,meta:{requiresAuth:!0,layout:"default"}},{path:"/quiz",name:"quiz-manager",component:OE,meta:{requiresAuth:!0,layout:"default"}},{path:"/quiz/host/:setId",name:"quiz-game-teacher",component:a8,props:!0,meta:{requiresAuth:!0,layout:"clean"}},{path:"/student/dashboard",name:"student-dashboard",component:s6,meta:{requiresStudentAuth:!0,layout:"clean"}},{path:"/pingpong-student",name:"pingpong-student",component:LA,meta:{layout:"clean"}},{path:"/quiz/play",name:"quiz-game-student",component:T8,meta:{layout:"clean"}}]});wp.beforeEach((t,n,r)=>{const i=!!localStorage.getItem("teacherToken"),o=!!localStorage.getItem("studentToken");t.meta.requiresAuth&&!i?r({name:"auth"}):t.meta.requiresStudentAuth&&!o?r({name:"auth"}):t.name==="auth"&&(i||o)?r(i?{name:"home"}:{name:"student-dashboard"}):r()});const kp=kw(F2);kp.use(wp);kp.mount("#app");
