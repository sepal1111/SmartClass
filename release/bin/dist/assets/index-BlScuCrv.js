(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wl(t){const n=Object.create(null);for(const r of t.split(","))n[r]=1;return r=>r in n}const he={},gs=[],Un=()=>{},Wd=()=>!1,Io=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ql=t=>t.startsWith("onUpdate:"),We=Object.assign,Hl=(t,n)=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)},Yy=Object.prototype.hasOwnProperty,le=(t,n)=>Yy.call(t,n),Ut=Array.isArray,ms=t=>di(t)==="[object Map]",Ss=t=>di(t)==="[object Set]",Wf=t=>di(t)==="[object Date]",Vt=t=>typeof t=="function",Re=t=>typeof t=="string",jn=t=>typeof t=="symbol",ge=t=>t!==null&&typeof t=="object",qd=t=>(ge(t)||Vt(t))&&Vt(t.then)&&Vt(t.catch),Hd=Object.prototype.toString,di=t=>Hd.call(t),Jy=t=>di(t).slice(8,-1),Vd=t=>di(t)==="[object Object]",Vl=t=>Re(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Zs=Wl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$o=t=>{const n=Object.create(null);return r=>n[r]||(n[r]=t(r))},Xy=/-\w/g,Cn=$o(t=>t.replace(Xy,n=>n.slice(1).toUpperCase())),Qy=/\B([A-Z])/g,$r=$o(t=>t.replace(Qy,"-$1").toLowerCase()),Po=$o(t=>t.charAt(0).toUpperCase()+t.slice(1)),ol=$o(t=>t?`on${Po(t)}`:""),Er=(t,n)=>!Object.is(t,n),co=(t,...n)=>{for(let r=0;r<t.length;r++)t[r](...n)},Kd=(t,n,r,i=!1)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:i,value:r})},yo=t=>{const n=parseFloat(t);return isNaN(n)?t:n};let qf;const Lo=()=>qf||(qf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gr(t){if(Ut(t)){const n={};for(let r=0;r<t.length;r++){const i=t[r],o=Re(i)?rb(i):Gr(i);if(o)for(const l in o)n[l]=o[l]}return n}else if(Re(t)||ge(t))return t}const tb=/;(?![^(]*\))/g,eb=/:([^]+)/,nb=/\/\*[^]*?\*\//g;function rb(t){const n={};return t.replace(nb,"").split(tb).forEach(r=>{if(r){const i=r.split(eb);i.length>1&&(n[i[0].trim()]=i[1].trim())}}),n}function ce(t){let n="";if(Re(t))n=t;else if(Ut(t))for(let r=0;r<t.length;r++){const i=ce(t[r]);i&&(n+=i+" ")}else if(ge(t))for(const r in t)t[r]&&(n+=r+" ");return n.trim()}const sb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ib=Wl(sb);function Gd(t){return!!t||t===""}function ob(t,n){if(t.length!==n.length)return!1;let r=!0;for(let i=0;r&&i<t.length;i++)r=Kr(t[i],n[i]);return r}function Kr(t,n){if(t===n)return!0;let r=Wf(t),i=Wf(n);if(r||i)return r&&i?t.getTime()===n.getTime():!1;if(r=jn(t),i=jn(n),r||i)return t===n;if(r=Ut(t),i=Ut(n),r||i)return r&&i?ob(t,n):!1;if(r=ge(t),i=ge(n),r||i){if(!r||!i)return!1;const o=Object.keys(t).length,l=Object.keys(n).length;if(o!==l)return!1;for(const u in t){const f=t.hasOwnProperty(u),d=n.hasOwnProperty(u);if(f&&!d||!f&&d||!Kr(t[u],n[u]))return!1}}return String(t)===String(n)}function Kl(t,n){return t.findIndex(r=>Kr(r,n))}const Zd=t=>!!(t&&t.__v_isRef===!0),lt=t=>Re(t)?t:t==null?"":Ut(t)||ge(t)&&(t.toString===Hd||!Vt(t.toString))?Zd(t)?lt(t.value):JSON.stringify(t,Yd,2):String(t),Yd=(t,n)=>Zd(n)?Yd(t,n.value):ms(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[i,o],l)=>(r[al(i,l)+" =>"]=o,r),{})}:Ss(n)?{[`Set(${n.size})`]:[...n.values()].map(r=>al(r))}:jn(n)?al(n):ge(n)&&!Ut(n)&&!Vd(n)?String(n):n,al=(t,n="")=>{var r;return jn(t)?`Symbol(${(r=t.description)!=null?r:n})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let en;class ab{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=en,!n&&en&&(this.index=(en.scopes||(en.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].pause();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].resume();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].resume()}}run(n){if(this._active){const r=en;try{return en=this,n()}finally{en=r}}}on(){++this._on===1&&(this.prevScope=en,en=this)}off(){this._on>0&&--this._on===0&&(en=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(this.effects.length=0,r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function lb(){return en}let ve;const ll=new WeakSet;class Jd{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,en&&en.active&&en.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ll.has(this)&&(ll.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Qd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hf(this),th(this);const n=ve,r=In;ve=this,In=!0;try{return this.fn()}finally{eh(this),ve=n,In=r,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Yl(n);this.deps=this.depsTail=void 0,Hf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ll.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){kl(this)&&this.run()}get dirty(){return kl(this)}}let Xd=0,Ys,Js;function Qd(t,n=!1){if(t.flags|=8,n){t.next=Js,Js=t;return}t.next=Ys,Ys=t}function Gl(){Xd++}function Zl(){if(--Xd>0)return;if(Js){let n=Js;for(Js=void 0;n;){const r=n.next;n.next=void 0,n.flags&=-9,n=r}}let t;for(;Ys;){let n=Ys;for(Ys=void 0;n;){const r=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(i){t||(t=i)}n=r}}if(t)throw t}function th(t){for(let n=t.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function eh(t){let n,r=t.depsTail,i=r;for(;i;){const o=i.prevDep;i.version===-1?(i===r&&(r=o),Yl(i),ub(i)):n=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=o}t.deps=n,t.depsTail=r}function kl(t){for(let n=t.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(nh(n.dep.computed)||n.dep.version!==n.version))return!0;return!!t._dirty}function nh(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===si)||(t.globalVersion=si,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!kl(t))))return;t.flags|=2;const n=t.dep,r=ve,i=In;ve=t,In=!0;try{th(t);const o=t.fn(t._value);(n.version===0||Er(o,t._value))&&(t.flags|=128,t._value=o,n.version++)}catch(o){throw n.version++,o}finally{ve=r,In=i,eh(t),t.flags&=-3}}function Yl(t,n=!1){const{dep:r,prevSub:i,nextSub:o}=t;if(i&&(i.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=i,t.nextSub=void 0),r.subs===t&&(r.subs=i,!i&&r.computed)){r.computed.flags&=-5;for(let l=r.computed.deps;l;l=l.nextDep)Yl(l,!0)}!n&&!--r.sc&&r.map&&r.map.delete(r.key)}function ub(t){const{prevDep:n,nextDep:r}=t;n&&(n.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=n,t.nextDep=void 0)}let In=!0;const rh=[];function ur(){rh.push(In),In=!1}function cr(){const t=rh.pop();In=t===void 0?!0:t}function Hf(t){const{cleanup:n}=t;if(t.cleanup=void 0,n){const r=ve;ve=void 0;try{n()}finally{ve=r}}}let si=0;class cb{constructor(n,r){this.sub=n,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Jl{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!ve||!In||ve===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==ve)r=this.activeLink=new cb(ve,this),ve.deps?(r.prevDep=ve.depsTail,ve.depsTail.nextDep=r,ve.depsTail=r):ve.deps=ve.depsTail=r,sh(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const i=r.nextDep;i.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=i),r.prevDep=ve.depsTail,r.nextDep=void 0,ve.depsTail.nextDep=r,ve.depsTail=r,ve.deps===r&&(ve.deps=i)}return r}trigger(n){this.version++,si++,this.notify(n)}notify(n){Gl();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Zl()}}}function sh(t){if(t.dep.sc++,t.sub.flags&4){const n=t.dep.computed;if(n&&!t.dep.subs){n.flags|=20;for(let i=n.deps;i;i=i.nextDep)sh(i)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const Cl=new WeakMap,Hr=Symbol(""),Sl=Symbol(""),ii=Symbol("");function Ue(t,n,r){if(In&&ve){let i=Cl.get(t);i||Cl.set(t,i=new Map);let o=i.get(r);o||(i.set(r,o=new Jl),o.map=i,o.key=r),o.track()}}function sr(t,n,r,i,o,l){const u=Cl.get(t);if(!u){si++;return}const f=d=>{d&&d.trigger()};if(Gl(),n==="clear")u.forEach(f);else{const d=Ut(t),y=d&&Vl(r);if(d&&r==="length"){const _=Number(i);u.forEach((m,b)=>{(b==="length"||b===ii||!jn(b)&&b>=_)&&f(m)})}else switch((r!==void 0||u.has(void 0))&&f(u.get(r)),y&&f(u.get(ii)),n){case"add":d?y&&f(u.get("length")):(f(u.get(Hr)),ms(t)&&f(u.get(Sl)));break;case"delete":d||(f(u.get(Hr)),ms(t)&&f(u.get(Sl)));break;case"set":ms(t)&&f(u.get(Hr));break}}Zl()}function ds(t){const n=ae(t);return n===t?n:(Ue(n,"iterate",ii),wn(t)?n:n.map(Be))}function Mo(t){return Ue(t=ae(t),"iterate",ii),t}const fb={__proto__:null,[Symbol.iterator](){return ul(this,Symbol.iterator,Be)},concat(...t){return ds(this).concat(...t.map(n=>Ut(n)?ds(n):n))},entries(){return ul(this,"entries",t=>(t[1]=Be(t[1]),t))},every(t,n){return er(this,"every",t,n,void 0,arguments)},filter(t,n){return er(this,"filter",t,n,r=>r.map(Be),arguments)},find(t,n){return er(this,"find",t,n,Be,arguments)},findIndex(t,n){return er(this,"findIndex",t,n,void 0,arguments)},findLast(t,n){return er(this,"findLast",t,n,Be,arguments)},findLastIndex(t,n){return er(this,"findLastIndex",t,n,void 0,arguments)},forEach(t,n){return er(this,"forEach",t,n,void 0,arguments)},includes(...t){return cl(this,"includes",t)},indexOf(...t){return cl(this,"indexOf",t)},join(t){return ds(this).join(t)},lastIndexOf(...t){return cl(this,"lastIndexOf",t)},map(t,n){return er(this,"map",t,n,void 0,arguments)},pop(){return Ws(this,"pop")},push(...t){return Ws(this,"push",t)},reduce(t,...n){return Vf(this,"reduce",t,n)},reduceRight(t,...n){return Vf(this,"reduceRight",t,n)},shift(){return Ws(this,"shift")},some(t,n){return er(this,"some",t,n,void 0,arguments)},splice(...t){return Ws(this,"splice",t)},toReversed(){return ds(this).toReversed()},toSorted(t){return ds(this).toSorted(t)},toSpliced(...t){return ds(this).toSpliced(...t)},unshift(...t){return Ws(this,"unshift",t)},values(){return ul(this,"values",Be)}};function ul(t,n,r){const i=Mo(t),o=i[n]();return i!==t&&!wn(t)&&(o._next=o.next,o.next=()=>{const l=o._next();return l.done||(l.value=r(l.value)),l}),o}const db=Array.prototype;function er(t,n,r,i,o,l){const u=Mo(t),f=u!==t&&!wn(t),d=u[n];if(d!==db[n]){const m=d.apply(t,l);return f?Be(m):m}let y=r;u!==t&&(f?y=function(m,b){return r.call(this,Be(m),b,t)}:r.length>2&&(y=function(m,b){return r.call(this,m,b,t)}));const _=d.call(u,y,i);return f&&o?o(_):_}function Vf(t,n,r,i){const o=Mo(t);let l=r;return o!==t&&(wn(t)?r.length>3&&(l=function(u,f,d){return r.call(this,u,f,d,t)}):l=function(u,f,d){return r.call(this,u,Be(f),d,t)}),o[n](l,...i)}function cl(t,n,r){const i=ae(t);Ue(i,"iterate",ii);const o=i[n](...r);return(o===-1||o===!1)&&tu(r[0])?(r[0]=ae(r[0]),i[n](...r)):o}function Ws(t,n,r=[]){ur(),Gl();const i=ae(t)[n].apply(t,r);return Zl(),cr(),i}const hb=Wl("__proto__,__v_isRef,__isVue"),ih=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(jn));function pb(t){jn(t)||(t=String(t));const n=ae(this);return Ue(n,"has",t),n.hasOwnProperty(t)}class oh{constructor(n=!1,r=!1){this._isReadonly=n,this._isShallow=r}get(n,r,i){if(r==="__v_skip")return n.__v_skip;const o=this._isReadonly,l=this._isShallow;if(r==="__v_isReactive")return!o;if(r==="__v_isReadonly")return o;if(r==="__v_isShallow")return l;if(r==="__v_raw")return i===(o?l?Cb:ch:l?uh:lh).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(i)?n:void 0;const u=Ut(n);if(!o){let d;if(u&&(d=fb[r]))return d;if(r==="hasOwnProperty")return pb}const f=Reflect.get(n,r,je(n)?n:i);if((jn(r)?ih.has(r):hb(r))||(o||Ue(n,"get",r),l))return f;if(je(f)){const d=u&&Vl(r)?f:f.value;return o&&ge(d)?Al(d):d}return ge(f)?o?Al(f):Ze(f):f}}class ah extends oh{constructor(n=!1){super(!1,n)}set(n,r,i,o){let l=n[r];if(!this._isShallow){const d=Or(l);if(!wn(i)&&!Or(i)&&(l=ae(l),i=ae(i)),!Ut(n)&&je(l)&&!je(i))return d||(l.value=i),!0}const u=Ut(n)&&Vl(r)?Number(r)<n.length:le(n,r),f=Reflect.set(n,r,i,je(n)?n:o);return n===ae(o)&&(u?Er(i,l)&&sr(n,"set",r,i):sr(n,"add",r,i)),f}deleteProperty(n,r){const i=le(n,r);n[r];const o=Reflect.deleteProperty(n,r);return o&&i&&sr(n,"delete",r,void 0),o}has(n,r){const i=Reflect.has(n,r);return(!jn(r)||!ih.has(r))&&Ue(n,"has",r),i}ownKeys(n){return Ue(n,"iterate",Ut(n)?"length":Hr),Reflect.ownKeys(n)}}class gb extends oh{constructor(n=!1){super(!0,n)}set(n,r){return!0}deleteProperty(n,r){return!0}}const mb=new ah,vb=new gb,_b=new ah(!0);const El=t=>t,so=t=>Reflect.getPrototypeOf(t);function yb(t,n,r){return function(...i){const o=this.__v_raw,l=ae(o),u=ms(l),f=t==="entries"||t===Symbol.iterator&&u,d=t==="keys"&&u,y=o[t](...i),_=r?El:n?bo:Be;return!n&&Ue(l,"iterate",d?Sl:Hr),{next(){const{value:m,done:b}=y.next();return b?{value:m,done:b}:{value:f?[_(m[0]),_(m[1])]:_(m),done:b}},[Symbol.iterator](){return this}}}}function io(t){return function(...n){return t==="delete"?!1:t==="clear"?void 0:this}}function bb(t,n){const r={get(o){const l=this.__v_raw,u=ae(l),f=ae(o);t||(Er(o,f)&&Ue(u,"get",o),Ue(u,"get",f));const{has:d}=so(u),y=n?El:t?bo:Be;if(d.call(u,o))return y(l.get(o));if(d.call(u,f))return y(l.get(f));l!==u&&l.get(o)},get size(){const o=this.__v_raw;return!t&&Ue(ae(o),"iterate",Hr),o.size},has(o){const l=this.__v_raw,u=ae(l),f=ae(o);return t||(Er(o,f)&&Ue(u,"has",o),Ue(u,"has",f)),o===f?l.has(o):l.has(o)||l.has(f)},forEach(o,l){const u=this,f=u.__v_raw,d=ae(f),y=n?El:t?bo:Be;return!t&&Ue(d,"iterate",Hr),f.forEach((_,m)=>o.call(l,y(_),y(m),u))}};return We(r,t?{add:io("add"),set:io("set"),delete:io("delete"),clear:io("clear")}:{add(o){!n&&!wn(o)&&!Or(o)&&(o=ae(o));const l=ae(this);return so(l).has.call(l,o)||(l.add(o),sr(l,"add",o,o)),this},set(o,l){!n&&!wn(l)&&!Or(l)&&(l=ae(l));const u=ae(this),{has:f,get:d}=so(u);let y=f.call(u,o);y||(o=ae(o),y=f.call(u,o));const _=d.call(u,o);return u.set(o,l),y?Er(l,_)&&sr(u,"set",o,l):sr(u,"add",o,l),this},delete(o){const l=ae(this),{has:u,get:f}=so(l);let d=u.call(l,o);d||(o=ae(o),d=u.call(l,o)),f&&f.call(l,o);const y=l.delete(o);return d&&sr(l,"delete",o,void 0),y},clear(){const o=ae(this),l=o.size!==0,u=o.clear();return l&&sr(o,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=yb(o,t,n)}),r}function Xl(t,n){const r=bb(t,n);return(i,o,l)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?i:Reflect.get(le(r,o)&&o in i?r:i,o,l)}const xb={get:Xl(!1,!1)},wb={get:Xl(!1,!0)},kb={get:Xl(!0,!1)};const lh=new WeakMap,uh=new WeakMap,ch=new WeakMap,Cb=new WeakMap;function Sb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Eb(t){return t.__v_skip||!Object.isExtensible(t)?0:Sb(Jy(t))}function Ze(t){return Or(t)?t:Ql(t,!1,mb,xb,lh)}function fh(t){return Ql(t,!1,_b,wb,uh)}function Al(t){return Ql(t,!0,vb,kb,ch)}function Ql(t,n,r,i,o){if(!ge(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const l=Eb(t);if(l===0)return t;const u=o.get(t);if(u)return u;const f=new Proxy(t,l===2?i:r);return o.set(t,f),f}function vs(t){return Or(t)?vs(t.__v_raw):!!(t&&t.__v_isReactive)}function Or(t){return!!(t&&t.__v_isReadonly)}function wn(t){return!!(t&&t.__v_isShallow)}function tu(t){return t?!!t.__v_raw:!1}function ae(t){const n=t&&t.__v_raw;return n?ae(n):t}function Ab(t){return!le(t,"__v_skip")&&Object.isExtensible(t)&&Kd(t,"__v_skip",!0),t}const Be=t=>ge(t)?Ze(t):t,bo=t=>ge(t)?Al(t):t;function je(t){return t?t.__v_isRef===!0:!1}function ft(t){return dh(t,!1)}function Tb(t){return dh(t,!0)}function dh(t,n){return je(t)?t:new Ob(t,n)}class Ob{constructor(n,r){this.dep=new Jl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?n:ae(n),this._value=r?n:Be(n),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(n){const r=this._rawValue,i=this.__v_isShallow||wn(n)||Or(n);n=i?n:ae(n),Er(n,r)&&(this._rawValue=n,this._value=i?n:Be(n),this.dep.trigger())}}function _s(t){return je(t)?t.value:t}const Rb={get:(t,n,r)=>n==="__v_raw"?t:_s(Reflect.get(t,n,r)),set:(t,n,r,i)=>{const o=t[n];return je(o)&&!je(r)?(o.value=r,!0):Reflect.set(t,n,r,i)}};function hh(t){return vs(t)?t:new Proxy(t,Rb)}class Ib{constructor(n,r,i){this.fn=n,this.setter=r,this._value=void 0,this.dep=new Jl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=si-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&ve!==this)return Qd(this,!0),!0}get value(){const n=this.dep.track();return nh(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function $b(t,n,r=!1){let i,o;return Vt(t)?i=t:(i=t.get,o=t.set),new Ib(i,o,r)}const oo={},xo=new WeakMap;let qr;function Pb(t,n=!1,r=qr){if(r){let i=xo.get(r);i||xo.set(r,i=[]),i.push(t)}}function Lb(t,n,r=he){const{immediate:i,deep:o,once:l,scheduler:u,augmentJob:f,call:d}=r,y=z=>o?z:wn(z)||o===!1||o===0?ir(z,1):ir(z);let _,m,b,v,C=!1,x=!1;if(je(t)?(m=()=>t.value,C=wn(t)):vs(t)?(m=()=>y(t),C=!0):Ut(t)?(x=!0,C=t.some(z=>vs(z)||wn(z)),m=()=>t.map(z=>{if(je(z))return z.value;if(vs(z))return y(z);if(Vt(z))return d?d(z,2):z()})):Vt(t)?n?m=d?()=>d(t,2):t:m=()=>{if(b){ur();try{b()}finally{cr()}}const z=qr;qr=_;try{return d?d(t,3,[v]):t(v)}finally{qr=z}}:m=Un,n&&o){const z=m,B=o===!0?1/0:o;m=()=>ir(z(),B)}const T=lb(),A=()=>{_.stop(),T&&T.active&&Hl(T.effects,_)};if(l&&n){const z=n;n=(...B)=>{z(...B),A()}}let L=x?new Array(t.length).fill(oo):oo;const D=z=>{if(!(!(_.flags&1)||!_.dirty&&!z))if(n){const B=_.run();if(o||C||(x?B.some((Y,V)=>Er(Y,L[V])):Er(B,L))){b&&b();const Y=qr;qr=_;try{const V=[B,L===oo?void 0:x&&L[0]===oo?[]:L,v];L=B,d?d(n,3,V):n(...V)}finally{qr=Y}}}else _.run()};return f&&f(D),_=new Jd(m),_.scheduler=u?()=>u(D,!1):D,v=z=>Pb(z,!1,_),b=_.onStop=()=>{const z=xo.get(_);if(z){if(d)d(z,4);else for(const B of z)B();xo.delete(_)}},n?i?D(!0):L=_.run():u?u(D.bind(null,!0),!0):_.run(),A.pause=_.pause.bind(_),A.resume=_.resume.bind(_),A.stop=A,A}function ir(t,n=1/0,r){if(n<=0||!ge(t)||t.__v_skip||(r=r||new Map,(r.get(t)||0)>=n))return t;if(r.set(t,n),n--,je(t))ir(t.value,n,r);else if(Ut(t))for(let i=0;i<t.length;i++)ir(t[i],n,r);else if(Ss(t)||ms(t))t.forEach(i=>{ir(i,n,r)});else if(Vd(t)){for(const i in t)ir(t[i],n,r);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&ir(t[i],n,r)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hi(t,n,r,i){try{return i?t(...i):t()}catch(o){Bo(o,n,r)}}function Wn(t,n,r,i){if(Vt(t)){const o=hi(t,n,r,i);return o&&qd(o)&&o.catch(l=>{Bo(l,n,r)}),o}if(Ut(t)){const o=[];for(let l=0;l<t.length;l++)o.push(Wn(t[l],n,r,i));return o}}function Bo(t,n,r,i=!0){const o=n?n.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:u}=n&&n.appContext.config||he;if(n){let f=n.parent;const d=n.proxy,y=`https://vuejs.org/error-reference/#runtime-${r}`;for(;f;){const _=f.ec;if(_){for(let m=0;m<_.length;m++)if(_[m](t,d,y)===!1)return}f=f.parent}if(l){ur(),hi(l,null,10,[t,d,y]),cr();return}}Mb(t,r,o,i,u)}function Mb(t,n,r,i=!0,o=!1){if(o)throw t;console.error(t)}const Ge=[];let zn=-1;const ys=[];let kr=null,hs=0;const ph=Promise.resolve();let wo=null;function pi(t){const n=wo||ph;return t?n.then(this?t.bind(this):t):n}function Bb(t){let n=zn+1,r=Ge.length;for(;n<r;){const i=n+r>>>1,o=Ge[i],l=oi(o);l<t||l===t&&o.flags&2?n=i+1:r=i}return n}function eu(t){if(!(t.flags&1)){const n=oi(t),r=Ge[Ge.length-1];!r||!(t.flags&2)&&n>=oi(r)?Ge.push(t):Ge.splice(Bb(n),0,t),t.flags|=1,gh()}}function gh(){wo||(wo=ph.then(vh))}function Db(t){Ut(t)?ys.push(...t):kr&&t.id===-1?kr.splice(hs+1,0,t):t.flags&1||(ys.push(t),t.flags|=1),gh()}function Kf(t,n,r=zn+1){for(;r<Ge.length;r++){const i=Ge[r];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;Ge.splice(r,1),r--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function mh(t){if(ys.length){const n=[...new Set(ys)].sort((r,i)=>oi(r)-oi(i));if(ys.length=0,kr){kr.push(...n);return}for(kr=n,hs=0;hs<kr.length;hs++){const r=kr[hs];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}kr=null,hs=0}}const oi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function vh(t){try{for(zn=0;zn<Ge.length;zn++){const n=Ge[zn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),hi(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;zn<Ge.length;zn++){const n=Ge[zn];n&&(n.flags&=-2)}zn=-1,Ge.length=0,mh(),wo=null,(Ge.length||ys.length)&&vh()}}let fn=null,_h=null;function ko(t){const n=fn;return fn=t,_h=t&&t.type.__scopeId||null,n}function cn(t,n=fn,r){if(!n||t._n)return t;const i=(...o)=>{i._d&&Ao(-1);const l=ko(n);let u;try{u=t(...o)}finally{ko(l),i._d&&Ao(1)}return u};return i._n=!0,i._c=!0,i._d=!0,i}function Bt(t,n){if(fn===null)return t;const r=Uo(fn),i=t.dirs||(t.dirs=[]);for(let o=0;o<n.length;o++){let[l,u,f,d=he]=n[o];l&&(Vt(l)&&(l={mounted:l,updated:l}),l.deep&&ir(u),i.push({dir:l,instance:r,value:u,oldValue:void 0,arg:f,modifiers:d}))}return t}function jr(t,n,r,i){const o=t.dirs,l=n&&n.dirs;for(let u=0;u<o.length;u++){const f=o[u];l&&(f.oldValue=l[u].value);let d=f.dir[i];d&&(ur(),Wn(d,r,8,[t.el,f,t,n]),cr())}}const zb=Symbol("_vte"),Nb=t=>t.__isTeleport,Ub=Symbol("_leaveCb");function nu(t,n){t.shapeFlag&6&&t.component?(t.transition=n,nu(t.component.subTree,n)):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function yh(t,n){return Vt(t)?We({name:t.name},n,{setup:t}):t}function bh(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Co=new WeakMap;function Xs(t,n,r,i,o=!1){if(Ut(t)){t.forEach((C,x)=>Xs(C,n&&(Ut(n)?n[x]:n),r,i,o));return}if(Qs(i)&&!o){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Xs(t,n,r,i.component.subTree);return}const l=i.shapeFlag&4?Uo(i.component):i.el,u=o?null:l,{i:f,r:d}=t,y=n&&n.r,_=f.refs===he?f.refs={}:f.refs,m=f.setupState,b=ae(m),v=m===he?Wd:C=>le(b,C);if(y!=null&&y!==d){if(Gf(n),Re(y))_[y]=null,v(y)&&(m[y]=null);else if(je(y)){y.value=null;const C=n;C.k&&(_[C.k]=null)}}if(Vt(d))hi(d,f,12,[u,_]);else{const C=Re(d),x=je(d);if(C||x){const T=()=>{if(t.f){const A=C?v(d)?m[d]:_[d]:d.value;if(o)Ut(A)&&Hl(A,l);else if(Ut(A))A.includes(l)||A.push(l);else if(C)_[d]=[l],v(d)&&(m[d]=_[d]);else{const L=[l];d.value=L,t.k&&(_[t.k]=L)}}else C?(_[d]=u,v(d)&&(m[d]=u)):x&&(d.value=u,t.k&&(_[t.k]=u))};if(u){const A=()=>{T(),Co.delete(t)};A.id=-1,Co.set(t,A),un(A,r)}else Gf(t),T()}}}function Gf(t){const n=Co.get(t);n&&(n.flags|=8,Co.delete(t))}Lo().requestIdleCallback;Lo().cancelIdleCallback;const Qs=t=>!!t.type.__asyncLoader,xh=t=>t.type.__isKeepAlive;function Fb(t,n){wh(t,"a",n)}function jb(t,n){wh(t,"da",n)}function wh(t,n,r=Fe){const i=t.__wdc||(t.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(Do(n,i,r),r){let o=r.parent;for(;o&&o.parent;)xh(o.parent.vnode)&&Wb(i,n,r,o),o=o.parent}}function Wb(t,n,r,i){const o=Do(n,t,i,!0);Zr(()=>{Hl(i[n],o)},r)}function Do(t,n,r=Fe,i=!1){if(r){const o=r[t]||(r[t]=[]),l=n.__weh||(n.__weh=(...u)=>{ur();const f=gi(r),d=Wn(n,r,t,u);return f(),cr(),d});return i?o.unshift(l):o.push(l),l}}const fr=t=>(n,r=Fe)=>{(!li||t==="sp")&&Do(t,(...i)=>n(...i),r)},qb=fr("bm"),Ye=fr("m"),Hb=fr("bu"),Vb=fr("u"),Kb=fr("bum"),Zr=fr("um"),Gb=fr("sp"),Zb=fr("rtg"),Yb=fr("rtc");function Jb(t,n=Fe){Do("ec",t,n)}const Xb="components";function So(t,n){return tx(Xb,t,!0,n)||t}const Qb=Symbol.for("v-ndc");function tx(t,n,r=!0,i=!1){const o=fn||Fe;if(o){const l=o.type;{const f=Wx(l,!1);if(f&&(f===n||f===Cn(n)||f===Po(Cn(n))))return l}const u=Zf(o[t]||l[t],n)||Zf(o.appContext[t],n);return!u&&i?l:u}}function Zf(t,n){return t&&(t[n]||t[Cn(n)]||t[Po(Cn(n))])}function Xt(t,n,r,i){let o;const l=r,u=Ut(t);if(u||Re(t)){const f=u&&vs(t);let d=!1,y=!1;f&&(d=!wn(t),y=Or(t),t=Mo(t)),o=new Array(t.length);for(let _=0,m=t.length;_<m;_++)o[_]=n(d?y?bo(Be(t[_])):Be(t[_]):t[_],_,void 0,l)}else if(typeof t=="number"){o=new Array(t);for(let f=0;f<t;f++)o[f]=n(f+1,f,void 0,l)}else if(ge(t))if(t[Symbol.iterator])o=Array.from(t,(f,d)=>n(f,d,void 0,l));else{const f=Object.keys(t);o=new Array(f.length);for(let d=0,y=f.length;d<y;d++){const _=f[d];o[d]=n(t[_],_,d,l)}}else o=[];return o}const Tl=t=>t?jh(t)?Uo(t):Tl(t.parent):null,ti=We(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Tl(t.parent),$root:t=>Tl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Ch(t),$forceUpdate:t=>t.f||(t.f=()=>{eu(t.update)}),$nextTick:t=>t.n||(t.n=pi.bind(t.proxy)),$watch:t=>xx.bind(t)}),fl=(t,n)=>t!==he&&!t.__isScriptSetup&&le(t,n),ex={get({_:t},n){if(n==="__v_skip")return!0;const{ctx:r,setupState:i,data:o,props:l,accessCache:u,type:f,appContext:d}=t;let y;if(n[0]!=="$"){const v=u[n];if(v!==void 0)switch(v){case 1:return i[n];case 2:return o[n];case 4:return r[n];case 3:return l[n]}else{if(fl(i,n))return u[n]=1,i[n];if(o!==he&&le(o,n))return u[n]=2,o[n];if((y=t.propsOptions[0])&&le(y,n))return u[n]=3,l[n];if(r!==he&&le(r,n))return u[n]=4,r[n];Ol&&(u[n]=0)}}const _=ti[n];let m,b;if(_)return n==="$attrs"&&Ue(t.attrs,"get",""),_(t);if((m=f.__cssModules)&&(m=m[n]))return m;if(r!==he&&le(r,n))return u[n]=4,r[n];if(b=d.config.globalProperties,le(b,n))return b[n]},set({_:t},n,r){const{data:i,setupState:o,ctx:l}=t;return fl(o,n)?(o[n]=r,!0):i!==he&&le(i,n)?(i[n]=r,!0):le(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(l[n]=r,!0)},has({_:{data:t,setupState:n,accessCache:r,ctx:i,appContext:o,propsOptions:l,type:u}},f){let d,y;return!!(r[f]||t!==he&&f[0]!=="$"&&le(t,f)||fl(n,f)||(d=l[0])&&le(d,f)||le(i,f)||le(ti,f)||le(o.config.globalProperties,f)||(y=u.__cssModules)&&y[f])},defineProperty(t,n,r){return r.get!=null?t._.accessCache[n]=0:le(r,"value")&&this.set(t,n,r.value,null),Reflect.defineProperty(t,n,r)}};function Yf(t){return Ut(t)?t.reduce((n,r)=>(n[r]=null,n),{}):t}let Ol=!0;function nx(t){const n=Ch(t),r=t.proxy,i=t.ctx;Ol=!1,n.beforeCreate&&Jf(n.beforeCreate,t,"bc");const{data:o,computed:l,methods:u,watch:f,provide:d,inject:y,created:_,beforeMount:m,mounted:b,beforeUpdate:v,updated:C,activated:x,deactivated:T,beforeDestroy:A,beforeUnmount:L,destroyed:D,unmounted:z,render:B,renderTracked:Y,renderTriggered:V,errorCaptured:tt,serverPrefetch:N,expose:I,inheritAttrs:K,components:k,directives:$,filters:g}=n;if(y&&rx(y,i,null),u)for(const pt in u){const At=u[pt];Vt(At)&&(i[pt]=At.bind(r))}if(o){const pt=o.call(r,r);ge(pt)&&(t.data=Ze(pt))}if(Ol=!0,l)for(const pt in l){const At=l[pt],xt=Vt(At)?At.bind(r,r):Vt(At.get)?At.get.bind(r,r):Un,$t=!Vt(At)&&Vt(At.set)?At.set.bind(r):Un,it=pe({get:xt,set:$t});Object.defineProperty(i,pt,{enumerable:!0,configurable:!0,get:()=>it.value,set:st=>it.value=st})}if(f)for(const pt in f)kh(f[pt],i,r,pt);if(d){const pt=Vt(d)?d.call(r):d;Reflect.ownKeys(pt).forEach(At=>{fo(At,pt[At])})}_&&Jf(_,t,"c");function Ct(pt,At){Ut(At)?At.forEach(xt=>pt(xt.bind(r))):At&&pt(At.bind(r))}if(Ct(qb,m),Ct(Ye,b),Ct(Hb,v),Ct(Vb,C),Ct(Fb,x),Ct(jb,T),Ct(Jb,tt),Ct(Yb,Y),Ct(Zb,V),Ct(Kb,L),Ct(Zr,z),Ct(Gb,N),Ut(I))if(I.length){const pt=t.exposed||(t.exposed={});I.forEach(At=>{Object.defineProperty(pt,At,{get:()=>r[At],set:xt=>r[At]=xt,enumerable:!0})})}else t.exposed||(t.exposed={});B&&t.render===Un&&(t.render=B),K!=null&&(t.inheritAttrs=K),k&&(t.components=k),$&&(t.directives=$),N&&bh(t)}function rx(t,n,r=Un){Ut(t)&&(t=Rl(t));for(const i in t){const o=t[i];let l;ge(o)?"default"in o?l=$n(o.from||i,o.default,!0):l=$n(o.from||i):l=$n(o),je(l)?Object.defineProperty(n,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:u=>l.value=u}):n[i]=l}}function Jf(t,n,r){Wn(Ut(t)?t.map(i=>i.bind(n.proxy)):t.bind(n.proxy),n,r)}function kh(t,n,r,i){let o=i.includes(".")?Dh(r,i):()=>r[i];if(Re(t)){const l=n[t];Vt(l)&&Ar(o,l)}else if(Vt(t))Ar(o,t.bind(r));else if(ge(t))if(Ut(t))t.forEach(l=>kh(l,n,r,i));else{const l=Vt(t.handler)?t.handler.bind(r):n[t.handler];Vt(l)&&Ar(o,l,t)}}function Ch(t){const n=t.type,{mixins:r,extends:i}=n,{mixins:o,optionsCache:l,config:{optionMergeStrategies:u}}=t.appContext,f=l.get(n);let d;return f?d=f:!o.length&&!r&&!i?d=n:(d={},o.length&&o.forEach(y=>Eo(d,y,u,!0)),Eo(d,n,u)),ge(n)&&l.set(n,d),d}function Eo(t,n,r,i=!1){const{mixins:o,extends:l}=n;l&&Eo(t,l,r,!0),o&&o.forEach(u=>Eo(t,u,r,!0));for(const u in n)if(!(i&&u==="expose")){const f=sx[u]||r&&r[u];t[u]=f?f(t[u],n[u]):n[u]}return t}const sx={data:Xf,props:Qf,emits:Qf,methods:Ks,computed:Ks,beforeCreate:Ke,created:Ke,beforeMount:Ke,mounted:Ke,beforeUpdate:Ke,updated:Ke,beforeDestroy:Ke,beforeUnmount:Ke,destroyed:Ke,unmounted:Ke,activated:Ke,deactivated:Ke,errorCaptured:Ke,serverPrefetch:Ke,components:Ks,directives:Ks,watch:ox,provide:Xf,inject:ix};function Xf(t,n){return n?t?function(){return We(Vt(t)?t.call(this,this):t,Vt(n)?n.call(this,this):n)}:n:t}function ix(t,n){return Ks(Rl(t),Rl(n))}function Rl(t){if(Ut(t)){const n={};for(let r=0;r<t.length;r++)n[t[r]]=t[r];return n}return t}function Ke(t,n){return t?[...new Set([].concat(t,n))]:n}function Ks(t,n){return t?We(Object.create(null),t,n):n}function Qf(t,n){return t?Ut(t)&&Ut(n)?[...new Set([...t,...n])]:We(Object.create(null),Yf(t),Yf(n??{})):n}function ox(t,n){if(!t)return n;if(!n)return t;const r=We(Object.create(null),t);for(const i in n)r[i]=Ke(t[i],n[i]);return r}function Sh(){return{app:null,config:{isNativeTag:Wd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ax=0;function lx(t,n){return function(i,o=null){Vt(i)||(i=We({},i)),o!=null&&!ge(o)&&(o=null);const l=Sh(),u=new WeakSet,f=[];let d=!1;const y=l.app={_uid:ax++,_component:i,_props:o,_container:null,_context:l,_instance:null,version:Hx,get config(){return l.config},set config(_){},use(_,...m){return u.has(_)||(_&&Vt(_.install)?(u.add(_),_.install(y,...m)):Vt(_)&&(u.add(_),_(y,...m))),y},mixin(_){return l.mixins.includes(_)||l.mixins.push(_),y},component(_,m){return m?(l.components[_]=m,y):l.components[_]},directive(_,m){return m?(l.directives[_]=m,y):l.directives[_]},mount(_,m,b){if(!d){const v=y._ceVNode||fe(i,o);return v.appContext=l,b===!0?b="svg":b===!1&&(b=void 0),t(v,_,b),d=!0,y._container=_,_.__vue_app__=y,Uo(v.component)}},onUnmount(_){f.push(_)},unmount(){d&&(Wn(f,y._instance,16),t(null,y._container),delete y._container.__vue_app__)},provide(_,m){return l.provides[_]=m,y},runWithContext(_){const m=bs;bs=y;try{return _()}finally{bs=m}}};return y}}let bs=null;function fo(t,n){if(Fe){let r=Fe.provides;const i=Fe.parent&&Fe.parent.provides;i===r&&(r=Fe.provides=Object.create(i)),r[t]=n}}function $n(t,n,r=!1){const i=zx();if(i||bs){let o=bs?bs._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return r&&Vt(n)?n.call(i&&i.proxy):n}}const Eh={},Ah=()=>Object.create(Eh),Th=t=>Object.getPrototypeOf(t)===Eh;function ux(t,n,r,i=!1){const o={},l=Ah();t.propsDefaults=Object.create(null),Oh(t,n,o,l);for(const u in t.propsOptions[0])u in o||(o[u]=void 0);r?t.props=i?o:fh(o):t.type.props?t.props=o:t.props=l,t.attrs=l}function cx(t,n,r,i){const{props:o,attrs:l,vnode:{patchFlag:u}}=t,f=ae(o),[d]=t.propsOptions;let y=!1;if((i||u>0)&&!(u&16)){if(u&8){const _=t.vnode.dynamicProps;for(let m=0;m<_.length;m++){let b=_[m];if(zo(t.emitsOptions,b))continue;const v=n[b];if(d)if(le(l,b))v!==l[b]&&(l[b]=v,y=!0);else{const C=Cn(b);o[C]=Il(d,f,C,v,t,!1)}else v!==l[b]&&(l[b]=v,y=!0)}}}else{Oh(t,n,o,l)&&(y=!0);let _;for(const m in f)(!n||!le(n,m)&&((_=$r(m))===m||!le(n,_)))&&(d?r&&(r[m]!==void 0||r[_]!==void 0)&&(o[m]=Il(d,f,m,void 0,t,!0)):delete o[m]);if(l!==f)for(const m in l)(!n||!le(n,m))&&(delete l[m],y=!0)}y&&sr(t.attrs,"set","")}function Oh(t,n,r,i){const[o,l]=t.propsOptions;let u=!1,f;if(n)for(let d in n){if(Zs(d))continue;const y=n[d];let _;o&&le(o,_=Cn(d))?!l||!l.includes(_)?r[_]=y:(f||(f={}))[_]=y:zo(t.emitsOptions,d)||(!(d in i)||y!==i[d])&&(i[d]=y,u=!0)}if(l){const d=ae(r),y=f||he;for(let _=0;_<l.length;_++){const m=l[_];r[m]=Il(o,d,m,y[m],t,!le(y,m))}}return u}function Il(t,n,r,i,o,l){const u=t[r];if(u!=null){const f=le(u,"default");if(f&&i===void 0){const d=u.default;if(u.type!==Function&&!u.skipFactory&&Vt(d)){const{propsDefaults:y}=o;if(r in y)i=y[r];else{const _=gi(o);i=y[r]=d.call(null,n),_()}}else i=d;o.ce&&o.ce._setProp(r,i)}u[0]&&(l&&!f?i=!1:u[1]&&(i===""||i===$r(r))&&(i=!0))}return i}const fx=new WeakMap;function Rh(t,n,r=!1){const i=r?fx:n.propsCache,o=i.get(t);if(o)return o;const l=t.props,u={},f=[];let d=!1;if(!Vt(t)){const _=m=>{d=!0;const[b,v]=Rh(m,n,!0);We(u,b),v&&f.push(...v)};!r&&n.mixins.length&&n.mixins.forEach(_),t.extends&&_(t.extends),t.mixins&&t.mixins.forEach(_)}if(!l&&!d)return ge(t)&&i.set(t,gs),gs;if(Ut(l))for(let _=0;_<l.length;_++){const m=Cn(l[_]);td(m)&&(u[m]=he)}else if(l)for(const _ in l){const m=Cn(_);if(td(m)){const b=l[_],v=u[m]=Ut(b)||Vt(b)?{type:b}:We({},b),C=v.type;let x=!1,T=!0;if(Ut(C))for(let A=0;A<C.length;++A){const L=C[A],D=Vt(L)&&L.name;if(D==="Boolean"){x=!0;break}else D==="String"&&(T=!1)}else x=Vt(C)&&C.name==="Boolean";v[0]=x,v[1]=T,(x||le(v,"default"))&&f.push(m)}}const y=[u,f];return ge(t)&&i.set(t,y),y}function td(t){return t[0]!=="$"&&!Zs(t)}const ru=t=>t==="_"||t==="_ctx"||t==="$stable",su=t=>Ut(t)?t.map(Nn):[Nn(t)],dx=(t,n,r)=>{if(n._n)return n;const i=cn((...o)=>su(n(...o)),r);return i._c=!1,i},Ih=(t,n,r)=>{const i=t._ctx;for(const o in t){if(ru(o))continue;const l=t[o];if(Vt(l))n[o]=dx(o,l,i);else if(l!=null){const u=su(l);n[o]=()=>u}}},$h=(t,n)=>{const r=su(n);t.slots.default=()=>r},Ph=(t,n,r)=>{for(const i in n)(r||!ru(i))&&(t[i]=n[i])},hx=(t,n,r)=>{const i=t.slots=Ah();if(t.vnode.shapeFlag&32){const o=n._;o?(Ph(i,n,r),r&&Kd(i,"_",o,!0)):Ih(n,i)}else n&&$h(t,n)},px=(t,n,r)=>{const{vnode:i,slots:o}=t;let l=!0,u=he;if(i.shapeFlag&32){const f=n._;f?r&&f===1?l=!1:Ph(o,n,r):(l=!n.$stable,Ih(n,o)),u=n}else n&&($h(t,n),u={default:1});if(l)for(const f in o)!ru(f)&&u[f]==null&&delete o[f]},un=Ox;function gx(t){return mx(t)}function mx(t,n){const r=Lo();r.__VUE__=!0;const{insert:i,remove:o,patchProp:l,createElement:u,createText:f,createComment:d,setText:y,setElementText:_,parentNode:m,nextSibling:b,setScopeId:v=Un,insertStaticContent:C}=t,x=(S,M,h,F=null,j=null,E=null,O=void 0,U=null,Q=!!M.dynamicChildren)=>{if(S===M)return;S&&!qs(S,M)&&(F=J(S),st(S,j,E,!0),S=null),M.patchFlag===-2&&(Q=!1,M.dynamicChildren=null);const{type:X,ref:G,shapeFlag:ot}=M;switch(X){case No:T(S,M,h,F);break;case Rr:A(S,M,h,F);break;case ho:S==null&&L(M,h,F,O);break;case Ft:k(S,M,h,F,j,E,O,U,Q);break;default:ot&1?B(S,M,h,F,j,E,O,U,Q):ot&6?$(S,M,h,F,j,E,O,U,Q):(ot&64||ot&128)&&X.process(S,M,h,F,j,E,O,U,Q,kt)}G!=null&&j?Xs(G,S&&S.ref,E,M||S,!M):G==null&&S&&S.ref!=null&&Xs(S.ref,null,E,S,!0)},T=(S,M,h,F)=>{if(S==null)i(M.el=f(M.children),h,F);else{const j=M.el=S.el;M.children!==S.children&&y(j,M.children)}},A=(S,M,h,F)=>{S==null?i(M.el=d(M.children||""),h,F):M.el=S.el},L=(S,M,h,F)=>{[S.el,S.anchor]=C(S.children,M,h,F,S.el,S.anchor)},D=({el:S,anchor:M},h,F)=>{let j;for(;S&&S!==M;)j=b(S),i(S,h,F),S=j;i(M,h,F)},z=({el:S,anchor:M})=>{let h;for(;S&&S!==M;)h=b(S),o(S),S=h;o(M)},B=(S,M,h,F,j,E,O,U,Q)=>{M.type==="svg"?O="svg":M.type==="math"&&(O="mathml"),S==null?Y(M,h,F,j,E,O,U,Q):N(S,M,j,E,O,U,Q)},Y=(S,M,h,F,j,E,O,U)=>{let Q,X;const{props:G,shapeFlag:ot,transition:_t,dirs:ht}=S;if(Q=S.el=u(S.type,E,G&&G.is,G),ot&8?_(Q,S.children):ot&16&&tt(S.children,Q,null,F,j,dl(S,E),O,U),ht&&jr(S,null,F,"created"),V(Q,S,S.scopeId,O,F),G){for(const Mt in G)Mt!=="value"&&!Zs(Mt)&&l(Q,Mt,null,G[Mt],E,F);"value"in G&&l(Q,"value",null,G.value,E),(X=G.onVnodeBeforeMount)&&Dn(X,F,S)}ht&&jr(S,null,F,"beforeMount");const St=vx(j,_t);St&&_t.beforeEnter(Q),i(Q,M,h),((X=G&&G.onVnodeMounted)||St||ht)&&un(()=>{X&&Dn(X,F,S),St&&_t.enter(Q),ht&&jr(S,null,F,"mounted")},j)},V=(S,M,h,F,j)=>{if(h&&v(S,h),F)for(let E=0;E<F.length;E++)v(S,F[E]);if(j){let E=j.subTree;if(M===E||Nh(E.type)&&(E.ssContent===M||E.ssFallback===M)){const O=j.vnode;V(S,O,O.scopeId,O.slotScopeIds,j.parent)}}},tt=(S,M,h,F,j,E,O,U,Q=0)=>{for(let X=Q;X<S.length;X++){const G=S[X]=U?Cr(S[X]):Nn(S[X]);x(null,G,M,h,F,j,E,O,U)}},N=(S,M,h,F,j,E,O)=>{const U=M.el=S.el;let{patchFlag:Q,dynamicChildren:X,dirs:G}=M;Q|=S.patchFlag&16;const ot=S.props||he,_t=M.props||he;let ht;if(h&&Wr(h,!1),(ht=_t.onVnodeBeforeUpdate)&&Dn(ht,h,M,S),G&&jr(M,S,h,"beforeUpdate"),h&&Wr(h,!0),(ot.innerHTML&&_t.innerHTML==null||ot.textContent&&_t.textContent==null)&&_(U,""),X?I(S.dynamicChildren,X,U,h,F,dl(M,j),E):O||At(S,M,U,null,h,F,dl(M,j),E,!1),Q>0){if(Q&16)K(U,ot,_t,h,j);else if(Q&2&&ot.class!==_t.class&&l(U,"class",null,_t.class,j),Q&4&&l(U,"style",ot.style,_t.style,j),Q&8){const St=M.dynamicProps;for(let Mt=0;Mt<St.length;Mt++){const Rt=St[Mt],ne=ot[Rt],be=_t[Rt];(be!==ne||Rt==="value")&&l(U,Rt,ne,be,j,h)}}Q&1&&S.children!==M.children&&_(U,M.children)}else!O&&X==null&&K(U,ot,_t,h,j);((ht=_t.onVnodeUpdated)||G)&&un(()=>{ht&&Dn(ht,h,M,S),G&&jr(M,S,h,"updated")},F)},I=(S,M,h,F,j,E,O)=>{for(let U=0;U<M.length;U++){const Q=S[U],X=M[U],G=Q.el&&(Q.type===Ft||!qs(Q,X)||Q.shapeFlag&198)?m(Q.el):h;x(Q,X,G,null,F,j,E,O,!0)}},K=(S,M,h,F,j)=>{if(M!==h){if(M!==he)for(const E in M)!Zs(E)&&!(E in h)&&l(S,E,M[E],null,j,F);for(const E in h){if(Zs(E))continue;const O=h[E],U=M[E];O!==U&&E!=="value"&&l(S,E,U,O,j,F)}"value"in h&&l(S,"value",M.value,h.value,j)}},k=(S,M,h,F,j,E,O,U,Q)=>{const X=M.el=S?S.el:f(""),G=M.anchor=S?S.anchor:f("");let{patchFlag:ot,dynamicChildren:_t,slotScopeIds:ht}=M;ht&&(U=U?U.concat(ht):ht),S==null?(i(X,h,F),i(G,h,F),tt(M.children||[],h,G,j,E,O,U,Q)):ot>0&&ot&64&&_t&&S.dynamicChildren?(I(S.dynamicChildren,_t,h,j,E,O,U),(M.key!=null||j&&M===j.subTree)&&Lh(S,M,!0)):At(S,M,h,G,j,E,O,U,Q)},$=(S,M,h,F,j,E,O,U,Q)=>{M.slotScopeIds=U,S==null?M.shapeFlag&512?j.ctx.activate(M,h,F,O,Q):g(M,h,F,j,E,O,Q):rt(S,M,Q)},g=(S,M,h,F,j,E,O)=>{const U=S.component=Dx(S,F,j);if(xh(S)&&(U.ctx.renderer=kt),Nx(U,!1,O),U.asyncDep){if(j&&j.registerDep(U,Ct,O),!S.el){const Q=U.subTree=fe(Rr);A(null,Q,M,h),S.placeholder=Q.el}}else Ct(U,S,M,h,j,E,O)},rt=(S,M,h)=>{const F=M.component=S.component;if(Ax(S,M,h))if(F.asyncDep&&!F.asyncResolved){pt(F,M,h);return}else F.next=M,F.update();else M.el=S.el,F.vnode=M},Ct=(S,M,h,F,j,E,O)=>{const U=()=>{if(S.isMounted){let{next:ot,bu:_t,u:ht,parent:St,vnode:Mt}=S;{const Te=Mh(S);if(Te){ot&&(ot.el=Mt.el,pt(S,ot,O)),Te.asyncDep.then(()=>{S.isUnmounted||U()});return}}let Rt=ot,ne;Wr(S,!1),ot?(ot.el=Mt.el,pt(S,ot,O)):ot=Mt,_t&&co(_t),(ne=ot.props&&ot.props.onVnodeBeforeUpdate)&&Dn(ne,St,ot,Mt),Wr(S,!0);const be=nd(S),_e=S.subTree;S.subTree=be,x(_e,be,m(_e.el),J(_e),S,j,E),ot.el=be.el,Rt===null&&Tx(S,be.el),ht&&un(ht,j),(ne=ot.props&&ot.props.onVnodeUpdated)&&un(()=>Dn(ne,St,ot,Mt),j)}else{let ot;const{el:_t,props:ht}=M,{bm:St,m:Mt,parent:Rt,root:ne,type:be}=S,_e=Qs(M);Wr(S,!1),St&&co(St),!_e&&(ot=ht&&ht.onVnodeBeforeMount)&&Dn(ot,Rt,M),Wr(S,!0);{ne.ce&&ne.ce._def.shadowRoot!==!1&&ne.ce._injectChildStyle(be);const Te=S.subTree=nd(S);x(null,Te,h,F,S,j,E),M.el=Te.el}if(Mt&&un(Mt,j),!_e&&(ot=ht&&ht.onVnodeMounted)){const Te=M;un(()=>Dn(ot,Rt,Te),j)}(M.shapeFlag&256||Rt&&Qs(Rt.vnode)&&Rt.vnode.shapeFlag&256)&&S.a&&un(S.a,j),S.isMounted=!0,M=h=F=null}};S.scope.on();const Q=S.effect=new Jd(U);S.scope.off();const X=S.update=Q.run.bind(Q),G=S.job=Q.runIfDirty.bind(Q);G.i=S,G.id=S.uid,Q.scheduler=()=>eu(G),Wr(S,!0),X()},pt=(S,M,h)=>{M.component=S;const F=S.vnode.props;S.vnode=M,S.next=null,cx(S,M.props,F,h),px(S,M.children,h),ur(),Kf(S),cr()},At=(S,M,h,F,j,E,O,U,Q=!1)=>{const X=S&&S.children,G=S?S.shapeFlag:0,ot=M.children,{patchFlag:_t,shapeFlag:ht}=M;if(_t>0){if(_t&128){$t(X,ot,h,F,j,E,O,U,Q);return}else if(_t&256){xt(X,ot,h,F,j,E,O,U,Q);return}}ht&8?(G&16&&gt(X,j,E),ot!==X&&_(h,ot)):G&16?ht&16?$t(X,ot,h,F,j,E,O,U,Q):gt(X,j,E,!0):(G&8&&_(h,""),ht&16&&tt(ot,h,F,j,E,O,U,Q))},xt=(S,M,h,F,j,E,O,U,Q)=>{S=S||gs,M=M||gs;const X=S.length,G=M.length,ot=Math.min(X,G);let _t;for(_t=0;_t<ot;_t++){const ht=M[_t]=Q?Cr(M[_t]):Nn(M[_t]);x(S[_t],ht,h,null,j,E,O,U,Q)}X>G?gt(S,j,E,!0,!1,ot):tt(M,h,F,j,E,O,U,Q,ot)},$t=(S,M,h,F,j,E,O,U,Q)=>{let X=0;const G=M.length;let ot=S.length-1,_t=G-1;for(;X<=ot&&X<=_t;){const ht=S[X],St=M[X]=Q?Cr(M[X]):Nn(M[X]);if(qs(ht,St))x(ht,St,h,null,j,E,O,U,Q);else break;X++}for(;X<=ot&&X<=_t;){const ht=S[ot],St=M[_t]=Q?Cr(M[_t]):Nn(M[_t]);if(qs(ht,St))x(ht,St,h,null,j,E,O,U,Q);else break;ot--,_t--}if(X>ot){if(X<=_t){const ht=_t+1,St=ht<G?M[ht].el:F;for(;X<=_t;)x(null,M[X]=Q?Cr(M[X]):Nn(M[X]),h,St,j,E,O,U,Q),X++}}else if(X>_t)for(;X<=ot;)st(S[X],j,E,!0),X++;else{const ht=X,St=X,Mt=new Map;for(X=St;X<=_t;X++){const Se=M[X]=Q?Cr(M[X]):Nn(M[X]);Se.key!=null&&Mt.set(Se.key,X)}let Rt,ne=0;const be=_t-St+1;let _e=!1,Te=0;const re=new Array(be);for(X=0;X<be;X++)re[X]=0;for(X=ht;X<=ot;X++){const Se=S[X];if(ne>=be){st(Se,j,E,!0);continue}let xe;if(Se.key!=null)xe=Mt.get(Se.key);else for(Rt=St;Rt<=_t;Rt++)if(re[Rt-St]===0&&qs(Se,M[Rt])){xe=Rt;break}xe===void 0?st(Se,j,E,!0):(re[xe-St]=X+1,xe>=Te?Te=xe:_e=!0,x(Se,M[xe],h,null,j,E,O,U,Q),ne++)}const Sn=_e?_x(re):gs;for(Rt=Sn.length-1,X=be-1;X>=0;X--){const Se=St+X,xe=M[Se],Hn=M[Se+1],Yr=Se+1<G?Hn.el||Hn.placeholder:F;re[X]===0?x(null,xe,h,Yr,j,E,O,U,Q):_e&&(Rt<0||X!==Sn[Rt]?it(xe,h,Yr,2):Rt--)}}},it=(S,M,h,F,j=null)=>{const{el:E,type:O,transition:U,children:Q,shapeFlag:X}=S;if(X&6){it(S.component.subTree,M,h,F);return}if(X&128){S.suspense.move(M,h,F);return}if(X&64){O.move(S,M,h,kt);return}if(O===Ft){i(E,M,h);for(let ot=0;ot<Q.length;ot++)it(Q[ot],M,h,F);i(S.anchor,M,h);return}if(O===ho){D(S,M,h);return}if(F!==2&&X&1&&U)if(F===0)U.beforeEnter(E),i(E,M,h),un(()=>U.enter(E),j);else{const{leave:ot,delayLeave:_t,afterLeave:ht}=U,St=()=>{S.ctx.isUnmounted?o(E):i(E,M,h)},Mt=()=>{E._isLeaving&&E[Ub](!0),ot(E,()=>{St(),ht&&ht()})};_t?_t(E,St,Mt):Mt()}else i(E,M,h)},st=(S,M,h,F=!1,j=!1)=>{const{type:E,props:O,ref:U,children:Q,dynamicChildren:X,shapeFlag:G,patchFlag:ot,dirs:_t,cacheIndex:ht}=S;if(ot===-2&&(j=!1),U!=null&&(ur(),Xs(U,null,h,S,!0),cr()),ht!=null&&(M.renderCache[ht]=void 0),G&256){M.ctx.deactivate(S);return}const St=G&1&&_t,Mt=!Qs(S);let Rt;if(Mt&&(Rt=O&&O.onVnodeBeforeUnmount)&&Dn(Rt,M,S),G&6)at(S.component,h,F);else{if(G&128){S.suspense.unmount(h,F);return}St&&jr(S,null,M,"beforeUnmount"),G&64?S.type.remove(S,M,h,kt,F):X&&!X.hasOnce&&(E!==Ft||ot>0&&ot&64)?gt(X,M,h,!1,!0):(E===Ft&&ot&384||!j&&G&16)&&gt(Q,M,h),F&&Pt(S)}(Mt&&(Rt=O&&O.onVnodeUnmounted)||St)&&un(()=>{Rt&&Dn(Rt,M,S),St&&jr(S,null,M,"unmounted")},h)},Pt=S=>{const{type:M,el:h,anchor:F,transition:j}=S;if(M===Ft){Tt(h,F);return}if(M===ho){z(S);return}const E=()=>{o(h),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(S.shapeFlag&1&&j&&!j.persisted){const{leave:O,delayLeave:U}=j,Q=()=>O(h,E);U?U(S.el,E,Q):Q()}else E()},Tt=(S,M)=>{let h;for(;S!==M;)h=b(S),o(S),S=h;o(M)},at=(S,M,h)=>{const{bum:F,scope:j,job:E,subTree:O,um:U,m:Q,a:X}=S;ed(Q),ed(X),F&&co(F),j.stop(),E&&(E.flags|=8,st(O,S,M,h)),U&&un(U,M),un(()=>{S.isUnmounted=!0},M)},gt=(S,M,h,F=!1,j=!1,E=0)=>{for(let O=E;O<S.length;O++)st(S[O],M,h,F,j)},J=S=>{if(S.shapeFlag&6)return J(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const M=b(S.anchor||S.el),h=M&&M[zb];return h?b(h):M};let ut=!1;const mt=(S,M,h)=>{S==null?M._vnode&&st(M._vnode,null,null,!0):x(M._vnode||null,S,M,null,null,null,h),M._vnode=S,ut||(ut=!0,Kf(),mh(),ut=!1)},kt={p:x,um:st,m:it,r:Pt,mt:g,mc:tt,pc:At,pbc:I,n:J,o:t};return{render:mt,hydrate:void 0,createApp:lx(mt)}}function dl({type:t,props:n},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:r}function Wr({effect:t,job:n},r){r?(t.flags|=32,n.flags|=4):(t.flags&=-33,n.flags&=-5)}function vx(t,n){return(!t||t&&!t.pendingBranch)&&n&&!n.persisted}function Lh(t,n,r=!1){const i=t.children,o=n.children;if(Ut(i)&&Ut(o))for(let l=0;l<i.length;l++){const u=i[l];let f=o[l];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[l]=Cr(o[l]),f.el=u.el),!r&&f.patchFlag!==-2&&Lh(u,f)),f.type===No&&f.patchFlag!==-1&&(f.el=u.el),f.type===Rr&&!f.el&&(f.el=u.el)}}function _x(t){const n=t.slice(),r=[0];let i,o,l,u,f;const d=t.length;for(i=0;i<d;i++){const y=t[i];if(y!==0){if(o=r[r.length-1],t[o]<y){n[i]=o,r.push(i);continue}for(l=0,u=r.length-1;l<u;)f=l+u>>1,t[r[f]]<y?l=f+1:u=f;y<t[r[l]]&&(l>0&&(n[i]=r[l-1]),r[l]=i)}}for(l=r.length,u=r[l-1];l-- >0;)r[l]=u,u=n[u];return r}function Mh(t){const n=t.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Mh(n)}function ed(t){if(t)for(let n=0;n<t.length;n++)t[n].flags|=8}const yx=Symbol.for("v-scx"),bx=()=>$n(yx);function Ar(t,n,r){return Bh(t,n,r)}function Bh(t,n,r=he){const{immediate:i,deep:o,flush:l,once:u}=r,f=We({},r),d=n&&i||!n&&l!=="post";let y;if(li){if(l==="sync"){const v=bx();y=v.__watcherHandles||(v.__watcherHandles=[])}else if(!d){const v=()=>{};return v.stop=Un,v.resume=Un,v.pause=Un,v}}const _=Fe;f.call=(v,C,x)=>Wn(v,_,C,x);let m=!1;l==="post"?f.scheduler=v=>{un(v,_&&_.suspense)}:l!=="sync"&&(m=!0,f.scheduler=(v,C)=>{C?v():eu(v)}),f.augmentJob=v=>{n&&(v.flags|=4),m&&(v.flags|=2,_&&(v.id=_.uid,v.i=_))};const b=Lb(t,n,f);return li&&(y?y.push(b):d&&b()),b}function xx(t,n,r){const i=this.proxy,o=Re(t)?t.includes(".")?Dh(i,t):()=>i[t]:t.bind(i,i);let l;Vt(n)?l=n:(l=n.handler,r=n);const u=gi(this),f=Bh(o,l.bind(i),r);return u(),f}function Dh(t,n){const r=n.split(".");return()=>{let i=t;for(let o=0;o<r.length&&i;o++)i=i[r[o]];return i}}const wx=(t,n)=>n==="modelValue"||n==="model-value"?t.modelModifiers:t[`${n}Modifiers`]||t[`${Cn(n)}Modifiers`]||t[`${$r(n)}Modifiers`];function kx(t,n,...r){if(t.isUnmounted)return;const i=t.vnode.props||he;let o=r;const l=n.startsWith("update:"),u=l&&wx(i,n.slice(7));u&&(u.trim&&(o=r.map(_=>Re(_)?_.trim():_)),u.number&&(o=r.map(yo)));let f,d=i[f=ol(n)]||i[f=ol(Cn(n))];!d&&l&&(d=i[f=ol($r(n))]),d&&Wn(d,t,6,o);const y=i[f+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[f])return;t.emitted[f]=!0,Wn(y,t,6,o)}}const Cx=new WeakMap;function zh(t,n,r=!1){const i=r?Cx:n.emitsCache,o=i.get(t);if(o!==void 0)return o;const l=t.emits;let u={},f=!1;if(!Vt(t)){const d=y=>{const _=zh(y,n,!0);_&&(f=!0,We(u,_))};!r&&n.mixins.length&&n.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}return!l&&!f?(ge(t)&&i.set(t,null),null):(Ut(l)?l.forEach(d=>u[d]=null):We(u,l),ge(t)&&i.set(t,u),u)}function zo(t,n){return!t||!Io(n)?!1:(n=n.slice(2).replace(/Once$/,""),le(t,n[0].toLowerCase()+n.slice(1))||le(t,$r(n))||le(t,n))}function nd(t){const{type:n,vnode:r,proxy:i,withProxy:o,propsOptions:[l],slots:u,attrs:f,emit:d,render:y,renderCache:_,props:m,data:b,setupState:v,ctx:C,inheritAttrs:x}=t,T=ko(t);let A,L;try{if(r.shapeFlag&4){const z=o||i,B=z;A=Nn(y.call(B,z,_,m,v,b,C)),L=f}else{const z=n;A=Nn(z.length>1?z(m,{attrs:f,slots:u,emit:d}):z(m,null)),L=n.props?f:Sx(f)}}catch(z){ei.length=0,Bo(z,t,1),A=fe(Rr)}let D=A;if(L&&x!==!1){const z=Object.keys(L),{shapeFlag:B}=D;z.length&&B&7&&(l&&z.some(ql)&&(L=Ex(L,l)),D=xs(D,L,!1,!0))}return r.dirs&&(D=xs(D,null,!1,!0),D.dirs=D.dirs?D.dirs.concat(r.dirs):r.dirs),r.transition&&nu(D,r.transition),A=D,ko(T),A}const Sx=t=>{let n;for(const r in t)(r==="class"||r==="style"||Io(r))&&((n||(n={}))[r]=t[r]);return n},Ex=(t,n)=>{const r={};for(const i in t)(!ql(i)||!(i.slice(9)in n))&&(r[i]=t[i]);return r};function Ax(t,n,r){const{props:i,children:o,component:l}=t,{props:u,children:f,patchFlag:d}=n,y=l.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&d>=0){if(d&1024)return!0;if(d&16)return i?rd(i,u,y):!!u;if(d&8){const _=n.dynamicProps;for(let m=0;m<_.length;m++){const b=_[m];if(u[b]!==i[b]&&!zo(y,b))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:i===u?!1:i?u?rd(i,u,y):!0:!!u;return!1}function rd(t,n,r){const i=Object.keys(n);if(i.length!==Object.keys(t).length)return!0;for(let o=0;o<i.length;o++){const l=i[o];if(n[l]!==t[l]&&!zo(r,l))return!0}return!1}function Tx({vnode:t,parent:n},r){for(;n;){const i=n.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=n.vnode).el=r,n=n.parent;else break}}const Nh=t=>t.__isSuspense;function Ox(t,n){n&&n.pendingBranch?Ut(t)?n.effects.push(...t):n.effects.push(t):Db(t)}const Ft=Symbol.for("v-fgt"),No=Symbol.for("v-txt"),Rr=Symbol.for("v-cmt"),ho=Symbol.for("v-stc"),ei=[];let dn=null;function W(t=!1){ei.push(dn=t?null:[])}function Rx(){ei.pop(),dn=ei[ei.length-1]||null}let ai=1;function Ao(t,n=!1){ai+=t,t<0&&dn&&n&&(dn.hasOnce=!0)}function Uh(t){return t.dynamicChildren=ai>0?dn||gs:null,Rx(),ai>0&&dn&&dn.push(t),t}function H(t,n,r,i,o,l){return Uh(c(t,n,r,i,o,l,!0))}function Ix(t,n,r,i,o){return Uh(fe(t,n,r,i,o,!0))}function To(t){return t?t.__v_isVNode===!0:!1}function qs(t,n){return t.type===n.type&&t.key===n.key}const Fh=({key:t})=>t??null,po=({ref:t,ref_key:n,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Re(t)||je(t)||Vt(t)?{i:fn,r:t,k:n,f:!!r}:t:null);function c(t,n=null,r=null,i=0,o=null,l=t===Ft?0:1,u=!1,f=!1){const d={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&Fh(n),ref:n&&po(n),scopeId:_h,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:fn};return f?(iu(d,r),l&128&&t.normalize(d)):r&&(d.shapeFlag|=Re(r)?8:16),ai>0&&!u&&dn&&(d.patchFlag>0||l&6)&&d.patchFlag!==32&&dn.push(d),d}const fe=$x;function $x(t,n=null,r=null,i=0,o=null,l=!1){if((!t||t===Qb)&&(t=Rr),To(t)){const f=xs(t,n,!0);return r&&iu(f,r),ai>0&&!l&&dn&&(f.shapeFlag&6?dn[dn.indexOf(t)]=f:dn.push(f)),f.patchFlag=-2,f}if(qx(t)&&(t=t.__vccOpts),n){n=Px(n);let{class:f,style:d}=n;f&&!Re(f)&&(n.class=ce(f)),ge(d)&&(tu(d)&&!Ut(d)&&(d=We({},d)),n.style=Gr(d))}const u=Re(t)?1:Nh(t)?128:Nb(t)?64:ge(t)?4:Vt(t)?2:0;return c(t,n,r,i,o,u,l,!0)}function Px(t){return t?tu(t)||Th(t)?We({},t):t:null}function xs(t,n,r=!1,i=!1){const{props:o,ref:l,patchFlag:u,children:f,transition:d}=t,y=n?Lx(o||{},n):o,_={__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&Fh(y),ref:n&&n.ref?r&&l?Ut(l)?l.concat(po(n)):[l,po(n)]:po(n):l,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:f,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Ft?u===-1?16:u|16:u,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:d,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&xs(t.ssContent),ssFallback:t.ssFallback&&xs(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return d&&i&&nu(_,d.clone(_)),_}function ee(t=" ",n=0){return fe(No,null,t,n)}function lr(t,n){const r=fe(ho,null,t);return r.staticCount=n,r}function Et(t="",n=!1){return n?(W(),Ix(Rr,null,t)):fe(Rr,null,t)}function Nn(t){return t==null||typeof t=="boolean"?fe(Rr):Ut(t)?fe(Ft,null,t.slice()):To(t)?Cr(t):fe(No,null,String(t))}function Cr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:xs(t)}function iu(t,n){let r=0;const{shapeFlag:i}=t;if(n==null)n=null;else if(Ut(n))r=16;else if(typeof n=="object")if(i&65){const o=n.default;o&&(o._c&&(o._d=!1),iu(t,o()),o._c&&(o._d=!0));return}else{r=32;const o=n._;!o&&!Th(n)?n._ctx=fn:o===3&&fn&&(fn.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else Vt(n)?(n={default:n,_ctx:fn},r=32):(n=String(n),i&64?(r=16,n=[ee(n)]):r=8);t.children=n,t.shapeFlag|=r}function Lx(...t){const n={};for(let r=0;r<t.length;r++){const i=t[r];for(const o in i)if(o==="class")n.class!==i.class&&(n.class=ce([n.class,i.class]));else if(o==="style")n.style=Gr([n.style,i.style]);else if(Io(o)){const l=n[o],u=i[o];u&&l!==u&&!(Ut(l)&&l.includes(u))&&(n[o]=l?[].concat(l,u):u)}else o!==""&&(n[o]=i[o])}return n}function Dn(t,n,r,i=null){Wn(t,n,7,[r,i])}const Mx=Sh();let Bx=0;function Dx(t,n,r){const i=t.type,o=(n?n.appContext:t.appContext)||Mx,l={uid:Bx++,vnode:t,type:i,parent:n,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ab(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(o.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Rh(i,o),emitsOptions:zh(i,o),emit:null,emitted:null,propsDefaults:he,inheritAttrs:i.inheritAttrs,ctx:he,data:he,props:he,attrs:he,slots:he,refs:he,setupState:he,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=n?n.root:l,l.emit=kx.bind(null,l),t.ce&&t.ce(l),l}let Fe=null;const zx=()=>Fe||fn;let Oo,$l;{const t=Lo(),n=(r,i)=>{let o;return(o=t[r])||(o=t[r]=[]),o.push(i),l=>{o.length>1?o.forEach(u=>u(l)):o[0](l)}};Oo=n("__VUE_INSTANCE_SETTERS__",r=>Fe=r),$l=n("__VUE_SSR_SETTERS__",r=>li=r)}const gi=t=>{const n=Fe;return Oo(t),t.scope.on(),()=>{t.scope.off(),Oo(n)}},sd=()=>{Fe&&Fe.scope.off(),Oo(null)};function jh(t){return t.vnode.shapeFlag&4}let li=!1;function Nx(t,n=!1,r=!1){n&&$l(n);const{props:i,children:o}=t.vnode,l=jh(t);ux(t,i,l,n),hx(t,o,r||n);const u=l?Ux(t,n):void 0;return n&&$l(!1),u}function Ux(t,n){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ex);const{setup:i}=r;if(i){ur();const o=t.setupContext=i.length>1?jx(t):null,l=gi(t),u=hi(i,t,0,[t.props,o]),f=qd(u);if(cr(),l(),(f||t.sp)&&!Qs(t)&&bh(t),f){if(u.then(sd,sd),n)return u.then(d=>{id(t,d)}).catch(d=>{Bo(d,t,0)});t.asyncDep=u}else id(t,u)}else Wh(t)}function id(t,n,r){Vt(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:ge(n)&&(t.setupState=hh(n)),Wh(t)}function Wh(t,n,r){const i=t.type;t.render||(t.render=i.render||Un);{const o=gi(t);ur();try{nx(t)}finally{cr(),o()}}}const Fx={get(t,n){return Ue(t,"get",""),t[n]}};function jx(t){const n=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,Fx),slots:t.slots,emit:t.emit,expose:n}}function Uo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(hh(Ab(t.exposed)),{get(n,r){if(r in n)return n[r];if(r in ti)return ti[r](t)},has(n,r){return r in n||r in ti}})):t.proxy}function Wx(t,n=!0){return Vt(t)?t.displayName||t.name:t.name||n&&t.__name}function qx(t){return Vt(t)&&"__vccOpts"in t}const pe=(t,n)=>$b(t,n,li);function qh(t,n,r){try{Ao(-1);const i=arguments.length;return i===2?ge(n)&&!Ut(n)?To(n)?fe(t,null,[n]):fe(t,n):fe(t,null,n):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&To(r)&&(r=[r]),fe(t,n,r))}finally{Ao(1)}}const Hx="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pl;const od=typeof window<"u"&&window.trustedTypes;if(od)try{Pl=od.createPolicy("vue",{createHTML:t=>t})}catch{}const Hh=Pl?t=>Pl.createHTML(t):t=>t,Vx="http://www.w3.org/2000/svg",Kx="http://www.w3.org/1998/Math/MathML",rr=typeof document<"u"?document:null,ad=rr&&rr.createElement("template"),Gx={insert:(t,n,r)=>{n.insertBefore(t,r||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,r,i)=>{const o=n==="svg"?rr.createElementNS(Vx,t):n==="mathml"?rr.createElementNS(Kx,t):r?rr.createElement(t,{is:r}):rr.createElement(t);return t==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:t=>rr.createTextNode(t),createComment:t=>rr.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>rr.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,r,i,o,l){const u=r?r.previousSibling:n.lastChild;if(o&&(o===l||o.nextSibling))for(;n.insertBefore(o.cloneNode(!0),r),!(o===l||!(o=o.nextSibling)););else{ad.innerHTML=Hh(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const f=ad.content;if(i==="svg"||i==="mathml"){const d=f.firstChild;for(;d.firstChild;)f.appendChild(d.firstChild);f.removeChild(d)}n.insertBefore(f,r)}return[u?u.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}},Zx=Symbol("_vtc");function Yx(t,n,r){const i=t[Zx];i&&(n=(n?[n,...i]:[...i]).join(" ")),n==null?t.removeAttribute("class"):r?t.setAttribute("class",n):t.className=n}const ld=Symbol("_vod"),Jx=Symbol("_vsh"),Xx=Symbol(""),Qx=/(?:^|;)\s*display\s*:/;function tw(t,n,r){const i=t.style,o=Re(r);let l=!1;if(r&&!o){if(n)if(Re(n))for(const u of n.split(";")){const f=u.slice(0,u.indexOf(":")).trim();r[f]==null&&go(i,f,"")}else for(const u in n)r[u]==null&&go(i,u,"");for(const u in r)u==="display"&&(l=!0),go(i,u,r[u])}else if(o){if(n!==r){const u=i[Xx];u&&(r+=";"+u),i.cssText=r,l=Qx.test(r)}}else n&&t.removeAttribute("style");ld in t&&(t[ld]=l?i.display:"",t[Jx]&&(i.display="none"))}const ud=/\s*!important$/;function go(t,n,r){if(Ut(r))r.forEach(i=>go(t,n,i));else if(r==null&&(r=""),n.startsWith("--"))t.setProperty(n,r);else{const i=ew(t,n);ud.test(r)?t.setProperty($r(i),r.replace(ud,""),"important"):t[i]=r}}const cd=["Webkit","Moz","ms"],hl={};function ew(t,n){const r=hl[n];if(r)return r;let i=Cn(n);if(i!=="filter"&&i in t)return hl[n]=i;i=Po(i);for(let o=0;o<cd.length;o++){const l=cd[o]+i;if(l in t)return hl[n]=l}return n}const fd="http://www.w3.org/1999/xlink";function dd(t,n,r,i,o,l=ib(n)){i&&n.startsWith("xlink:")?r==null?t.removeAttributeNS(fd,n.slice(6,n.length)):t.setAttributeNS(fd,n,r):r==null||l&&!Gd(r)?t.removeAttribute(n):t.setAttribute(n,l?"":jn(r)?String(r):r)}function hd(t,n,r,i,o){if(n==="innerHTML"||n==="textContent"){r!=null&&(t[n]=n==="innerHTML"?Hh(r):r);return}const l=t.tagName;if(n==="value"&&l!=="PROGRESS"&&!l.includes("-")){const f=l==="OPTION"?t.getAttribute("value")||"":t.value,d=r==null?t.type==="checkbox"?"on":"":String(r);(f!==d||!("_value"in t))&&(t.value=d),r==null&&t.removeAttribute(n),t._value=r;return}let u=!1;if(r===""||r==null){const f=typeof t[n];f==="boolean"?r=Gd(r):r==null&&f==="string"?(r="",u=!0):f==="number"&&(r=0,u=!0)}try{t[n]=r}catch{}u&&t.removeAttribute(o||n)}function or(t,n,r,i){t.addEventListener(n,r,i)}function nw(t,n,r,i){t.removeEventListener(n,r,i)}const pd=Symbol("_vei");function rw(t,n,r,i,o=null){const l=t[pd]||(t[pd]={}),u=l[n];if(i&&u)u.value=i;else{const[f,d]=sw(n);if(i){const y=l[n]=aw(i,o);or(t,f,y,d)}else u&&(nw(t,f,u,d),l[n]=void 0)}}const gd=/(?:Once|Passive|Capture)$/;function sw(t){let n;if(gd.test(t)){n={};let i;for(;i=t.match(gd);)t=t.slice(0,t.length-i[0].length),n[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):$r(t.slice(2)),n]}let pl=0;const iw=Promise.resolve(),ow=()=>pl||(iw.then(()=>pl=0),pl=Date.now());function aw(t,n){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;Wn(lw(i,r.value),n,5,[i])};return r.value=t,r.attached=ow(),r}function lw(t,n){if(Ut(n)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},n.map(i=>o=>!o._stopped&&i&&i(o))}else return n}const md=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,uw=(t,n,r,i,o,l)=>{const u=o==="svg";n==="class"?Yx(t,i,u):n==="style"?tw(t,r,i):Io(n)?ql(n)||rw(t,n,r,i,l):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):cw(t,n,i,u))?(hd(t,n,i),!t.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&dd(t,n,i,u,l,n!=="value")):t._isVueCE&&(/[A-Z]/.test(n)||!Re(i))?hd(t,Cn(n),i,l,n):(n==="true-value"?t._trueValue=i:n==="false-value"&&(t._falseValue=i),dd(t,n,i,u))};function cw(t,n,r,i){if(i)return!!(n==="innerHTML"||n==="textContent"||n in t&&md(n)&&Vt(r));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return md(n)&&Re(r)?!1:n in t}const Ir=t=>{const n=t.props["onUpdate:modelValue"]||!1;return Ut(n)?r=>co(n,r):n};function fw(t){t.target.composing=!0}function vd(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const kn=Symbol("_assign"),jt={created(t,{modifiers:{lazy:n,trim:r,number:i}},o){t[kn]=Ir(o);const l=i||o.props&&o.props.type==="number";or(t,n?"change":"input",u=>{if(u.target.composing)return;let f=t.value;r&&(f=f.trim()),l&&(f=yo(f)),t[kn](f)}),r&&or(t,"change",()=>{t.value=t.value.trim()}),n||(or(t,"compositionstart",fw),or(t,"compositionend",vd),or(t,"change",vd))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,oldValue:r,modifiers:{lazy:i,trim:o,number:l}},u){if(t[kn]=Ir(u),t.composing)return;const f=(l||t.type==="number")&&!/^0\d/.test(t.value)?yo(t.value):t.value,d=n??"";f!==d&&(document.activeElement===t&&t.type!=="range"&&(i&&n===r||o&&t.value.trim()===d)||(t.value=d))}},dw={deep:!0,created(t,n,r){t[kn]=Ir(r),or(t,"change",()=>{const i=t._modelValue,o=ws(t),l=t.checked,u=t[kn];if(Ut(i)){const f=Kl(i,o),d=f!==-1;if(l&&!d)u(i.concat(o));else if(!l&&d){const y=[...i];y.splice(f,1),u(y)}}else if(Ss(i)){const f=new Set(i);l?f.add(o):f.delete(o),u(f)}else u(Vh(t,l))})},mounted:_d,beforeUpdate(t,n,r){t[kn]=Ir(r),_d(t,n,r)}};function _d(t,{value:n,oldValue:r},i){t._modelValue=n;let o;if(Ut(n))o=Kl(n,i.props.value)>-1;else if(Ss(n))o=n.has(i.props.value);else{if(n===r)return;o=Kr(n,Vh(t,!0))}t.checked!==o&&(t.checked=o)}const hw={created(t,{value:n},r){t.checked=Kr(n,r.props.value),t[kn]=Ir(r),or(t,"change",()=>{t[kn](ws(t))})},beforeUpdate(t,{value:n,oldValue:r},i){t[kn]=Ir(i),n!==r&&(t.checked=Kr(n,i.props.value))}},ui={deep:!0,created(t,{value:n,modifiers:{number:r}},i){const o=Ss(n);or(t,"change",()=>{const l=Array.prototype.filter.call(t.options,u=>u.selected).map(u=>r?yo(ws(u)):ws(u));t[kn](t.multiple?o?new Set(l):l:l[0]),t._assigning=!0,pi(()=>{t._assigning=!1})}),t[kn]=Ir(i)},mounted(t,{value:n}){yd(t,n)},beforeUpdate(t,n,r){t[kn]=Ir(r)},updated(t,{value:n}){t._assigning||yd(t,n)}};function yd(t,n){const r=t.multiple,i=Ut(n);if(!(r&&!i&&!Ss(n))){for(let o=0,l=t.options.length;o<l;o++){const u=t.options[o],f=ws(u);if(r)if(i){const d=typeof f;d==="string"||d==="number"?u.selected=n.some(y=>String(y)===String(f)):u.selected=Kl(n,f)>-1}else u.selected=n.has(f);else if(Kr(ws(u),n)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ws(t){return"_value"in t?t._value:t.value}function Vh(t,n){const r=n?"_trueValue":"_falseValue";return r in t?t[r]:n}const pw=["ctrl","shift","alt","meta"],gw={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>pw.some(r=>t[`${r}Key`]&&!n.includes(r))},De=(t,n)=>{const r=t._withMods||(t._withMods={}),i=n.join(".");return r[i]||(r[i]=(o,...l)=>{for(let u=0;u<n.length;u++){const f=gw[n[u]];if(f&&f(o,n))return}return t(o,...l)})},mw={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},vw=(t,n)=>{const r=t._withKeys||(t._withKeys={}),i=n.join(".");return r[i]||(r[i]=o=>{if(!("key"in o))return;const l=$r(o.key);if(n.some(u=>u===l||mw[u]===l))return t(o)})},_w=We({patchProp:uw},Gx);let bd;function yw(){return bd||(bd=gx(_w))}const bw=(...t)=>{const n=yw().createApp(...t),{mount:r}=n;return n.mount=i=>{const o=ww(i);if(!o)return;const l=n._component;!Vt(l)&&!l.render&&!l.template&&(l.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const u=r(o,!1,xw(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},n};function xw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ww(t){return Re(t)?document.querySelector(t):t}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ps=typeof document<"u";function Kh(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function kw(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Kh(t.default)}const oe=Object.assign;function gl(t,n){const r={};for(const i in n){const o=n[i];r[i]=Pn(o)?o.map(t):t(o)}return r}const ni=()=>{},Pn=Array.isArray,Gh=/#/g,Cw=/&/g,Sw=/\//g,Ew=/=/g,Aw=/\?/g,Zh=/\+/g,Tw=/%5B/g,Ow=/%5D/g,Yh=/%5E/g,Rw=/%60/g,Jh=/%7B/g,Iw=/%7C/g,Xh=/%7D/g,$w=/%20/g;function ou(t){return encodeURI(""+t).replace(Iw,"|").replace(Tw,"[").replace(Ow,"]")}function Pw(t){return ou(t).replace(Jh,"{").replace(Xh,"}").replace(Yh,"^")}function Ll(t){return ou(t).replace(Zh,"%2B").replace($w,"+").replace(Gh,"%23").replace(Cw,"%26").replace(Rw,"`").replace(Jh,"{").replace(Xh,"}").replace(Yh,"^")}function Lw(t){return Ll(t).replace(Ew,"%3D")}function Mw(t){return ou(t).replace(Gh,"%23").replace(Aw,"%3F")}function Bw(t){return t==null?"":Mw(t).replace(Sw,"%2F")}function ci(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Dw=/\/$/,zw=t=>t.replace(Dw,"");function ml(t,n,r="/"){let i,o={},l="",u="";const f=n.indexOf("#");let d=n.indexOf("?");return f<d&&f>=0&&(d=-1),d>-1&&(i=n.slice(0,d),l=n.slice(d+1,f>-1?f:n.length),o=t(l)),f>-1&&(i=i||n.slice(0,f),u=n.slice(f,n.length)),i=jw(i??n,r),{fullPath:i+(l&&"?")+l+u,path:i,query:o,hash:ci(u)}}function Nw(t,n){const r=n.query?t(n.query):"";return n.path+(r&&"?")+r+(n.hash||"")}function xd(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function Uw(t,n,r){const i=n.matched.length-1,o=r.matched.length-1;return i>-1&&i===o&&ks(n.matched[i],r.matched[o])&&Qh(n.params,r.params)&&t(n.query)===t(r.query)&&n.hash===r.hash}function ks(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function Qh(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(!Fw(t[r],n[r]))return!1;return!0}function Fw(t,n){return Pn(t)?wd(t,n):Pn(n)?wd(n,t):t===n}function wd(t,n){return Pn(n)?t.length===n.length&&t.every((r,i)=>r===n[i]):t.length===1&&t[0]===n}function jw(t,n){if(t.startsWith("/"))return t;if(!t)return n;const r=n.split("/"),i=t.split("/"),o=i[i.length-1];(o===".."||o===".")&&i.push("");let l=r.length-1,u,f;for(u=0;u<i.length;u++)if(f=i[u],f!==".")if(f==="..")l>1&&l--;else break;return r.slice(0,l).join("/")+"/"+i.slice(u).join("/")}const wr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var fi;(function(t){t.pop="pop",t.push="push"})(fi||(fi={}));var ri;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ri||(ri={}));function Ww(t){if(!t)if(ps){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),zw(t)}const qw=/^[^#]+#/;function Hw(t,n){return t.replace(qw,"#")+n}function Vw(t,n){const r=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:n.behavior,left:i.left-r.left-(n.left||0),top:i.top-r.top-(n.top||0)}}const Fo=()=>({left:window.scrollX,top:window.scrollY});function Kw(t){let n;if("el"in t){const r=t.el,i=typeof r=="string"&&r.startsWith("#"),o=typeof r=="string"?i?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!o)return;n=Vw(o,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function kd(t,n){return(history.state?history.state.position-n:-1)+t}const Ml=new Map;function Gw(t,n){Ml.set(t,n)}function Zw(t){const n=Ml.get(t);return Ml.delete(t),n}let Yw=()=>location.protocol+"//"+location.host;function tp(t,n){const{pathname:r,search:i,hash:o}=n,l=t.indexOf("#");if(l>-1){let f=o.includes(t.slice(l))?t.slice(l).length:1,d=o.slice(f);return d[0]!=="/"&&(d="/"+d),xd(d,"")}return xd(r,t)+i+o}function Jw(t,n,r,i){let o=[],l=[],u=null;const f=({state:b})=>{const v=tp(t,location),C=r.value,x=n.value;let T=0;if(b){if(r.value=v,n.value=b,u&&u===C){u=null;return}T=x?b.position-x.position:0}else i(v);o.forEach(A=>{A(r.value,C,{delta:T,type:fi.pop,direction:T?T>0?ri.forward:ri.back:ri.unknown})})};function d(){u=r.value}function y(b){o.push(b);const v=()=>{const C=o.indexOf(b);C>-1&&o.splice(C,1)};return l.push(v),v}function _(){const{history:b}=window;b.state&&b.replaceState(oe({},b.state,{scroll:Fo()}),"")}function m(){for(const b of l)b();l=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",_)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",_,{passive:!0}),{pauseListeners:d,listen:y,destroy:m}}function Cd(t,n,r,i=!1,o=!1){return{back:t,current:n,forward:r,replaced:i,position:window.history.length,scroll:o?Fo():null}}function Xw(t){const{history:n,location:r}=window,i={value:tp(t,r)},o={value:n.state};o.value||l(i.value,{back:null,current:i.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function l(d,y,_){const m=t.indexOf("#"),b=m>-1?(r.host&&document.querySelector("base")?t:t.slice(m))+d:Yw()+t+d;try{n[_?"replaceState":"pushState"](y,"",b),o.value=y}catch(v){console.error(v),r[_?"replace":"assign"](b)}}function u(d,y){const _=oe({},n.state,Cd(o.value.back,d,o.value.forward,!0),y,{position:o.value.position});l(d,_,!0),i.value=d}function f(d,y){const _=oe({},o.value,n.state,{forward:d,scroll:Fo()});l(_.current,_,!0);const m=oe({},Cd(i.value,d,null),{position:_.position+1},y);l(d,m,!1),i.value=d}return{location:i,state:o,push:f,replace:u}}function Qw(t){t=Ww(t);const n=Xw(t),r=Jw(t,n.state,n.location,n.replace);function i(l,u=!0){u||r.pauseListeners(),history.go(l)}const o=oe({location:"",base:t,go:i,createHref:Hw.bind(null,t)},n,r);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>n.state.value}),o}function t2(t){return typeof t=="string"||t&&typeof t=="object"}function ep(t){return typeof t=="string"||typeof t=="symbol"}const np=Symbol("");var Sd;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Sd||(Sd={}));function Cs(t,n){return oe(new Error,{type:t,[np]:!0},n)}function nr(t,n){return t instanceof Error&&np in t&&(n==null||!!(t.type&n))}const Ed="[^/]+?",e2={sensitive:!1,strict:!1,start:!0,end:!0},n2=/[.+*?^${}()[\]/\\]/g;function r2(t,n){const r=oe({},e2,n),i=[];let o=r.start?"^":"";const l=[];for(const y of t){const _=y.length?[]:[90];r.strict&&!y.length&&(o+="/");for(let m=0;m<y.length;m++){const b=y[m];let v=40+(r.sensitive?.25:0);if(b.type===0)m||(o+="/"),o+=b.value.replace(n2,"\\$&"),v+=40;else if(b.type===1){const{value:C,repeatable:x,optional:T,regexp:A}=b;l.push({name:C,repeatable:x,optional:T});const L=A||Ed;if(L!==Ed){v+=10;try{new RegExp(`(${L})`)}catch(z){throw new Error(`Invalid custom RegExp for param "${C}" (${L}): `+z.message)}}let D=x?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;m||(D=T&&y.length<2?`(?:/${D})`:"/"+D),T&&(D+="?"),o+=D,v+=20,T&&(v+=-8),x&&(v+=-20),L===".*"&&(v+=-50)}_.push(v)}i.push(_)}if(r.strict&&r.end){const y=i.length-1;i[y][i[y].length-1]+=.7000000000000001}r.strict||(o+="/?"),r.end?o+="$":r.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const u=new RegExp(o,r.sensitive?"":"i");function f(y){const _=y.match(u),m={};if(!_)return null;for(let b=1;b<_.length;b++){const v=_[b]||"",C=l[b-1];m[C.name]=v&&C.repeatable?v.split("/"):v}return m}function d(y){let _="",m=!1;for(const b of t){(!m||!_.endsWith("/"))&&(_+="/"),m=!1;for(const v of b)if(v.type===0)_+=v.value;else if(v.type===1){const{value:C,repeatable:x,optional:T}=v,A=C in y?y[C]:"";if(Pn(A)&&!x)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const L=Pn(A)?A.join("/"):A;if(!L)if(T)b.length<2&&(_.endsWith("/")?_=_.slice(0,-1):m=!0);else throw new Error(`Missing required param "${C}"`);_+=L}}return _||"/"}return{re:u,score:i,keys:l,parse:f,stringify:d}}function s2(t,n){let r=0;for(;r<t.length&&r<n.length;){const i=n[r]-t[r];if(i)return i;r++}return t.length<n.length?t.length===1&&t[0]===80?-1:1:t.length>n.length?n.length===1&&n[0]===80?1:-1:0}function rp(t,n){let r=0;const i=t.score,o=n.score;for(;r<i.length&&r<o.length;){const l=s2(i[r],o[r]);if(l)return l;r++}if(Math.abs(o.length-i.length)===1){if(Ad(i))return 1;if(Ad(o))return-1}return o.length-i.length}function Ad(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const i2={type:0,value:""},o2=/[a-zA-Z0-9_]/;function a2(t){if(!t)return[[]];if(t==="/")return[[i2]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(v){throw new Error(`ERR (${r})/"${y}": ${v}`)}let r=0,i=r;const o=[];let l;function u(){l&&o.push(l),l=[]}let f=0,d,y="",_="";function m(){y&&(r===0?l.push({type:0,value:y}):r===1||r===2||r===3?(l.length>1&&(d==="*"||d==="+")&&n(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:y,regexp:_,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):n("Invalid state to consume buffer"),y="")}function b(){y+=d}for(;f<t.length;){if(d=t[f++],d==="\\"&&r!==2){i=r,r=4;continue}switch(r){case 0:d==="/"?(y&&m(),u()):d===":"?(m(),r=1):b();break;case 4:b(),r=i;break;case 1:d==="("?r=2:o2.test(d)?b():(m(),r=0,d!=="*"&&d!=="?"&&d!=="+"&&f--);break;case 2:d===")"?_[_.length-1]=="\\"?_=_.slice(0,-1)+d:r=3:_+=d;break;case 3:m(),r=0,d!=="*"&&d!=="?"&&d!=="+"&&f--,_="";break;default:n("Unknown state");break}}return r===2&&n(`Unfinished custom RegExp for param "${y}"`),m(),u(),o}function l2(t,n,r){const i=r2(a2(t.path),r),o=oe(i,{record:t,parent:n,children:[],alias:[]});return n&&!o.record.aliasOf==!n.record.aliasOf&&n.children.push(o),o}function u2(t,n){const r=[],i=new Map;n=Id({strict:!1,end:!0,sensitive:!1},n);function o(m){return i.get(m)}function l(m,b,v){const C=!v,x=Od(m);x.aliasOf=v&&v.record;const T=Id(n,m),A=[x];if("alias"in m){const z=typeof m.alias=="string"?[m.alias]:m.alias;for(const B of z)A.push(Od(oe({},x,{components:v?v.record.components:x.components,path:B,aliasOf:v?v.record:x})))}let L,D;for(const z of A){const{path:B}=z;if(b&&B[0]!=="/"){const Y=b.record.path,V=Y[Y.length-1]==="/"?"":"/";z.path=b.record.path+(B&&V+B)}if(L=l2(z,b,T),v?v.alias.push(L):(D=D||L,D!==L&&D.alias.push(L),C&&m.name&&!Rd(L)&&u(m.name)),sp(L)&&d(L),x.children){const Y=x.children;for(let V=0;V<Y.length;V++)l(Y[V],L,v&&v.children[V])}v=v||L}return D?()=>{u(D)}:ni}function u(m){if(ep(m)){const b=i.get(m);b&&(i.delete(m),r.splice(r.indexOf(b),1),b.children.forEach(u),b.alias.forEach(u))}else{const b=r.indexOf(m);b>-1&&(r.splice(b,1),m.record.name&&i.delete(m.record.name),m.children.forEach(u),m.alias.forEach(u))}}function f(){return r}function d(m){const b=d2(m,r);r.splice(b,0,m),m.record.name&&!Rd(m)&&i.set(m.record.name,m)}function y(m,b){let v,C={},x,T;if("name"in m&&m.name){if(v=i.get(m.name),!v)throw Cs(1,{location:m});T=v.record.name,C=oe(Td(b.params,v.keys.filter(D=>!D.optional).concat(v.parent?v.parent.keys.filter(D=>D.optional):[]).map(D=>D.name)),m.params&&Td(m.params,v.keys.map(D=>D.name))),x=v.stringify(C)}else if(m.path!=null)x=m.path,v=r.find(D=>D.re.test(x)),v&&(C=v.parse(x),T=v.record.name);else{if(v=b.name?i.get(b.name):r.find(D=>D.re.test(b.path)),!v)throw Cs(1,{location:m,currentLocation:b});T=v.record.name,C=oe({},b.params,m.params),x=v.stringify(C)}const A=[];let L=v;for(;L;)A.unshift(L.record),L=L.parent;return{name:T,path:x,params:C,matched:A,meta:f2(A)}}t.forEach(m=>l(m));function _(){r.length=0,i.clear()}return{addRoute:l,resolve:y,removeRoute:u,clearRoutes:_,getRoutes:f,getRecordMatcher:o}}function Td(t,n){const r={};for(const i of n)i in t&&(r[i]=t[i]);return r}function Od(t){const n={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:c2(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function c2(t){const n={},r=t.props||!1;if("component"in t)n.default=r;else for(const i in t.components)n[i]=typeof r=="object"?r[i]:r;return n}function Rd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function f2(t){return t.reduce((n,r)=>oe(n,r.meta),{})}function Id(t,n){const r={};for(const i in t)r[i]=i in n?n[i]:t[i];return r}function d2(t,n){let r=0,i=n.length;for(;r!==i;){const l=r+i>>1;rp(t,n[l])<0?i=l:r=l+1}const o=h2(t);return o&&(i=n.lastIndexOf(o,i-1)),i}function h2(t){let n=t;for(;n=n.parent;)if(sp(n)&&rp(t,n)===0)return n}function sp({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function p2(t){const n={};if(t===""||t==="?")return n;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<i.length;++o){const l=i[o].replace(Zh," "),u=l.indexOf("="),f=ci(u<0?l:l.slice(0,u)),d=u<0?null:ci(l.slice(u+1));if(f in n){let y=n[f];Pn(y)||(y=n[f]=[y]),y.push(d)}else n[f]=d}return n}function $d(t){let n="";for(let r in t){const i=t[r];if(r=Lw(r),i==null){i!==void 0&&(n+=(n.length?"&":"")+r);continue}(Pn(i)?i.map(l=>l&&Ll(l)):[i&&Ll(i)]).forEach(l=>{l!==void 0&&(n+=(n.length?"&":"")+r,l!=null&&(n+="="+l))})}return n}function g2(t){const n={};for(const r in t){const i=t[r];i!==void 0&&(n[r]=Pn(i)?i.map(o=>o==null?null:""+o):i==null?i:""+i)}return n}const m2=Symbol(""),Pd=Symbol(""),jo=Symbol(""),au=Symbol(""),Bl=Symbol("");function Hs(){let t=[];function n(i){return t.push(i),()=>{const o=t.indexOf(i);o>-1&&t.splice(o,1)}}function r(){t=[]}return{add:n,list:()=>t.slice(),reset:r}}function Sr(t,n,r,i,o,l=u=>u()){const u=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise((f,d)=>{const y=b=>{b===!1?d(Cs(4,{from:r,to:n})):b instanceof Error?d(b):t2(b)?d(Cs(2,{from:n,to:b})):(u&&i.enterCallbacks[o]===u&&typeof b=="function"&&u.push(b),f())},_=l(()=>t.call(i&&i.instances[o],n,r,y));let m=Promise.resolve(_);t.length<3&&(m=m.then(y)),m.catch(b=>d(b))})}function vl(t,n,r,i,o=l=>l()){const l=[];for(const u of t)for(const f in u.components){let d=u.components[f];if(!(n!=="beforeRouteEnter"&&!u.instances[f]))if(Kh(d)){const _=(d.__vccOpts||d)[n];_&&l.push(Sr(_,r,i,u,f,o))}else{let y=d();l.push(()=>y.then(_=>{if(!_)throw new Error(`Couldn't resolve component "${f}" at "${u.path}"`);const m=kw(_)?_.default:_;u.mods[f]=_,u.components[f]=m;const v=(m.__vccOpts||m)[n];return v&&Sr(v,r,i,u,f,o)()}))}}return l}function Ld(t){const n=$n(jo),r=$n(au),i=pe(()=>{const d=_s(t.to);return n.resolve(d)}),o=pe(()=>{const{matched:d}=i.value,{length:y}=d,_=d[y-1],m=r.matched;if(!_||!m.length)return-1;const b=m.findIndex(ks.bind(null,_));if(b>-1)return b;const v=Md(d[y-2]);return y>1&&Md(_)===v&&m[m.length-1].path!==v?m.findIndex(ks.bind(null,d[y-2])):b}),l=pe(()=>o.value>-1&&x2(r.params,i.value.params)),u=pe(()=>o.value>-1&&o.value===r.matched.length-1&&Qh(r.params,i.value.params));function f(d={}){if(b2(d)){const y=n[_s(t.replace)?"replace":"push"](_s(t.to)).catch(ni);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>y),y}return Promise.resolve()}return{route:i,href:pe(()=>i.value.href),isActive:l,isExactActive:u,navigate:f}}function v2(t){return t.length===1?t[0]:t}const _2=yh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ld,setup(t,{slots:n}){const r=Ze(Ld(t)),{options:i}=$n(jo),o=pe(()=>({[Bd(t.activeClass,i.linkActiveClass,"router-link-active")]:r.isActive,[Bd(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const l=n.default&&v2(n.default(r));return t.custom?l:qh("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:o.value},l)}}}),y2=_2;function b2(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function x2(t,n){for(const r in n){const i=n[r],o=t[r];if(typeof i=="string"){if(i!==o)return!1}else if(!Pn(o)||o.length!==i.length||i.some((l,u)=>l!==o[u]))return!1}return!0}function Md(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Bd=(t,n,r)=>t??n??r,w2=yh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:r}){const i=$n(Bl),o=pe(()=>t.route||i.value),l=$n(Pd,0),u=pe(()=>{let y=_s(l);const{matched:_}=o.value;let m;for(;(m=_[y])&&!m.components;)y++;return y}),f=pe(()=>o.value.matched[u.value]);fo(Pd,pe(()=>u.value+1)),fo(m2,f),fo(Bl,o);const d=ft();return Ar(()=>[d.value,f.value,t.name],([y,_,m],[b,v,C])=>{_&&(_.instances[m]=y,v&&v!==_&&y&&y===b&&(_.leaveGuards.size||(_.leaveGuards=v.leaveGuards),_.updateGuards.size||(_.updateGuards=v.updateGuards))),y&&_&&(!v||!ks(_,v)||!b)&&(_.enterCallbacks[m]||[]).forEach(x=>x(y))},{flush:"post"}),()=>{const y=o.value,_=t.name,m=f.value,b=m&&m.components[_];if(!b)return Dd(r.default,{Component:b,route:y});const v=m.props[_],C=v?v===!0?y.params:typeof v=="function"?v(y):v:null,T=qh(b,oe({},C,n,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(m.instances[_]=null)},ref:d}));return Dd(r.default,{Component:T,route:y})||T}}});function Dd(t,n){if(!t)return null;const r=t(n);return r.length===1?r[0]:r}const k2=w2;function C2(t){const n=u2(t.routes,t),r=t.parseQuery||p2,i=t.stringifyQuery||$d,o=t.history,l=Hs(),u=Hs(),f=Hs(),d=Tb(wr);let y=wr;ps&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=gl.bind(null,J=>""+J),m=gl.bind(null,Bw),b=gl.bind(null,ci);function v(J,ut){let mt,kt;return ep(J)?(mt=n.getRecordMatcher(J),kt=ut):kt=J,n.addRoute(kt,mt)}function C(J){const ut=n.getRecordMatcher(J);ut&&n.removeRoute(ut)}function x(){return n.getRoutes().map(J=>J.record)}function T(J){return!!n.getRecordMatcher(J)}function A(J,ut){if(ut=oe({},ut||d.value),typeof J=="string"){const h=ml(r,J,ut.path),F=n.resolve({path:h.path},ut),j=o.createHref(h.fullPath);return oe(h,F,{params:b(F.params),hash:ci(h.hash),redirectedFrom:void 0,href:j})}let mt;if(J.path!=null)mt=oe({},J,{path:ml(r,J.path,ut.path).path});else{const h=oe({},J.params);for(const F in h)h[F]==null&&delete h[F];mt=oe({},J,{params:m(h)}),ut.params=m(ut.params)}const kt=n.resolve(mt,ut),dt=J.hash||"";kt.params=_(b(kt.params));const S=Nw(i,oe({},J,{hash:Pw(dt),path:kt.path})),M=o.createHref(S);return oe({fullPath:S,hash:dt,query:i===$d?g2(J.query):J.query||{}},kt,{redirectedFrom:void 0,href:M})}function L(J){return typeof J=="string"?ml(r,J,d.value.path):oe({},J)}function D(J,ut){if(y!==J)return Cs(8,{from:ut,to:J})}function z(J){return V(J)}function B(J){return z(oe(L(J),{replace:!0}))}function Y(J){const ut=J.matched[J.matched.length-1];if(ut&&ut.redirect){const{redirect:mt}=ut;let kt=typeof mt=="function"?mt(J):mt;return typeof kt=="string"&&(kt=kt.includes("?")||kt.includes("#")?kt=L(kt):{path:kt},kt.params={}),oe({query:J.query,hash:J.hash,params:kt.path!=null?{}:J.params},kt)}}function V(J,ut){const mt=y=A(J),kt=d.value,dt=J.state,S=J.force,M=J.replace===!0,h=Y(mt);if(h)return V(oe(L(h),{state:typeof h=="object"?oe({},dt,h.state):dt,force:S,replace:M}),ut||mt);const F=mt;F.redirectedFrom=ut;let j;return!S&&Uw(i,kt,mt)&&(j=Cs(16,{to:F,from:kt}),it(kt,kt,!0,!1)),(j?Promise.resolve(j):I(F,kt)).catch(E=>nr(E)?nr(E,2)?E:$t(E):At(E,F,kt)).then(E=>{if(E){if(nr(E,2))return V(oe({replace:M},L(E.to),{state:typeof E.to=="object"?oe({},dt,E.to.state):dt,force:S}),ut||F)}else E=k(F,kt,!0,M,dt);return K(F,kt,E),E})}function tt(J,ut){const mt=D(J,ut);return mt?Promise.reject(mt):Promise.resolve()}function N(J){const ut=Tt.values().next().value;return ut&&typeof ut.runWithContext=="function"?ut.runWithContext(J):J()}function I(J,ut){let mt;const[kt,dt,S]=S2(J,ut);mt=vl(kt.reverse(),"beforeRouteLeave",J,ut);for(const h of kt)h.leaveGuards.forEach(F=>{mt.push(Sr(F,J,ut))});const M=tt.bind(null,J,ut);return mt.push(M),gt(mt).then(()=>{mt=[];for(const h of l.list())mt.push(Sr(h,J,ut));return mt.push(M),gt(mt)}).then(()=>{mt=vl(dt,"beforeRouteUpdate",J,ut);for(const h of dt)h.updateGuards.forEach(F=>{mt.push(Sr(F,J,ut))});return mt.push(M),gt(mt)}).then(()=>{mt=[];for(const h of S)if(h.beforeEnter)if(Pn(h.beforeEnter))for(const F of h.beforeEnter)mt.push(Sr(F,J,ut));else mt.push(Sr(h.beforeEnter,J,ut));return mt.push(M),gt(mt)}).then(()=>(J.matched.forEach(h=>h.enterCallbacks={}),mt=vl(S,"beforeRouteEnter",J,ut,N),mt.push(M),gt(mt))).then(()=>{mt=[];for(const h of u.list())mt.push(Sr(h,J,ut));return mt.push(M),gt(mt)}).catch(h=>nr(h,8)?h:Promise.reject(h))}function K(J,ut,mt){f.list().forEach(kt=>N(()=>kt(J,ut,mt)))}function k(J,ut,mt,kt,dt){const S=D(J,ut);if(S)return S;const M=ut===wr,h=ps?history.state:{};mt&&(kt||M?o.replace(J.fullPath,oe({scroll:M&&h&&h.scroll},dt)):o.push(J.fullPath,dt)),d.value=J,it(J,ut,mt,M),$t()}let $;function g(){$||($=o.listen((J,ut,mt)=>{if(!at.listening)return;const kt=A(J),dt=Y(kt);if(dt){V(oe(dt,{replace:!0,force:!0}),kt).catch(ni);return}y=kt;const S=d.value;ps&&Gw(kd(S.fullPath,mt.delta),Fo()),I(kt,S).catch(M=>nr(M,12)?M:nr(M,2)?(V(oe(L(M.to),{force:!0}),kt).then(h=>{nr(h,20)&&!mt.delta&&mt.type===fi.pop&&o.go(-1,!1)}).catch(ni),Promise.reject()):(mt.delta&&o.go(-mt.delta,!1),At(M,kt,S))).then(M=>{M=M||k(kt,S,!1),M&&(mt.delta&&!nr(M,8)?o.go(-mt.delta,!1):mt.type===fi.pop&&nr(M,20)&&o.go(-1,!1)),K(kt,S,M)}).catch(ni)}))}let rt=Hs(),Ct=Hs(),pt;function At(J,ut,mt){$t(J);const kt=Ct.list();return kt.length?kt.forEach(dt=>dt(J,ut,mt)):console.error(J),Promise.reject(J)}function xt(){return pt&&d.value!==wr?Promise.resolve():new Promise((J,ut)=>{rt.add([J,ut])})}function $t(J){return pt||(pt=!J,g(),rt.list().forEach(([ut,mt])=>J?mt(J):ut()),rt.reset()),J}function it(J,ut,mt,kt){const{scrollBehavior:dt}=t;if(!ps||!dt)return Promise.resolve();const S=!mt&&Zw(kd(J.fullPath,0))||(kt||!mt)&&history.state&&history.state.scroll||null;return pi().then(()=>dt(J,ut,S)).then(M=>M&&Kw(M)).catch(M=>At(M,J,ut))}const st=J=>o.go(J);let Pt;const Tt=new Set,at={currentRoute:d,listening:!0,addRoute:v,removeRoute:C,clearRoutes:n.clearRoutes,hasRoute:T,getRoutes:x,resolve:A,options:t,push:z,replace:B,go:st,back:()=>st(-1),forward:()=>st(1),beforeEach:l.add,beforeResolve:u.add,afterEach:f.add,onError:Ct.add,isReady:xt,install(J){const ut=this;J.component("RouterLink",y2),J.component("RouterView",k2),J.config.globalProperties.$router=ut,Object.defineProperty(J.config.globalProperties,"$route",{enumerable:!0,get:()=>_s(d)}),ps&&!Pt&&d.value===wr&&(Pt=!0,z(o.location).catch(dt=>{}));const mt={};for(const dt in wr)Object.defineProperty(mt,dt,{get:()=>d.value[dt],enumerable:!0});J.provide(jo,ut),J.provide(au,fh(mt)),J.provide(Bl,d);const kt=J.unmount;Tt.add(J),J.unmount=function(){Tt.delete(J),Tt.size<1&&(y=wr,$&&$(),$=null,d.value=wr,Pt=!1,pt=!1),kt()}}};function gt(J){return J.reduce((ut,mt)=>ut.then(()=>N(mt)),Promise.resolve())}return at}function S2(t,n){const r=[],i=[],o=[],l=Math.max(n.matched.length,t.matched.length);for(let u=0;u<l;u++){const f=n.matched[u];f&&(t.matched.find(y=>ks(y,f))?i.push(f):r.push(f));const d=t.matched[u];d&&(n.matched.find(y=>ks(y,d))||o.push(d))}return[r,i,o]}function Wo(){return $n(jo)}function lu(t){return $n(au)}const qt=(t,n={})=>{const r=localStorage.getItem("studentToken")||localStorage.getItem("teacherToken"),i={...n.headers};r&&(i.Authorization=`Bearer ${r}`),n.body instanceof FormData||(i["Content-Type"]="application/json");const o={...n,headers:i};return fetch(t,o)},uu=(t,n)=>{const r=t.__vccOpts||t;for(const[i,o]of n)r[i]=o;return r},E2={key:0,class:"h-screen w-screen flex flex-col items-center justify-center bg-slate-100 text-slate-600"},A2={key:1,class:"flex h-screen bg-slate-50 font-sans"},T2={class:"w-60 bg-white border-r border-slate-200 flex flex-col"},O2={class:"p-6 border-b border-slate-200"},R2={class:"text-base text-slate-500 mt-2"},I2={class:"flex-grow p-4 space-y-2"},$2={class:"flex-1 overflow-y-auto p-10"},P2={key:2},L2={__name:"App",setup(t){const n=lu(),r=Wo(),i=ft(!1),o=ft({}),l=ft(!1),u=ft({}),f=ft(!0),d=async()=>{f.value=!0;const m=localStorage.getItem("teacherToken"),b=localStorage.getItem("studentToken");if(m)try{const v=await qt(`/api/auth/teacher/verify?_=${new Date().getTime()}`);if(v.ok){const C=await v.json();i.value=!0,o.value=C.teacher,localStorage.setItem("teacherInfo",JSON.stringify(C.teacher))}else throw new Error("Teacher token invalid")}catch(v){console.error("驗證教師失敗:",v),y(),r.push("/auth")}else if(b)try{const v=await qt(`/api/auth/student/verify?_=${new Date().getTime()}`);if(v.ok){const C=await v.json();l.value=!0,u.value=C.student,localStorage.setItem("studentInfo",JSON.stringify(C.student))}else throw new Error("Student token invalid")}catch(v){console.error("驗證學生失敗:",v),y(),r.push("/auth")}else y(),n.name!=="auth"&&(n.meta.requiresAuth||n.meta.requiresStudentAuth)&&r.push("/auth");f.value=!1},y=()=>{localStorage.removeItem("teacherToken"),localStorage.removeItem("teacherInfo"),localStorage.removeItem("studentToken"),localStorage.removeItem("studentInfo"),i.value=!1,o.value={},l.value=!1,u.value={}},_=()=>{y(),window.location.href="/auth"};return Ye(()=>{d(),window.addEventListener("storage",d)}),Zr(()=>{window.removeEventListener("storage",d)}),(m,b)=>{const v=So("router-link"),C=So("router-view");return f.value?(W(),H("div",E2,[...b[0]||(b[0]=[c("svg",{class:"animate-spin h-12 w-12 text-sky-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c("p",{class:"mt-4 text-lg font-medium"},"正在驗證您的身分...",-1)])])):i.value?(W(),H("div",A2,[c("aside",T2,[c("div",O2,[b[1]||(b[1]=c("h1",{class:"text-3xl font-bold text-sky-600"},"智慧班級",-1)),c("p",R2,"歡迎，"+lt(o.value.name)+" 老師",1)]),c("nav",I2,[fe(v,{to:"/dashboard",class:"nav-link"},{default:cn(()=>[...b[2]||(b[2]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2a4 4 0 00-4-4H3V9h2a4 4 0 004-4V3l4 4-4 4zm11-1V9l-4-4 4-4v2a4 4 0 014 4h2v2h-2a4 4 0 01-4 4z"})],-1),c("span",{class:"text-lg"},"課堂儀表板",-1)])]),_:1}),fe(v,{to:"/seating-chart",class:"nav-link"},{default:cn(()=>[...b[3]||(b[3]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"})],-1),c("span",{class:"text-lg"},"座位表",-1)])]),_:1}),fe(v,{to:"/students",class:"nav-link"},{default:cn(()=>[...b[4]||(b[4]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),c("span",{class:"text-lg"},"學生管理",-1)])]),_:1}),fe(v,{to:"/grades",class:"nav-link"},{default:cn(()=>[...b[5]||(b[5]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),c("span",{class:"text-lg"},"成績管理",-1)])]),_:1}),fe(v,{to:"/assignments",class:"nav-link"},{default:cn(()=>[...b[6]||(b[6]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5V3a2 2 0 012-2h2a2 2 0 012 2v2"})],-1),c("span",{class:"text-lg"},"作業管理",-1)])]),_:1}),fe(v,{to:"/pingpong-teacher",class:"nav-link"},{default:cn(()=>[...b[7]||(b[7]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),c("span",{class:"text-lg"},"PingPong",-1)])]),_:1}),fe(v,{to:"/quiz",class:"nav-link"},{default:cn(()=>[...b[8]||(b[8]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1),c("span",{class:"text-lg"},"搶答競賽",-1)])]),_:1}),fe(v,{to:"/",class:"nav-link"},{default:cn(()=>[...b[9]||(b[9]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),c("span",{class:"text-lg"},"首頁",-1)])]),_:1})]),c("div",{class:"p-6 mt-auto"},[c("button",{onClick:_,class:"w-full flex items-center justify-center gap-3 p-4 rounded-xl text-red-600 bg-red-100 hover:bg-red-200 transition-colors font-semibold text-lg"},[...b[10]||(b[10]=[c("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),c("span",null,"登出",-1)])])])]),c("main",$2,[fe(C)])])):(W(),H("div",P2,[fe(C)]))}}},M2=uu(L2,[["__scopeId","data-v-7762fe02"]]),B2={class:"flex justify-between items-start mb-8"},D2={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},z2={class:"card p-8 flex flex-col items-start hover:shadow-xl transition-shadow"},N2={class:"card p-8 flex flex-col items-start hover:shadow-xl transition-shadow"},U2={class:"card p-8 flex flex-col items-start hover:shadow-xl transition-shadow"},F2=["src"],j2={class:"mt-4 text-xl font-mono bg-gray-100 p-3 rounded-md"},W2={__name:"HomeView",setup(t){const n=ft(""),r=ft(!1),i=pe(()=>n.value?`https://api.qrserver.com/v1/create-qr-code/?size=512x512&data=${encodeURIComponent(n.value)}`:"");return Ye(async()=>{try{const l=await(await qt("/api/server-info")).json();n.value=l.url}catch(o){console.error("無法獲取伺服器資訊:",o)}}),(o,l)=>{const u=So("router-link");return W(),H("div",null,[c("div",B2,[l[4]||(l[4]=c("div",null,[c("h1",{class:"text-4xl font-bold text-slate-800 mb-2"},"歡迎使用智慧班級系統"),c("p",{class:"text-lg text-slate-600"},"您可以從左側導覽列選擇功能，或透過下方快速入口開始。")],-1)),c("button",{onClick:l[0]||(l[0]=f=>r.value=!0),class:"btn btn-secondary flex items-center gap-2"},[...l[3]||(l[3]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v1m6 11h2m-6.5 6.5v1M4.5 12.5h-1M12 20.5v-1m7.5-6.5h1M4 12V6a2 2 0 012-2h6v6h6v6a2 2 0 01-2 2H6a2 2 0 01-2-2v-2m-2-4h2m18 0h2M12 7.5h6.5M7.5 12v6.5m7.5-11h2"})],-1),ee(" 顯示連線 QR Code ",-1)])])]),c("div",D2,[c("div",z2,[l[6]||(l[6]=lr('<div class="bg-sky-100 p-4 rounded-xl mb-4"><svg class="w-10 h-10 text-sky-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2a4 4 0 00-4-4H3V9h2a4 4 0 004-4V3l4 4-4 4zm11-1V9l-4-4 4-4v2a4 4 0 014 4h2v2h-2a4 4 0 01-4 4z"></path></svg></div><h2 class="text-2xl font-bold text-slate-800">課堂儀表板</h2><p class="text-base text-slate-600 mt-2 flex-grow">即時掌握學生出缺席、課堂表現，並進行隨機抽籤。</p>',3)),fe(u,{to:"/dashboard",class:"btn btn-primary mt-6 w-full text-center"},{default:cn(()=>[...l[5]||(l[5]=[ee("前往儀表板",-1)])]),_:1})]),c("div",N2,[l[8]||(l[8]=lr('<div class="bg-teal-100 p-4 rounded-xl mb-4"><svg class="w-10 h-10 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><h2 class="text-2xl font-bold text-slate-800">學生管理</h2><p class="text-base text-slate-600 mt-2 flex-grow">管理班級學生名單、帳號、密碼，並支援批次匯入。</p>',3)),fe(u,{to:"/students",class:"btn bg-teal-500 hover:bg-teal-600 mt-6 w-full text-center"},{default:cn(()=>[...l[7]||(l[7]=[ee("管理學生",-1)])]),_:1})]),c("div",U2,[l[10]||(l[10]=lr('<div class="bg-amber-100 p-4 rounded-xl mb-4"><svg class="w-10 h-10 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h2 class="text-2xl font-bold text-slate-800">成績管理</h2><p class="text-base text-slate-600 mt-2 flex-grow">登錄平時測驗、定期評量成績，並查看課堂表現總分。</p>',3)),fe(u,{to:"/grades",class:"btn bg-amber-500 hover:bg-amber-600 mt-6 w-full text-center"},{default:cn(()=>[...l[9]||(l[9]=[ee("登錄成績",-1)])]),_:1})])]),r.value?(W(),H("div",{key:0,onClick:l[2]||(l[2]=f=>r.value=!1),class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4"},[c("div",{onClick:l[1]||(l[1]=De(()=>{},["stop"])),class:"bg-white p-8 rounded-2xl text-center"},[l[11]||(l[11]=c("h3",{class:"text-2xl font-bold mb-4"},"學生連線網址",-1)),c("img",{src:i.value,alt:"Connection QR Code",class:"w-80 h-80 md:w-96 md:h-96 lg:w-[500px] lg:h-[500px] mx-auto border-8 border-gray-200 rounded-lg"},null,8,F2),c("p",j2,lt(n.value),1),l[12]||(l[12]=c("p",{class:"mt-2 text-gray-500"},"請學生使用手機掃描，或在瀏覽器輸入上方網址",-1))])])):Et("",!0)])}}},q2={class:"card p-8"},H2={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},V2={class:"flex gap-4 flex-wrap"},K2={class:"w-full md:w-1/3"},G2={key:0,class:"text-red-500 mb-4"},Z2={key:1,class:"text-green-500 mb-4"},Y2={class:"overflow-x-auto"},J2={class:"min-w-full divide-y divide-gray-200"},X2={class:"bg-slate-50"},Q2={key:0},tk={key:0},ek={key:0},nk={key:0},rk={key:0},sk={class:"bg-white divide-y divide-gray-200"},ik={key:0},ok={key:1},ak={class:"table-cell"},lk={class:"table-cell font-medium"},uk={class:"table-cell"},ck={class:"table-cell"},fk={class:"table-cell"},dk={class:"table-cell text-right"},hk=["onClick"],pk=["onClick"],gk={key:0,class:"fixed z-10 inset-0 overflow-y-auto"},mk={class:"flex items-center justify-center min-h-screen"},vk={class:"bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all max-w-lg w-full"},_k={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},yk={class:"text-lg leading-6 font-medium text-gray-900"},bk={class:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4"},xk={class:"block text-sm font-medium text-gray-700"},wk=["required"],kk={class:"sm:col-span-2"},Ck={key:0,class:"text-red-500 text-sm sm:col-span-2"},Sk={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ek={__name:"StudentManagementView",setup(t){const n=ft([]),r=ft(!1),i=ft(null),o=ft({}),l=ft(!0),u=ft(""),f=ft(""),d=ft(""),y=ft(null),_=ft(null),m=ft(""),b=ft("seat_number"),v=ft("asc"),C=N=>N==null?"":String(N).padStart(2,"0"),x=pe(()=>{let N=n.value;if(m.value){const I=m.value.toLowerCase();N=N.filter(K=>{var k,$,g;return((k=K.name)==null?void 0:k.toLowerCase().includes(I))||(($=K.student_id)==null?void 0:$.toLowerCase().includes(I))||((g=K.account)==null?void 0:g.toLowerCase().includes(I))})}return b.value&&N.sort((I,K)=>{let k=I[b.value],$=K[b.value];return b.value==="seat_number"&&(k=Number(k||1/0),$=Number($||1/0)),k<$?v.value==="asc"?-1:1:k>$?v.value==="asc"?1:-1:0}),N}),T=N=>{b.value===N?v.value=v.value==="asc"?"desc":"asc":(b.value=N,v.value="asc")},A=async()=>{l.value=!0,u.value="";try{const N=await qt("/api/students");if(!N.ok)throw new Error("無法讀取學生資料");n.value=await N.json()}catch(N){u.value=`錯誤: ${N.message}`}finally{l.value=!1}},L=N=>{d.value="",i.value=N,o.value=N?{...N,password:""}:{student_id:"",name:"",class:"",seat_number:"",gender:"",account:"",password:""},r.value=!0},D=async()=>{d.value="";const N=i.value?"PUT":"POST",I=i.value?`/api/students/${i.value.id}`:"/api/students",K={...o.value};i.value&&!K.password&&delete K.password;try{const k=await qt(I,{method:N,body:JSON.stringify(K)}),$=await k.json();if(!k.ok)throw new Error($.error||"儲存失敗");await A(),r.value=!1,f.value=`學生資料已成功${i.value?"更新":"新增"}！`,setTimeout(()=>f.value="",3e3)}catch(k){d.value=k.message}},z=async N=>{if(confirm("確定要刪除這位學生嗎？")){u.value="";try{const I=await qt(`/api/students/${N}`,{method:"DELETE"});if(!I.ok)throw new Error((await I.json()).error||"刪除失敗");n.value=n.value.filter(K=>K.id!==N),f.value="學生已成功刪除！",setTimeout(()=>f.value="",3e3)}catch(I){u.value=`錯誤: ${I.message}`}}},B=()=>y.value.click(),Y=async N=>{const I=N.target.files[0];if(!I)return;const K=new FormData;K.append("file",I),u.value="",f.value="正在上傳並匯入資料...";try{const k=await qt("/api/students/import",{method:"POST",body:K}),$=await k.json();if(!k.ok)throw new Error($.error||"匯入失敗");f.value=$.message||"匯入成功！",await A()}catch(k){u.value=`錯誤: ${k.message}`,f.value=""}finally{y.value.value=""}},V=()=>_.value.click(),tt=async N=>{const I=N.target.files;if(!I.length)return;const K=new FormData;for(const k of I)K.append("photos",k);u.value="",f.value=`正在上傳 ${I.length} 張照片...`;try{const k=await qt("/api/students/photos/upload",{method:"POST",body:K}),$=await k.json();if(!k.ok)throw new Error($.error||"照片上傳失敗");f.value=$.message||"照片上傳完成！",setTimeout(()=>f.value="",5e3)}catch(k){u.value=`錯誤: ${k.message}`,f.value=""}finally{_.value.value=""}};return Ye(A),(N,I)=>(W(),H("div",null,[I[31]||(I[31]=c("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"學生管理",-1)),c("div",q2,[c("div",H2,[c("div",V2,[c("button",{onClick:I[0]||(I[0]=K=>L(null)),class:"btn btn-primary"}," 新增學生 "),c("div",null,[c("input",{type:"file",ref_key:"fileInput",ref:y,onChange:Y,class:"hidden",accept:".xlsx, .xls, .csv"},null,544),c("button",{onClick:B,class:"btn btn-success"}," 從檔案匯入 ")]),c("div",null,[c("input",{type:"file",ref_key:"photoInput",ref:_,onChange:tt,multiple:"",class:"hidden",accept:"image/jpeg, image/png"},null,544),c("button",{onClick:V,class:"btn bg-orange-500 hover:bg-orange-600"}," 上傳學生照片 ")])]),c("div",K2,[Bt(c("input",{type:"text","onUpdate:modelValue":I[1]||(I[1]=K=>m.value=K),placeholder:"搜尋姓名、學號、帳號...",class:"form-input w-full text-base py-2"},null,512),[[jt,m.value]])])]),u.value?(W(),H("p",G2,lt(u.value),1)):Et("",!0),f.value?(W(),H("p",Z2,lt(f.value),1)):Et("",!0),c("div",Y2,[c("table",J2,[c("thead",X2,[c("tr",null,[c("th",{onClick:I[2]||(I[2]=K=>T("student_id")),class:"table-header cursor-pointer"},[I[16]||(I[16]=ee("學號 ",-1)),b.value==="student_id"?(W(),H("span",Q2,lt(v.value==="asc"?"▲":"▼"),1)):Et("",!0)]),c("th",{onClick:I[3]||(I[3]=K=>T("name")),class:"table-header cursor-pointer"},[I[17]||(I[17]=ee("姓名 ",-1)),b.value==="name"?(W(),H("span",tk,lt(v.value==="asc"?"▲":"▼"),1)):Et("",!0)]),c("th",{onClick:I[4]||(I[4]=K=>T("class")),class:"table-header cursor-pointer"},[I[18]||(I[18]=ee("班級 ",-1)),b.value==="class"?(W(),H("span",ek,lt(v.value==="asc"?"▲":"▼"),1)):Et("",!0)]),c("th",{onClick:I[5]||(I[5]=K=>T("seat_number")),class:"table-header cursor-pointer"},[I[19]||(I[19]=ee("座號 ",-1)),b.value==="seat_number"?(W(),H("span",nk,lt(v.value==="asc"?"▲":"▼"),1)):Et("",!0)]),c("th",{onClick:I[6]||(I[6]=K=>T("account")),class:"table-header cursor-pointer"},[I[20]||(I[20]=ee("帳號 ",-1)),b.value==="account"?(W(),H("span",rk,lt(v.value==="asc"?"▲":"▼"),1)):Et("",!0)]),I[21]||(I[21]=c("th",{class:"table-header text-right"},"操作",-1))])]),c("tbody",sk,[l.value?(W(),H("tr",ik,[...I[22]||(I[22]=[c("td",{colspan:"6",class:"text-center py-4"},"正在載入學生資料...",-1)])])):x.value.length===0?(W(),H("tr",ok,[...I[23]||(I[23]=[c("td",{colspan:"6",class:"text-center py-4 text-gray-500"},"找不到符合條件的學生。",-1)])])):Et("",!0),(W(!0),H(Ft,null,Xt(x.value,K=>(W(),H("tr",{key:K.id,class:"hover:bg-slate-50"},[c("td",ak,lt(K.student_id),1),c("td",lk,lt(K.name),1),c("td",uk,lt(K.class),1),c("td",ck,lt(C(K.seat_number)),1),c("td",fk,lt(K.account),1),c("td",dk,[c("button",{onClick:De(k=>L(K),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 font-medium"},"編輯",8,hk),c("button",{onClick:De(k=>z(K.id),["prevent"]),class:"text-red-600 hover:text-red-900 ml-4 font-medium"},"刪除",8,pk)])]))),128))])])])]),r.value?(W(),H("div",gk,[c("div",mk,[c("div",{class:"fixed inset-0 bg-gray-500 opacity-75",onClick:I[7]||(I[7]=K=>r.value=!1)}),c("div",vk,[c("form",{onSubmit:De(D,["prevent"])},[c("div",_k,[c("h3",yk,lt(i.value?"編輯學生":"新增學生"),1),c("div",bk,[c("div",null,[I[24]||(I[24]=c("label",{class:"block text-sm font-medium text-gray-700"},"學號",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[8]||(I[8]=K=>o.value.student_id=K),required:"",class:"mt-1 form-input"},null,512),[[jt,o.value.student_id]])]),c("div",null,[I[25]||(I[25]=c("label",{class:"block text-sm font-medium text-gray-700"},"姓名",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[9]||(I[9]=K=>o.value.name=K),required:"",class:"mt-1 form-input"},null,512),[[jt,o.value.name]])]),c("div",null,[I[26]||(I[26]=c("label",{class:"block text-sm font-medium text-gray-700"},"帳號",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[10]||(I[10]=K=>o.value.account=K),required:"",class:"mt-1 form-input"},null,512),[[jt,o.value.account]])]),c("div",null,[c("label",xk,"密碼 ("+lt(i.value?"留空表示不變更":"必填")+")",1),Bt(c("input",{type:"password","onUpdate:modelValue":I[11]||(I[11]=K=>o.value.password=K),required:!i.value,class:"mt-1 form-input"},null,8,wk),[[jt,o.value.password]])]),c("div",null,[I[27]||(I[27]=c("label",{class:"block text-sm font-medium text-gray-700"},"班級",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[12]||(I[12]=K=>o.value.class=K),class:"mt-1 form-input"},null,512),[[jt,o.value.class]])]),c("div",null,[I[28]||(I[28]=c("label",{class:"block text-sm font-medium text-gray-700"},"座號",-1)),Bt(c("input",{type:"number","onUpdate:modelValue":I[13]||(I[13]=K=>o.value.seat_number=K),class:"mt-1 form-input"},null,512),[[jt,o.value.seat_number]])]),c("div",kk,[I[29]||(I[29]=c("label",{class:"block text-sm font-medium text-gray-700"},"性別",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[14]||(I[14]=K=>o.value.gender=K),class:"mt-1 form-input"},null,512),[[jt,o.value.gender]])]),d.value?(W(),H("p",Ck,lt(d.value),1)):Et("",!0)])]),c("div",Sk,[I[30]||(I[30]=c("button",{type:"submit",class:"btn btn-primary w-full sm:w-auto"},"儲存",-1)),c("button",{type:"button",onClick:I[15]||(I[15]=K=>r.value=!1),class:"btn btn-secondary mt-2 sm:mt-0 sm:ml-3 w-full sm:w-auto"},"取消")])],32)])])])):Et("",!0)]))}},Ak=uu(Ek,[["__scopeId","data-v-0cf4172d"]]),Tk={class:"grid grid-cols-1 lg:grid-cols-7 gap-8"},Ok={class:"lg:col-span-1 card h-full"},Rk={class:"mb-4"},Ik={class:"max-h-[50vh] overflow-y-auto pr-2"},$k=["onDragstart"],Pk={class:"font-bold text-sky-600"},Lk={class:"space-y-3 mb-4"},Mk={class:"flex items-center"},Bk={class:"flex items-center"},Dk={key:0,class:"text-green-600 mt-2"},zk={key:1,class:"text-red-600 mt-2"},Nk={class:"lg:col-span-6 card p-4"},Uk={key:0,class:"text-center py-10"},Fk=["onDrop"],jk={key:0,class:"w-full h-full p-2 relative flex flex-col justify-center items-center text-center"},Wk=["src"],qk={class:"font-bold truncate text-slate-800"},Hk={class:"text-sky-600"},Vk={class:"text-gray-500 text-sm truncate"},Kk=["onClick"],Gk={key:1,class:"text-slate-400 text-sm"},Zk={key:0,class:"fixed z-10 inset-0 overflow-y-auto"},Yk={class:"flex items-center justify-center min-h-screen"},Jk={class:"bg-white rounded-lg shadow-xl transform transition-all max-w-lg w-full"},Xk={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},_l="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2NkY2RjZCI+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgM2MxLjY2IDAgMyAxLjM0IDMgM3MtMS4zNCAzLTMgMy0zLTEuMzQtMy0zIDEuMzQtMyAzLTMzem0wIDE0LjJjLTIuNSAwLTQuNzEtMS4yOC02LTMuMjIuMDMtMS40OSw0LTMuMDggNi0zLjA4czUuOTcgMS4wOSA2IDMuMDhjLTEuMjkgMS45NC0zLjUgMy4yMi02IDMuMjJ6Ii8+PC9zdmc+",Qk={__name:"SeatingChartView",setup(t){const n=ft([]),r=ft(6),i=ft(5),o=ft({}),l=ft(!0),u=ft(""),f=ft(""),d=ft(""),y=ft(new Set),_=ft(!1),m=V=>V==null?"":String(V).padStart(2,"0"),b=pe(()=>({display:"grid",gridTemplateColumns:`repeat(${i.value}, 1fr)`})),v=pe(()=>{const V=new Set(Object.values(o.value).filter(Boolean).map(tt=>tt.id));return n.value.filter(tt=>!V.has(tt.id)).filter(tt=>tt.name.toLowerCase().includes(d.value.toLowerCase()))}),C=async()=>{l.value=!0,u.value="";try{const[V,tt,N]=await Promise.all([qt("/api/students"),qt("/api/seating-chart"),qt("/api/students/photos")]);if(!V.ok)throw new Error("無法讀取學生列表");if(n.value=await V.json(),!tt.ok)throw new Error("無法讀取座位表資料");const I=await tt.json();if(!N.ok)throw new Error("無法讀取學生照片列表");y.value=new Set(await N.json()),r.value=I.rows||6,i.value=I.cols||5,o.value=I.seats||{}}catch(V){u.value=V.message}finally{l.value=!1}},x=V=>{if(!(V!=null&&V.student_id))return _l;for(const tt of[".jpg",".jpeg",".png"])if(y.value.has(V.student_id+tt))return`/photos/${V.student_id}${tt}?t=${new Date().getTime()}`;return _l},T=V=>{V.target.src=_l},A=(V,tt)=>{V.dataTransfer.setData("studentId",tt.id)},L=(V,tt)=>{var K;const N=parseInt(V.dataTransfer.getData("studentId"),10),I=n.value.find(k=>k.id===N);if(I){for(const k in o.value)((K=o.value[k])==null?void 0:K.id)===N&&(o.value[k]=null);o.value[tt]=I}},D=V=>{o.value[V]=null},z=async()=>{u.value="",f.value="";try{const V=await qt("/api/seating-chart",{method:"POST",body:JSON.stringify({rows:r.value,cols:i.value,seats:o.value})});if(!V.ok)throw new Error((await V.json()).error||"儲存失敗");f.value="座位表已成功儲存！",setTimeout(()=>f.value="",3e3)}catch(V){u.value=V.message}},B=()=>{_.value=!0},Y=()=>{const V=[...n.value].sort((N,I)=>(Number(N.seat_number)||1/0)-(Number(I.seat_number)||1/0)),tt={};for(let N=0;N<r.value*i.value;N++)tt[N]=V[N]||null;o.value=tt,_.value=!1};return Ye(C),(V,tt)=>(W(),H("div",null,[tt[13]||(tt[13]=c("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"座位表設定",-1)),c("div",Tk,[c("div",Ok,[tt[9]||(tt[9]=c("h2",{class:"text-2xl font-semibold mb-4"},"學生列表",-1)),c("div",Rk,[Bt(c("input",{type:"text","onUpdate:modelValue":tt[0]||(tt[0]=N=>d.value=N),placeholder:"搜尋學生...",class:"form-input w-full"},null,512),[[jt,d.value]])]),c("div",Ik,[(W(!0),H(Ft,null,Xt(v.value,N=>(W(),H("div",{key:N.id,draggable:"true",onDragstart:I=>A(I,N),class:"p-3 mb-2 border rounded-lg cursor-grab bg-slate-100 hover:bg-sky-100 transition-colors flex items-center gap-3"},[c("span",Pk,lt(m(N.seat_number)),1),c("span",null,lt(N.name),1)],40,$k))),128))]),tt[10]||(tt[10]=c("hr",{class:"my-6"},null,-1)),tt[11]||(tt[11]=c("h2",{class:"text-2xl font-semibold mb-4"},"版面設定",-1)),c("div",Lk,[c("div",Mk,[tt[7]||(tt[7]=c("label",{class:"w-1/2 font-medium text-slate-700"},"行數:",-1)),Bt(c("input",{type:"number","onUpdate:modelValue":tt[1]||(tt[1]=N=>r.value=N),min:"1",max:"20",class:"form-input w-1/2 text-center"},null,512),[[jt,r.value,void 0,{number:!0}]])]),c("div",Bk,[tt[8]||(tt[8]=c("label",{class:"w-1/2 font-medium text-slate-700"},"列數:",-1)),Bt(c("input",{type:"number","onUpdate:modelValue":tt[2]||(tt[2]=N=>i.value=N),min:"1",max:"20",class:"form-input w-1/2 text-center"},null,512),[[jt,i.value,void 0,{number:!0}]])])]),c("button",{onClick:B,class:"w-full btn btn-success mb-3 px-0"}," 自動排列 "),c("button",{onClick:z,class:"w-full btn btn-primary px-0"}," 儲存座位 "),f.value?(W(),H("p",Dk,lt(f.value),1)):Et("",!0),u.value?(W(),H("p",zk,lt(u.value),1)):Et("",!0)]),c("div",Nk,[l.value?(W(),H("div",Uk,"讀取中...")):(W(),H("div",{key:1,style:Gr(b.value),class:"grid gap-4"},[(W(!0),H(Ft,null,Xt(r.value*i.value,N=>(W(),H("div",{key:N,onDrop:I=>L(I,N-1),onDragover:tt[3]||(tt[3]=De(()=>{},["prevent"])),onDragenter:tt[4]||(tt[4]=De(()=>{},["prevent"])),class:ce(["border-2 border-dashed rounded-lg h-36 flex flex-col justify-center items-center relative",{"bg-slate-50 hover:border-sky-400":!o.value[N-1],"bg-sky-50 border-sky-200":o.value[N-1]}])},[o.value[N-1]?(W(),H("div",jk,[c("img",{src:x(o.value[N-1]),onError:T,class:"w-16 h-16 object-cover rounded-full bg-gray-200 mb-2 border-2 border-white shadow"},null,40,Wk),c("p",qk,[c("span",Hk,lt(m(o.value[N-1].seat_number))+".",1),ee(" "+lt(o.value[N-1].name),1)]),c("p",Vk,lt(o.value[N-1].account),1),c("button",{onClick:I=>D(N-1),class:"absolute top-1 right-1 text-red-500 hover:text-red-700 bg-white rounded-full h-6 w-6 flex items-center justify-center shadow"},"✕",8,Kk)])):(W(),H("div",Gk,"(空位)"))],42,Fk))),128))],4))])]),_.value?(W(),H("div",Zk,[c("div",Yk,[c("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:tt[5]||(tt[5]=N=>_.value=!1)}),c("div",Jk,[tt[12]||(tt[12]=lr('<div class="p-6"><div class="flex items-start"><div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 sm:mx-0 sm:h-10 sm:w-10"><svg class="h-6 w-6 text-yellow-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"><h3 class="text-lg leading-6 font-medium text-gray-900"> 確認自動排列 </h3><div class="mt-2"><p class="text-sm text-gray-500"> 此操作將會覆蓋目前的座位表，您確定要依座號自動排列嗎？ </p></div></div></div></div>',1)),c("div",Xk,[c("button",{onClick:Y,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-yellow-500 text-base font-medium text-white hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 sm:ml-3 sm:w-auto sm:text-sm"}," 確認排列 "),c("button",{onClick:tt[6]||(tt[6]=N=>_.value=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm"}," 取消 ")])])])])):Et("",!0)]))}},t4={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8"},e4={class:"card h-full"},n4={class:"flex justify-between items-start mb-4"},r4={class:"text-xl font-semibold text-slate-700"},s4={key:0,class:"mt-2 text-center py-8"},i4={key:1,class:"grid grid-cols-3 gap-4 text-center"},o4={class:"text-5xl font-bold text-green-600"},a4={class:"text-5xl font-bold text-orange-500"},l4={class:"text-5xl font-bold text-red-600"},u4={class:"card flex flex-col items-center justify-center text-center h-full"},c4=["disabled"],f4={class:"card flex flex-col items-center justify-center text-center h-full"},d4={key:0,class:"text-5xl font-bold mt-4"},h4={key:1,class:"text-6xl font-bold text-slate-800 mt-4"},p4={key:0,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6",role:"alert"},g4={class:"card p-4"},m4={key:0,class:"text-center py-16"},v4=["onClick"],_4={class:"absolute top-2 left-2 text-slate-500"},y4={key:0,class:"w-6 h-6 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},b4={key:1,class:"w-6 h-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},x4={key:2,class:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},w4={class:"flex-grow flex flex-col items-center justify-center"},k4=["src"],C4={class:"font-bold text-xl leading-tight mt-2"},S4={class:"text-sm text-slate-600"},E4={key:1,class:"text-slate-400 text-sm"},A4={key:1,class:"fixed z-20 inset-0 overflow-y-auto"},T4={class:"flex items-center justify-center min-h-screen"},O4={class:"inline-block bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all my-8 max-w-sm w-full"},R4={class:"bg-white p-6"},I4={class:"text-2xl leading-6 font-bold text-gray-900 text-center mb-2"},$4={class:"my-4 text-center"},P4={class:"grid grid-cols-2 gap-4 mt-2"},L4={class:"bg-gray-50 px-4 py-3 text-right"},M4={key:2,class:"fixed z-30 inset-0 overflow-y-auto"},B4={class:"flex items-center justify-center min-h-screen"},D4={class:"inline-block bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all my-8 max-w-5xl w-full"},z4={class:"bg-white px-6 pt-5 pb-4"},N4={class:"max-h-[60vh] overflow-y-auto pr-4"},U4={class:"col-span-1 font-semibold text-lg"},F4={class:"col-span-5 grid grid-cols-5 gap-2"},j4=["onClick"],W4={class:"bg-gray-100 px-6 py-4 flex justify-end space-x-4"},q4={key:3,class:"fixed z-40 inset-0 overflow-y-auto"},H4={class:"flex items-center justify-center min-h-screen"},V4={class:"inline-block bg-white rounded-2xl text-center overflow-hidden shadow-2xl transform transition-all my-8 max-w-md w-full relative border-4 border-yellow-400"},K4={class:"p-8 sm:p-12 relative"},G4={class:"text-8xl font-extrabold text-gray-900 my-4"},Z4={class:"text-3xl text-gray-500 font-semibold"},Y4={key:4,class:"fixed z-50 inset-0 overflow-y-auto"},J4={class:"flex items-center justify-center min-h-screen p-4"},X4={class:"inline-block bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all my-8 max-w-6xl w-full"},Q4={class:"bg-white px-6 pt-5 pb-4"},t3={class:"flex items-center space-x-4 mb-4 p-4 bg-slate-50 rounded-md"},e3={class:"max-h-[60vh] overflow-y-auto"},n3={key:0,class:"text-center py-8"},r3={key:1,class:"min-w-full divide-y divide-gray-200"},s3={class:"bg-white divide-y divide-gray-200"},i3={class:"px-4 py-3 whitespace-nowrap"},o3={class:"px-4 py-3 whitespace-nowrap font-semibold"},a3={class:"px-4 py-3 text-center"},l3={class:"px-4 py-3 text-center"},u3={class:"px-4 py-3 text-center"},c3={class:"px-4 py-3 text-center"},f3={class:"px-4 py-3 text-center text-red-600 font-bold"},d3={class:"px-4 py-3 text-center font-medium"},h3={key:0},p3={key:1},g3={class:"bg-gray-100 px-6 py-4 flex justify-end"},yl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2NkY2RjZCI+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgM2MxLjY2IDAgMyAxLjM0IDMgM3MtMS4zNCAzLTMgMy0zLTEuMzQtMy0zIDEuMzQtMyAzLTMzem0wIDE0LjJjLTIuNSAwLTQuNzEtMS4yOC02LTMuMjIuMDMtMS45OSA0LTMuMDggNi0zLjA4czUuOTcgMS4wOSA2IDMuMDhjLTEuMjkgMS45NC0zLjUgMy4yMi02IDMuMjJ6Ii8+PC9zdmc+",m3={__name:"ClassroomDashboardView",setup(t){const n=ft([]),r=ft({rows:0,cols:0,seats:{}}),i=ft({}),o=ft({}),l=ft(!0),u=ft(""),f=ft(new Set),d=ft(!1),y=ft(!1),_=ft(!1),m=ft(null),b=ft({}),v=ft(!1),C=ft(null),x={present:{label:"出席",color:"green",bgColor:"bg-green-500",hoverBg:"hover:bg-green-200"},sick:{label:"病假",color:"orange",bgColor:"bg-orange-500",hoverBg:"hover:bg-orange-200"},official:{label:"公假",color:"blue",bgColor:"bg-blue-500",hoverBg:"hover:bg-blue-200"},personal:{label:"事假",color:"yellow",bgColor:"bg-yellow-500",hoverBg:"hover:bg-yellow-200"},absent:{label:"曠課",color:"red",bgColor:"bg-red-500",hoverBg:"hover:bg-red-200"}},T=ft(!1),A=ft(""),L=ft(""),D=ft([]),z=ft(!1),B=pe(()=>new Date().toISOString().split("T")[0]),Y=pe(()=>new Date().toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"})),V=pe(()=>({display:"grid",gridTemplateColumns:`repeat(${r.value.cols}, 1fr)`})),tt=pe(()=>Object.values(r.value.seats).filter(Boolean).length),N=pe(()=>[...n.value].sort((dt,S)=>(Number(dt.seat_number)||1/0)-(Number(S.seat_number)||1/0))),I=pe(()=>{const dt={present:0,leave:0,absent:0},S=Object.values(r.value.seats).filter(Boolean);return S.length&&S.forEach(M=>{const h=i.value[M.student_id];h==="present"?dt.present++:h==="absent"?dt.absent++:["sick","official","personal"].includes(h)?dt.leave++:dt.present++}),dt}),K=pe(()=>m.value&&o.value[m.value.student_id]||0),k=pe(()=>{const dt=K.value;return dt>0?"text-green-600":dt<0?"text-red-600":"text-gray-800"}),$=dt=>{if(!(dt!=null&&dt.student_id))return yl;for(const S of[".jpg",".jpeg",".png"])if(f.value.has(dt.student_id+S))return`/photos/${dt.student_id}${S}?t=${new Date().getTime()}`;return yl},g=dt=>{dt.target.src=yl},rt=dt=>i.value[dt]||"present",Ct=dt=>{if(!dt)return"bg-slate-100 border-slate-200";if(C.value&&C.value.id===dt.id)return"ring-4 ring-offset-2 ring-indigo-500 scale-105 shadow-lg z-10 bg-white";const S=rt(dt.student_id),M=x[S],h=S!=="present"?" opacity-50":"";return M?`bg-${M.color}-100 hover:bg-${M.color}-200 border-${M.color}-300${h}`:`bg-slate-200 hover:bg-slate-300 border-slate-400${h}`},pt=dt=>{if(!dt)return"bg-slate-800";const S=o.value[dt.student_id]||0;return S>0?"bg-green-600":S<0?"bg-red-600":"bg-slate-800"},At=(dt,S)=>b.value[dt]===S?`${x[S].bgColor} text-white`:`bg-slate-200 ${x[S].hoverBg} text-slate-700`,xt=async()=>{l.value=!0,u.value="";try{const[dt,S,M]=await Promise.all([qt(`/api/classroom-status?date=${B.value}`),qt("/api/students"),qt("/api/students/photos")]);if(!dt.ok)throw new Error("無法讀取課堂儀表板資料");if(!S.ok)throw new Error("無法讀取學生列表");if(!M.ok)throw new Error("無法讀取學生照片列表");const h=await dt.json();n.value=await S.json(),f.value=new Set(await M.json()),r.value=h.seatingChart||{rows:6,cols:5,seats:{}},o.value=h.performance||{};const F=h.attendance||{},j=Object.values(r.value.seats).filter(Boolean),E={};j.forEach(O=>{E[O.student_id]=F[O.student_id]||"present"}),i.value=E}catch(dt){u.value=`錯誤: ${dt.message}`}finally{l.value=!1}},$t=dt=>{if(!dt)return;(i.value[dt.student_id]||"present")==="present"&&it(dt)},it=dt=>{m.value=dt,d.value=!0},st=()=>{const dt={};n.value.forEach(S=>{dt[S.student_id]=i.value[S.student_id]||"present"}),b.value=dt,y.value=!0},Pt=(dt,S)=>{b.value[dt]=S},Tt=async()=>{const dt=[];for(const S in b.value)b.value[S]!==i.value[S]&&dt.push(qt("/api/attendance",{method:"POST",body:JSON.stringify({student_id:S,date:B.value,status:b.value[S]})}));if(dt.length===0){y.value=!1;return}try{await Promise.all(dt),i.value={...b.value},y.value=!1}catch{u.value="儲存出缺席狀態時發生錯誤。請重新整理頁面。"}},at=async dt=>{if(!m.value)return;const S=m.value.student_id;o.value[S]||(o.value[S]=0),o.value[S]+=dt;try{await qt("/api/performance",{method:"POST",body:JSON.stringify({student_id:S,date:B.value,points:dt})})}catch{u.value="新增表現分數失敗",xt()}},gt=()=>{const dt=Object.keys(i.value).filter(F=>i.value[F]==="present"),S=n.value.filter(F=>dt.includes(F.student_id));if(S.length===0){alert("目前沒有標記為「出席」的學生可以抽籤。");return}v.value=!0,C.value=null;let M=0;const h=setInterval(()=>{const F=Math.floor(Math.random()*S.length);C.value=S[F],M++,M>20&&(clearInterval(h),v.value=!1,_.value=!0)},100)},J=()=>{_.value=!1,setTimeout(()=>{C.value=null},300)},ut=()=>{const dt=new Date,S=new Date;S.setDate(dt.getDate()-90),L.value=dt.toISOString().split("T")[0],A.value=S.toISOString().split("T")[0],T.value=!0,mt()},mt=async()=>{z.value=!0,u.value="";try{const dt=await qt(`/api/attendance-summary?startDate=${A.value}&endDate=${L.value}`);if(!dt.ok)throw new Error("無法讀取學期統計資料");D.value=await dt.json()}catch(dt){u.value=dt.message}finally{z.value=!1}},kt=dt=>{const S=dt.present+dt.sick+dt.official+dt.personal+dt.absent;return S===0?null:(dt.present/S*100).toFixed(1)};return Ye(xt),(dt,S)=>(W(),H("div",null,[c("div",{class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8"},[S[10]||(S[10]=c("h1",{class:"text-4xl font-bold text-slate-800"},"班級儀表板",-1)),c("div",{class:"flex space-x-2 mt-4 md:mt-0"},[c("button",{onClick:st,class:"btn btn-secondary px-4 py-2 text-base"},"批次登記"),c("button",{onClick:ut,class:"btn bg-slate-600 hover:bg-slate-700 px-4 py-2 text-base"},"學期統計")])]),c("div",t4,[c("div",e4,[c("div",n4,[c("h2",r4,"今日出缺席 ("+lt(Y.value)+")",1)]),l.value?(W(),H("div",s4,"讀取中...")):(W(),H("div",i4,[c("div",null,[c("p",o4,lt(I.value.present),1),S[11]||(S[11]=c("p",{class:"text-base text-slate-500"},"出席",-1))]),c("div",null,[c("p",a4,lt(I.value.leave),1),S[12]||(S[12]=c("p",{class:"text-base text-slate-500"},"請假",-1))]),c("div",null,[c("p",l4,lt(I.value.absent),1),S[13]||(S[13]=c("p",{class:"text-base text-slate-500"},"曠課",-1))])]))]),c("div",u4,[S[14]||(S[14]=c("h2",{class:"text-xl font-semibold text-slate-700 mb-4"},"隨機抽籤",-1)),c("button",{onClick:gt,class:"btn btn-primary text-xl px-8 py-4 rounded-full",disabled:v.value},lt(v.value?"抽籤中...":"開始抽籤"),9,c4),S[15]||(S[15]=c("p",{class:"mt-3 text-sm h-8 text-slate-400"},"點擊按鈕從出席學生中抽籤",-1))]),c("div",f4,[S[17]||(S[17]=c("h2",{class:"text-xl font-semibold text-slate-700"},"座位表學生總數",-1)),l.value?(W(),H("p",d4,"...")):(W(),H("p",h4,[ee(lt(tt.value)+" ",1),S[16]||(S[16]=c("span",{class:"text-2xl text-slate-500"},"人",-1))]))])]),u.value?(W(),H("div",p4,[S[18]||(S[18]=c("p",{class:"font-bold"},"發生錯誤：",-1)),c("p",null,lt(u.value),1)])):Et("",!0),c("div",g4,[l.value?(W(),H("div",m4,"座位表讀取中...")):(W(),H("div",{key:1,style:Gr(V.value),class:"grid gap-3"},[(W(!0),H(Ft,null,Xt(r.value.rows*r.value.cols,M=>(W(),H("div",{key:M,class:ce(["h-40 rounded-xl flex flex-col justify-center items-center text-center p-2 transition-all duration-300 relative border-2",Ct(r.value.seats[M-1])])},[r.value.seats[M-1]?(W(),H("div",{key:0,onClick:h=>$t(r.value.seats[M-1]),class:ce(["w-full h-full flex flex-col justify-center items-center",(i.value[r.value.seats[M-1].student_id]||"present")==="present"?"cursor-pointer":"cursor-not-allowed"])},[c("div",{class:ce(["absolute top-2 right-2 rounded-full h-9 w-9 flex items-center justify-center text-lg font-bold text-white shadow-md",pt(r.value.seats[M-1])])},lt(o.value[r.value.seats[M-1].student_id]||0),3),c("div",_4,[rt(r.value.seats[M-1].student_id)==="sick"?(W(),H("svg",y4,[...S[19]||(S[19]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):Et("",!0),["official","personal"].includes(rt(r.value.seats[M-1].student_id))?(W(),H("svg",b4,[...S[20]||(S[20]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):Et("",!0),rt(r.value.seats[M-1].student_id)==="absent"?(W(),H("svg",x4,[...S[21]||(S[21]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"},null,-1)])])):Et("",!0)]),c("div",w4,[c("img",{src:$(r.value.seats[M-1]),onError:g,class:"w-20 h-20 object-cover rounded-full bg-gray-200 border-2 border-white shadow-sm"},null,40,k4),c("p",C4,lt(r.value.seats[M-1].name),1),c("p",S4,"("+lt(r.value.seats[M-1].seat_number)+")",1)])],10,v4)):(W(),H("div",E4,"(空位)"))],2))),128))],4))]),d.value?(W(),H("div",A4,[c("div",T4,[c("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:S[0]||(S[0]=M=>d.value=!1)},[...S[22]||(S[22]=[c("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])]),c("div",O4,[c("div",R4,[c("h3",I4,lt(m.value.name),1),c("div",$4,[S[23]||(S[23]=c("p",{class:"text-base font-medium text-gray-500"},"本日累計分數",-1)),c("p",{class:ce(["text-7xl font-bold",k.value])},lt(K.value),3)]),c("div",null,[S[24]||(S[24]=c("h4",{class:"font-semibold text-center mt-6 text-gray-600"},"調整分數",-1)),c("div",P4,[c("button",{onClick:S[1]||(S[1]=M=>at(1)),class:"btn btn-primary text-lg py-3"},"+1 分"),c("button",{onClick:S[2]||(S[2]=M=>at(-1)),class:"btn btn-warning text-lg py-3"},"-1 分")])])]),c("div",L4,[c("button",{onClick:S[3]||(S[3]=M=>d.value=!1),type:"button",class:"btn btn-secondary"},"關閉")])])])])):Et("",!0),y.value?(W(),H("div",M4,[c("div",B4,[c("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:S[4]||(S[4]=M=>y.value=!1)},[...S[25]||(S[25]=[c("div",{class:"absolute inset-0 bg-gray-600 opacity-75"},null,-1)])]),c("div",D4,[c("div",z4,[S[26]||(S[26]=c("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"批次登記今日出缺席",-1)),c("div",N4,[(W(!0),H(Ft,null,Xt(N.value,M=>(W(),H("div",{key:M.id,class:"grid grid-cols-6 gap-4 items-center mb-2 p-2 rounded-md hover:bg-slate-50"},[c("div",U4,lt(M.seat_number)+". "+lt(M.name),1),c("div",F4,[(W(!0),H(Ft,null,Xt(Object.keys(x),h=>(W(),H("button",{key:h,onClick:F=>Pt(M.student_id,h),class:ce(["px-2 py-2 text-base rounded-md transition-colors",At(M.student_id,h)])},lt(x[h].label),11,j4))),128))])]))),128))])]),c("div",W4,[c("button",{onClick:S[5]||(S[5]=M=>y.value=!1),type:"button",class:"btn btn-secondary text-base py-2 px-6"},"取消"),c("button",{onClick:Tt,type:"button",class:"btn bg-purple-600 hover:bg-purple-700 text-base py-2 px-6"},"儲存變更")])])])])):Et("",!0),_.value&&C.value?(W(),H("div",q4,[c("div",H4,[c("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:J},[...S[27]||(S[27]=[c("div",{class:"absolute inset-0 bg-gray-800 opacity-75"},null,-1)])]),c("div",V4,[c("div",K4,[S[28]||(S[28]=c("p",{class:"text-xl font-medium text-indigo-600"},"恭喜！抽中了...",-1)),c("p",G4,lt(C.value.name),1),c("p",Z4,lt(C.value.seat_number)+" 號",1),c("div",{class:"mt-8"},[c("button",{onClick:J,type:"button",class:"btn btn-primary text-lg px-8 py-3"}," 關閉 ")])])])])])):Et("",!0),T.value?(W(),H("div",Y4,[c("div",J4,[c("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:S[6]||(S[6]=M=>T.value=!1)},[...S[29]||(S[29]=[c("div",{class:"absolute inset-0 bg-gray-600 opacity-75"},null,-1)])]),c("div",X4,[c("div",Q4,[S[33]||(S[33]=c("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"學期出缺席統計",-1)),c("div",t3,[S[30]||(S[30]=c("label",{for:"startDate",class:"text-sm font-medium"},"開始日期:",-1)),Bt(c("input",{type:"date",id:"startDate","onUpdate:modelValue":S[7]||(S[7]=M=>A.value=M),class:"form-input"},null,512),[[jt,A.value]]),S[31]||(S[31]=c("label",{for:"endDate",class:"text-sm font-medium"},"結束日期:",-1)),Bt(c("input",{type:"date",id:"endDate","onUpdate:modelValue":S[8]||(S[8]=M=>L.value=M),class:"form-input"},null,512),[[jt,L.value]]),c("button",{onClick:mt,class:"btn btn-primary"},"查詢")]),c("div",e3,[z.value?(W(),H("div",n3,"正在讀取統計資料...")):(W(),H("table",r3,[S[32]||(S[32]=c("thead",{class:"bg-slate-50 sticky top-0"},[c("tr",null,[c("th",{class:"px-4 py-3 text-left text-sm font-medium uppercase"},"座號"),c("th",{class:"px-4 py-3 text-left text-sm font-medium uppercase"},"姓名"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-green-600"},"出席"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-orange-600"},"病假"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-blue-600"},"公假"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-yellow-600"},"事假"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-red-600"},"曠課"),c("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase"},"出席率")])],-1)),c("tbody",s3,[(W(!0),H(Ft,null,Xt(D.value,M=>(W(),H("tr",{key:M.student_id,class:"hover:bg-slate-50"},[c("td",i3,lt(M.seat_number),1),c("td",o3,lt(M.name),1),c("td",a3,lt(M.present),1),c("td",l3,lt(M.sick),1),c("td",u3,lt(M.official),1),c("td",c3,lt(M.personal),1),c("td",f3,lt(M.absent),1),c("td",d3,[kt(M)!==null?(W(),H("span",h3,lt(kt(M))+"%",1)):(W(),H("span",p3,"N/A"))])]))),128))])]))])]),c("div",g3,[c("button",{onClick:S[9]||(S[9]=M=>T.value=!1),type:"button",class:"btn btn-secondary"},"關閉")])])])])):Et("",!0)]))}},v3={class:"card p-8 mb-8"},_3={class:"text-2xl font-semibold mb-6"},y3={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},b3=["value"],x3={class:"grid grid-cols-1 md:grid-cols-2 gap-6 items-center"},w3={class:"flex items-center pt-6"},k3={class:"flex items-center justify-end space-x-4 pt-4"},C3={type:"submit",class:"btn btn-primary text-base px-6 py-2.5"},S3={key:0,class:"text-red-500 mb-4"},E3={class:"card p-8"},A3={key:0,class:"text-center text-slate-500 py-8"},T3={key:1,class:"space-y-4"},O3={class:"px-2 py-1 text-xs font-semibold rounded-full bg-sky-100 text-sky-800"},R3={class:"font-bold text-xl mt-2"},I3={class:"text-sm text-slate-600"},$3={class:"text-xs text-slate-500 mt-2"},P3={class:"flex items-center space-x-3"},L3=["onClick"],M3=["onClick"],B3=["onClick"],D3={key:2,class:"text-slate-500 text-center py-8"},z3={key:1,class:"fixed z-10 inset-0 overflow-y-auto"},N3={class:"flex items-center justify-center min-h-screen p-4"},U3={class:"bg-white rounded-lg shadow-xl transform transition-all w-full max-w-6xl h-[80vh] flex flex-col"},F3={class:"p-4 border-b flex justify-between items-center"},j3={class:"text-xl font-bold"},W3={class:"flex-grow flex overflow-hidden"},q3={class:"w-1/4 bg-slate-50 border-r overflow-y-auto"},H3={key:0,class:"p-4 text-center"},V3={key:1},K3=["onClick"],G3={class:"font-semibold"},Z3={class:"text-sm text-slate-500"},Y3={key:0,class:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-700"},J3={class:"w-3/4 p-6 overflow-y-auto"},X3={key:0,class:"flex items-center justify-center h-full text-slate-500"},Q3={key:1},t5={class:"flex justify-between items-center mb-4"},e5={class:"text-lg font-bold"},n5={key:0,class:"px-3 py-1 text-base font-semibold rounded-full bg-red-100 text-red-700 flex items-center gap-2"},r5={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},s5=["href","onClick","download","target"],i5=["src"],o5={key:1,class:"w-full h-24 bg-slate-100 rounded-md mb-2 flex items-center justify-center relative"},a5={key:0,class:"h-12 w-12 text-red-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},l5={key:1,class:"h-12 w-12 text-blue-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},u5={key:2,class:"h-12 w-12 text-purple-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},c5={key:3,class:"h-12 w-12 text-slate-400",viewBox:"0 0 20 20",fill:"currentColor"},f5={key:4,class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 flex items-center justify-center transition-opacity rounded-md"},d5={class:"text-xs text-slate-700 truncate"},h5={class:"flex items-center justify-center min-h-screen p-4 text-center"},p5={class:"p-4 border-b flex justify-between items-center bg-slate-50"},g5={class:"text-xl font-bold text-slate-800 truncate"},m5={class:"flex-grow p-2 flex items-center justify-center bg-slate-200 overflow-hidden"},v5=["src"],_5=["src"],y5=["src"],b5=["src"],x5={__name:"AssignmentsView",setup(t){const n=ft([]),r=ft([]),i=Ze({title:"",description:"",due_date:"",subject_id:null,allow_resubmission:!0}),o=ft(!1),l=ft(null),u=ft(!0),f=ft(""),d=ft(!1),y=ft(null),_=ft([]),m=ft(!1),b=ft(null),v=ft(!1),C=ft(null),x=k=>k==null?"":String(k).padStart(2,"0"),T=async()=>{u.value=!0,f.value="";try{const[k,$]=await Promise.all([qt("/api/assignments"),qt("/api/subjects")]);if(!k.ok)throw new Error("無法讀取作業列表");if(!$.ok)throw new Error("無法讀取科目列表");n.value=await k.json(),r.value=await $.json()}catch(k){f.value=`錯誤: ${k.message}`}finally{u.value=!1}},A=async()=>{o.value?await D():await L()},L=async()=>{f.value="";try{const k=await qt("/api/assignments",{method:"POST",body:JSON.stringify(i)}),$=await k.json();if(!k.ok)throw new Error($.error||"建立作業失敗");n.value.unshift($),Object.assign(i,{title:"",description:"",due_date:"",subject_id:null,allow_resubmission:!0})}catch(k){f.value=`錯誤: ${k.message}`}},D=async()=>{f.value="";try{const k=await qt(`/api/assignments/${l.value}`,{method:"PUT",body:JSON.stringify(i)}),$=await k.json();if(!k.ok)throw new Error($.error||"更新作業失敗");const g=n.value.findIndex(rt=>rt.id===l.value);g!==-1&&(n.value[g]=$),B()}catch(k){f.value=`錯誤: ${k.message}`}},z=k=>{o.value=!0,l.value=k.id,Object.assign(i,{...k,allow_resubmission:!!k.allow_resubmission})},B=()=>{o.value=!1,l.value=null,Object.assign(i,{title:"",description:"",due_date:"",subject_id:null,allow_resubmission:!0})},Y=async k=>{if(confirm("確定要刪除這個作業嗎？")){f.value="";try{const $=await qt(`/api/assignments/${k}`,{method:"DELETE"}),g=await $.json();if(!$.ok)throw new Error(g.error||"刪除失敗");n.value=n.value.filter(rt=>rt.id!==k)}catch($){f.value=`錯誤: ${$.message}`}}},V=async k=>{y.value=k,d.value=!0,m.value=!0,b.value=null;try{const $=await qt(`/api/assignments/${k.id}/submissions`);if(!$.ok)throw new Error("無法讀取繳交列表");const g=await $.json();g.sort((rt,Ct)=>parseInt(rt.seat_number,10)-parseInt(Ct.seat_number,10)),_.value=g}catch($){f.value=`讀取繳交列表時發生錯誤: ${$.message}`}finally{m.value=!1}},tt=()=>{d.value=!1,y.value=null,_.value=[],b.value=null},N=k=>{if(!k)return"other";const $=k.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes($)?"image":["mp4","webm","ogv"].includes($)?"video":["mp3","wav","m4a","ogg"].includes($)?"audio":$==="pdf"?"pdf":"other"},I=k=>{if(!k)return"";const $=k.split("_");return $.length>3?$.slice(3).join("_"):k},K=(k,$)=>{N(k.name)!=="other"&&($.preventDefault(),C.value=k,v.value=!0)};return Ye(T),(k,$)=>(W(),H("div",null,[$[22]||($[22]=c("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"作業管理",-1)),c("div",v3,[c("h2",_3,lt(o.value?"編輯作業":"新增作業"),1),c("form",{onSubmit:De(A,["prevent"]),class:"space-y-6"},[c("div",y3,[c("div",null,[$[8]||($[8]=c("label",{for:"title",class:"block text-base font-medium text-slate-700"},"作業標題",-1)),Bt(c("input",{type:"text",id:"title","onUpdate:modelValue":$[0]||($[0]=g=>i.title=g),required:"",class:"mt-1 form-input text-lg py-3"},null,512),[[jt,i.title]])]),c("div",null,[$[10]||($[10]=c("label",{for:"subject",class:"block text-base font-medium text-slate-700"},"科目",-1)),Bt(c("select",{id:"subject","onUpdate:modelValue":$[1]||($[1]=g=>i.subject_id=g),required:"",class:"mt-1 form-input text-lg py-3"},[$[9]||($[9]=c("option",{value:null,disabled:""},"-- 請選擇科目 --",-1)),(W(!0),H(Ft,null,Xt(r.value,g=>(W(),H("option",{key:g.id,value:g.id},lt(g.name),9,b3))),128))],512),[[ui,i.subject_id]])])]),c("div",null,[$[11]||($[11]=c("label",{for:"description",class:"block text-base font-medium text-slate-700"},"作業說明 (選填)",-1)),Bt(c("textarea",{id:"description","onUpdate:modelValue":$[2]||($[2]=g=>i.description=g),rows:"3",class:"mt-1 form-input text-lg py-3"},null,512),[[jt,i.description]])]),c("div",x3,[c("div",null,[$[12]||($[12]=c("label",{for:"due_date",class:"block text-base font-medium text-slate-700"},"繳交截止日期 (選填)",-1)),Bt(c("input",{type:"datetime-local",id:"due_date","onUpdate:modelValue":$[3]||($[3]=g=>i.due_date=g),class:"mt-1 form-input text-lg py-3"},null,512),[[jt,i.due_date]])]),c("div",w3,[Bt(c("input",{type:"checkbox",id:"allow_resubmission","onUpdate:modelValue":$[4]||($[4]=g=>i.allow_resubmission=g),class:"h-5 w-5 text-sky-600 border-gray-300 rounded focus:ring-sky-500"},null,512),[[dw,i.allow_resubmission]]),$[13]||($[13]=c("label",{for:"allow_resubmission",class:"ml-2 block text-base text-slate-700"},"允許學生重複上傳",-1))])]),c("div",k3,[o.value?(W(),H("button",{key:0,onClick:B,type:"button",class:"btn btn-secondary text-base px-6 py-2.5"},"取消")):Et("",!0),c("button",C3,lt(o.value?"更新作業":"建立作業"),1)])],32)]),f.value?(W(),H("p",S3,lt(f.value),1)):Et("",!0),c("div",E3,[$[14]||($[14]=c("h2",{class:"text-2xl font-semibold mb-6"},"現有作業列表",-1)),u.value?(W(),H("div",A3,"讀取中...")):n.value.length>0?(W(),H("ul",T3,[(W(!0),H(Ft,null,Xt(n.value,g=>(W(),H("li",{key:g.id,class:"p-4 border rounded-lg flex justify-between items-center hover:bg-slate-50 transition-colors"},[c("div",null,[c("span",O3,lt(g.subject_name),1),c("h3",R3,lt(g.title),1),c("p",I3,lt(g.description),1),c("p",$3,[ee(" 建立於: "+lt(new Date(g.created_at).toLocaleString())+" | 截止於: "+lt(g.due_date?new Date(g.due_date).toLocaleString():"無")+" | ",1),c("span",{class:ce(g.allow_resubmission?"text-green-600":"text-red-600")},lt(g.allow_resubmission?"允許多次上傳":"僅限單次上傳"),3)])]),c("div",P3,[c("button",{onClick:rt=>V(g),class:"btn bg-teal-500 hover:bg-teal-600 text-sm"},"查看繳交",8,L3),c("button",{onClick:rt=>z(g),class:"btn bg-yellow-500 hover:bg-yellow-600 text-sm"},"編輯",8,M3),c("button",{onClick:rt=>Y(g.id),class:"btn btn-danger text-sm"},"刪除",8,B3)])]))),128))])):(W(),H("p",D3,"目前沒有任何作業。"))]),d.value?(W(),H("div",z3,[c("div",N3,[c("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:tt}),c("div",U3,[c("div",F3,[c("h3",j3,"查看「"+lt(y.value.title)+"」繳交狀況",1),c("button",{onClick:tt,class:"text-2xl text-gray-500 hover:text-gray-800"},"×")]),c("div",W3,[c("div",q3,[m.value?(W(),H("div",H3,"讀取中...")):(W(),H("ul",V3,[(W(!0),H(Ft,null,Xt(_.value,g=>(W(),H("li",{key:g.studentId,onClick:rt=>b.value=g,class:ce(["p-4 cursor-pointer hover:bg-sky-100 flex justify-between items-center",{"bg-sky-200":b.value&&b.value.name===g.name}])},[c("div",null,[c("p",G3,lt(x(g.seat_number))+". "+lt(g.name),1),c("p",Z3,lt(g.files.length)+" 個檔案",1)]),g.isLate?(W(),H("span",Y3," 遲交 ")):Et("",!0)],10,K3))),128))]))]),c("div",J3,[b.value?(W(),H("div",Q3,[c("div",t5,[c("h4",e5,lt(b.value.name)+" 的檔案",1),b.value.isLate?(W(),H("div",n5,[...$[15]||($[15]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),c("span",null,"此為補交作業",-1)])])):Et("",!0)]),c("div",r5,[(W(!0),H(Ft,null,Xt(b.value.files,g=>(W(),H("a",{key:g.name,href:g.url,onClick:rt=>K(g,rt),download:N(g.name)==="other"?I(g.name):null,target:N(g.name)==="other"?"_self":"_blank",class:"block border rounded-lg p-2 text-center hover:shadow-md transition-shadow group cursor-pointer"},[N(g.name)==="image"?(W(),H("img",{key:0,src:g.url,class:"w-full h-24 object-cover rounded-md mb-2 bg-slate-100"},null,8,i5)):(W(),H("div",o5,[N(g.name)==="pdf"?(W(),H("svg",a5,[...$[16]||($[16]=[lr('<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path> <polyline points="14 2 14 8 20 8"></polyline> <line x1="16" y1="13" x2="8" y2="13"></line> <line x1="16" y1="17" x2="8" y2="17"></line> <polyline points="10 9 9 9 8 9"></polyline>',9)])])):N(g.name)==="video"?(W(),H("svg",l5,[...$[17]||($[17]=[c("polygon",{points:"23 7 16 12 23 17 23 7"},null,-1),ee(),c("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},null,-1)])])):N(g.name)==="audio"?(W(),H("svg",u5,[...$[18]||($[18]=[c("path",{d:"M9 18V5l12-2v13"},null,-1),ee(),c("circle",{cx:"6",cy:"18",r:"3"},null,-1),ee(),c("circle",{cx:"18",cy:"16",r:"3"},null,-1)])])):(W(),H("svg",c5,[...$[19]||($[19]=[c("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"},null,-1)])])),N(g.name)!=="other"?(W(),H("div",f5,[...$[20]||($[20]=[c("svg",{class:"h-10 w-10 text-white opacity-0 group-hover:opacity-100",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),ee(),c("circle",{cx:"12",cy:"12",r:"3"})],-1)])])):Et("",!0)])),c("p",d5,lt(I(g.name)),1)],8,s5))),128))])])):(W(),H("div",X3," 請從左側選擇一位學生以檢視檔案 "))])])])])])):Et("",!0),v.value?(W(),H("div",{key:2,class:"fixed z-50 inset-0 overflow-y-auto",onClick:$[7]||($[7]=g=>v.value=!1)},[c("div",h5,[$[21]||($[21]=c("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-80 transition-opacity"},null,-1)),c("div",{onClick:$[6]||($[6]=De(()=>{},["stop"])),class:"inline-block bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all w-[95vw] h-[90vh] flex flex-col",role:"dialog","aria-modal":"true"},[c("div",p5,[c("h3",g5,lt(C.value?I(C.value.name):""),1),c("button",{onClick:$[5]||($[5]=g=>v.value=!1),class:"text-4xl text-gray-500 hover:text-gray-800"},"×")]),c("div",m5,[C.value?(W(),H(Ft,{key:0},[N(C.value.name)==="image"?(W(),H("img",{key:0,src:C.value.url,class:"max-w-full max-h-full object-contain"},null,8,v5)):N(C.value.name)==="video"?(W(),H("video",{key:1,src:C.value.url,controls:"",class:"max-w-full max-h-full object-contain"},null,8,_5)):N(C.value.name)==="audio"?(W(),H("audio",{key:2,src:C.value.url,controls:"",class:"w-full max-w-lg"},null,8,y5)):N(C.value.name)==="pdf"?(W(),H("iframe",{key:3,src:C.value.url,class:"w-full h-full border-0"},null,8,b5)):Et("",!0)],64)):Et("",!0)])])])])):Et("",!0)]))}};var ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function w5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ro={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ro.exports;(function(t,n){(function(){var r,i="4.17.21",o=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",f="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",y=500,_="__lodash_placeholder__",m=1,b=2,v=4,C=1,x=2,T=1,A=2,L=4,D=8,z=16,B=32,Y=64,V=128,tt=256,N=512,I=30,K="...",k=800,$=16,g=1,rt=2,Ct=3,pt=1/0,At=9007199254740991,xt=17976931348623157e292,$t=NaN,it=4294967295,st=it-1,Pt=it>>>1,Tt=[["ary",V],["bind",T],["bindKey",A],["curry",D],["curryRight",z],["flip",N],["partial",B],["partialRight",Y],["rearg",tt]],at="[object Arguments]",gt="[object Array]",J="[object AsyncFunction]",ut="[object Boolean]",mt="[object Date]",kt="[object DOMException]",dt="[object Error]",S="[object Function]",M="[object GeneratorFunction]",h="[object Map]",F="[object Number]",j="[object Null]",E="[object Object]",O="[object Promise]",U="[object Proxy]",Q="[object RegExp]",X="[object Set]",G="[object String]",ot="[object Symbol]",_t="[object Undefined]",ht="[object WeakMap]",St="[object WeakSet]",Mt="[object ArrayBuffer]",Rt="[object DataView]",ne="[object Float32Array]",be="[object Float64Array]",_e="[object Int8Array]",Te="[object Int16Array]",re="[object Int32Array]",Sn="[object Uint8Array]",Se="[object Uint8ClampedArray]",xe="[object Uint16Array]",Hn="[object Uint32Array]",Yr=/\b__p \+= '';/g,Vo=/\b(__p \+=) '' \+/g,Ko=/(__e\(.*?\)|\b__t\)) \+\n'';/g,As=/&(?:amp|lt|gt|quot|#39);/g,dr=/[&<>"']/g,Jr=RegExp(As.source),xp=RegExp(dr.source),wp=/<%-([\s\S]+?)%>/g,kp=/<%([\s\S]+?)%>/g,gu=/<%=([\s\S]+?)%>/g,Cp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sp=/^\w*$/,Ep=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Go=/[\\^$.*+?()[\]{}|]/g,Ap=RegExp(Go.source),Zo=/^\s+/,Tp=/\s/,Op=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Rp=/\{\n\/\* \[wrapped with (.+)\] \*/,Ip=/,? & /,$p=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pp=/[()=,{}\[\]\/\s]/,Lp=/\\(\\)?/g,Mp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mu=/\w*$/,Bp=/^[-+]0x[0-9a-f]+$/i,Dp=/^0b[01]+$/i,zp=/^\[object .+?Constructor\]$/,Np=/^0o[0-7]+$/i,Up=/^(?:0|[1-9]\d*)$/,Fp=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,mi=/($^)/,jp=/['\n\r\u2028\u2029\\]/g,vi="\\ud800-\\udfff",Wp="\\u0300-\\u036f",qp="\\ufe20-\\ufe2f",Hp="\\u20d0-\\u20ff",vu=Wp+qp+Hp,_u="\\u2700-\\u27bf",yu="a-z\\xdf-\\xf6\\xf8-\\xff",Vp="\\xac\\xb1\\xd7\\xf7",Kp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Gp="\\u2000-\\u206f",Zp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bu="A-Z\\xc0-\\xd6\\xd8-\\xde",xu="\\ufe0e\\ufe0f",wu=Vp+Kp+Gp+Zp,Yo="['’]",Yp="["+vi+"]",ku="["+wu+"]",_i="["+vu+"]",Cu="\\d+",Jp="["+_u+"]",Su="["+yu+"]",Eu="[^"+vi+wu+Cu+_u+yu+bu+"]",Jo="\\ud83c[\\udffb-\\udfff]",Xp="(?:"+_i+"|"+Jo+")",Au="[^"+vi+"]",Xo="(?:\\ud83c[\\udde6-\\uddff]){2}",Qo="[\\ud800-\\udbff][\\udc00-\\udfff]",Xr="["+bu+"]",Tu="\\u200d",Ou="(?:"+Su+"|"+Eu+")",Qp="(?:"+Xr+"|"+Eu+")",Ru="(?:"+Yo+"(?:d|ll|m|re|s|t|ve))?",Iu="(?:"+Yo+"(?:D|LL|M|RE|S|T|VE))?",$u=Xp+"?",Pu="["+xu+"]?",t0="(?:"+Tu+"(?:"+[Au,Xo,Qo].join("|")+")"+Pu+$u+")*",e0="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",n0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Lu=Pu+$u+t0,r0="(?:"+[Jp,Xo,Qo].join("|")+")"+Lu,s0="(?:"+[Au+_i+"?",_i,Xo,Qo,Yp].join("|")+")",i0=RegExp(Yo,"g"),o0=RegExp(_i,"g"),ta=RegExp(Jo+"(?="+Jo+")|"+s0+Lu,"g"),a0=RegExp([Xr+"?"+Su+"+"+Ru+"(?="+[ku,Xr,"$"].join("|")+")",Qp+"+"+Iu+"(?="+[ku,Xr+Ou,"$"].join("|")+")",Xr+"?"+Ou+"+"+Ru,Xr+"+"+Iu,n0,e0,Cu,r0].join("|"),"g"),l0=RegExp("["+Tu+vi+vu+xu+"]"),u0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,c0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],f0=-1,ye={};ye[ne]=ye[be]=ye[_e]=ye[Te]=ye[re]=ye[Sn]=ye[Se]=ye[xe]=ye[Hn]=!0,ye[at]=ye[gt]=ye[Mt]=ye[ut]=ye[Rt]=ye[mt]=ye[dt]=ye[S]=ye[h]=ye[F]=ye[E]=ye[Q]=ye[X]=ye[G]=ye[ht]=!1;var me={};me[at]=me[gt]=me[Mt]=me[Rt]=me[ut]=me[mt]=me[ne]=me[be]=me[_e]=me[Te]=me[re]=me[h]=me[F]=me[E]=me[Q]=me[X]=me[G]=me[ot]=me[Sn]=me[Se]=me[xe]=me[Hn]=!0,me[dt]=me[S]=me[ht]=!1;var d0={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},h0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},p0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},g0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},m0=parseFloat,v0=parseInt,Mu=typeof ar=="object"&&ar&&ar.Object===Object&&ar,_0=typeof self=="object"&&self&&self.Object===Object&&self,Le=Mu||_0||Function("return this")(),ea=n&&!n.nodeType&&n,Pr=ea&&!0&&t&&!t.nodeType&&t,Bu=Pr&&Pr.exports===ea,na=Bu&&Mu.process,hn=function(){try{var et=Pr&&Pr.require&&Pr.require("util").types;return et||na&&na.binding&&na.binding("util")}catch{}}(),Du=hn&&hn.isArrayBuffer,zu=hn&&hn.isDate,Nu=hn&&hn.isMap,Uu=hn&&hn.isRegExp,Fu=hn&&hn.isSet,ju=hn&&hn.isTypedArray;function nn(et,vt,ct){switch(ct.length){case 0:return et.call(vt);case 1:return et.call(vt,ct[0]);case 2:return et.call(vt,ct[0],ct[1]);case 3:return et.call(vt,ct[0],ct[1],ct[2])}return et.apply(vt,ct)}function y0(et,vt,ct,It){for(var Wt=-1,se=et==null?0:et.length;++Wt<se;){var Ie=et[Wt];vt(It,Ie,ct(Ie),et)}return It}function pn(et,vt){for(var ct=-1,It=et==null?0:et.length;++ct<It&&vt(et[ct],ct,et)!==!1;);return et}function b0(et,vt){for(var ct=et==null?0:et.length;ct--&&vt(et[ct],ct,et)!==!1;);return et}function Wu(et,vt){for(var ct=-1,It=et==null?0:et.length;++ct<It;)if(!vt(et[ct],ct,et))return!1;return!0}function hr(et,vt){for(var ct=-1,It=et==null?0:et.length,Wt=0,se=[];++ct<It;){var Ie=et[ct];vt(Ie,ct,et)&&(se[Wt++]=Ie)}return se}function yi(et,vt){var ct=et==null?0:et.length;return!!ct&&Qr(et,vt,0)>-1}function ra(et,vt,ct){for(var It=-1,Wt=et==null?0:et.length;++It<Wt;)if(ct(vt,et[It]))return!0;return!1}function we(et,vt){for(var ct=-1,It=et==null?0:et.length,Wt=Array(It);++ct<It;)Wt[ct]=vt(et[ct],ct,et);return Wt}function pr(et,vt){for(var ct=-1,It=vt.length,Wt=et.length;++ct<It;)et[Wt+ct]=vt[ct];return et}function sa(et,vt,ct,It){var Wt=-1,se=et==null?0:et.length;for(It&&se&&(ct=et[++Wt]);++Wt<se;)ct=vt(ct,et[Wt],Wt,et);return ct}function x0(et,vt,ct,It){var Wt=et==null?0:et.length;for(It&&Wt&&(ct=et[--Wt]);Wt--;)ct=vt(ct,et[Wt],Wt,et);return ct}function ia(et,vt){for(var ct=-1,It=et==null?0:et.length;++ct<It;)if(vt(et[ct],ct,et))return!0;return!1}var w0=oa("length");function k0(et){return et.split("")}function C0(et){return et.match($p)||[]}function qu(et,vt,ct){var It;return ct(et,function(Wt,se,Ie){if(vt(Wt,se,Ie))return It=se,!1}),It}function bi(et,vt,ct,It){for(var Wt=et.length,se=ct+(It?1:-1);It?se--:++se<Wt;)if(vt(et[se],se,et))return se;return-1}function Qr(et,vt,ct){return vt===vt?B0(et,vt,ct):bi(et,Hu,ct)}function S0(et,vt,ct,It){for(var Wt=ct-1,se=et.length;++Wt<se;)if(It(et[Wt],vt))return Wt;return-1}function Hu(et){return et!==et}function Vu(et,vt){var ct=et==null?0:et.length;return ct?la(et,vt)/ct:$t}function oa(et){return function(vt){return vt==null?r:vt[et]}}function aa(et){return function(vt){return et==null?r:et[vt]}}function Ku(et,vt,ct,It,Wt){return Wt(et,function(se,Ie,de){ct=It?(It=!1,se):vt(ct,se,Ie,de)}),ct}function E0(et,vt){var ct=et.length;for(et.sort(vt);ct--;)et[ct]=et[ct].value;return et}function la(et,vt){for(var ct,It=-1,Wt=et.length;++It<Wt;){var se=vt(et[It]);se!==r&&(ct=ct===r?se:ct+se)}return ct}function ua(et,vt){for(var ct=-1,It=Array(et);++ct<et;)It[ct]=vt(ct);return It}function A0(et,vt){return we(vt,function(ct){return[ct,et[ct]]})}function Gu(et){return et&&et.slice(0,Xu(et)+1).replace(Zo,"")}function rn(et){return function(vt){return et(vt)}}function ca(et,vt){return we(vt,function(ct){return et[ct]})}function Ts(et,vt){return et.has(vt)}function Zu(et,vt){for(var ct=-1,It=et.length;++ct<It&&Qr(vt,et[ct],0)>-1;);return ct}function Yu(et,vt){for(var ct=et.length;ct--&&Qr(vt,et[ct],0)>-1;);return ct}function T0(et,vt){for(var ct=et.length,It=0;ct--;)et[ct]===vt&&++It;return It}var O0=aa(d0),R0=aa(h0);function I0(et){return"\\"+g0[et]}function $0(et,vt){return et==null?r:et[vt]}function ts(et){return l0.test(et)}function P0(et){return u0.test(et)}function L0(et){for(var vt,ct=[];!(vt=et.next()).done;)ct.push(vt.value);return ct}function fa(et){var vt=-1,ct=Array(et.size);return et.forEach(function(It,Wt){ct[++vt]=[Wt,It]}),ct}function Ju(et,vt){return function(ct){return et(vt(ct))}}function gr(et,vt){for(var ct=-1,It=et.length,Wt=0,se=[];++ct<It;){var Ie=et[ct];(Ie===vt||Ie===_)&&(et[ct]=_,se[Wt++]=ct)}return se}function xi(et){var vt=-1,ct=Array(et.size);return et.forEach(function(It){ct[++vt]=It}),ct}function M0(et){var vt=-1,ct=Array(et.size);return et.forEach(function(It){ct[++vt]=[It,It]}),ct}function B0(et,vt,ct){for(var It=ct-1,Wt=et.length;++It<Wt;)if(et[It]===vt)return It;return-1}function D0(et,vt,ct){for(var It=ct+1;It--;)if(et[It]===vt)return It;return It}function es(et){return ts(et)?N0(et):w0(et)}function En(et){return ts(et)?U0(et):k0(et)}function Xu(et){for(var vt=et.length;vt--&&Tp.test(et.charAt(vt)););return vt}var z0=aa(p0);function N0(et){for(var vt=ta.lastIndex=0;ta.test(et);)++vt;return vt}function U0(et){return et.match(ta)||[]}function F0(et){return et.match(a0)||[]}var j0=function et(vt){vt=vt==null?Le:ns.defaults(Le.Object(),vt,ns.pick(Le,c0));var ct=vt.Array,It=vt.Date,Wt=vt.Error,se=vt.Function,Ie=vt.Math,de=vt.Object,da=vt.RegExp,W0=vt.String,gn=vt.TypeError,wi=ct.prototype,q0=se.prototype,rs=de.prototype,ki=vt["__core-js_shared__"],Ci=q0.toString,ue=rs.hasOwnProperty,H0=0,Qu=function(){var e=/[^.]+$/.exec(ki&&ki.keys&&ki.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Si=rs.toString,V0=Ci.call(de),K0=Le._,G0=da("^"+Ci.call(ue).replace(Go,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ei=Bu?vt.Buffer:r,mr=vt.Symbol,Ai=vt.Uint8Array,tc=Ei?Ei.allocUnsafe:r,Ti=Ju(de.getPrototypeOf,de),ec=de.create,nc=rs.propertyIsEnumerable,Oi=wi.splice,rc=mr?mr.isConcatSpreadable:r,Os=mr?mr.iterator:r,Lr=mr?mr.toStringTag:r,Ri=function(){try{var e=Nr(de,"defineProperty");return e({},"",{}),e}catch{}}(),Z0=vt.clearTimeout!==Le.clearTimeout&&vt.clearTimeout,Y0=It&&It.now!==Le.Date.now&&It.now,J0=vt.setTimeout!==Le.setTimeout&&vt.setTimeout,Ii=Ie.ceil,$i=Ie.floor,ha=de.getOwnPropertySymbols,X0=Ei?Ei.isBuffer:r,sc=vt.isFinite,Q0=wi.join,tg=Ju(de.keys,de),$e=Ie.max,ze=Ie.min,eg=It.now,ng=vt.parseInt,ic=Ie.random,rg=wi.reverse,pa=Nr(vt,"DataView"),Rs=Nr(vt,"Map"),ga=Nr(vt,"Promise"),ss=Nr(vt,"Set"),Is=Nr(vt,"WeakMap"),$s=Nr(de,"create"),Pi=Is&&new Is,is={},sg=Ur(pa),ig=Ur(Rs),og=Ur(ga),ag=Ur(ss),lg=Ur(Is),Li=mr?mr.prototype:r,Ps=Li?Li.valueOf:r,oc=Li?Li.toString:r;function R(e){if(Ce(e)&&!Ht(e)&&!(e instanceof Jt)){if(e instanceof mn)return e;if(ue.call(e,"__wrapped__"))return lf(e)}return new mn(e)}var os=function(){function e(){}return function(s){if(!ke(s))return{};if(ec)return ec(s);e.prototype=s;var a=new e;return e.prototype=r,a}}();function Mi(){}function mn(e,s){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=r}R.templateSettings={escape:wp,evaluate:kp,interpolate:gu,variable:"",imports:{_:R}},R.prototype=Mi.prototype,R.prototype.constructor=R,mn.prototype=os(Mi.prototype),mn.prototype.constructor=mn;function Jt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=it,this.__views__=[]}function ug(){var e=new Jt(this.__wrapped__);return e.__actions__=Je(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Je(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Je(this.__views__),e}function cg(){if(this.__filtered__){var e=new Jt(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function fg(){var e=this.__wrapped__.value(),s=this.__dir__,a=Ht(e),p=s<0,w=a?e.length:0,P=km(0,w,this.__views__),q=P.start,Z=P.end,nt=Z-q,yt=p?Z:q-1,bt=this.__iteratees__,wt=bt.length,Ot=0,Lt=ze(nt,this.__takeCount__);if(!a||!p&&w==nt&&Lt==nt)return Rc(e,this.__actions__);var zt=[];t:for(;nt--&&Ot<Lt;){yt+=s;for(var Gt=-1,Nt=e[yt];++Gt<wt;){var Yt=bt[Gt],Qt=Yt.iteratee,an=Yt.type,Ve=Qt(Nt);if(an==rt)Nt=Ve;else if(!Ve){if(an==g)continue t;break t}}zt[Ot++]=Nt}return zt}Jt.prototype=os(Mi.prototype),Jt.prototype.constructor=Jt;function Mr(e){var s=-1,a=e==null?0:e.length;for(this.clear();++s<a;){var p=e[s];this.set(p[0],p[1])}}function dg(){this.__data__=$s?$s(null):{},this.size=0}function hg(e){var s=this.has(e)&&delete this.__data__[e];return this.size-=s?1:0,s}function pg(e){var s=this.__data__;if($s){var a=s[e];return a===d?r:a}return ue.call(s,e)?s[e]:r}function gg(e){var s=this.__data__;return $s?s[e]!==r:ue.call(s,e)}function mg(e,s){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=$s&&s===r?d:s,this}Mr.prototype.clear=dg,Mr.prototype.delete=hg,Mr.prototype.get=pg,Mr.prototype.has=gg,Mr.prototype.set=mg;function Vn(e){var s=-1,a=e==null?0:e.length;for(this.clear();++s<a;){var p=e[s];this.set(p[0],p[1])}}function vg(){this.__data__=[],this.size=0}function _g(e){var s=this.__data__,a=Bi(s,e);if(a<0)return!1;var p=s.length-1;return a==p?s.pop():Oi.call(s,a,1),--this.size,!0}function yg(e){var s=this.__data__,a=Bi(s,e);return a<0?r:s[a][1]}function bg(e){return Bi(this.__data__,e)>-1}function xg(e,s){var a=this.__data__,p=Bi(a,e);return p<0?(++this.size,a.push([e,s])):a[p][1]=s,this}Vn.prototype.clear=vg,Vn.prototype.delete=_g,Vn.prototype.get=yg,Vn.prototype.has=bg,Vn.prototype.set=xg;function Kn(e){var s=-1,a=e==null?0:e.length;for(this.clear();++s<a;){var p=e[s];this.set(p[0],p[1])}}function wg(){this.size=0,this.__data__={hash:new Mr,map:new(Rs||Vn),string:new Mr}}function kg(e){var s=Gi(this,e).delete(e);return this.size-=s?1:0,s}function Cg(e){return Gi(this,e).get(e)}function Sg(e){return Gi(this,e).has(e)}function Eg(e,s){var a=Gi(this,e),p=a.size;return a.set(e,s),this.size+=a.size==p?0:1,this}Kn.prototype.clear=wg,Kn.prototype.delete=kg,Kn.prototype.get=Cg,Kn.prototype.has=Sg,Kn.prototype.set=Eg;function Br(e){var s=-1,a=e==null?0:e.length;for(this.__data__=new Kn;++s<a;)this.add(e[s])}function Ag(e){return this.__data__.set(e,d),this}function Tg(e){return this.__data__.has(e)}Br.prototype.add=Br.prototype.push=Ag,Br.prototype.has=Tg;function An(e){var s=this.__data__=new Vn(e);this.size=s.size}function Og(){this.__data__=new Vn,this.size=0}function Rg(e){var s=this.__data__,a=s.delete(e);return this.size=s.size,a}function Ig(e){return this.__data__.get(e)}function $g(e){return this.__data__.has(e)}function Pg(e,s){var a=this.__data__;if(a instanceof Vn){var p=a.__data__;if(!Rs||p.length<o-1)return p.push([e,s]),this.size=++a.size,this;a=this.__data__=new Kn(p)}return a.set(e,s),this.size=a.size,this}An.prototype.clear=Og,An.prototype.delete=Rg,An.prototype.get=Ig,An.prototype.has=$g,An.prototype.set=Pg;function ac(e,s){var a=Ht(e),p=!a&&Fr(e),w=!a&&!p&&xr(e),P=!a&&!p&&!w&&cs(e),q=a||p||w||P,Z=q?ua(e.length,W0):[],nt=Z.length;for(var yt in e)(s||ue.call(e,yt))&&!(q&&(yt=="length"||w&&(yt=="offset"||yt=="parent")||P&&(yt=="buffer"||yt=="byteLength"||yt=="byteOffset")||Jn(yt,nt)))&&Z.push(yt);return Z}function lc(e){var s=e.length;return s?e[Ea(0,s-1)]:r}function Lg(e,s){return Zi(Je(e),Dr(s,0,e.length))}function Mg(e){return Zi(Je(e))}function ma(e,s,a){(a!==r&&!Tn(e[s],a)||a===r&&!(s in e))&&Gn(e,s,a)}function Ls(e,s,a){var p=e[s];(!(ue.call(e,s)&&Tn(p,a))||a===r&&!(s in e))&&Gn(e,s,a)}function Bi(e,s){for(var a=e.length;a--;)if(Tn(e[a][0],s))return a;return-1}function Bg(e,s,a,p){return vr(e,function(w,P,q){s(p,w,a(w),q)}),p}function uc(e,s){return e&&Mn(s,Pe(s),e)}function Dg(e,s){return e&&Mn(s,Qe(s),e)}function Gn(e,s,a){s=="__proto__"&&Ri?Ri(e,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[s]=a}function va(e,s){for(var a=-1,p=s.length,w=ct(p),P=e==null;++a<p;)w[a]=P?r:Ja(e,s[a]);return w}function Dr(e,s,a){return e===e&&(a!==r&&(e=e<=a?e:a),s!==r&&(e=e>=s?e:s)),e}function vn(e,s,a,p,w,P){var q,Z=s&m,nt=s&b,yt=s&v;if(a&&(q=w?a(e,p,w,P):a(e)),q!==r)return q;if(!ke(e))return e;var bt=Ht(e);if(bt){if(q=Sm(e),!Z)return Je(e,q)}else{var wt=Ne(e),Ot=wt==S||wt==M;if(xr(e))return Pc(e,Z);if(wt==E||wt==at||Ot&&!w){if(q=nt||Ot?{}:Xc(e),!Z)return nt?pm(e,Dg(q,e)):hm(e,uc(q,e))}else{if(!me[wt])return w?e:{};q=Em(e,wt,Z)}}P||(P=new An);var Lt=P.get(e);if(Lt)return Lt;P.set(e,q),Tf(e)?e.forEach(function(Nt){q.add(vn(Nt,s,a,Nt,e,P))}):Ef(e)&&e.forEach(function(Nt,Yt){q.set(Yt,vn(Nt,s,a,Yt,e,P))});var zt=yt?nt?Da:Ba:nt?Qe:Pe,Gt=bt?r:zt(e);return pn(Gt||e,function(Nt,Yt){Gt&&(Yt=Nt,Nt=e[Yt]),Ls(q,Yt,vn(Nt,s,a,Yt,e,P))}),q}function zg(e){var s=Pe(e);return function(a){return cc(a,e,s)}}function cc(e,s,a){var p=a.length;if(e==null)return!p;for(e=de(e);p--;){var w=a[p],P=s[w],q=e[w];if(q===r&&!(w in e)||!P(q))return!1}return!0}function fc(e,s,a){if(typeof e!="function")throw new gn(u);return Fs(function(){e.apply(r,a)},s)}function Ms(e,s,a,p){var w=-1,P=yi,q=!0,Z=e.length,nt=[],yt=s.length;if(!Z)return nt;a&&(s=we(s,rn(a))),p?(P=ra,q=!1):s.length>=o&&(P=Ts,q=!1,s=new Br(s));t:for(;++w<Z;){var bt=e[w],wt=a==null?bt:a(bt);if(bt=p||bt!==0?bt:0,q&&wt===wt){for(var Ot=yt;Ot--;)if(s[Ot]===wt)continue t;nt.push(bt)}else P(s,wt,p)||nt.push(bt)}return nt}var vr=zc(Ln),dc=zc(ya,!0);function Ng(e,s){var a=!0;return vr(e,function(p,w,P){return a=!!s(p,w,P),a}),a}function Di(e,s,a){for(var p=-1,w=e.length;++p<w;){var P=e[p],q=s(P);if(q!=null&&(Z===r?q===q&&!on(q):a(q,Z)))var Z=q,nt=P}return nt}function Ug(e,s,a,p){var w=e.length;for(a=Kt(a),a<0&&(a=-a>w?0:w+a),p=p===r||p>w?w:Kt(p),p<0&&(p+=w),p=a>p?0:Rf(p);a<p;)e[a++]=s;return e}function hc(e,s){var a=[];return vr(e,function(p,w,P){s(p,w,P)&&a.push(p)}),a}function Me(e,s,a,p,w){var P=-1,q=e.length;for(a||(a=Tm),w||(w=[]);++P<q;){var Z=e[P];s>0&&a(Z)?s>1?Me(Z,s-1,a,p,w):pr(w,Z):p||(w[w.length]=Z)}return w}var _a=Nc(),pc=Nc(!0);function Ln(e,s){return e&&_a(e,s,Pe)}function ya(e,s){return e&&pc(e,s,Pe)}function zi(e,s){return hr(s,function(a){return Xn(e[a])})}function zr(e,s){s=yr(s,e);for(var a=0,p=s.length;e!=null&&a<p;)e=e[Bn(s[a++])];return a&&a==p?e:r}function gc(e,s,a){var p=s(e);return Ht(e)?p:pr(p,a(e))}function qe(e){return e==null?e===r?_t:j:Lr&&Lr in de(e)?wm(e):Mm(e)}function ba(e,s){return e>s}function Fg(e,s){return e!=null&&ue.call(e,s)}function jg(e,s){return e!=null&&s in de(e)}function Wg(e,s,a){return e>=ze(s,a)&&e<$e(s,a)}function xa(e,s,a){for(var p=a?ra:yi,w=e[0].length,P=e.length,q=P,Z=ct(P),nt=1/0,yt=[];q--;){var bt=e[q];q&&s&&(bt=we(bt,rn(s))),nt=ze(bt.length,nt),Z[q]=!a&&(s||w>=120&&bt.length>=120)?new Br(q&&bt):r}bt=e[0];var wt=-1,Ot=Z[0];t:for(;++wt<w&&yt.length<nt;){var Lt=bt[wt],zt=s?s(Lt):Lt;if(Lt=a||Lt!==0?Lt:0,!(Ot?Ts(Ot,zt):p(yt,zt,a))){for(q=P;--q;){var Gt=Z[q];if(!(Gt?Ts(Gt,zt):p(e[q],zt,a)))continue t}Ot&&Ot.push(zt),yt.push(Lt)}}return yt}function qg(e,s,a,p){return Ln(e,function(w,P,q){s(p,a(w),P,q)}),p}function Bs(e,s,a){s=yr(s,e),e=nf(e,s);var p=e==null?e:e[Bn(yn(s))];return p==null?r:nn(p,e,a)}function mc(e){return Ce(e)&&qe(e)==at}function Hg(e){return Ce(e)&&qe(e)==Mt}function Vg(e){return Ce(e)&&qe(e)==mt}function Ds(e,s,a,p,w){return e===s?!0:e==null||s==null||!Ce(e)&&!Ce(s)?e!==e&&s!==s:Kg(e,s,a,p,Ds,w)}function Kg(e,s,a,p,w,P){var q=Ht(e),Z=Ht(s),nt=q?gt:Ne(e),yt=Z?gt:Ne(s);nt=nt==at?E:nt,yt=yt==at?E:yt;var bt=nt==E,wt=yt==E,Ot=nt==yt;if(Ot&&xr(e)){if(!xr(s))return!1;q=!0,bt=!1}if(Ot&&!bt)return P||(P=new An),q||cs(e)?Zc(e,s,a,p,w,P):bm(e,s,nt,a,p,w,P);if(!(a&C)){var Lt=bt&&ue.call(e,"__wrapped__"),zt=wt&&ue.call(s,"__wrapped__");if(Lt||zt){var Gt=Lt?e.value():e,Nt=zt?s.value():s;return P||(P=new An),w(Gt,Nt,a,p,P)}}return Ot?(P||(P=new An),xm(e,s,a,p,w,P)):!1}function Gg(e){return Ce(e)&&Ne(e)==h}function wa(e,s,a,p){var w=a.length,P=w,q=!p;if(e==null)return!P;for(e=de(e);w--;){var Z=a[w];if(q&&Z[2]?Z[1]!==e[Z[0]]:!(Z[0]in e))return!1}for(;++w<P;){Z=a[w];var nt=Z[0],yt=e[nt],bt=Z[1];if(q&&Z[2]){if(yt===r&&!(nt in e))return!1}else{var wt=new An;if(p)var Ot=p(yt,bt,nt,e,s,wt);if(!(Ot===r?Ds(bt,yt,C|x,p,wt):Ot))return!1}}return!0}function vc(e){if(!ke(e)||Rm(e))return!1;var s=Xn(e)?G0:zp;return s.test(Ur(e))}function Zg(e){return Ce(e)&&qe(e)==Q}function Yg(e){return Ce(e)&&Ne(e)==X}function Jg(e){return Ce(e)&&eo(e.length)&&!!ye[qe(e)]}function _c(e){return typeof e=="function"?e:e==null?tn:typeof e=="object"?Ht(e)?xc(e[0],e[1]):bc(e):Ff(e)}function ka(e){if(!Us(e))return tg(e);var s=[];for(var a in de(e))ue.call(e,a)&&a!="constructor"&&s.push(a);return s}function Xg(e){if(!ke(e))return Lm(e);var s=Us(e),a=[];for(var p in e)p=="constructor"&&(s||!ue.call(e,p))||a.push(p);return a}function Ca(e,s){return e<s}function yc(e,s){var a=-1,p=Xe(e)?ct(e.length):[];return vr(e,function(w,P,q){p[++a]=s(w,P,q)}),p}function bc(e){var s=Na(e);return s.length==1&&s[0][2]?tf(s[0][0],s[0][1]):function(a){return a===e||wa(a,e,s)}}function xc(e,s){return Fa(e)&&Qc(s)?tf(Bn(e),s):function(a){var p=Ja(a,e);return p===r&&p===s?Xa(a,e):Ds(s,p,C|x)}}function Ni(e,s,a,p,w){e!==s&&_a(s,function(P,q){if(w||(w=new An),ke(P))Qg(e,s,q,a,Ni,p,w);else{var Z=p?p(Wa(e,q),P,q+"",e,s,w):r;Z===r&&(Z=P),ma(e,q,Z)}},Qe)}function Qg(e,s,a,p,w,P,q){var Z=Wa(e,a),nt=Wa(s,a),yt=q.get(nt);if(yt){ma(e,a,yt);return}var bt=P?P(Z,nt,a+"",e,s,q):r,wt=bt===r;if(wt){var Ot=Ht(nt),Lt=!Ot&&xr(nt),zt=!Ot&&!Lt&&cs(nt);bt=nt,Ot||Lt||zt?Ht(Z)?bt=Z:Ee(Z)?bt=Je(Z):Lt?(wt=!1,bt=Pc(nt,!0)):zt?(wt=!1,bt=Lc(nt,!0)):bt=[]:js(nt)||Fr(nt)?(bt=Z,Fr(Z)?bt=If(Z):(!ke(Z)||Xn(Z))&&(bt=Xc(nt))):wt=!1}wt&&(q.set(nt,bt),w(bt,nt,p,P,q),q.delete(nt)),ma(e,a,bt)}function wc(e,s){var a=e.length;if(a)return s+=s<0?a:0,Jn(s,a)?e[s]:r}function kc(e,s,a){s.length?s=we(s,function(P){return Ht(P)?function(q){return zr(q,P.length===1?P[0]:P)}:P}):s=[tn];var p=-1;s=we(s,rn(Dt()));var w=yc(e,function(P,q,Z){var nt=we(s,function(yt){return yt(P)});return{criteria:nt,index:++p,value:P}});return E0(w,function(P,q){return dm(P,q,a)})}function tm(e,s){return Cc(e,s,function(a,p){return Xa(e,p)})}function Cc(e,s,a){for(var p=-1,w=s.length,P={};++p<w;){var q=s[p],Z=zr(e,q);a(Z,q)&&zs(P,yr(q,e),Z)}return P}function em(e){return function(s){return zr(s,e)}}function Sa(e,s,a,p){var w=p?S0:Qr,P=-1,q=s.length,Z=e;for(e===s&&(s=Je(s)),a&&(Z=we(e,rn(a)));++P<q;)for(var nt=0,yt=s[P],bt=a?a(yt):yt;(nt=w(Z,bt,nt,p))>-1;)Z!==e&&Oi.call(Z,nt,1),Oi.call(e,nt,1);return e}function Sc(e,s){for(var a=e?s.length:0,p=a-1;a--;){var w=s[a];if(a==p||w!==P){var P=w;Jn(w)?Oi.call(e,w,1):Oa(e,w)}}return e}function Ea(e,s){return e+$i(ic()*(s-e+1))}function nm(e,s,a,p){for(var w=-1,P=$e(Ii((s-e)/(a||1)),0),q=ct(P);P--;)q[p?P:++w]=e,e+=a;return q}function Aa(e,s){var a="";if(!e||s<1||s>At)return a;do s%2&&(a+=e),s=$i(s/2),s&&(e+=e);while(s);return a}function Zt(e,s){return qa(ef(e,s,tn),e+"")}function rm(e){return lc(fs(e))}function sm(e,s){var a=fs(e);return Zi(a,Dr(s,0,a.length))}function zs(e,s,a,p){if(!ke(e))return e;s=yr(s,e);for(var w=-1,P=s.length,q=P-1,Z=e;Z!=null&&++w<P;){var nt=Bn(s[w]),yt=a;if(nt==="__proto__"||nt==="constructor"||nt==="prototype")return e;if(w!=q){var bt=Z[nt];yt=p?p(bt,nt,Z):r,yt===r&&(yt=ke(bt)?bt:Jn(s[w+1])?[]:{})}Ls(Z,nt,yt),Z=Z[nt]}return e}var Ec=Pi?function(e,s){return Pi.set(e,s),e}:tn,im=Ri?function(e,s){return Ri(e,"toString",{configurable:!0,enumerable:!1,value:tl(s),writable:!0})}:tn;function om(e){return Zi(fs(e))}function _n(e,s,a){var p=-1,w=e.length;s<0&&(s=-s>w?0:w+s),a=a>w?w:a,a<0&&(a+=w),w=s>a?0:a-s>>>0,s>>>=0;for(var P=ct(w);++p<w;)P[p]=e[p+s];return P}function am(e,s){var a;return vr(e,function(p,w,P){return a=s(p,w,P),!a}),!!a}function Ui(e,s,a){var p=0,w=e==null?p:e.length;if(typeof s=="number"&&s===s&&w<=Pt){for(;p<w;){var P=p+w>>>1,q=e[P];q!==null&&!on(q)&&(a?q<=s:q<s)?p=P+1:w=P}return w}return Ta(e,s,tn,a)}function Ta(e,s,a,p){var w=0,P=e==null?0:e.length;if(P===0)return 0;s=a(s);for(var q=s!==s,Z=s===null,nt=on(s),yt=s===r;w<P;){var bt=$i((w+P)/2),wt=a(e[bt]),Ot=wt!==r,Lt=wt===null,zt=wt===wt,Gt=on(wt);if(q)var Nt=p||zt;else yt?Nt=zt&&(p||Ot):Z?Nt=zt&&Ot&&(p||!Lt):nt?Nt=zt&&Ot&&!Lt&&(p||!Gt):Lt||Gt?Nt=!1:Nt=p?wt<=s:wt<s;Nt?w=bt+1:P=bt}return ze(P,st)}function Ac(e,s){for(var a=-1,p=e.length,w=0,P=[];++a<p;){var q=e[a],Z=s?s(q):q;if(!a||!Tn(Z,nt)){var nt=Z;P[w++]=q===0?0:q}}return P}function Tc(e){return typeof e=="number"?e:on(e)?$t:+e}function sn(e){if(typeof e=="string")return e;if(Ht(e))return we(e,sn)+"";if(on(e))return oc?oc.call(e):"";var s=e+"";return s=="0"&&1/e==-pt?"-0":s}function _r(e,s,a){var p=-1,w=yi,P=e.length,q=!0,Z=[],nt=Z;if(a)q=!1,w=ra;else if(P>=o){var yt=s?null:_m(e);if(yt)return xi(yt);q=!1,w=Ts,nt=new Br}else nt=s?[]:Z;t:for(;++p<P;){var bt=e[p],wt=s?s(bt):bt;if(bt=a||bt!==0?bt:0,q&&wt===wt){for(var Ot=nt.length;Ot--;)if(nt[Ot]===wt)continue t;s&&nt.push(wt),Z.push(bt)}else w(nt,wt,a)||(nt!==Z&&nt.push(wt),Z.push(bt))}return Z}function Oa(e,s){return s=yr(s,e),e=nf(e,s),e==null||delete e[Bn(yn(s))]}function Oc(e,s,a,p){return zs(e,s,a(zr(e,s)),p)}function Fi(e,s,a,p){for(var w=e.length,P=p?w:-1;(p?P--:++P<w)&&s(e[P],P,e););return a?_n(e,p?0:P,p?P+1:w):_n(e,p?P+1:0,p?w:P)}function Rc(e,s){var a=e;return a instanceof Jt&&(a=a.value()),sa(s,function(p,w){return w.func.apply(w.thisArg,pr([p],w.args))},a)}function Ra(e,s,a){var p=e.length;if(p<2)return p?_r(e[0]):[];for(var w=-1,P=ct(p);++w<p;)for(var q=e[w],Z=-1;++Z<p;)Z!=w&&(P[w]=Ms(P[w]||q,e[Z],s,a));return _r(Me(P,1),s,a)}function Ic(e,s,a){for(var p=-1,w=e.length,P=s.length,q={};++p<w;){var Z=p<P?s[p]:r;a(q,e[p],Z)}return q}function Ia(e){return Ee(e)?e:[]}function $a(e){return typeof e=="function"?e:tn}function yr(e,s){return Ht(e)?e:Fa(e,s)?[e]:af(ie(e))}var lm=Zt;function br(e,s,a){var p=e.length;return a=a===r?p:a,!s&&a>=p?e:_n(e,s,a)}var $c=Z0||function(e){return Le.clearTimeout(e)};function Pc(e,s){if(s)return e.slice();var a=e.length,p=tc?tc(a):new e.constructor(a);return e.copy(p),p}function Pa(e){var s=new e.constructor(e.byteLength);return new Ai(s).set(new Ai(e)),s}function um(e,s){var a=s?Pa(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function cm(e){var s=new e.constructor(e.source,mu.exec(e));return s.lastIndex=e.lastIndex,s}function fm(e){return Ps?de(Ps.call(e)):{}}function Lc(e,s){var a=s?Pa(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function Mc(e,s){if(e!==s){var a=e!==r,p=e===null,w=e===e,P=on(e),q=s!==r,Z=s===null,nt=s===s,yt=on(s);if(!Z&&!yt&&!P&&e>s||P&&q&&nt&&!Z&&!yt||p&&q&&nt||!a&&nt||!w)return 1;if(!p&&!P&&!yt&&e<s||yt&&a&&w&&!p&&!P||Z&&a&&w||!q&&w||!nt)return-1}return 0}function dm(e,s,a){for(var p=-1,w=e.criteria,P=s.criteria,q=w.length,Z=a.length;++p<q;){var nt=Mc(w[p],P[p]);if(nt){if(p>=Z)return nt;var yt=a[p];return nt*(yt=="desc"?-1:1)}}return e.index-s.index}function Bc(e,s,a,p){for(var w=-1,P=e.length,q=a.length,Z=-1,nt=s.length,yt=$e(P-q,0),bt=ct(nt+yt),wt=!p;++Z<nt;)bt[Z]=s[Z];for(;++w<q;)(wt||w<P)&&(bt[a[w]]=e[w]);for(;yt--;)bt[Z++]=e[w++];return bt}function Dc(e,s,a,p){for(var w=-1,P=e.length,q=-1,Z=a.length,nt=-1,yt=s.length,bt=$e(P-Z,0),wt=ct(bt+yt),Ot=!p;++w<bt;)wt[w]=e[w];for(var Lt=w;++nt<yt;)wt[Lt+nt]=s[nt];for(;++q<Z;)(Ot||w<P)&&(wt[Lt+a[q]]=e[w++]);return wt}function Je(e,s){var a=-1,p=e.length;for(s||(s=ct(p));++a<p;)s[a]=e[a];return s}function Mn(e,s,a,p){var w=!a;a||(a={});for(var P=-1,q=s.length;++P<q;){var Z=s[P],nt=p?p(a[Z],e[Z],Z,a,e):r;nt===r&&(nt=e[Z]),w?Gn(a,Z,nt):Ls(a,Z,nt)}return a}function hm(e,s){return Mn(e,Ua(e),s)}function pm(e,s){return Mn(e,Yc(e),s)}function ji(e,s){return function(a,p){var w=Ht(a)?y0:Bg,P=s?s():{};return w(a,e,Dt(p,2),P)}}function as(e){return Zt(function(s,a){var p=-1,w=a.length,P=w>1?a[w-1]:r,q=w>2?a[2]:r;for(P=e.length>3&&typeof P=="function"?(w--,P):r,q&&He(a[0],a[1],q)&&(P=w<3?r:P,w=1),s=de(s);++p<w;){var Z=a[p];Z&&e(s,Z,p,P)}return s})}function zc(e,s){return function(a,p){if(a==null)return a;if(!Xe(a))return e(a,p);for(var w=a.length,P=s?w:-1,q=de(a);(s?P--:++P<w)&&p(q[P],P,q)!==!1;);return a}}function Nc(e){return function(s,a,p){for(var w=-1,P=de(s),q=p(s),Z=q.length;Z--;){var nt=q[e?Z:++w];if(a(P[nt],nt,P)===!1)break}return s}}function gm(e,s,a){var p=s&T,w=Ns(e);function P(){var q=this&&this!==Le&&this instanceof P?w:e;return q.apply(p?a:this,arguments)}return P}function Uc(e){return function(s){s=ie(s);var a=ts(s)?En(s):r,p=a?a[0]:s.charAt(0),w=a?br(a,1).join(""):s.slice(1);return p[e]()+w}}function ls(e){return function(s){return sa(Nf(zf(s).replace(i0,"")),e,"")}}function Ns(e){return function(){var s=arguments;switch(s.length){case 0:return new e;case 1:return new e(s[0]);case 2:return new e(s[0],s[1]);case 3:return new e(s[0],s[1],s[2]);case 4:return new e(s[0],s[1],s[2],s[3]);case 5:return new e(s[0],s[1],s[2],s[3],s[4]);case 6:return new e(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new e(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var a=os(e.prototype),p=e.apply(a,s);return ke(p)?p:a}}function mm(e,s,a){var p=Ns(e);function w(){for(var P=arguments.length,q=ct(P),Z=P,nt=us(w);Z--;)q[Z]=arguments[Z];var yt=P<3&&q[0]!==nt&&q[P-1]!==nt?[]:gr(q,nt);if(P-=yt.length,P<a)return Hc(e,s,Wi,w.placeholder,r,q,yt,r,r,a-P);var bt=this&&this!==Le&&this instanceof w?p:e;return nn(bt,this,q)}return w}function Fc(e){return function(s,a,p){var w=de(s);if(!Xe(s)){var P=Dt(a,3);s=Pe(s),a=function(Z){return P(w[Z],Z,w)}}var q=e(s,a,p);return q>-1?w[P?s[q]:q]:r}}function jc(e){return Yn(function(s){var a=s.length,p=a,w=mn.prototype.thru;for(e&&s.reverse();p--;){var P=s[p];if(typeof P!="function")throw new gn(u);if(w&&!q&&Ki(P)=="wrapper")var q=new mn([],!0)}for(p=q?p:a;++p<a;){P=s[p];var Z=Ki(P),nt=Z=="wrapper"?za(P):r;nt&&ja(nt[0])&&nt[1]==(V|D|B|tt)&&!nt[4].length&&nt[9]==1?q=q[Ki(nt[0])].apply(q,nt[3]):q=P.length==1&&ja(P)?q[Z]():q.thru(P)}return function(){var yt=arguments,bt=yt[0];if(q&&yt.length==1&&Ht(bt))return q.plant(bt).value();for(var wt=0,Ot=a?s[wt].apply(this,yt):bt;++wt<a;)Ot=s[wt].call(this,Ot);return Ot}})}function Wi(e,s,a,p,w,P,q,Z,nt,yt){var bt=s&V,wt=s&T,Ot=s&A,Lt=s&(D|z),zt=s&N,Gt=Ot?r:Ns(e);function Nt(){for(var Yt=arguments.length,Qt=ct(Yt),an=Yt;an--;)Qt[an]=arguments[an];if(Lt)var Ve=us(Nt),ln=T0(Qt,Ve);if(p&&(Qt=Bc(Qt,p,w,Lt)),P&&(Qt=Dc(Qt,P,q,Lt)),Yt-=ln,Lt&&Yt<yt){var Ae=gr(Qt,Ve);return Hc(e,s,Wi,Nt.placeholder,a,Qt,Ae,Z,nt,yt-Yt)}var On=wt?a:this,tr=Ot?On[e]:e;return Yt=Qt.length,Z?Qt=Bm(Qt,Z):zt&&Yt>1&&Qt.reverse(),bt&&nt<Yt&&(Qt.length=nt),this&&this!==Le&&this instanceof Nt&&(tr=Gt||Ns(tr)),tr.apply(On,Qt)}return Nt}function Wc(e,s){return function(a,p){return qg(a,e,s(p),{})}}function qi(e,s){return function(a,p){var w;if(a===r&&p===r)return s;if(a!==r&&(w=a),p!==r){if(w===r)return p;typeof a=="string"||typeof p=="string"?(a=sn(a),p=sn(p)):(a=Tc(a),p=Tc(p)),w=e(a,p)}return w}}function La(e){return Yn(function(s){return s=we(s,rn(Dt())),Zt(function(a){var p=this;return e(s,function(w){return nn(w,p,a)})})})}function Hi(e,s){s=s===r?" ":sn(s);var a=s.length;if(a<2)return a?Aa(s,e):s;var p=Aa(s,Ii(e/es(s)));return ts(s)?br(En(p),0,e).join(""):p.slice(0,e)}function vm(e,s,a,p){var w=s&T,P=Ns(e);function q(){for(var Z=-1,nt=arguments.length,yt=-1,bt=p.length,wt=ct(bt+nt),Ot=this&&this!==Le&&this instanceof q?P:e;++yt<bt;)wt[yt]=p[yt];for(;nt--;)wt[yt++]=arguments[++Z];return nn(Ot,w?a:this,wt)}return q}function qc(e){return function(s,a,p){return p&&typeof p!="number"&&He(s,a,p)&&(a=p=r),s=Qn(s),a===r?(a=s,s=0):a=Qn(a),p=p===r?s<a?1:-1:Qn(p),nm(s,a,p,e)}}function Vi(e){return function(s,a){return typeof s=="string"&&typeof a=="string"||(s=bn(s),a=bn(a)),e(s,a)}}function Hc(e,s,a,p,w,P,q,Z,nt,yt){var bt=s&D,wt=bt?q:r,Ot=bt?r:q,Lt=bt?P:r,zt=bt?r:P;s|=bt?B:Y,s&=~(bt?Y:B),s&L||(s&=-4);var Gt=[e,s,w,Lt,wt,zt,Ot,Z,nt,yt],Nt=a.apply(r,Gt);return ja(e)&&rf(Nt,Gt),Nt.placeholder=p,sf(Nt,e,s)}function Ma(e){var s=Ie[e];return function(a,p){if(a=bn(a),p=p==null?0:ze(Kt(p),292),p&&sc(a)){var w=(ie(a)+"e").split("e"),P=s(w[0]+"e"+(+w[1]+p));return w=(ie(P)+"e").split("e"),+(w[0]+"e"+(+w[1]-p))}return s(a)}}var _m=ss&&1/xi(new ss([,-0]))[1]==pt?function(e){return new ss(e)}:rl;function Vc(e){return function(s){var a=Ne(s);return a==h?fa(s):a==X?M0(s):A0(s,e(s))}}function Zn(e,s,a,p,w,P,q,Z){var nt=s&A;if(!nt&&typeof e!="function")throw new gn(u);var yt=p?p.length:0;if(yt||(s&=-97,p=w=r),q=q===r?q:$e(Kt(q),0),Z=Z===r?Z:Kt(Z),yt-=w?w.length:0,s&Y){var bt=p,wt=w;p=w=r}var Ot=nt?r:za(e),Lt=[e,s,a,p,w,bt,wt,P,q,Z];if(Ot&&Pm(Lt,Ot),e=Lt[0],s=Lt[1],a=Lt[2],p=Lt[3],w=Lt[4],Z=Lt[9]=Lt[9]===r?nt?0:e.length:$e(Lt[9]-yt,0),!Z&&s&(D|z)&&(s&=-25),!s||s==T)var zt=gm(e,s,a);else s==D||s==z?zt=mm(e,s,Z):(s==B||s==(T|B))&&!w.length?zt=vm(e,s,a,p):zt=Wi.apply(r,Lt);var Gt=Ot?Ec:rf;return sf(Gt(zt,Lt),e,s)}function Kc(e,s,a,p){return e===r||Tn(e,rs[a])&&!ue.call(p,a)?s:e}function Gc(e,s,a,p,w,P){return ke(e)&&ke(s)&&(P.set(s,e),Ni(e,s,r,Gc,P),P.delete(s)),e}function ym(e){return js(e)?r:e}function Zc(e,s,a,p,w,P){var q=a&C,Z=e.length,nt=s.length;if(Z!=nt&&!(q&&nt>Z))return!1;var yt=P.get(e),bt=P.get(s);if(yt&&bt)return yt==s&&bt==e;var wt=-1,Ot=!0,Lt=a&x?new Br:r;for(P.set(e,s),P.set(s,e);++wt<Z;){var zt=e[wt],Gt=s[wt];if(p)var Nt=q?p(Gt,zt,wt,s,e,P):p(zt,Gt,wt,e,s,P);if(Nt!==r){if(Nt)continue;Ot=!1;break}if(Lt){if(!ia(s,function(Yt,Qt){if(!Ts(Lt,Qt)&&(zt===Yt||w(zt,Yt,a,p,P)))return Lt.push(Qt)})){Ot=!1;break}}else if(!(zt===Gt||w(zt,Gt,a,p,P))){Ot=!1;break}}return P.delete(e),P.delete(s),Ot}function bm(e,s,a,p,w,P,q){switch(a){case Rt:if(e.byteLength!=s.byteLength||e.byteOffset!=s.byteOffset)return!1;e=e.buffer,s=s.buffer;case Mt:return!(e.byteLength!=s.byteLength||!P(new Ai(e),new Ai(s)));case ut:case mt:case F:return Tn(+e,+s);case dt:return e.name==s.name&&e.message==s.message;case Q:case G:return e==s+"";case h:var Z=fa;case X:var nt=p&C;if(Z||(Z=xi),e.size!=s.size&&!nt)return!1;var yt=q.get(e);if(yt)return yt==s;p|=x,q.set(e,s);var bt=Zc(Z(e),Z(s),p,w,P,q);return q.delete(e),bt;case ot:if(Ps)return Ps.call(e)==Ps.call(s)}return!1}function xm(e,s,a,p,w,P){var q=a&C,Z=Ba(e),nt=Z.length,yt=Ba(s),bt=yt.length;if(nt!=bt&&!q)return!1;for(var wt=nt;wt--;){var Ot=Z[wt];if(!(q?Ot in s:ue.call(s,Ot)))return!1}var Lt=P.get(e),zt=P.get(s);if(Lt&&zt)return Lt==s&&zt==e;var Gt=!0;P.set(e,s),P.set(s,e);for(var Nt=q;++wt<nt;){Ot=Z[wt];var Yt=e[Ot],Qt=s[Ot];if(p)var an=q?p(Qt,Yt,Ot,s,e,P):p(Yt,Qt,Ot,e,s,P);if(!(an===r?Yt===Qt||w(Yt,Qt,a,p,P):an)){Gt=!1;break}Nt||(Nt=Ot=="constructor")}if(Gt&&!Nt){var Ve=e.constructor,ln=s.constructor;Ve!=ln&&"constructor"in e&&"constructor"in s&&!(typeof Ve=="function"&&Ve instanceof Ve&&typeof ln=="function"&&ln instanceof ln)&&(Gt=!1)}return P.delete(e),P.delete(s),Gt}function Yn(e){return qa(ef(e,r,ff),e+"")}function Ba(e){return gc(e,Pe,Ua)}function Da(e){return gc(e,Qe,Yc)}var za=Pi?function(e){return Pi.get(e)}:rl;function Ki(e){for(var s=e.name+"",a=is[s],p=ue.call(is,s)?a.length:0;p--;){var w=a[p],P=w.func;if(P==null||P==e)return w.name}return s}function us(e){var s=ue.call(R,"placeholder")?R:e;return s.placeholder}function Dt(){var e=R.iteratee||el;return e=e===el?_c:e,arguments.length?e(arguments[0],arguments[1]):e}function Gi(e,s){var a=e.__data__;return Om(s)?a[typeof s=="string"?"string":"hash"]:a.map}function Na(e){for(var s=Pe(e),a=s.length;a--;){var p=s[a],w=e[p];s[a]=[p,w,Qc(w)]}return s}function Nr(e,s){var a=$0(e,s);return vc(a)?a:r}function wm(e){var s=ue.call(e,Lr),a=e[Lr];try{e[Lr]=r;var p=!0}catch{}var w=Si.call(e);return p&&(s?e[Lr]=a:delete e[Lr]),w}var Ua=ha?function(e){return e==null?[]:(e=de(e),hr(ha(e),function(s){return nc.call(e,s)}))}:sl,Yc=ha?function(e){for(var s=[];e;)pr(s,Ua(e)),e=Ti(e);return s}:sl,Ne=qe;(pa&&Ne(new pa(new ArrayBuffer(1)))!=Rt||Rs&&Ne(new Rs)!=h||ga&&Ne(ga.resolve())!=O||ss&&Ne(new ss)!=X||Is&&Ne(new Is)!=ht)&&(Ne=function(e){var s=qe(e),a=s==E?e.constructor:r,p=a?Ur(a):"";if(p)switch(p){case sg:return Rt;case ig:return h;case og:return O;case ag:return X;case lg:return ht}return s});function km(e,s,a){for(var p=-1,w=a.length;++p<w;){var P=a[p],q=P.size;switch(P.type){case"drop":e+=q;break;case"dropRight":s-=q;break;case"take":s=ze(s,e+q);break;case"takeRight":e=$e(e,s-q);break}}return{start:e,end:s}}function Cm(e){var s=e.match(Rp);return s?s[1].split(Ip):[]}function Jc(e,s,a){s=yr(s,e);for(var p=-1,w=s.length,P=!1;++p<w;){var q=Bn(s[p]);if(!(P=e!=null&&a(e,q)))break;e=e[q]}return P||++p!=w?P:(w=e==null?0:e.length,!!w&&eo(w)&&Jn(q,w)&&(Ht(e)||Fr(e)))}function Sm(e){var s=e.length,a=new e.constructor(s);return s&&typeof e[0]=="string"&&ue.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function Xc(e){return typeof e.constructor=="function"&&!Us(e)?os(Ti(e)):{}}function Em(e,s,a){var p=e.constructor;switch(s){case Mt:return Pa(e);case ut:case mt:return new p(+e);case Rt:return um(e,a);case ne:case be:case _e:case Te:case re:case Sn:case Se:case xe:case Hn:return Lc(e,a);case h:return new p;case F:case G:return new p(e);case Q:return cm(e);case X:return new p;case ot:return fm(e)}}function Am(e,s){var a=s.length;if(!a)return e;var p=a-1;return s[p]=(a>1?"& ":"")+s[p],s=s.join(a>2?", ":" "),e.replace(Op,`{
/* [wrapped with `+s+`] */
`)}function Tm(e){return Ht(e)||Fr(e)||!!(rc&&e&&e[rc])}function Jn(e,s){var a=typeof e;return s=s??At,!!s&&(a=="number"||a!="symbol"&&Up.test(e))&&e>-1&&e%1==0&&e<s}function He(e,s,a){if(!ke(a))return!1;var p=typeof s;return(p=="number"?Xe(a)&&Jn(s,a.length):p=="string"&&s in a)?Tn(a[s],e):!1}function Fa(e,s){if(Ht(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||on(e)?!0:Sp.test(e)||!Cp.test(e)||s!=null&&e in de(s)}function Om(e){var s=typeof e;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?e!=="__proto__":e===null}function ja(e){var s=Ki(e),a=R[s];if(typeof a!="function"||!(s in Jt.prototype))return!1;if(e===a)return!0;var p=za(a);return!!p&&e===p[0]}function Rm(e){return!!Qu&&Qu in e}var Im=ki?Xn:il;function Us(e){var s=e&&e.constructor,a=typeof s=="function"&&s.prototype||rs;return e===a}function Qc(e){return e===e&&!ke(e)}function tf(e,s){return function(a){return a==null?!1:a[e]===s&&(s!==r||e in de(a))}}function $m(e){var s=Qi(e,function(p){return a.size===y&&a.clear(),p}),a=s.cache;return s}function Pm(e,s){var a=e[1],p=s[1],w=a|p,P=w<(T|A|V),q=p==V&&a==D||p==V&&a==tt&&e[7].length<=s[8]||p==(V|tt)&&s[7].length<=s[8]&&a==D;if(!(P||q))return e;p&T&&(e[2]=s[2],w|=a&T?0:L);var Z=s[3];if(Z){var nt=e[3];e[3]=nt?Bc(nt,Z,s[4]):Z,e[4]=nt?gr(e[3],_):s[4]}return Z=s[5],Z&&(nt=e[5],e[5]=nt?Dc(nt,Z,s[6]):Z,e[6]=nt?gr(e[5],_):s[6]),Z=s[7],Z&&(e[7]=Z),p&V&&(e[8]=e[8]==null?s[8]:ze(e[8],s[8])),e[9]==null&&(e[9]=s[9]),e[0]=s[0],e[1]=w,e}function Lm(e){var s=[];if(e!=null)for(var a in de(e))s.push(a);return s}function Mm(e){return Si.call(e)}function ef(e,s,a){return s=$e(s===r?e.length-1:s,0),function(){for(var p=arguments,w=-1,P=$e(p.length-s,0),q=ct(P);++w<P;)q[w]=p[s+w];w=-1;for(var Z=ct(s+1);++w<s;)Z[w]=p[w];return Z[s]=a(q),nn(e,this,Z)}}function nf(e,s){return s.length<2?e:zr(e,_n(s,0,-1))}function Bm(e,s){for(var a=e.length,p=ze(s.length,a),w=Je(e);p--;){var P=s[p];e[p]=Jn(P,a)?w[P]:r}return e}function Wa(e,s){if(!(s==="constructor"&&typeof e[s]=="function")&&s!="__proto__")return e[s]}var rf=of(Ec),Fs=J0||function(e,s){return Le.setTimeout(e,s)},qa=of(im);function sf(e,s,a){var p=s+"";return qa(e,Am(p,Dm(Cm(p),a)))}function of(e){var s=0,a=0;return function(){var p=eg(),w=$-(p-a);if(a=p,w>0){if(++s>=k)return arguments[0]}else s=0;return e.apply(r,arguments)}}function Zi(e,s){var a=-1,p=e.length,w=p-1;for(s=s===r?p:s;++a<s;){var P=Ea(a,w),q=e[P];e[P]=e[a],e[a]=q}return e.length=s,e}var af=$m(function(e){var s=[];return e.charCodeAt(0)===46&&s.push(""),e.replace(Ep,function(a,p,w,P){s.push(w?P.replace(Lp,"$1"):p||a)}),s});function Bn(e){if(typeof e=="string"||on(e))return e;var s=e+"";return s=="0"&&1/e==-pt?"-0":s}function Ur(e){if(e!=null){try{return Ci.call(e)}catch{}try{return e+""}catch{}}return""}function Dm(e,s){return pn(Tt,function(a){var p="_."+a[0];s&a[1]&&!yi(e,p)&&e.push(p)}),e.sort()}function lf(e){if(e instanceof Jt)return e.clone();var s=new mn(e.__wrapped__,e.__chain__);return s.__actions__=Je(e.__actions__),s.__index__=e.__index__,s.__values__=e.__values__,s}function zm(e,s,a){(a?He(e,s,a):s===r)?s=1:s=$e(Kt(s),0);var p=e==null?0:e.length;if(!p||s<1)return[];for(var w=0,P=0,q=ct(Ii(p/s));w<p;)q[P++]=_n(e,w,w+=s);return q}function Nm(e){for(var s=-1,a=e==null?0:e.length,p=0,w=[];++s<a;){var P=e[s];P&&(w[p++]=P)}return w}function Um(){var e=arguments.length;if(!e)return[];for(var s=ct(e-1),a=arguments[0],p=e;p--;)s[p-1]=arguments[p];return pr(Ht(a)?Je(a):[a],Me(s,1))}var Fm=Zt(function(e,s){return Ee(e)?Ms(e,Me(s,1,Ee,!0)):[]}),jm=Zt(function(e,s){var a=yn(s);return Ee(a)&&(a=r),Ee(e)?Ms(e,Me(s,1,Ee,!0),Dt(a,2)):[]}),Wm=Zt(function(e,s){var a=yn(s);return Ee(a)&&(a=r),Ee(e)?Ms(e,Me(s,1,Ee,!0),r,a):[]});function qm(e,s,a){var p=e==null?0:e.length;return p?(s=a||s===r?1:Kt(s),_n(e,s<0?0:s,p)):[]}function Hm(e,s,a){var p=e==null?0:e.length;return p?(s=a||s===r?1:Kt(s),s=p-s,_n(e,0,s<0?0:s)):[]}function Vm(e,s){return e&&e.length?Fi(e,Dt(s,3),!0,!0):[]}function Km(e,s){return e&&e.length?Fi(e,Dt(s,3),!0):[]}function Gm(e,s,a,p){var w=e==null?0:e.length;return w?(a&&typeof a!="number"&&He(e,s,a)&&(a=0,p=w),Ug(e,s,a,p)):[]}function uf(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var w=a==null?0:Kt(a);return w<0&&(w=$e(p+w,0)),bi(e,Dt(s,3),w)}function cf(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var w=p-1;return a!==r&&(w=Kt(a),w=a<0?$e(p+w,0):ze(w,p-1)),bi(e,Dt(s,3),w,!0)}function ff(e){var s=e==null?0:e.length;return s?Me(e,1):[]}function Zm(e){var s=e==null?0:e.length;return s?Me(e,pt):[]}function Ym(e,s){var a=e==null?0:e.length;return a?(s=s===r?1:Kt(s),Me(e,s)):[]}function Jm(e){for(var s=-1,a=e==null?0:e.length,p={};++s<a;){var w=e[s];p[w[0]]=w[1]}return p}function df(e){return e&&e.length?e[0]:r}function Xm(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var w=a==null?0:Kt(a);return w<0&&(w=$e(p+w,0)),Qr(e,s,w)}function Qm(e){var s=e==null?0:e.length;return s?_n(e,0,-1):[]}var t1=Zt(function(e){var s=we(e,Ia);return s.length&&s[0]===e[0]?xa(s):[]}),e1=Zt(function(e){var s=yn(e),a=we(e,Ia);return s===yn(a)?s=r:a.pop(),a.length&&a[0]===e[0]?xa(a,Dt(s,2)):[]}),n1=Zt(function(e){var s=yn(e),a=we(e,Ia);return s=typeof s=="function"?s:r,s&&a.pop(),a.length&&a[0]===e[0]?xa(a,r,s):[]});function r1(e,s){return e==null?"":Q0.call(e,s)}function yn(e){var s=e==null?0:e.length;return s?e[s-1]:r}function s1(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var w=p;return a!==r&&(w=Kt(a),w=w<0?$e(p+w,0):ze(w,p-1)),s===s?D0(e,s,w):bi(e,Hu,w,!0)}function i1(e,s){return e&&e.length?wc(e,Kt(s)):r}var o1=Zt(hf);function hf(e,s){return e&&e.length&&s&&s.length?Sa(e,s):e}function a1(e,s,a){return e&&e.length&&s&&s.length?Sa(e,s,Dt(a,2)):e}function l1(e,s,a){return e&&e.length&&s&&s.length?Sa(e,s,r,a):e}var u1=Yn(function(e,s){var a=e==null?0:e.length,p=va(e,s);return Sc(e,we(s,function(w){return Jn(w,a)?+w:w}).sort(Mc)),p});function c1(e,s){var a=[];if(!(e&&e.length))return a;var p=-1,w=[],P=e.length;for(s=Dt(s,3);++p<P;){var q=e[p];s(q,p,e)&&(a.push(q),w.push(p))}return Sc(e,w),a}function Ha(e){return e==null?e:rg.call(e)}function f1(e,s,a){var p=e==null?0:e.length;return p?(a&&typeof a!="number"&&He(e,s,a)?(s=0,a=p):(s=s==null?0:Kt(s),a=a===r?p:Kt(a)),_n(e,s,a)):[]}function d1(e,s){return Ui(e,s)}function h1(e,s,a){return Ta(e,s,Dt(a,2))}function p1(e,s){var a=e==null?0:e.length;if(a){var p=Ui(e,s);if(p<a&&Tn(e[p],s))return p}return-1}function g1(e,s){return Ui(e,s,!0)}function m1(e,s,a){return Ta(e,s,Dt(a,2),!0)}function v1(e,s){var a=e==null?0:e.length;if(a){var p=Ui(e,s,!0)-1;if(Tn(e[p],s))return p}return-1}function _1(e){return e&&e.length?Ac(e):[]}function y1(e,s){return e&&e.length?Ac(e,Dt(s,2)):[]}function b1(e){var s=e==null?0:e.length;return s?_n(e,1,s):[]}function x1(e,s,a){return e&&e.length?(s=a||s===r?1:Kt(s),_n(e,0,s<0?0:s)):[]}function w1(e,s,a){var p=e==null?0:e.length;return p?(s=a||s===r?1:Kt(s),s=p-s,_n(e,s<0?0:s,p)):[]}function k1(e,s){return e&&e.length?Fi(e,Dt(s,3),!1,!0):[]}function C1(e,s){return e&&e.length?Fi(e,Dt(s,3)):[]}var S1=Zt(function(e){return _r(Me(e,1,Ee,!0))}),E1=Zt(function(e){var s=yn(e);return Ee(s)&&(s=r),_r(Me(e,1,Ee,!0),Dt(s,2))}),A1=Zt(function(e){var s=yn(e);return s=typeof s=="function"?s:r,_r(Me(e,1,Ee,!0),r,s)});function T1(e){return e&&e.length?_r(e):[]}function O1(e,s){return e&&e.length?_r(e,Dt(s,2)):[]}function R1(e,s){return s=typeof s=="function"?s:r,e&&e.length?_r(e,r,s):[]}function Va(e){if(!(e&&e.length))return[];var s=0;return e=hr(e,function(a){if(Ee(a))return s=$e(a.length,s),!0}),ua(s,function(a){return we(e,oa(a))})}function pf(e,s){if(!(e&&e.length))return[];var a=Va(e);return s==null?a:we(a,function(p){return nn(s,r,p)})}var I1=Zt(function(e,s){return Ee(e)?Ms(e,s):[]}),$1=Zt(function(e){return Ra(hr(e,Ee))}),P1=Zt(function(e){var s=yn(e);return Ee(s)&&(s=r),Ra(hr(e,Ee),Dt(s,2))}),L1=Zt(function(e){var s=yn(e);return s=typeof s=="function"?s:r,Ra(hr(e,Ee),r,s)}),M1=Zt(Va);function B1(e,s){return Ic(e||[],s||[],Ls)}function D1(e,s){return Ic(e||[],s||[],zs)}var z1=Zt(function(e){var s=e.length,a=s>1?e[s-1]:r;return a=typeof a=="function"?(e.pop(),a):r,pf(e,a)});function gf(e){var s=R(e);return s.__chain__=!0,s}function N1(e,s){return s(e),e}function Yi(e,s){return s(e)}var U1=Yn(function(e){var s=e.length,a=s?e[0]:0,p=this.__wrapped__,w=function(P){return va(P,e)};return s>1||this.__actions__.length||!(p instanceof Jt)||!Jn(a)?this.thru(w):(p=p.slice(a,+a+(s?1:0)),p.__actions__.push({func:Yi,args:[w],thisArg:r}),new mn(p,this.__chain__).thru(function(P){return s&&!P.length&&P.push(r),P}))});function F1(){return gf(this)}function j1(){return new mn(this.value(),this.__chain__)}function W1(){this.__values__===r&&(this.__values__=Of(this.value()));var e=this.__index__>=this.__values__.length,s=e?r:this.__values__[this.__index__++];return{done:e,value:s}}function q1(){return this}function H1(e){for(var s,a=this;a instanceof Mi;){var p=lf(a);p.__index__=0,p.__values__=r,s?w.__wrapped__=p:s=p;var w=p;a=a.__wrapped__}return w.__wrapped__=e,s}function V1(){var e=this.__wrapped__;if(e instanceof Jt){var s=e;return this.__actions__.length&&(s=new Jt(this)),s=s.reverse(),s.__actions__.push({func:Yi,args:[Ha],thisArg:r}),new mn(s,this.__chain__)}return this.thru(Ha)}function K1(){return Rc(this.__wrapped__,this.__actions__)}var G1=ji(function(e,s,a){ue.call(e,a)?++e[a]:Gn(e,a,1)});function Z1(e,s,a){var p=Ht(e)?Wu:Ng;return a&&He(e,s,a)&&(s=r),p(e,Dt(s,3))}function Y1(e,s){var a=Ht(e)?hr:hc;return a(e,Dt(s,3))}var J1=Fc(uf),X1=Fc(cf);function Q1(e,s){return Me(Ji(e,s),1)}function tv(e,s){return Me(Ji(e,s),pt)}function ev(e,s,a){return a=a===r?1:Kt(a),Me(Ji(e,s),a)}function mf(e,s){var a=Ht(e)?pn:vr;return a(e,Dt(s,3))}function vf(e,s){var a=Ht(e)?b0:dc;return a(e,Dt(s,3))}var nv=ji(function(e,s,a){ue.call(e,a)?e[a].push(s):Gn(e,a,[s])});function rv(e,s,a,p){e=Xe(e)?e:fs(e),a=a&&!p?Kt(a):0;var w=e.length;return a<0&&(a=$e(w+a,0)),no(e)?a<=w&&e.indexOf(s,a)>-1:!!w&&Qr(e,s,a)>-1}var sv=Zt(function(e,s,a){var p=-1,w=typeof s=="function",P=Xe(e)?ct(e.length):[];return vr(e,function(q){P[++p]=w?nn(s,q,a):Bs(q,s,a)}),P}),iv=ji(function(e,s,a){Gn(e,a,s)});function Ji(e,s){var a=Ht(e)?we:yc;return a(e,Dt(s,3))}function ov(e,s,a,p){return e==null?[]:(Ht(s)||(s=s==null?[]:[s]),a=p?r:a,Ht(a)||(a=a==null?[]:[a]),kc(e,s,a))}var av=ji(function(e,s,a){e[a?0:1].push(s)},function(){return[[],[]]});function lv(e,s,a){var p=Ht(e)?sa:Ku,w=arguments.length<3;return p(e,Dt(s,4),a,w,vr)}function uv(e,s,a){var p=Ht(e)?x0:Ku,w=arguments.length<3;return p(e,Dt(s,4),a,w,dc)}function cv(e,s){var a=Ht(e)?hr:hc;return a(e,to(Dt(s,3)))}function fv(e){var s=Ht(e)?lc:rm;return s(e)}function dv(e,s,a){(a?He(e,s,a):s===r)?s=1:s=Kt(s);var p=Ht(e)?Lg:sm;return p(e,s)}function hv(e){var s=Ht(e)?Mg:om;return s(e)}function pv(e){if(e==null)return 0;if(Xe(e))return no(e)?es(e):e.length;var s=Ne(e);return s==h||s==X?e.size:ka(e).length}function gv(e,s,a){var p=Ht(e)?ia:am;return a&&He(e,s,a)&&(s=r),p(e,Dt(s,3))}var mv=Zt(function(e,s){if(e==null)return[];var a=s.length;return a>1&&He(e,s[0],s[1])?s=[]:a>2&&He(s[0],s[1],s[2])&&(s=[s[0]]),kc(e,Me(s,1),[])}),Xi=Y0||function(){return Le.Date.now()};function vv(e,s){if(typeof s!="function")throw new gn(u);return e=Kt(e),function(){if(--e<1)return s.apply(this,arguments)}}function _f(e,s,a){return s=a?r:s,s=e&&s==null?e.length:s,Zn(e,V,r,r,r,r,s)}function yf(e,s){var a;if(typeof s!="function")throw new gn(u);return e=Kt(e),function(){return--e>0&&(a=s.apply(this,arguments)),e<=1&&(s=r),a}}var Ka=Zt(function(e,s,a){var p=T;if(a.length){var w=gr(a,us(Ka));p|=B}return Zn(e,p,s,a,w)}),bf=Zt(function(e,s,a){var p=T|A;if(a.length){var w=gr(a,us(bf));p|=B}return Zn(s,p,e,a,w)});function xf(e,s,a){s=a?r:s;var p=Zn(e,D,r,r,r,r,r,s);return p.placeholder=xf.placeholder,p}function wf(e,s,a){s=a?r:s;var p=Zn(e,z,r,r,r,r,r,s);return p.placeholder=wf.placeholder,p}function kf(e,s,a){var p,w,P,q,Z,nt,yt=0,bt=!1,wt=!1,Ot=!0;if(typeof e!="function")throw new gn(u);s=bn(s)||0,ke(a)&&(bt=!!a.leading,wt="maxWait"in a,P=wt?$e(bn(a.maxWait)||0,s):P,Ot="trailing"in a?!!a.trailing:Ot);function Lt(Ae){var On=p,tr=w;return p=w=r,yt=Ae,q=e.apply(tr,On),q}function zt(Ae){return yt=Ae,Z=Fs(Yt,s),bt?Lt(Ae):q}function Gt(Ae){var On=Ae-nt,tr=Ae-yt,jf=s-On;return wt?ze(jf,P-tr):jf}function Nt(Ae){var On=Ae-nt,tr=Ae-yt;return nt===r||On>=s||On<0||wt&&tr>=P}function Yt(){var Ae=Xi();if(Nt(Ae))return Qt(Ae);Z=Fs(Yt,Gt(Ae))}function Qt(Ae){return Z=r,Ot&&p?Lt(Ae):(p=w=r,q)}function an(){Z!==r&&$c(Z),yt=0,p=nt=w=Z=r}function Ve(){return Z===r?q:Qt(Xi())}function ln(){var Ae=Xi(),On=Nt(Ae);if(p=arguments,w=this,nt=Ae,On){if(Z===r)return zt(nt);if(wt)return $c(Z),Z=Fs(Yt,s),Lt(nt)}return Z===r&&(Z=Fs(Yt,s)),q}return ln.cancel=an,ln.flush=Ve,ln}var _v=Zt(function(e,s){return fc(e,1,s)}),yv=Zt(function(e,s,a){return fc(e,bn(s)||0,a)});function bv(e){return Zn(e,N)}function Qi(e,s){if(typeof e!="function"||s!=null&&typeof s!="function")throw new gn(u);var a=function(){var p=arguments,w=s?s.apply(this,p):p[0],P=a.cache;if(P.has(w))return P.get(w);var q=e.apply(this,p);return a.cache=P.set(w,q)||P,q};return a.cache=new(Qi.Cache||Kn),a}Qi.Cache=Kn;function to(e){if(typeof e!="function")throw new gn(u);return function(){var s=arguments;switch(s.length){case 0:return!e.call(this);case 1:return!e.call(this,s[0]);case 2:return!e.call(this,s[0],s[1]);case 3:return!e.call(this,s[0],s[1],s[2])}return!e.apply(this,s)}}function xv(e){return yf(2,e)}var wv=lm(function(e,s){s=s.length==1&&Ht(s[0])?we(s[0],rn(Dt())):we(Me(s,1),rn(Dt()));var a=s.length;return Zt(function(p){for(var w=-1,P=ze(p.length,a);++w<P;)p[w]=s[w].call(this,p[w]);return nn(e,this,p)})}),Ga=Zt(function(e,s){var a=gr(s,us(Ga));return Zn(e,B,r,s,a)}),Cf=Zt(function(e,s){var a=gr(s,us(Cf));return Zn(e,Y,r,s,a)}),kv=Yn(function(e,s){return Zn(e,tt,r,r,r,s)});function Cv(e,s){if(typeof e!="function")throw new gn(u);return s=s===r?s:Kt(s),Zt(e,s)}function Sv(e,s){if(typeof e!="function")throw new gn(u);return s=s==null?0:$e(Kt(s),0),Zt(function(a){var p=a[s],w=br(a,0,s);return p&&pr(w,p),nn(e,this,w)})}function Ev(e,s,a){var p=!0,w=!0;if(typeof e!="function")throw new gn(u);return ke(a)&&(p="leading"in a?!!a.leading:p,w="trailing"in a?!!a.trailing:w),kf(e,s,{leading:p,maxWait:s,trailing:w})}function Av(e){return _f(e,1)}function Tv(e,s){return Ga($a(s),e)}function Ov(){if(!arguments.length)return[];var e=arguments[0];return Ht(e)?e:[e]}function Rv(e){return vn(e,v)}function Iv(e,s){return s=typeof s=="function"?s:r,vn(e,v,s)}function $v(e){return vn(e,m|v)}function Pv(e,s){return s=typeof s=="function"?s:r,vn(e,m|v,s)}function Lv(e,s){return s==null||cc(e,s,Pe(s))}function Tn(e,s){return e===s||e!==e&&s!==s}var Mv=Vi(ba),Bv=Vi(function(e,s){return e>=s}),Fr=mc(function(){return arguments}())?mc:function(e){return Ce(e)&&ue.call(e,"callee")&&!nc.call(e,"callee")},Ht=ct.isArray,Dv=Du?rn(Du):Hg;function Xe(e){return e!=null&&eo(e.length)&&!Xn(e)}function Ee(e){return Ce(e)&&Xe(e)}function zv(e){return e===!0||e===!1||Ce(e)&&qe(e)==ut}var xr=X0||il,Nv=zu?rn(zu):Vg;function Uv(e){return Ce(e)&&e.nodeType===1&&!js(e)}function Fv(e){if(e==null)return!0;if(Xe(e)&&(Ht(e)||typeof e=="string"||typeof e.splice=="function"||xr(e)||cs(e)||Fr(e)))return!e.length;var s=Ne(e);if(s==h||s==X)return!e.size;if(Us(e))return!ka(e).length;for(var a in e)if(ue.call(e,a))return!1;return!0}function jv(e,s){return Ds(e,s)}function Wv(e,s,a){a=typeof a=="function"?a:r;var p=a?a(e,s):r;return p===r?Ds(e,s,r,a):!!p}function Za(e){if(!Ce(e))return!1;var s=qe(e);return s==dt||s==kt||typeof e.message=="string"&&typeof e.name=="string"&&!js(e)}function qv(e){return typeof e=="number"&&sc(e)}function Xn(e){if(!ke(e))return!1;var s=qe(e);return s==S||s==M||s==J||s==U}function Sf(e){return typeof e=="number"&&e==Kt(e)}function eo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=At}function ke(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}function Ce(e){return e!=null&&typeof e=="object"}var Ef=Nu?rn(Nu):Gg;function Hv(e,s){return e===s||wa(e,s,Na(s))}function Vv(e,s,a){return a=typeof a=="function"?a:r,wa(e,s,Na(s),a)}function Kv(e){return Af(e)&&e!=+e}function Gv(e){if(Im(e))throw new Wt(l);return vc(e)}function Zv(e){return e===null}function Yv(e){return e==null}function Af(e){return typeof e=="number"||Ce(e)&&qe(e)==F}function js(e){if(!Ce(e)||qe(e)!=E)return!1;var s=Ti(e);if(s===null)return!0;var a=ue.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&Ci.call(a)==V0}var Ya=Uu?rn(Uu):Zg;function Jv(e){return Sf(e)&&e>=-At&&e<=At}var Tf=Fu?rn(Fu):Yg;function no(e){return typeof e=="string"||!Ht(e)&&Ce(e)&&qe(e)==G}function on(e){return typeof e=="symbol"||Ce(e)&&qe(e)==ot}var cs=ju?rn(ju):Jg;function Xv(e){return e===r}function Qv(e){return Ce(e)&&Ne(e)==ht}function t_(e){return Ce(e)&&qe(e)==St}var e_=Vi(Ca),n_=Vi(function(e,s){return e<=s});function Of(e){if(!e)return[];if(Xe(e))return no(e)?En(e):Je(e);if(Os&&e[Os])return L0(e[Os]());var s=Ne(e),a=s==h?fa:s==X?xi:fs;return a(e)}function Qn(e){if(!e)return e===0?e:0;if(e=bn(e),e===pt||e===-pt){var s=e<0?-1:1;return s*xt}return e===e?e:0}function Kt(e){var s=Qn(e),a=s%1;return s===s?a?s-a:s:0}function Rf(e){return e?Dr(Kt(e),0,it):0}function bn(e){if(typeof e=="number")return e;if(on(e))return $t;if(ke(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=ke(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=Gu(e);var a=Dp.test(e);return a||Np.test(e)?v0(e.slice(2),a?2:8):Bp.test(e)?$t:+e}function If(e){return Mn(e,Qe(e))}function r_(e){return e?Dr(Kt(e),-At,At):e===0?e:0}function ie(e){return e==null?"":sn(e)}var s_=as(function(e,s){if(Us(s)||Xe(s)){Mn(s,Pe(s),e);return}for(var a in s)ue.call(s,a)&&Ls(e,a,s[a])}),$f=as(function(e,s){Mn(s,Qe(s),e)}),ro=as(function(e,s,a,p){Mn(s,Qe(s),e,p)}),i_=as(function(e,s,a,p){Mn(s,Pe(s),e,p)}),o_=Yn(va);function a_(e,s){var a=os(e);return s==null?a:uc(a,s)}var l_=Zt(function(e,s){e=de(e);var a=-1,p=s.length,w=p>2?s[2]:r;for(w&&He(s[0],s[1],w)&&(p=1);++a<p;)for(var P=s[a],q=Qe(P),Z=-1,nt=q.length;++Z<nt;){var yt=q[Z],bt=e[yt];(bt===r||Tn(bt,rs[yt])&&!ue.call(e,yt))&&(e[yt]=P[yt])}return e}),u_=Zt(function(e){return e.push(r,Gc),nn(Pf,r,e)});function c_(e,s){return qu(e,Dt(s,3),Ln)}function f_(e,s){return qu(e,Dt(s,3),ya)}function d_(e,s){return e==null?e:_a(e,Dt(s,3),Qe)}function h_(e,s){return e==null?e:pc(e,Dt(s,3),Qe)}function p_(e,s){return e&&Ln(e,Dt(s,3))}function g_(e,s){return e&&ya(e,Dt(s,3))}function m_(e){return e==null?[]:zi(e,Pe(e))}function v_(e){return e==null?[]:zi(e,Qe(e))}function Ja(e,s,a){var p=e==null?r:zr(e,s);return p===r?a:p}function __(e,s){return e!=null&&Jc(e,s,Fg)}function Xa(e,s){return e!=null&&Jc(e,s,jg)}var y_=Wc(function(e,s,a){s!=null&&typeof s.toString!="function"&&(s=Si.call(s)),e[s]=a},tl(tn)),b_=Wc(function(e,s,a){s!=null&&typeof s.toString!="function"&&(s=Si.call(s)),ue.call(e,s)?e[s].push(a):e[s]=[a]},Dt),x_=Zt(Bs);function Pe(e){return Xe(e)?ac(e):ka(e)}function Qe(e){return Xe(e)?ac(e,!0):Xg(e)}function w_(e,s){var a={};return s=Dt(s,3),Ln(e,function(p,w,P){Gn(a,s(p,w,P),p)}),a}function k_(e,s){var a={};return s=Dt(s,3),Ln(e,function(p,w,P){Gn(a,w,s(p,w,P))}),a}var C_=as(function(e,s,a){Ni(e,s,a)}),Pf=as(function(e,s,a,p){Ni(e,s,a,p)}),S_=Yn(function(e,s){var a={};if(e==null)return a;var p=!1;s=we(s,function(P){return P=yr(P,e),p||(p=P.length>1),P}),Mn(e,Da(e),a),p&&(a=vn(a,m|b|v,ym));for(var w=s.length;w--;)Oa(a,s[w]);return a});function E_(e,s){return Lf(e,to(Dt(s)))}var A_=Yn(function(e,s){return e==null?{}:tm(e,s)});function Lf(e,s){if(e==null)return{};var a=we(Da(e),function(p){return[p]});return s=Dt(s),Cc(e,a,function(p,w){return s(p,w[0])})}function T_(e,s,a){s=yr(s,e);var p=-1,w=s.length;for(w||(w=1,e=r);++p<w;){var P=e==null?r:e[Bn(s[p])];P===r&&(p=w,P=a),e=Xn(P)?P.call(e):P}return e}function O_(e,s,a){return e==null?e:zs(e,s,a)}function R_(e,s,a,p){return p=typeof p=="function"?p:r,e==null?e:zs(e,s,a,p)}var Mf=Vc(Pe),Bf=Vc(Qe);function I_(e,s,a){var p=Ht(e),w=p||xr(e)||cs(e);if(s=Dt(s,4),a==null){var P=e&&e.constructor;w?a=p?new P:[]:ke(e)?a=Xn(P)?os(Ti(e)):{}:a={}}return(w?pn:Ln)(e,function(q,Z,nt){return s(a,q,Z,nt)}),a}function $_(e,s){return e==null?!0:Oa(e,s)}function P_(e,s,a){return e==null?e:Oc(e,s,$a(a))}function L_(e,s,a,p){return p=typeof p=="function"?p:r,e==null?e:Oc(e,s,$a(a),p)}function fs(e){return e==null?[]:ca(e,Pe(e))}function M_(e){return e==null?[]:ca(e,Qe(e))}function B_(e,s,a){return a===r&&(a=s,s=r),a!==r&&(a=bn(a),a=a===a?a:0),s!==r&&(s=bn(s),s=s===s?s:0),Dr(bn(e),s,a)}function D_(e,s,a){return s=Qn(s),a===r?(a=s,s=0):a=Qn(a),e=bn(e),Wg(e,s,a)}function z_(e,s,a){if(a&&typeof a!="boolean"&&He(e,s,a)&&(s=a=r),a===r&&(typeof s=="boolean"?(a=s,s=r):typeof e=="boolean"&&(a=e,e=r)),e===r&&s===r?(e=0,s=1):(e=Qn(e),s===r?(s=e,e=0):s=Qn(s)),e>s){var p=e;e=s,s=p}if(a||e%1||s%1){var w=ic();return ze(e+w*(s-e+m0("1e-"+((w+"").length-1))),s)}return Ea(e,s)}var N_=ls(function(e,s,a){return s=s.toLowerCase(),e+(a?Df(s):s)});function Df(e){return Qa(ie(e).toLowerCase())}function zf(e){return e=ie(e),e&&e.replace(Fp,O0).replace(o0,"")}function U_(e,s,a){e=ie(e),s=sn(s);var p=e.length;a=a===r?p:Dr(Kt(a),0,p);var w=a;return a-=s.length,a>=0&&e.slice(a,w)==s}function F_(e){return e=ie(e),e&&xp.test(e)?e.replace(dr,R0):e}function j_(e){return e=ie(e),e&&Ap.test(e)?e.replace(Go,"\\$&"):e}var W_=ls(function(e,s,a){return e+(a?"-":"")+s.toLowerCase()}),q_=ls(function(e,s,a){return e+(a?" ":"")+s.toLowerCase()}),H_=Uc("toLowerCase");function V_(e,s,a){e=ie(e),s=Kt(s);var p=s?es(e):0;if(!s||p>=s)return e;var w=(s-p)/2;return Hi($i(w),a)+e+Hi(Ii(w),a)}function K_(e,s,a){e=ie(e),s=Kt(s);var p=s?es(e):0;return s&&p<s?e+Hi(s-p,a):e}function G_(e,s,a){e=ie(e),s=Kt(s);var p=s?es(e):0;return s&&p<s?Hi(s-p,a)+e:e}function Z_(e,s,a){return a||s==null?s=0:s&&(s=+s),ng(ie(e).replace(Zo,""),s||0)}function Y_(e,s,a){return(a?He(e,s,a):s===r)?s=1:s=Kt(s),Aa(ie(e),s)}function J_(){var e=arguments,s=ie(e[0]);return e.length<3?s:s.replace(e[1],e[2])}var X_=ls(function(e,s,a){return e+(a?"_":"")+s.toLowerCase()});function Q_(e,s,a){return a&&typeof a!="number"&&He(e,s,a)&&(s=a=r),a=a===r?it:a>>>0,a?(e=ie(e),e&&(typeof s=="string"||s!=null&&!Ya(s))&&(s=sn(s),!s&&ts(e))?br(En(e),0,a):e.split(s,a)):[]}var ty=ls(function(e,s,a){return e+(a?" ":"")+Qa(s)});function ey(e,s,a){return e=ie(e),a=a==null?0:Dr(Kt(a),0,e.length),s=sn(s),e.slice(a,a+s.length)==s}function ny(e,s,a){var p=R.templateSettings;a&&He(e,s,a)&&(s=r),e=ie(e),s=ro({},s,p,Kc);var w=ro({},s.imports,p.imports,Kc),P=Pe(w),q=ca(w,P),Z,nt,yt=0,bt=s.interpolate||mi,wt="__p += '",Ot=da((s.escape||mi).source+"|"+bt.source+"|"+(bt===gu?Mp:mi).source+"|"+(s.evaluate||mi).source+"|$","g"),Lt="//# sourceURL="+(ue.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++f0+"]")+`
`;e.replace(Ot,function(Nt,Yt,Qt,an,Ve,ln){return Qt||(Qt=an),wt+=e.slice(yt,ln).replace(jp,I0),Yt&&(Z=!0,wt+=`' +
__e(`+Yt+`) +
'`),Ve&&(nt=!0,wt+=`';
`+Ve+`;
__p += '`),Qt&&(wt+=`' +
((__t = (`+Qt+`)) == null ? '' : __t) +
'`),yt=ln+Nt.length,Nt}),wt+=`';
`;var zt=ue.call(s,"variable")&&s.variable;if(!zt)wt=`with (obj) {
`+wt+`
}
`;else if(Pp.test(zt))throw new Wt(f);wt=(nt?wt.replace(Yr,""):wt).replace(Vo,"$1").replace(Ko,"$1;"),wt="function("+(zt||"obj")+`) {
`+(zt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Z?", __e = _.escape":"")+(nt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+wt+`return __p
}`;var Gt=Uf(function(){return se(P,Lt+"return "+wt).apply(r,q)});if(Gt.source=wt,Za(Gt))throw Gt;return Gt}function ry(e){return ie(e).toLowerCase()}function sy(e){return ie(e).toUpperCase()}function iy(e,s,a){if(e=ie(e),e&&(a||s===r))return Gu(e);if(!e||!(s=sn(s)))return e;var p=En(e),w=En(s),P=Zu(p,w),q=Yu(p,w)+1;return br(p,P,q).join("")}function oy(e,s,a){if(e=ie(e),e&&(a||s===r))return e.slice(0,Xu(e)+1);if(!e||!(s=sn(s)))return e;var p=En(e),w=Yu(p,En(s))+1;return br(p,0,w).join("")}function ay(e,s,a){if(e=ie(e),e&&(a||s===r))return e.replace(Zo,"");if(!e||!(s=sn(s)))return e;var p=En(e),w=Zu(p,En(s));return br(p,w).join("")}function ly(e,s){var a=I,p=K;if(ke(s)){var w="separator"in s?s.separator:w;a="length"in s?Kt(s.length):a,p="omission"in s?sn(s.omission):p}e=ie(e);var P=e.length;if(ts(e)){var q=En(e);P=q.length}if(a>=P)return e;var Z=a-es(p);if(Z<1)return p;var nt=q?br(q,0,Z).join(""):e.slice(0,Z);if(w===r)return nt+p;if(q&&(Z+=nt.length-Z),Ya(w)){if(e.slice(Z).search(w)){var yt,bt=nt;for(w.global||(w=da(w.source,ie(mu.exec(w))+"g")),w.lastIndex=0;yt=w.exec(bt);)var wt=yt.index;nt=nt.slice(0,wt===r?Z:wt)}}else if(e.indexOf(sn(w),Z)!=Z){var Ot=nt.lastIndexOf(w);Ot>-1&&(nt=nt.slice(0,Ot))}return nt+p}function uy(e){return e=ie(e),e&&Jr.test(e)?e.replace(As,z0):e}var cy=ls(function(e,s,a){return e+(a?" ":"")+s.toUpperCase()}),Qa=Uc("toUpperCase");function Nf(e,s,a){return e=ie(e),s=a?r:s,s===r?P0(e)?F0(e):C0(e):e.match(s)||[]}var Uf=Zt(function(e,s){try{return nn(e,r,s)}catch(a){return Za(a)?a:new Wt(a)}}),fy=Yn(function(e,s){return pn(s,function(a){a=Bn(a),Gn(e,a,Ka(e[a],e))}),e});function dy(e){var s=e==null?0:e.length,a=Dt();return e=s?we(e,function(p){if(typeof p[1]!="function")throw new gn(u);return[a(p[0]),p[1]]}):[],Zt(function(p){for(var w=-1;++w<s;){var P=e[w];if(nn(P[0],this,p))return nn(P[1],this,p)}})}function hy(e){return zg(vn(e,m))}function tl(e){return function(){return e}}function py(e,s){return e==null||e!==e?s:e}var gy=jc(),my=jc(!0);function tn(e){return e}function el(e){return _c(typeof e=="function"?e:vn(e,m))}function vy(e){return bc(vn(e,m))}function _y(e,s){return xc(e,vn(s,m))}var yy=Zt(function(e,s){return function(a){return Bs(a,e,s)}}),by=Zt(function(e,s){return function(a){return Bs(e,a,s)}});function nl(e,s,a){var p=Pe(s),w=zi(s,p);a==null&&!(ke(s)&&(w.length||!p.length))&&(a=s,s=e,e=this,w=zi(s,Pe(s)));var P=!(ke(a)&&"chain"in a)||!!a.chain,q=Xn(e);return pn(w,function(Z){var nt=s[Z];e[Z]=nt,q&&(e.prototype[Z]=function(){var yt=this.__chain__;if(P||yt){var bt=e(this.__wrapped__),wt=bt.__actions__=Je(this.__actions__);return wt.push({func:nt,args:arguments,thisArg:e}),bt.__chain__=yt,bt}return nt.apply(e,pr([this.value()],arguments))})}),e}function xy(){return Le._===this&&(Le._=K0),this}function rl(){}function wy(e){return e=Kt(e),Zt(function(s){return wc(s,e)})}var ky=La(we),Cy=La(Wu),Sy=La(ia);function Ff(e){return Fa(e)?oa(Bn(e)):em(e)}function Ey(e){return function(s){return e==null?r:zr(e,s)}}var Ay=qc(),Ty=qc(!0);function sl(){return[]}function il(){return!1}function Oy(){return{}}function Ry(){return""}function Iy(){return!0}function $y(e,s){if(e=Kt(e),e<1||e>At)return[];var a=it,p=ze(e,it);s=Dt(s),e-=it;for(var w=ua(p,s);++a<e;)s(a);return w}function Py(e){return Ht(e)?we(e,Bn):on(e)?[e]:Je(af(ie(e)))}function Ly(e){var s=++H0;return ie(e)+s}var My=qi(function(e,s){return e+s},0),By=Ma("ceil"),Dy=qi(function(e,s){return e/s},1),zy=Ma("floor");function Ny(e){return e&&e.length?Di(e,tn,ba):r}function Uy(e,s){return e&&e.length?Di(e,Dt(s,2),ba):r}function Fy(e){return Vu(e,tn)}function jy(e,s){return Vu(e,Dt(s,2))}function Wy(e){return e&&e.length?Di(e,tn,Ca):r}function qy(e,s){return e&&e.length?Di(e,Dt(s,2),Ca):r}var Hy=qi(function(e,s){return e*s},1),Vy=Ma("round"),Ky=qi(function(e,s){return e-s},0);function Gy(e){return e&&e.length?la(e,tn):0}function Zy(e,s){return e&&e.length?la(e,Dt(s,2)):0}return R.after=vv,R.ary=_f,R.assign=s_,R.assignIn=$f,R.assignInWith=ro,R.assignWith=i_,R.at=o_,R.before=yf,R.bind=Ka,R.bindAll=fy,R.bindKey=bf,R.castArray=Ov,R.chain=gf,R.chunk=zm,R.compact=Nm,R.concat=Um,R.cond=dy,R.conforms=hy,R.constant=tl,R.countBy=G1,R.create=a_,R.curry=xf,R.curryRight=wf,R.debounce=kf,R.defaults=l_,R.defaultsDeep=u_,R.defer=_v,R.delay=yv,R.difference=Fm,R.differenceBy=jm,R.differenceWith=Wm,R.drop=qm,R.dropRight=Hm,R.dropRightWhile=Vm,R.dropWhile=Km,R.fill=Gm,R.filter=Y1,R.flatMap=Q1,R.flatMapDeep=tv,R.flatMapDepth=ev,R.flatten=ff,R.flattenDeep=Zm,R.flattenDepth=Ym,R.flip=bv,R.flow=gy,R.flowRight=my,R.fromPairs=Jm,R.functions=m_,R.functionsIn=v_,R.groupBy=nv,R.initial=Qm,R.intersection=t1,R.intersectionBy=e1,R.intersectionWith=n1,R.invert=y_,R.invertBy=b_,R.invokeMap=sv,R.iteratee=el,R.keyBy=iv,R.keys=Pe,R.keysIn=Qe,R.map=Ji,R.mapKeys=w_,R.mapValues=k_,R.matches=vy,R.matchesProperty=_y,R.memoize=Qi,R.merge=C_,R.mergeWith=Pf,R.method=yy,R.methodOf=by,R.mixin=nl,R.negate=to,R.nthArg=wy,R.omit=S_,R.omitBy=E_,R.once=xv,R.orderBy=ov,R.over=ky,R.overArgs=wv,R.overEvery=Cy,R.overSome=Sy,R.partial=Ga,R.partialRight=Cf,R.partition=av,R.pick=A_,R.pickBy=Lf,R.property=Ff,R.propertyOf=Ey,R.pull=o1,R.pullAll=hf,R.pullAllBy=a1,R.pullAllWith=l1,R.pullAt=u1,R.range=Ay,R.rangeRight=Ty,R.rearg=kv,R.reject=cv,R.remove=c1,R.rest=Cv,R.reverse=Ha,R.sampleSize=dv,R.set=O_,R.setWith=R_,R.shuffle=hv,R.slice=f1,R.sortBy=mv,R.sortedUniq=_1,R.sortedUniqBy=y1,R.split=Q_,R.spread=Sv,R.tail=b1,R.take=x1,R.takeRight=w1,R.takeRightWhile=k1,R.takeWhile=C1,R.tap=N1,R.throttle=Ev,R.thru=Yi,R.toArray=Of,R.toPairs=Mf,R.toPairsIn=Bf,R.toPath=Py,R.toPlainObject=If,R.transform=I_,R.unary=Av,R.union=S1,R.unionBy=E1,R.unionWith=A1,R.uniq=T1,R.uniqBy=O1,R.uniqWith=R1,R.unset=$_,R.unzip=Va,R.unzipWith=pf,R.update=P_,R.updateWith=L_,R.values=fs,R.valuesIn=M_,R.without=I1,R.words=Nf,R.wrap=Tv,R.xor=$1,R.xorBy=P1,R.xorWith=L1,R.zip=M1,R.zipObject=B1,R.zipObjectDeep=D1,R.zipWith=z1,R.entries=Mf,R.entriesIn=Bf,R.extend=$f,R.extendWith=ro,nl(R,R),R.add=My,R.attempt=Uf,R.camelCase=N_,R.capitalize=Df,R.ceil=By,R.clamp=B_,R.clone=Rv,R.cloneDeep=$v,R.cloneDeepWith=Pv,R.cloneWith=Iv,R.conformsTo=Lv,R.deburr=zf,R.defaultTo=py,R.divide=Dy,R.endsWith=U_,R.eq=Tn,R.escape=F_,R.escapeRegExp=j_,R.every=Z1,R.find=J1,R.findIndex=uf,R.findKey=c_,R.findLast=X1,R.findLastIndex=cf,R.findLastKey=f_,R.floor=zy,R.forEach=mf,R.forEachRight=vf,R.forIn=d_,R.forInRight=h_,R.forOwn=p_,R.forOwnRight=g_,R.get=Ja,R.gt=Mv,R.gte=Bv,R.has=__,R.hasIn=Xa,R.head=df,R.identity=tn,R.includes=rv,R.indexOf=Xm,R.inRange=D_,R.invoke=x_,R.isArguments=Fr,R.isArray=Ht,R.isArrayBuffer=Dv,R.isArrayLike=Xe,R.isArrayLikeObject=Ee,R.isBoolean=zv,R.isBuffer=xr,R.isDate=Nv,R.isElement=Uv,R.isEmpty=Fv,R.isEqual=jv,R.isEqualWith=Wv,R.isError=Za,R.isFinite=qv,R.isFunction=Xn,R.isInteger=Sf,R.isLength=eo,R.isMap=Ef,R.isMatch=Hv,R.isMatchWith=Vv,R.isNaN=Kv,R.isNative=Gv,R.isNil=Yv,R.isNull=Zv,R.isNumber=Af,R.isObject=ke,R.isObjectLike=Ce,R.isPlainObject=js,R.isRegExp=Ya,R.isSafeInteger=Jv,R.isSet=Tf,R.isString=no,R.isSymbol=on,R.isTypedArray=cs,R.isUndefined=Xv,R.isWeakMap=Qv,R.isWeakSet=t_,R.join=r1,R.kebabCase=W_,R.last=yn,R.lastIndexOf=s1,R.lowerCase=q_,R.lowerFirst=H_,R.lt=e_,R.lte=n_,R.max=Ny,R.maxBy=Uy,R.mean=Fy,R.meanBy=jy,R.min=Wy,R.minBy=qy,R.stubArray=sl,R.stubFalse=il,R.stubObject=Oy,R.stubString=Ry,R.stubTrue=Iy,R.multiply=Hy,R.nth=i1,R.noConflict=xy,R.noop=rl,R.now=Xi,R.pad=V_,R.padEnd=K_,R.padStart=G_,R.parseInt=Z_,R.random=z_,R.reduce=lv,R.reduceRight=uv,R.repeat=Y_,R.replace=J_,R.result=T_,R.round=Vy,R.runInContext=et,R.sample=fv,R.size=pv,R.snakeCase=X_,R.some=gv,R.sortedIndex=d1,R.sortedIndexBy=h1,R.sortedIndexOf=p1,R.sortedLastIndex=g1,R.sortedLastIndexBy=m1,R.sortedLastIndexOf=v1,R.startCase=ty,R.startsWith=ey,R.subtract=Ky,R.sum=Gy,R.sumBy=Zy,R.template=ny,R.times=$y,R.toFinite=Qn,R.toInteger=Kt,R.toLength=Rf,R.toLower=ry,R.toNumber=bn,R.toSafeInteger=r_,R.toString=ie,R.toUpper=sy,R.trim=iy,R.trimEnd=oy,R.trimStart=ay,R.truncate=ly,R.unescape=uy,R.uniqueId=Ly,R.upperCase=cy,R.upperFirst=Qa,R.each=mf,R.eachRight=vf,R.first=df,nl(R,function(){var e={};return Ln(R,function(s,a){ue.call(R.prototype,a)||(e[a]=s)}),e}(),{chain:!1}),R.VERSION=i,pn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){R[e].placeholder=R}),pn(["drop","take"],function(e,s){Jt.prototype[e]=function(a){a=a===r?1:$e(Kt(a),0);var p=this.__filtered__&&!s?new Jt(this):this.clone();return p.__filtered__?p.__takeCount__=ze(a,p.__takeCount__):p.__views__.push({size:ze(a,it),type:e+(p.__dir__<0?"Right":"")}),p},Jt.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),pn(["filter","map","takeWhile"],function(e,s){var a=s+1,p=a==g||a==Ct;Jt.prototype[e]=function(w){var P=this.clone();return P.__iteratees__.push({iteratee:Dt(w,3),type:a}),P.__filtered__=P.__filtered__||p,P}}),pn(["head","last"],function(e,s){var a="take"+(s?"Right":"");Jt.prototype[e]=function(){return this[a](1).value()[0]}}),pn(["initial","tail"],function(e,s){var a="drop"+(s?"":"Right");Jt.prototype[e]=function(){return this.__filtered__?new Jt(this):this[a](1)}}),Jt.prototype.compact=function(){return this.filter(tn)},Jt.prototype.find=function(e){return this.filter(e).head()},Jt.prototype.findLast=function(e){return this.reverse().find(e)},Jt.prototype.invokeMap=Zt(function(e,s){return typeof e=="function"?new Jt(this):this.map(function(a){return Bs(a,e,s)})}),Jt.prototype.reject=function(e){return this.filter(to(Dt(e)))},Jt.prototype.slice=function(e,s){e=Kt(e);var a=this;return a.__filtered__&&(e>0||s<0)?new Jt(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),s!==r&&(s=Kt(s),a=s<0?a.dropRight(-s):a.take(s-e)),a)},Jt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Jt.prototype.toArray=function(){return this.take(it)},Ln(Jt.prototype,function(e,s){var a=/^(?:filter|find|map|reject)|While$/.test(s),p=/^(?:head|last)$/.test(s),w=R[p?"take"+(s=="last"?"Right":""):s],P=p||/^find/.test(s);w&&(R.prototype[s]=function(){var q=this.__wrapped__,Z=p?[1]:arguments,nt=q instanceof Jt,yt=Z[0],bt=nt||Ht(q),wt=function(Yt){var Qt=w.apply(R,pr([Yt],Z));return p&&Ot?Qt[0]:Qt};bt&&a&&typeof yt=="function"&&yt.length!=1&&(nt=bt=!1);var Ot=this.__chain__,Lt=!!this.__actions__.length,zt=P&&!Ot,Gt=nt&&!Lt;if(!P&&bt){q=Gt?q:new Jt(this);var Nt=e.apply(q,Z);return Nt.__actions__.push({func:Yi,args:[wt],thisArg:r}),new mn(Nt,Ot)}return zt&&Gt?e.apply(this,Z):(Nt=this.thru(wt),zt?p?Nt.value()[0]:Nt.value():Nt)})}),pn(["pop","push","shift","sort","splice","unshift"],function(e){var s=wi[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",p=/^(?:pop|shift)$/.test(e);R.prototype[e]=function(){var w=arguments;if(p&&!this.__chain__){var P=this.value();return s.apply(Ht(P)?P:[],w)}return this[a](function(q){return s.apply(Ht(q)?q:[],w)})}}),Ln(Jt.prototype,function(e,s){var a=R[s];if(a){var p=a.name+"";ue.call(is,p)||(is[p]=[]),is[p].push({name:s,func:a})}}),is[Wi(r,A).name]=[{name:"wrapper",func:r}],Jt.prototype.clone=ug,Jt.prototype.reverse=cg,Jt.prototype.value=fg,R.prototype.at=U1,R.prototype.chain=F1,R.prototype.commit=j1,R.prototype.next=W1,R.prototype.plant=H1,R.prototype.reverse=V1,R.prototype.toJSON=R.prototype.valueOf=R.prototype.value=K1,R.prototype.first=R.prototype.head,Os&&(R.prototype[Os]=q1),R},ns=j0();Pr?((Pr.exports=ns)._=ns,ea._=ns):Le._=ns}).call(ar)})(Ro,Ro.exports);var k5=Ro.exports;const C5={class:"mb-8 border-b border-gray-200"},S5={class:"-mb-px flex space-x-8","aria-label":"Tabs"},E5=["onClick"],A5={key:0},T5={class:"card p-8"},O5={class:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end mb-6 p-6 bg-sky-50 border border-sky-200 rounded-lg"},R5={class:"md:col-span-2"},I5={class:"md:col-span-2"},$5={key:0,class:"text-center py-8 text-slate-500"},P5={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"},L5={class:"text-sm text-slate-500"},M5={class:"text-xl font-bold text-slate-800 text-center"},B5={key:1},D5={key:0,class:"card p-8 max-w-4xl mx-auto"},z5={class:"space-y-6"},N5=["value"],U5={class:"text-right"},F5=["disabled"],j5={key:1},W5={class:"card p-8"},q5={class:"text-2xl font-semibold mb-6"},H5={class:"overflow-x-auto"},V5={class:"min-w-full divide-y divide-gray-200"},K5={class:"bg-white divide-y divide-gray-200"},G5={class:"table-cell"},Z5={class:"table-cell font-medium"},Y5={class:"table-cell"},J5=["onUpdate:modelValue","onInput","onKeydown","data-index"],X5={key:2},Q5={class:"card p-8"},tC={class:"space-y-8"},eC={class:"text-xl font-bold text-sky-700 border-b-2 border-sky-200 pb-2 mb-4"},nC={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},rC=["onClick"],sC={class:"font-bold text-lg text-slate-800"},iC={class:"text-sm text-slate-500"},oC={class:"text-xs text-slate-400 mt-2"},aC={key:3},lC={class:"card p-8"},uC={class:"max-w-xl mx-auto"},cC={class:"flex items-center space-x-4 mb-8 p-4 bg-slate-50 rounded-lg border"},fC={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},dC=["onUpdate:modelValue","onChange"],hC=["onClick"],pC={__name:"GradeManagementView",setup(t){const n=ft([{key:"performance",name:"課堂表現"},{key:"grade_entry",name:"登錄新成績"},{key:"grade_overview",name:"總覽與修改成績"},{key:"settings",name:"科目設定"}]),r=ft("performance"),i=Ze({category:"",subject_id:null,name:"",grade_item_id:null}),o=ft(!1),l=ft([]),u=ft([]),f=ft([]),d=ft([]),y=ft(!1),_=Ze({start:"",end:""}),m=ft(""),b=pe(()=>i.grade_item_id?u.value.find(k=>k.id===i.grade_item_id):null),v=pe(()=>{const k={平時測驗:[],定期評量:[]};return[...u.value].sort((g,rt)=>new Date(rt.date)-new Date(g.date)).forEach(g=>{k[g.category]&&k[g.category].push(g)}),k}),C=()=>{Object.assign(i,{category:"",subject_id:null,name:"",grade_item_id:null}),f.value=[]},x=async()=>{const k={category:i.category,subject_id:i.subject_id,name:i.name};try{const g=await(await qt("/api/grade-items",{method:"POST",body:JSON.stringify(k)})).json();u.value.unshift(g),i.grade_item_id=g.id,await tt(g.id),o.value=!0}catch($){console.error("建立成績項目失敗:",$)}},T=()=>{o.value=!1,C(),r.value==="grade_entry"||(r.value="grade_overview")},A=async k=>{i.grade_item_id=k.id,await tt(k.id),r.value="grade_entry",o.value=!0},L=()=>{const k=new Date,$=new Date;$.setDate(k.getDate()-30),_.end=k.toISOString().split("T")[0],_.start=$.toISOString().split("T")[0]},D=async()=>{try{const[k,$]=await Promise.all([qt("/api/subjects"),qt("/api/grade-items")]);l.value=await k.json(),u.value=await $.json(),await z()}catch(k){console.error("讀取初始資料失敗:",k)}},z=async()=>{y.value=!0;try{const k=await qt(`/api/performance-summary?startDate=${_.start}&endDate=${_.end}`);d.value=await k.json()}catch(k){console.error("讀取表現統計失敗:",k)}finally{y.value=!1}};Ye(()=>{L(),D()});const B=async()=>{if(!m.value)return;const k=await qt("/api/subjects",{method:"POST",body:JSON.stringify({name:m.value})});l.value.push(await k.json()),m.value=""},Y=async k=>{qt(`/api/subjects/${k.id}`,{method:"PUT",body:JSON.stringify({name:k.name})})},V=async k=>{confirm("確定刪除此科目嗎？所有相關的成績項目和分數將會一併刪除！")&&(await qt(`/api/subjects/${k}`,{method:"DELETE"}),l.value=l.value.filter($=>$.id!==k),u.value=u.value.filter($=>$.subject_id!==k))},tt=async k=>{const $=await qt(`/api/grades/${k}`);f.value=await $.json()},N=k5.debounce((k,$)=>{b.value&&qt("/api/grades",{method:"POST",body:JSON.stringify({grade_item_id:b.value.id,student_id:k,score:$})})},500),I=(k,$)=>{N(k,$)},K=k=>{const $=k+1;if($<f.value.length){const g=document.querySelector(`input[data-index='${$}']`);g&&(g.focus(),g.select())}};return Ar(r,k=>{k!=="grade_entry"&&(o.value=!1,C()),k==="performance"&&z()}),(k,$)=>(W(),H("div",null,[$[19]||($[19]=c("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"成績管理",-1)),c("div",C5,[c("nav",S5,[(W(!0),H(Ft,null,Xt(n.value,g=>(W(),H("a",{key:g.key,onClick:rt=>r.value=g.key,class:ce([r.value===g.key?"border-sky-500 text-sky-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg cursor-pointer"])},lt(g.name),11,E5))),128))])]),r.value==="performance"?(W(),H("div",A5,[c("div",T5,[$[9]||($[9]=c("h2",{class:"text-2xl font-semibold mb-6"},"課堂表現區間統計",-1)),c("div",O5,[c("div",R5,[$[6]||($[6]=c("label",{for:"startDate",class:"block text-sm font-medium text-slate-700 mb-1"},"開始日期",-1)),Bt(c("input",{type:"date",id:"startDate","onUpdate:modelValue":$[0]||($[0]=g=>_.start=g),class:"form-input text-base w-full py-2.5"},null,512),[[jt,_.start]])]),c("div",I5,[$[7]||($[7]=c("label",{for:"endDate",class:"block text-sm font-medium text-slate-700 mb-1"},"結束日期",-1)),Bt(c("input",{type:"date",id:"endDate","onUpdate:modelValue":$[1]||($[1]=g=>_.end=g),class:"form-input text-base w-full py-2.5"},null,512),[[jt,_.end]])]),c("div",{class:"md:col-span-1"},[c("button",{onClick:z,class:"btn btn-primary w-full text-base py-2.5 px-6 flex items-center justify-center gap-2"},[...$[8]||($[8]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})],-1),c("span",null,"查詢",-1)])])])]),y.value?(W(),H("div",$5,"正在讀取統計資料...")):(W(),H("div",P5,[(W(!0),H(Ft,null,Xt(d.value,g=>(W(),H("div",{key:g.id,class:"bg-white rounded-xl shadow-md p-4 flex flex-col items-center justify-center space-y-2 transition-transform hover:scale-105 hover:shadow-lg border"},[c("div",L5,lt(g.seat_number)+".",1),c("div",M5,lt(g.name),1),c("div",{class:ce(["px-5 py-2 rounded-full text-2xl font-extrabold",{"bg-green-100 text-green-700":g.total_score>0,"bg-red-100 text-red-700":g.total_score<0,"bg-slate-100 text-slate-600":g.total_score===0||g.total_score===null}])},lt(g.total_score),3)]))),128))]))])])):Et("",!0),r.value==="grade_entry"?(W(),H("div",B5,[o.value?Et("",!0):(W(),H("div",D5,[$[15]||($[15]=c("h2",{class:"text-2xl font-semibold mb-6"},"登錄新成績",-1)),c("div",z5,[c("div",null,[$[11]||($[11]=c("label",{class:"block text-base font-medium text-slate-700"},"1. 選擇成績類別",-1)),Bt(c("select",{"onUpdate:modelValue":$[2]||($[2]=g=>i.category=g),class:"mt-1 form-input text-lg py-3"},[...$[10]||($[10]=[c("option",{disabled:"",value:""},"-- 請選擇 --",-1),c("option",null,"平時測驗",-1),c("option",null,"定期評量",-1)])],512),[[ui,i.category]])]),c("div",null,[$[13]||($[13]=c("label",{class:"block text-base font-medium text-slate-700"},"2. 選擇科目",-1)),Bt(c("select",{"onUpdate:modelValue":$[3]||($[3]=g=>i.subject_id=g),class:"mt-1 form-input text-lg py-3"},[$[12]||($[12]=c("option",{value:null},"-- 請選擇 --",-1)),(W(!0),H(Ft,null,Xt(l.value,g=>(W(),H("option",{key:g.id,value:g.id},lt(g.name),9,N5))),128))],512),[[ui,i.subject_id]])]),c("div",null,[$[14]||($[14]=c("label",{class:"block text-base font-medium text-slate-700"},"3. 輸入成績項目名稱",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":$[4]||($[4]=g=>i.name=g),placeholder:"例如: 第一次月考",class:"mt-1 form-input text-lg py-3"},null,512),[[jt,i.name]])]),c("div",U5,[c("button",{onClick:x,disabled:!i.category||!i.subject_id||!i.name,class:"btn btn-primary text-lg px-8 py-3"}," 下一步：輸入分數 ",8,F5)])])])),o.value&&b.value?(W(),H("div",j5,[c("button",{onClick:T,class:"text-sky-600 hover:text-sky-800 mb-4"},"← 返回"),c("div",W5,[c("h2",q5,lt(b.value.subject_name)+" - "+lt(b.value.name)+" ("+lt(b.value.category)+")",1),c("div",H5,[c("table",V5,[$[16]||($[16]=c("thead",{class:"bg-slate-50"},[c("tr",null,[c("th",{class:"table-header"},"座號"),c("th",{class:"table-header"},"姓名"),c("th",{class:"table-header"},"分數")])],-1)),c("tbody",K5,[(W(!0),H(Ft,null,Xt(f.value,(g,rt)=>(W(),H("tr",{key:g.id,class:"hover:bg-slate-50"},[c("td",G5,lt(g.seat_number),1),c("td",Z5,lt(g.name),1),c("td",Y5,[Bt(c("input",{type:"number","onUpdate:modelValue":Ct=>g.score=Ct,onInput:Ct=>I(g.student_id,Ct.target.value),onKeydown:vw(De(Ct=>K(rt),["prevent"]),["enter"]),"data-index":rt,class:"form-input w-32 text-lg py-2 text-center"},null,40,J5),[[jt,g.score]])])]))),128))])])])])])):Et("",!0)])):Et("",!0),r.value==="grade_overview"?(W(),H("div",X5,[c("div",Q5,[$[17]||($[17]=c("h2",{class:"text-2xl font-semibold mb-6"},"成績項目總覽與修改",-1)),c("div",tC,[(W(!0),H(Ft,null,Xt(v.value,(g,rt)=>(W(),H("div",{key:rt},[c("h3",eC,lt(rt),1),c("div",nC,[(W(!0),H(Ft,null,Xt(g,Ct=>(W(),H("div",{key:Ct.id,onClick:pt=>A(Ct),class:"p-4 border rounded-lg cursor-pointer hover:bg-sky-50 hover:shadow-lg transition-all"},[c("p",sC,lt(Ct.name),1),c("p",iC,lt(Ct.subject_name),1),c("p",oC,lt(new Date(Ct.date).toLocaleDateString()),1)],8,rC))),128))])]))),128))])])])):Et("",!0),r.value==="settings"?(W(),H("div",aC,[c("div",lC,[$[18]||($[18]=c("h2",{class:"text-2xl font-semibold mb-6"},"科目管理",-1)),c("div",uC,[c("div",cC,[Bt(c("input",{type:"text","onUpdate:modelValue":$[5]||($[5]=g=>m.value=g),placeholder:"新增科目名稱...",class:"form-input text-lg flex-grow py-3"},null,512),[[jt,m.value]]),c("button",{onClick:B,class:"btn btn-primary text-base py-3 px-6"},"新增")]),c("div",fC,[(W(!0),H(Ft,null,Xt(l.value,g=>(W(),H("div",{key:g.id,class:"bg-white rounded-lg shadow border p-4 flex flex-col"},[Bt(c("input",{type:"text","onUpdate:modelValue":rt=>g.name=rt,onChange:rt=>Y(g),class:"form-input text-xl font-bold border-0 text-center p-2 mb-4"},null,40,dC),[[jt,g.name]]),c("button",{onClick:rt=>V(g.id),class:"mt-auto w-full btn btn-danger btn-sm text-xs py-1"},"刪除",8,hC)]))),128))])])])])):Et("",!0)]))}},gC=uu(pC,[["__scopeId","data-v-3ef008ee"]]),mC={class:"min-h-screen bg-sky-50 p-4 sm:p-8"},vC={class:"max-w-4xl mx-auto"},_C={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 pb-4"},yC={class:"text-xl text-slate-600 mt-2"},bC={class:"flex items-center space-x-2 mt-4 sm:mt-0"},xC={class:"space-y-8"},wC={key:0,class:"text-center text-slate-500 py-10"},kC={key:1,class:"text-center text-slate-500 bg-white p-10 rounded-lg shadow"},CC={key:2,class:"space-y-6"},SC={class:"flex flex-col md:flex-row justify-between items-start"},EC={class:"mb-4 md:mb-0 flex-1"},AC={class:"px-2 py-1 text-xs font-semibold rounded-full bg-sky-100 text-sky-800"},TC={class:"text-2xl font-bold text-slate-800 mt-2"},OC={class:"text-slate-600 mt-2"},RC={key:0},IC={key:1},$C={class:"w-full md:w-auto md:ml-6 flex flex-col items-stretch",style:{"min-width":"150px"}},PC=["onChange","id"],LC=["onClick"],MC={key:2},BC=["onClick"],DC={key:0,class:"fixed z-20 inset-0 overflow-y-auto"},zC={class:"flex items-center justify-center min-h-screen"},NC={class:"bg-white rounded-lg shadow-xl transform transition-all max-w-lg w-full"},UC={class:"p-6"},FC={class:"mb-2"},jC={class:"text-indigo-600"},WC={class:"text-sm text-slate-600 bg-slate-50 p-3 rounded-md max-h-40 overflow-y-auto border"},qC={key:1,class:"fixed z-10 inset-0 overflow-y-auto"},HC={class:"flex items-center justify-center min-h-screen"},VC={class:"bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all max-w-lg w-full"},KC={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},GC={class:"mt-4 space-y-4"},ZC={key:0,class:"text-red-500 text-sm"},YC={__name:"StudentDashboardView",setup(t){const n=Wo(),r=ft(JSON.parse(localStorage.getItem("studentInfo")||"{}")),i=ft([]),o=ft(!0);Ze({text:"",type:"success"});const l=ft(!1),u=Ze({currentPassword:"",newPassword:"",confirmPassword:"",error:""}),f=Ze({show:!1,files:[],assignmentId:null,assignmentTitle:"",fileInputRef:null}),d=z=>z.due_date&&new Date(z.due_date)<new Date,y=(z,B="success",Y=5e3)=>{const V=document.createElement("div");V.className=`fixed top-5 right-5 p-4 rounded-lg shadow-lg text-white ${B==="success"?"bg-green-500":"bg-red-500"}`,V.textContent=z,document.body.appendChild(V),setTimeout(()=>{V.remove()},Y)},_=()=>{localStorage.clear(),window.location.href="/auth"},m=()=>{n.push({name:"pingpong-student"})},b=()=>{n.push({name:"quiz-game-student"})},v=async()=>{o.value=!0;try{const z=await qt("/api/student/assignments");if(!z.ok)throw new Error("無法讀取作業列表");i.value=await z.json()}catch(z){y(z.message,"error")}finally{o.value=!1}},C=z=>{const B=document.getElementById(`file-upload-${z}`);B&&B.click()},x=(z,B)=>{const Y=Array.from(z.target.files);if(Y.length===0)return;const V=i.value.find(tt=>tt.id===B);Object.assign(f,{show:!0,files:Y,assignmentId:B,assignmentTitle:V.title,fileInputRef:z.target})},T=()=>{f.fileInputRef&&(f.fileInputRef.value=""),Object.assign(f,{show:!1,files:[],assignmentId:null,assignmentTitle:"",fileInputRef:null})},A=async()=>{const z=new FormData;f.files.forEach(B=>{z.append("files",B)});try{const B=await qt(`/api/student/upload/${f.assignmentId}`,{method:"POST",body:z}),Y=await B.json();if(!B.ok)throw new Error(Y.error||"上傳失敗");y(Y.message,"success"),v()}catch(B){y(B.message,"error")}finally{T()}},L=()=>{l.value=!1,Object.assign(u,{currentPassword:"",newPassword:"",confirmPassword:"",error:""})},D=async()=>{if(u.error="",u.newPassword!==u.confirmPassword)return u.error="新密碼與確認密碼不相符。";if(u.newPassword.length<6)return u.error="新密碼長度至少需要 6 個字元。";try{const z=await qt("/api/student/change-password",{method:"POST",body:JSON.stringify({currentPassword:u.currentPassword,newPassword:u.newPassword})}),B=await z.json();if(!z.ok)throw new Error(B.error);y("密碼已成功更新！您無需重新登入。","success"),L()}catch(z){u.error=z.message}};return Ye(v),(z,B)=>(W(),H("div",mC,[c("div",vC,[c("div",_C,[c("div",null,[B[5]||(B[5]=c("h1",{class:"text-4xl font-bold text-slate-800"},"學生儀表板",-1)),c("p",yC,lt(r.value.name)+" 同學，您好！",1)]),c("div",bC,[c("button",{onClick:b,class:"btn bg-yellow-500 hover:bg-yellow-600"},"加入搶答競賽"),c("button",{onClick:m,class:"btn bg-teal-500 hover:bg-teal-600"},"加入 PingPong"),c("button",{onClick:B[0]||(B[0]=Y=>l.value=!0),class:"btn bg-slate-500 hover:bg-slate-600"},"修改密碼"),c("button",{onClick:_,class:"btn bg-red-500 hover:bg-red-600"},"登出")])]),c("div",xC,[B[9]||(B[9]=c("h2",{class:"text-3xl font-semibold text-slate-700"},"待繳交作業",-1)),o.value?(W(),H("div",wC,"作業列表讀取中...")):i.value.length===0?(W(),H("div",kC,"目前沒有需要繳交的作業。")):(W(),H("div",CC,[(W(!0),H(Ft,null,Xt(i.value,Y=>(W(),H("div",{key:Y.id,class:"card p-6"},[c("div",SC,[c("div",EC,[c("span",AC,lt(Y.subject_name),1),c("h3",TC,lt(Y.title),1),c("p",OC,lt(Y.description),1),c("p",{class:ce(["text-sm mt-3 font-medium",Y.due_date?new Date(Y.due_date)<new Date?"text-gray-500":"text-red-600":"text-green-600"])},[Y.due_date?(W(),H("span",RC,"繳交截止："+lt(new Date(Y.due_date).toLocaleString()),1)):(W(),H("span",IC,"沒有繳交期限"))],2)]),c("div",$C,[c("input",{type:"file",onChange:V=>x(V,Y.id),id:"file-upload-"+Y.id,class:"hidden",multiple:""},null,40,PC),Y.hasSubmitted?(W(),H("div",{key:0,class:ce(["w-full text-center py-3 px-6 text-base flex items-center justify-center gap-2 rounded-md font-bold",Y.isLate?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"])},[B[6]||(B[6]=c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c("span",null,lt(Y.isLate?"已補交":"已繳交"),1)],2)):Et("",!0),Y.hasSubmitted&&Y.allow_resubmission?(W(),H("button",{key:1,onClick:V=>C(Y.id),class:"w-full mt-2 btn btn-secondary py-3 px-6 text-base flex items-center justify-center gap-2"},[...B[7]||(B[7]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h5"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 12a8 8 0 018-8v0a8 8 0 018 8v0a8 8 0 01-8 8v0a8 8 0 01-8-8v0z"})],-1),c("span",null,"重新上傳",-1)])],8,LC)):Et("",!0),Y.hasSubmitted?Et("",!0):(W(),H("div",MC,[c("button",{onClick:V=>C(Y.id),class:ce(["w-full btn py-3 px-6 text-base flex items-center justify-center gap-2",d(Y)?"btn-danger":"btn-primary"])},[B[8]||(B[8]=c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),c("span",null,lt(d(Y)?"請補交作業":"選擇檔案上傳"),1)],10,BC)]))])])]))),128))]))])]),f.show?(W(),H("div",DC,[c("div",zC,[c("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:T}),c("div",NC,[c("div",UC,[B[13]||(B[13]=c("h3",{class:"text-xl font-bold mb-4"},"確認上傳",-1)),c("p",FC,[B[10]||(B[10]=ee("您確定要將以下 ",-1)),c("strong",jC,lt(f.files.length),1),B[11]||(B[11]=ee(" 個檔案上傳至「",-1)),c("strong",null,lt(f.assignmentTitle),1),B[12]||(B[12]=ee("」嗎？",-1))]),c("ul",WC,[(W(!0),H(Ft,null,Xt(f.files,Y=>(W(),H("li",{key:Y.name,class:"truncate"},lt(Y.name),1))),128))])]),c("div",{class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"},[c("button",{onClick:T,class:"btn btn-secondary"},"取消"),c("button",{onClick:A,class:"btn btn-primary"},"確認上傳")])])])])):Et("",!0),l.value?(W(),H("div",qC,[c("div",HC,[c("div",{class:"fixed inset-0 bg-gray-500 opacity-75",onClick:B[1]||(B[1]=Y=>l.value=!1)}),c("div",VC,[c("form",{onSubmit:De(D,["prevent"])},[c("div",KC,[B[17]||(B[17]=c("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"修改密碼",-1)),c("div",GC,[c("div",null,[B[14]||(B[14]=c("label",{class:"block text-sm font-medium text-gray-700"},"目前的密碼",-1)),Bt(c("input",{type:"password","onUpdate:modelValue":B[2]||(B[2]=Y=>u.currentPassword=Y),required:"",class:"mt-1 form-input"},null,512),[[jt,u.currentPassword]])]),c("div",null,[B[15]||(B[15]=c("label",{class:"block text-sm font-medium text-gray-700"},"新密碼 (至少 6 個字元)",-1)),Bt(c("input",{type:"password","onUpdate:modelValue":B[3]||(B[3]=Y=>u.newPassword=Y),required:"",class:"mt-1 form-input"},null,512),[[jt,u.newPassword]])]),c("div",null,[B[16]||(B[16]=c("label",{class:"block text-sm font-medium text-gray-700"},"確認新密碼",-1)),Bt(c("input",{type:"password","onUpdate:modelValue":B[4]||(B[4]=Y=>u.confirmPassword=Y),required:"",class:"mt-1 form-input"},null,512),[[jt,u.confirmPassword]])]),u.error?(W(),H("p",ZC,lt(u.error),1)):Et("",!0)])]),c("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[B[18]||(B[18]=c("button",{type:"submit",class:"btn btn-primary"},"確認修改",-1)),c("button",{type:"button",onClick:L,class:"btn btn-secondary sm:ml-3 mt-2 sm:mt-0"},"取消")])],32)])])])):Et("",!0)]))}},JC={class:"min-h-screen bg-slate-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},XC={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-lg"},QC={class:"bg-white py-8 px-4 shadow-2xl rounded-2xl sm:px-10"},t6={key:0,class:"mb-6"},e6={class:"flex border-b border-slate-200"},n6={key:0,class:"text-red-500 text-base text-center font-semibold"},r6={key:0},s6={class:"mt-4"},i6={key:1},o6={class:"mt-4"},a6={key:2,class:"text-red-500 text-base text-center font-semibold"},l6={key:3,class:"mt-6"},u6={__name:"AuthView",setup(t){const n=ft(!1),r=ft(""),i=Wo(),o=ft("teacher"),l=Ze({name:"",username:"",account:"",password:"",passwordConfirm:""});Ar(o,()=>{r.value="",Object.keys(l).forEach(_=>l[_]="")}),Ye(async()=>{try{const m=await(await fetch("/api/auth/teacher/setup-status")).json();n.value=m.setupNeeded}catch{r.value="無法連接到伺服器，請確認後端是否已啟動。"}});const f=async()=>{if(r.value="",l.password!==l.passwordConfirm)return r.value="兩次輸入的密碼不一致。";if(l.password.length<6)return r.value="密碼長度至少需要 6 個字元。";try{const _=await fetch("/api/auth/teacher/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l.name,username:l.username,password:l.password})});if(!_.ok)throw new Error((await _.json()).error);alert("帳號建立成功！請使用剛剛建立的帳號密碼登入。"),window.location.reload()}catch(_){r.value=_.message}},d=async()=>{r.value="";const _=o.value==="teacher",m=_?"/api/auth/teacher/login":"/api/auth/student/login",b=_?{username:l.username,password:l.password}:{account:l.account,password:l.password};try{const v=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),C=await v.json();if(!v.ok)throw new Error(C.error);_?(localStorage.setItem("teacherToken",C.token),localStorage.setItem("teacherInfo",JSON.stringify(C.teacher)),window.location.href="/"):(localStorage.setItem("studentToken",C.token),localStorage.setItem("studentInfo",JSON.stringify(C.student)),window.location.href="/student/dashboard")}catch(v){r.value=v.message}},y=()=>i.push({name:"pingpong-student"});return(_,m)=>(W(),H("div",JC,[m[23]||(m[23]=c("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[c("h2",{class:"mt-6 text-center text-4xl font-extrabold text-sky-600"}," 智慧班級 "),c("p",{class:"mt-2 text-center text-lg text-slate-500"},"一個為課堂而生的互動平台")],-1)),c("div",XC,[c("div",QC,[n.value?Et("",!0):(W(),H("div",t6,[c("div",e6,[c("button",{onClick:m[0]||(m[0]=b=>o.value="teacher"),class:ce(["w-1/2 py-4 text-center font-semibold text-lg transition-colors duration-200",o.value==="teacher"?"border-b-4 border-sky-500 text-sky-600":"text-slate-500 hover:text-slate-800"])}," 教師登入 ",2),c("button",{onClick:m[1]||(m[1]=b=>o.value="student"),class:ce(["w-1/2 py-4 text-center font-semibold text-lg transition-colors duration-200",o.value==="student"?"border-b-4 border-sky-500 text-sky-600":"text-slate-500 hover:text-slate-800"])}," 學生登入 ",2)])])),n.value&&o.value==="teacher"?(W(),H("form",{key:1,class:"space-y-6",onSubmit:De(f,["prevent"])},[m[14]||(m[14]=c("h3",{class:"text-xl font-medium text-center text-slate-800"},"建立您的教師帳號",-1)),m[15]||(m[15]=c("p",{class:"text-center text-base text-slate-600"},"這是您第一次啟動，請設定第一位管理者帳號。",-1)),c("div",null,[m[10]||(m[10]=c("label",{for:"name",class:"block text-base font-medium text-slate-700"},"姓名",-1)),Bt(c("input",{"onUpdate:modelValue":m[2]||(m[2]=b=>l.name=b),id:"name",type:"text",required:"",placeholder:"請輸入您的姓名",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.name]])]),c("div",null,[m[11]||(m[11]=c("label",{for:"username",class:"block text-base font-medium text-slate-700"},"帳號",-1)),Bt(c("input",{"onUpdate:modelValue":m[3]||(m[3]=b=>l.username=b),id:"username",type:"text",required:"",placeholder:"設定您的登入帳號",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.username]])]),c("div",null,[m[12]||(m[12]=c("label",{for:"password",class:"block text-base font-medium text-slate-700"},"密碼",-1)),Bt(c("input",{"onUpdate:modelValue":m[4]||(m[4]=b=>l.password=b),id:"password",type:"password",required:"",placeholder:"至少 6 個字元",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.password]])]),c("div",null,[m[13]||(m[13]=c("label",{for:"passwordConfirm",class:"block text-base font-medium text-slate-700"},"確認密碼",-1)),Bt(c("input",{"onUpdate:modelValue":m[5]||(m[5]=b=>l.passwordConfirm=b),id:"passwordConfirm",type:"password",required:"",placeholder:"再次輸入您的密碼",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.passwordConfirm]])]),r.value?(W(),H("div",n6,lt(r.value),1)):Et("",!0),m[16]||(m[16]=c("div",null,[c("button",{type:"submit",class:"w-full btn btn-success text-xl py-4"},"建立帳號")],-1))],32)):(W(),H("form",{key:2,class:"space-y-6",onSubmit:De(d,["prevent"])},[o.value==="teacher"?(W(),H("div",r6,[c("div",null,[m[17]||(m[17]=c("label",{for:"login-username",class:"block text-base font-medium text-slate-700"},"教師帳號",-1)),Bt(c("input",{"onUpdate:modelValue":m[6]||(m[6]=b=>l.username=b),id:"login-username",type:"text",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.username]])]),c("div",s6,[m[18]||(m[18]=c("label",{for:"login-password",class:"block text-base font-medium text-slate-700"},"密碼",-1)),Bt(c("input",{"onUpdate:modelValue":m[7]||(m[7]=b=>l.password=b),id:"login-password",type:"password",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.password]])])])):Et("",!0),o.value==="student"?(W(),H("div",i6,[c("div",null,[m[19]||(m[19]=c("label",{for:"student-account",class:"block text-base font-medium text-slate-700"},"學生帳號",-1)),Bt(c("input",{"onUpdate:modelValue":m[8]||(m[8]=b=>l.account=b),id:"student-account",type:"text",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.account]])]),c("div",o6,[m[20]||(m[20]=c("label",{for:"student-password",class:"block text-base font-medium text-slate-700"},"密碼",-1)),Bt(c("input",{"onUpdate:modelValue":m[9]||(m[9]=b=>l.password=b),id:"student-password",type:"password",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[jt,l.password]])])])):Et("",!0),r.value?(W(),H("div",a6,lt(r.value),1)):Et("",!0),m[21]||(m[21]=c("div",null,[c("button",{type:"submit",class:"w-full btn btn-primary text-xl py-4"},"登入")],-1))],32)),n.value?Et("",!0):(W(),H("div",l6,[m[22]||(m[22]=lr('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-slate-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-slate-500 text-base">或者</span></div></div>',1)),c("div",{class:"mt-6"},[c("button",{onClick:y,class:"w-full btn bg-teal-500 hover:bg-teal-600 text-xl py-4"},"加入 PingPong 活動")])]))])])]))}},qn=Object.create(null);qn.open="0";qn.close="1";qn.ping="2";qn.pong="3";qn.message="4";qn.upgrade="5";qn.noop="6";const mo=Object.create(null);Object.keys(qn).forEach(t=>{mo[qn[t]]=t});const Dl={type:"error",data:"parser error"},ip=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",op=typeof ArrayBuffer=="function",ap=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,cu=({type:t,data:n},r,i)=>ip&&n instanceof Blob?r?i(n):zd(n,i):op&&(n instanceof ArrayBuffer||ap(n))?r?i(n):zd(new Blob([n]),i):i(qn[t]+(n||"")),zd=(t,n)=>{const r=new FileReader;return r.onload=function(){const i=r.result.split(",")[1];n("b"+(i||""))},r.readAsDataURL(t)};function Nd(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let bl;function c6(t,n){if(ip&&t.data instanceof Blob)return t.data.arrayBuffer().then(Nd).then(n);if(op&&(t.data instanceof ArrayBuffer||ap(t.data)))return n(Nd(t.data));cu(t,!1,r=>{bl||(bl=new TextEncoder),n(bl.encode(r))})}const Ud="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ud.length;t++)Gs[Ud.charCodeAt(t)]=t;const f6=t=>{let n=t.length*.75,r=t.length,i,o=0,l,u,f,d;t[t.length-1]==="="&&(n--,t[t.length-2]==="="&&n--);const y=new ArrayBuffer(n),_=new Uint8Array(y);for(i=0;i<r;i+=4)l=Gs[t.charCodeAt(i)],u=Gs[t.charCodeAt(i+1)],f=Gs[t.charCodeAt(i+2)],d=Gs[t.charCodeAt(i+3)],_[o++]=l<<2|u>>4,_[o++]=(u&15)<<4|f>>2,_[o++]=(f&3)<<6|d&63;return y},d6=typeof ArrayBuffer=="function",fu=(t,n)=>{if(typeof t!="string")return{type:"message",data:lp(t,n)};const r=t.charAt(0);return r==="b"?{type:"message",data:h6(t.substring(1),n)}:mo[r]?t.length>1?{type:mo[r],data:t.substring(1)}:{type:mo[r]}:Dl},h6=(t,n)=>{if(d6){const r=f6(t);return lp(r,n)}else return{base64:!0,data:t}},lp=(t,n)=>{switch(n){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},up="",p6=(t,n)=>{const r=t.length,i=new Array(r);let o=0;t.forEach((l,u)=>{cu(l,!1,f=>{i[u]=f,++o===r&&n(i.join(up))})})},g6=(t,n)=>{const r=t.split(up),i=[];for(let o=0;o<r.length;o++){const l=fu(r[o],n);if(i.push(l),l.type==="error")break}return i};function m6(){return new TransformStream({transform(t,n){c6(t,r=>{const i=r.length;let o;if(i<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,i);else if(i<65536){o=new Uint8Array(3);const l=new DataView(o.buffer);l.setUint8(0,126),l.setUint16(1,i)}else{o=new Uint8Array(9);const l=new DataView(o.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(o[0]|=128),n.enqueue(o),n.enqueue(r)})}})}let xl;function ao(t){return t.reduce((n,r)=>n+r.length,0)}function lo(t,n){if(t[0].length===n)return t.shift();const r=new Uint8Array(n);let i=0;for(let o=0;o<n;o++)r[o]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),r}function v6(t,n){xl||(xl=new TextDecoder);const r=[];let i=0,o=-1,l=!1;return new TransformStream({transform(u,f){for(r.push(u);;){if(i===0){if(ao(r)<1)break;const d=lo(r,1);l=(d[0]&128)===128,o=d[0]&127,o<126?i=3:o===126?i=1:i=2}else if(i===1){if(ao(r)<2)break;const d=lo(r,2);o=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),i=3}else if(i===2){if(ao(r)<8)break;const d=lo(r,8),y=new DataView(d.buffer,d.byteOffset,d.length),_=y.getUint32(0);if(_>Math.pow(2,21)-1){f.enqueue(Dl);break}o=_*Math.pow(2,32)+y.getUint32(4),i=3}else{if(ao(r)<o)break;const d=lo(r,o);f.enqueue(fu(l?d:xl.decode(d),n)),i=0}if(o===0||o>t){f.enqueue(Dl);break}}}})}const cp=4;function Oe(t){if(t)return _6(t)}function _6(t){for(var n in Oe.prototype)t[n]=Oe.prototype[n];return t}Oe.prototype.on=Oe.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(n),this};Oe.prototype.once=function(t,n){function r(){this.off(t,r),n.apply(this,arguments)}return r.fn=n,this.on(t,r),this};Oe.prototype.off=Oe.prototype.removeListener=Oe.prototype.removeAllListeners=Oe.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,o=0;o<r.length;o++)if(i=r[o],i===n||i.fn===n){r.splice(o,1);break}return r.length===0&&delete this._callbacks["$"+t],this};Oe.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),r=this._callbacks["$"+t],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,o=r.length;i<o;++i)r[i].apply(this,n)}return this};Oe.prototype.emitReserved=Oe.prototype.emit;Oe.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Oe.prototype.hasListeners=function(t){return!!this.listeners(t).length};const qo=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,r)=>r(n,0),xn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),y6="arraybuffer";function fp(t,...n){return n.reduce((r,i)=>(t.hasOwnProperty(i)&&(r[i]=t[i]),r),{})}const b6=xn.setTimeout,x6=xn.clearTimeout;function Ho(t,n){n.useNativeTimers?(t.setTimeoutFn=b6.bind(xn),t.clearTimeoutFn=x6.bind(xn)):(t.setTimeoutFn=xn.setTimeout.bind(xn),t.clearTimeoutFn=xn.clearTimeout.bind(xn))}const w6=1.33;function k6(t){return typeof t=="string"?C6(t):Math.ceil((t.byteLength||t.size)*w6)}function C6(t){let n=0,r=0;for(let i=0,o=t.length;i<o;i++)n=t.charCodeAt(i),n<128?r+=1:n<2048?r+=2:n<55296||n>=57344?r+=3:(i++,r+=4);return r}function dp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function S6(t){let n="";for(let r in t)t.hasOwnProperty(r)&&(n.length&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n}function E6(t){let n={},r=t.split("&");for(let i=0,o=r.length;i<o;i++){let l=r[i].split("=");n[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return n}class A6 extends Error{constructor(n,r,i){super(n),this.description=r,this.context=i,this.type="TransportError"}}class du extends Oe{constructor(n){super(),this.writable=!1,Ho(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,r,i){return super.emitReserved("error",new A6(n,r,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const r=fu(n,this.socket.binaryType);this.onPacket(r)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,r={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const r=S6(n);return r.length?"?"+r:""}}class T6 extends du{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const r=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||r()})),this.writable||(i++,this.once("drain",function(){--i||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};g6(n,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,p6(n,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=dp()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(n,r)}}let hp=!1;try{hp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const O6=hp;function R6(){}class I6 extends T6{constructor(n){if(super(n),typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||i!==n.port}}doWrite(n,r){const i=this.request({method:"POST",data:n});i.on("success",r),i.on("error",(o,l)=>{this.onError("xhr post error",o,l)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(r,i)=>{this.onError("xhr poll error",r,i)}),this.pollXhr=n}}class Fn extends Oe{constructor(n,r,i){super(),this.createRequest=n,Ho(this,i),this._opts=i,this._method=i.method||"GET",this._uri=r,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var n;const r=fp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(r);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var o;i.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=Fn.requestsCount++,Fn.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=R6,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Fn.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Fn.requestsCount=0;Fn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Fd);else if(typeof addEventListener=="function"){const t="onpagehide"in xn?"pagehide":"unload";addEventListener(t,Fd,!1)}}function Fd(){for(let t in Fn.requests)Fn.requests.hasOwnProperty(t)&&Fn.requests[t].abort()}const $6=function(){const t=pp({xdomain:!1});return t&&t.responseType!==null}();class P6 extends I6{constructor(n){super(n);const r=n&&n.forceBase64;this.supportsBinary=$6&&!r}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new Fn(pp,this.uri(),n)}}function pp(t){const n=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||O6))return new XMLHttpRequest}catch{}if(!n)try{return new xn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const gp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class L6 extends du{get name(){return"websocket"}doOpen(){const n=this.uri(),r=this.opts.protocols,i=gp?{}:fp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,r,i)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const i=n[r],o=r===n.length-1;cu(i,this.supportsBinary,l=>{try{this.doWrite(i,l)}catch{}o&&qo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=dp()),this.supportsBinary||(r.b64=1),this.createUri(n,r)}}const wl=xn.WebSocket||xn.MozWebSocket;class M6 extends L6{createSocket(n,r,i){return gp?new wl(n,r,i):r?new wl(n,r):new wl(n)}doWrite(n,r){this.ws.send(r)}}class B6 extends du{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const r=v6(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=n.readable.pipeThrough(r).getReader(),o=m6();o.readable.pipeTo(n.writable),this._writer=o.writable.getWriter();const l=()=>{i.read().then(({done:f,value:d})=>{f||(this.onPacket(d),l())}).catch(f=>{})};l();const u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this._writer.write(u).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const i=n[r],o=r===n.length-1;this._writer.write(i).then(()=>{o&&qo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const D6={websocket:M6,webtransport:B6,polling:P6},z6=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,N6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function zl(t){if(t.length>8e3)throw"URI too long";const n=t,r=t.indexOf("["),i=t.indexOf("]");r!=-1&&i!=-1&&(t=t.substring(0,r)+t.substring(r,i).replace(/:/g,";")+t.substring(i,t.length));let o=z6.exec(t||""),l={},u=14;for(;u--;)l[N6[u]]=o[u]||"";return r!=-1&&i!=-1&&(l.source=n,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=U6(l,l.path),l.queryKey=F6(l,l.query),l}function U6(t,n){const r=/\/{2,9}/g,i=n.replace(r,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&i.splice(0,1),n.slice(-1)=="/"&&i.splice(i.length-1,1),i}function F6(t,n){const r={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,o,l){o&&(r[o]=l)}),r}const Nl=typeof addEventListener=="function"&&typeof removeEventListener=="function",vo=[];Nl&&addEventListener("offline",()=>{vo.forEach(t=>t())},!1);class Tr extends Oe{constructor(n,r){if(super(),this.binaryType=y6,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){const i=zl(n);r.hostname=i.host,r.secure=i.protocol==="https"||i.protocol==="wss",r.port=i.port,i.query&&(r.query=i.query)}else r.host&&(r.hostname=zl(r.host).host);Ho(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(i=>{const o=i.prototype.name;this.transports.push(o),this._transportsByName[o]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=E6(this.opts.query)),Nl&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},vo.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const r=Object.assign({},this.opts.query);r.EIO=cp,r.transport=n,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&Tr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Tr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const o=this.writeBuffer[i].data;if(o&&(r+=k6(o)),i>0&&r>this._maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,qo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,i){return this._sendPacket("message",n,r,i),this}send(n,r,i){return this._sendPacket("message",n,r,i),this}_sendPacket(n,r,i,o){if(typeof r=="function"&&(o=r,r=void 0),typeof i=="function"&&(o=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const l={type:n,data:r,options:i};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),o&&this.once("flush",o),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():n()}):this.upgrading?i():n()),this}_onError(n){if(Tr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Nl&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=vo.indexOf(this._offlineEventListener);i!==-1&&vo.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}Tr.protocol=cp;class j6 extends Tr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let r=this.createTransport(n),i=!1;Tr.priorWebsocketSuccess=!1;const o=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!i)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Tr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(_(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=r.name,this.emitReserved("upgradeError",b)}}))};function l(){i||(i=!0,_(),r.close(),r=null)}const u=m=>{const b=new Error("probe error: "+m);b.transport=r.name,l(),this.emitReserved("upgradeError",b)};function f(){u("transport closed")}function d(){u("socket closed")}function y(m){r&&m.name!==r.name&&l()}const _=()=>{r.removeListener("open",o),r.removeListener("error",u),r.removeListener("close",f),this.off("close",d),this.off("upgrading",y)};r.once("open",o),r.once("error",u),r.once("close",f),this.once("close",d),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{i||r.open()},200):r.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const r=[];for(let i=0;i<n.length;i++)~this.transports.indexOf(n[i])&&r.push(n[i]);return r}}let W6=class extends j6{constructor(n,r={}){const i=typeof n=="object"?n:r;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(o=>D6[o]).filter(o=>!!o)),super(n,i)}};function q6(t,n="",r){let i=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),i=zl(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const l=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+l+":"+i.port+n,i.href=i.protocol+"://"+l+(r&&r.port===i.port?"":":"+i.port),i}const H6=typeof ArrayBuffer=="function",V6=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,mp=Object.prototype.toString,K6=typeof Blob=="function"||typeof Blob<"u"&&mp.call(Blob)==="[object BlobConstructor]",G6=typeof File=="function"||typeof File<"u"&&mp.call(File)==="[object FileConstructor]";function hu(t){return H6&&(t instanceof ArrayBuffer||V6(t))||K6&&t instanceof Blob||G6&&t instanceof File}function _o(t,n){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,i=t.length;r<i;r++)if(_o(t[r]))return!0;return!1}if(hu(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return _o(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&_o(t[r]))return!0;return!1}function Z6(t){const n=[],r=t.data,i=t;return i.data=Ul(r,n),i.attachments=n.length,{packet:i,buffers:n}}function Ul(t,n){if(!t)return t;if(hu(t)){const r={_placeholder:!0,num:n.length};return n.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=Ul(t[i],n);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=Ul(t[i],n));return r}return t}function Y6(t,n){return t.data=Fl(t.data,n),delete t.attachments,t}function Fl(t,n){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<n.length)return n[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Fl(t[r],n);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Fl(t[r],n));return t}const J6=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],X6=5;var te;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(te||(te={}));class Q6{constructor(n){this.replacer=n}encode(n){return(n.type===te.EVENT||n.type===te.ACK)&&_o(n)?this.encodeAsBinary({type:n.type===te.EVENT?te.BINARY_EVENT:te.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let r=""+n.type;return(n.type===te.BINARY_EVENT||n.type===te.BINARY_ACK)&&(r+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(r+=n.nsp+","),n.id!=null&&(r+=n.id),n.data!=null&&(r+=JSON.stringify(n.data,this.replacer)),r}encodeAsBinary(n){const r=Z6(n),i=this.encodeAsString(r.packet),o=r.buffers;return o.unshift(i),o}}function jd(t){return Object.prototype.toString.call(t)==="[object Object]"}class pu extends Oe{constructor(n){super(),this.reviver=n}add(n){let r;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(n);const i=r.type===te.BINARY_EVENT;i||r.type===te.BINARY_ACK?(r.type=i?te.EVENT:te.ACK,this.reconstructor=new tS(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(hu(n)||n.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(n),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let r=0;const i={type:Number(n.charAt(0))};if(te[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===te.BINARY_EVENT||i.type===te.BINARY_ACK){const l=r+1;for(;n.charAt(++r)!=="-"&&r!=n.length;);const u=n.substring(l,r);if(u!=Number(u)||n.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(u)}if(n.charAt(r+1)==="/"){const l=r+1;for(;++r&&!(n.charAt(r)===","||r===n.length););i.nsp=n.substring(l,r)}else i.nsp="/";const o=n.charAt(r+1);if(o!==""&&Number(o)==o){const l=r+1;for(;++r;){const u=n.charAt(r);if(u==null||Number(u)!=u){--r;break}if(r===n.length)break}i.id=Number(n.substring(l,r+1))}if(n.charAt(++r)){const l=this.tryParse(n.substr(r));if(pu.isPayloadValid(i.type,l))i.data=l;else throw new Error("invalid payload")}return i}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,r){switch(n){case te.CONNECT:return jd(r);case te.DISCONNECT:return r===void 0;case te.CONNECT_ERROR:return typeof r=="string"||jd(r);case te.EVENT:case te.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&J6.indexOf(r[0])===-1);case te.ACK:case te.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class tS{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const r=Y6(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const eS=Object.freeze(Object.defineProperty({__proto__:null,Decoder:pu,Encoder:Q6,get PacketType(){return te},protocol:X6},Symbol.toStringTag,{value:"Module"}));function Rn(t,n,r){return t.on(n,r),function(){t.off(n,r)}}const nS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class vp extends Oe{constructor(n,r,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[Rn(n,"open",this.onopen.bind(this)),Rn(n,"packet",this.onpacket.bind(this)),Rn(n,"error",this.onerror.bind(this)),Rn(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...r){var i,o,l;if(nS.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(r.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const u={type:te.EVENT,data:r};if(u.options={},u.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const _=this.ids++,m=r.pop();this._registerAckCallback(_,m),u.id=_}const f=(o=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||o===void 0?void 0:o.writable,d=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!f||(d?(this.notifyOutgoingListeners(u),this.packet(u)):this.sendBuffer.push(u)),this.flags={},this}_registerAckCallback(n,r){var i;const o=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(o===void 0){this.acks[n]=r;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let f=0;f<this.sendBuffer.length;f++)this.sendBuffer[f].id===n&&this.sendBuffer.splice(f,1);r.call(this,new Error("operation has timed out"))},o),u=(...f)=>{this.io.clearTimeoutFn(l),r.apply(this,f)};u.withError=!0,this.acks[n]=u}emitWithAck(n,...r){return new Promise((i,o)=>{const l=(u,f)=>u?o(u):i(f);l.withError=!0,r.push(l),this.emit(n,...r)})}_addToQueue(n){let r;typeof n[n.length-1]=="function"&&(r=n.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((o,...l)=>i!==this._queue[0]?void 0:(o!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(o)):(this._queue.shift(),r&&r(null,...l)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!n||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:te.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(i=>String(i.id)===n)){const i=this.acks[n];delete this.acks[n],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case te.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case te.EVENT:case te.BINARY_EVENT:this.onevent(n);break;case te.ACK:case te.BINARY_ACK:this.onack(n);break;case te.DISCONNECT:this.ondisconnect();break;case te.CONNECT_ERROR:this.destroy();const i=new Error(n.data.message);i.data=n.data.data,this.emitReserved("connect_error",i);break}}onevent(n){const r=n.data||[];n.id!=null&&r.push(this.ack(n.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const i of r)i.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const r=this;let i=!1;return function(...o){i||(i=!0,r.packet({type:te.ACK,id:n,data:o}))}}onack(n){const r=this.acks[n.id];typeof r=="function"&&(delete this.acks[n.id],r.withError&&n.data.unshift(null),r.apply(this,n.data))}onconnect(n,r){this.id=n,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:te.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const r=this._anyListeners;for(let i=0;i<r.length;i++)if(n===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const r=this._anyOutgoingListeners;for(let i=0;i<r.length;i++)if(n===r[i])return r.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const i of r)i.apply(this,n.data)}}}function Es(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Es.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*t);t=Math.floor(n*10)&1?t+r:t-r}return Math.min(t,this.max)|0};Es.prototype.reset=function(){this.attempts=0};Es.prototype.setMin=function(t){this.ms=t};Es.prototype.setMax=function(t){this.max=t};Es.prototype.setJitter=function(t){this.jitter=t};class jl extends Oe{constructor(n,r){var i;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(r=n,n=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Ho(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Es({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=n;const o=r.parser||eS;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var r;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(r=this.backoff)===null||r===void 0||r.setMin(n),this)}randomizationFactor(n){var r;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(r=this.backoff)===null||r===void 0||r.setJitter(n),this)}reconnectionDelayMax(n){var r;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(r=this.backoff)===null||r===void 0||r.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new W6(this.uri,this.opts);const r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const o=Rn(r,"open",function(){i.onopen(),n&&n()}),l=f=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",f),n?n(f):this.maybeReconnectOnOpen()},u=Rn(r,"error",l);if(this._timeout!==!1){const f=this._timeout,d=this.setTimeoutFn(()=>{o(),l(new Error("timeout")),r.close()},f);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(o),this.subs.push(u),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(Rn(n,"ping",this.onping.bind(this)),Rn(n,"data",this.ondata.bind(this)),Rn(n,"error",this.onerror.bind(this)),Rn(n,"close",this.onclose.bind(this)),Rn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(r){this.onclose("parse error",r)}}ondecoded(n){qo(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,r){let i=this.nsps[n];return i?this._autoConnect&&!i.active&&i.connect():(i=new vp(this,n,r),this.nsps[n]=i),i}_destroy(n){const r=Object.keys(this.nsps);for(const i of r)if(this.nsps[i].active)return;this._close()}_packet(n){const r=this.encoder.encode(n);for(let i=0;i<r.length;i++)this.engine.write(r[i],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,r){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(o=>{o?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",o)):n.onreconnect()}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const Vs={};function Vr(t,n){typeof t=="object"&&(n=t,t=void 0),n=n||{};const r=q6(t,n.path||"/socket.io"),i=r.source,o=r.id,l=r.path,u=Vs[o]&&l in Vs[o].nsps,f=n.forceNew||n["force new connection"]||n.multiplex===!1||u;let d;return f?d=new jl(i,n):(Vs[o]||(Vs[o]=new jl(i,n)),d=Vs[o]),r.query&&!n.query&&(n.query=r.queryKey),d.socket(r.path,n)}Object.assign(Vr,{Manager:jl,Socket:vp,io:Vr,connect:Vr});function uo(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _p={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,n){(function(r){t.exports=r()})(function(){return function r(i,o,l){function u(y,_){if(!o[y]){if(!i[y]){var m=typeof uo=="function"&&uo;if(!_&&m)return m(y,!0);if(f)return f(y,!0);var b=new Error("Cannot find module '"+y+"'");throw b.code="MODULE_NOT_FOUND",b}var v=o[y]={exports:{}};i[y][0].call(v.exports,function(C){var x=i[y][1][C];return u(x||C)},v,v.exports,r,i,o,l)}return o[y].exports}for(var f=typeof uo=="function"&&uo,d=0;d<l.length;d++)u(l[d]);return u}({1:[function(r,i,o){var l=r("./utils"),u=r("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(d){for(var y,_,m,b,v,C,x,T=[],A=0,L=d.length,D=L,z=l.getTypeOf(d)!=="string";A<d.length;)D=L-A,m=z?(y=d[A++],_=A<L?d[A++]:0,A<L?d[A++]:0):(y=d.charCodeAt(A++),_=A<L?d.charCodeAt(A++):0,A<L?d.charCodeAt(A++):0),b=y>>2,v=(3&y)<<4|_>>4,C=1<D?(15&_)<<2|m>>6:64,x=2<D?63&m:64,T.push(f.charAt(b)+f.charAt(v)+f.charAt(C)+f.charAt(x));return T.join("")},o.decode=function(d){var y,_,m,b,v,C,x=0,T=0,A="data:";if(d.substr(0,A.length)===A)throw new Error("Invalid base64 input, it looks like a data url.");var L,D=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===f.charAt(64)&&D--,d.charAt(d.length-2)===f.charAt(64)&&D--,D%1!=0)throw new Error("Invalid base64 input, bad content length.");for(L=u.uint8array?new Uint8Array(0|D):new Array(0|D);x<d.length;)y=f.indexOf(d.charAt(x++))<<2|(b=f.indexOf(d.charAt(x++)))>>4,_=(15&b)<<4|(v=f.indexOf(d.charAt(x++)))>>2,m=(3&v)<<6|(C=f.indexOf(d.charAt(x++))),L[T++]=y,v!==64&&(L[T++]=_),C!==64&&(L[T++]=m);return L}},{"./support":30,"./utils":32}],2:[function(r,i,o){var l=r("./external"),u=r("./stream/DataWorker"),f=r("./stream/Crc32Probe"),d=r("./stream/DataLengthProbe");function y(_,m,b,v,C){this.compressedSize=_,this.uncompressedSize=m,this.crc32=b,this.compression=v,this.compressedContent=C}y.prototype={getContentWorker:function(){var _=new u(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),m=this;return _.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_},getCompressedWorker:function(){return new u(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(_,m,b){return _.pipe(new f).pipe(new d("uncompressedSize")).pipe(m.compressWorker(b)).pipe(new d("compressedSize")).withStreamInfo("compression",m)},i.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,i,o){var l=r("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},o.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,i,o){var l=r("./utils"),u=function(){for(var f,d=[],y=0;y<256;y++){f=y;for(var _=0;_<8;_++)f=1&f?3988292384^f>>>1:f>>>1;d[y]=f}return d}();i.exports=function(f,d){return f!==void 0&&f.length?l.getTypeOf(f)!=="string"?function(y,_,m,b){var v=u,C=b+m;y^=-1;for(var x=b;x<C;x++)y=y>>>8^v[255&(y^_[x])];return-1^y}(0|d,f,f.length,0):function(y,_,m,b){var v=u,C=b+m;y^=-1;for(var x=b;x<C;x++)y=y>>>8^v[255&(y^_.charCodeAt(x))];return-1^y}(0|d,f,f.length,0):0}},{"./utils":32}],5:[function(r,i,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(r,i,o){var l=null;l=typeof Promise<"u"?Promise:r("lie"),i.exports={Promise:l}},{lie:37}],7:[function(r,i,o){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=r("pako"),f=r("./utils"),d=r("./stream/GenericWorker"),y=l?"uint8array":"array";function _(m,b){d.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=b,this.meta={}}o.magic="\b\0",f.inherits(_,d),_.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(f.transformTo(y,m.data),!1)},_.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},_.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(b){m.push({data:b,meta:m.meta})}},o.compressWorker=function(m){return new _("Deflate",m)},o.uncompressWorker=function(){return new _("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,i,o){function l(v,C){var x,T="";for(x=0;x<C;x++)T+=String.fromCharCode(255&v),v>>>=8;return T}function u(v,C,x,T,A,L){var D,z,B=v.file,Y=v.compression,V=L!==y.utf8encode,tt=f.transformTo("string",L(B.name)),N=f.transformTo("string",y.utf8encode(B.name)),I=B.comment,K=f.transformTo("string",L(I)),k=f.transformTo("string",y.utf8encode(I)),$=N.length!==B.name.length,g=k.length!==I.length,rt="",Ct="",pt="",At=B.dir,xt=B.date,$t={crc32:0,compressedSize:0,uncompressedSize:0};C&&!x||($t.crc32=v.crc32,$t.compressedSize=v.compressedSize,$t.uncompressedSize=v.uncompressedSize);var it=0;C&&(it|=8),V||!$&&!g||(it|=2048);var st=0,Pt=0;At&&(st|=16),A==="UNIX"?(Pt=798,st|=function(at,gt){var J=at;return at||(J=gt?16893:33204),(65535&J)<<16}(B.unixPermissions,At)):(Pt=20,st|=function(at){return 63&(at||0)}(B.dosPermissions)),D=xt.getUTCHours(),D<<=6,D|=xt.getUTCMinutes(),D<<=5,D|=xt.getUTCSeconds()/2,z=xt.getUTCFullYear()-1980,z<<=4,z|=xt.getUTCMonth()+1,z<<=5,z|=xt.getUTCDate(),$&&(Ct=l(1,1)+l(_(tt),4)+N,rt+="up"+l(Ct.length,2)+Ct),g&&(pt=l(1,1)+l(_(K),4)+k,rt+="uc"+l(pt.length,2)+pt);var Tt="";return Tt+=`
\0`,Tt+=l(it,2),Tt+=Y.magic,Tt+=l(D,2),Tt+=l(z,2),Tt+=l($t.crc32,4),Tt+=l($t.compressedSize,4),Tt+=l($t.uncompressedSize,4),Tt+=l(tt.length,2),Tt+=l(rt.length,2),{fileRecord:m.LOCAL_FILE_HEADER+Tt+tt+rt,dirRecord:m.CENTRAL_FILE_HEADER+l(Pt,2)+Tt+l(K.length,2)+"\0\0\0\0"+l(st,4)+l(T,4)+tt+rt+K}}var f=r("../utils"),d=r("../stream/GenericWorker"),y=r("../utf8"),_=r("../crc32"),m=r("../signature");function b(v,C,x,T){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=C,this.zipPlatform=x,this.encodeFileName=T,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}f.inherits(b,d),b.prototype.push=function(v){var C=v.meta.percent||0,x=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,d.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:x?(C+100*(x-T-1))/x:100}}))},b.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var C=this.streamFiles&&!v.file.dir;if(C){var x=u(v,C,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(v){this.accumulate=!1;var C=this.streamFiles&&!v.file.dir,x=u(v,C,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),C)this.push({data:function(T){return m.DATA_DESCRIPTOR+l(T.crc32,4)+l(T.compressedSize,4)+l(T.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var v=this.bytesWritten,C=0;C<this.dirRecords.length;C++)this.push({data:this.dirRecords[C],meta:{percent:100}});var x=this.bytesWritten-v,T=function(A,L,D,z,B){var Y=f.transformTo("string",B(z));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(A,2)+l(A,2)+l(L,4)+l(D,4)+l(Y.length,2)+Y}(this.dirRecords.length,x,v,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(v){this._sources.push(v);var C=this;return v.on("data",function(x){C.processChunk(x)}),v.on("end",function(){C.closedSource(C.previous.streamInfo),C._sources.length?C.prepareNextSource():C.end()}),v.on("error",function(x){C.error(x)}),this},b.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(v){var C=this._sources;if(!d.prototype.error.call(this,v))return!1;for(var x=0;x<C.length;x++)try{C[x].error(v)}catch{}return!0},b.prototype.lock=function(){d.prototype.lock.call(this);for(var v=this._sources,C=0;C<v.length;C++)v[C].lock()},i.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,i,o){var l=r("../compressions"),u=r("./ZipFileWorker");o.generateWorker=function(f,d,y){var _=new u(d.streamFiles,y,d.platform,d.encodeFileName),m=0;try{f.forEach(function(b,v){m++;var C=function(L,D){var z=L||D,B=l[z];if(!B)throw new Error(z+" is not a valid compression method !");return B}(v.options.compression,d.compression),x=v.options.compressionOptions||d.compressionOptions||{},T=v.dir,A=v.date;v._compressWorker(C,x).withStreamInfo("file",{name:b,dir:T,date:A,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(_)}),_.entriesCount=m}catch(b){_.error(b)}return _}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,i,o){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new l;for(var f in this)typeof this[f]!="function"&&(u[f]=this[f]);return u}}(l.prototype=r("./object")).loadAsync=r("./load"),l.support=r("./support"),l.defaults=r("./defaults"),l.version="3.10.1",l.loadAsync=function(u,f){return new l().loadAsync(u,f)},l.external=r("./external"),i.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,i,o){var l=r("./utils"),u=r("./external"),f=r("./utf8"),d=r("./zipEntries"),y=r("./stream/Crc32Probe"),_=r("./nodejsUtils");function m(b){return new u.Promise(function(v,C){var x=b.decompressed.getContentWorker().pipe(new y);x.on("error",function(T){C(T)}).on("end",function(){x.streamInfo.crc32!==b.decompressed.crc32?C(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}i.exports=function(b,v){var C=this;return v=l.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:f.utf8decode}),_.isNode&&_.isStream(b)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",b,!0,v.optimizedBinaryString,v.base64).then(function(x){var T=new d(v);return T.load(x),T}).then(function(x){var T=[u.Promise.resolve(x)],A=x.files;if(v.checkCRC32)for(var L=0;L<A.length;L++)T.push(m(A[L]));return u.Promise.all(T)}).then(function(x){for(var T=x.shift(),A=T.files,L=0;L<A.length;L++){var D=A[L],z=D.fileNameStr,B=l.resolve(D.fileNameStr);C.file(B,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:v.createFolders}),D.dir||(C.file(B).unsafeOriginalName=z)}return T.zipComment.length&&(C.comment=T.zipComment),C})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,i,o){var l=r("../utils"),u=r("../stream/GenericWorker");function f(d,y){u.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(y)}l.inherits(f,u),f.prototype._bindStream=function(d){var y=this;(this._stream=d).pause(),d.on("data",function(_){y.push({data:_,meta:{percent:0}})}).on("error",function(_){y.isPaused?this.generatedError=_:y.error(_)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},f.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},f.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=f},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,i,o){var l=r("readable-stream").Readable;function u(f,d,y){l.call(this,d),this._helper=f;var _=this;f.on("data",function(m,b){_.push(m)||_._helper.pause(),y&&y(b)}).on("error",function(m){_.emit("error",m)}).on("end",function(){_.push(null)})}r("../utils").inherits(u,l),u.prototype._read=function(){this._helper.resume()},i.exports=u},{"../utils":32,"readable-stream":16}],14:[function(r,i,o){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,u);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,u)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var u=new Buffer(l);return u.fill(0),u},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(r,i,o){function l(B,Y,V){var tt,N=f.getTypeOf(Y),I=f.extend(V||{},_);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(B=A(B)),I.createFolders&&(tt=T(B))&&L.call(this,tt,!0);var K=N==="string"&&I.binary===!1&&I.base64===!1;V&&V.binary!==void 0||(I.binary=!K),(Y instanceof m&&Y.uncompressedSize===0||I.dir||!Y||Y.length===0)&&(I.base64=!1,I.binary=!0,Y="",I.compression="STORE",N="string");var k=null;k=Y instanceof m||Y instanceof d?Y:C.isNode&&C.isStream(Y)?new x(B,Y):f.prepareContent(B,Y,I.binary,I.optimizedBinaryString,I.base64);var $=new b(B,k,I);this.files[B]=$}var u=r("./utf8"),f=r("./utils"),d=r("./stream/GenericWorker"),y=r("./stream/StreamHelper"),_=r("./defaults"),m=r("./compressedObject"),b=r("./zipObject"),v=r("./generate"),C=r("./nodejsUtils"),x=r("./nodejs/NodejsStreamInputAdapter"),T=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var Y=B.lastIndexOf("/");return 0<Y?B.substring(0,Y):""},A=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},L=function(B,Y){return Y=Y!==void 0?Y:_.createFolders,B=A(B),this.files[B]||l.call(this,B,null,{dir:!0,createFolders:Y}),this.files[B]};function D(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var Y,V,tt;for(Y in this.files)tt=this.files[Y],(V=Y.slice(this.root.length,Y.length))&&Y.slice(0,this.root.length)===this.root&&B(V,tt)},filter:function(B){var Y=[];return this.forEach(function(V,tt){B(V,tt)&&Y.push(tt)}),Y},file:function(B,Y,V){if(arguments.length!==1)return B=this.root+B,l.call(this,B,Y,V),this;if(D(B)){var tt=B;return this.filter(function(I,K){return!K.dir&&tt.test(I)})}var N=this.files[this.root+B];return N&&!N.dir?N:null},folder:function(B){if(!B)return this;if(D(B))return this.filter(function(N,I){return I.dir&&B.test(N)});var Y=this.root+B,V=L.call(this,Y),tt=this.clone();return tt.root=V.name,tt},remove:function(B){B=this.root+B;var Y=this.files[B];if(Y||(B.slice(-1)!=="/"&&(B+="/"),Y=this.files[B]),Y&&!Y.dir)delete this.files[B];else for(var V=this.filter(function(N,I){return I.name.slice(0,B.length)===B}),tt=0;tt<V.length;tt++)delete this.files[V[tt].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var Y,V={};try{if((V=f.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=V.type.toLowerCase(),V.compression=V.compression.toUpperCase(),V.type==="binarystring"&&(V.type="string"),!V.type)throw new Error("No output type specified.");f.checkSupport(V.type),V.platform!=="darwin"&&V.platform!=="freebsd"&&V.platform!=="linux"&&V.platform!=="sunos"||(V.platform="UNIX"),V.platform==="win32"&&(V.platform="DOS");var tt=V.comment||this.comment||"";Y=v.generateWorker(this,V,tt)}catch(N){(Y=new d("error")).error(N)}return new y(Y,V.type||"string",V.mimeType)},generateAsync:function(B,Y){return this.generateInternalStream(B).accumulate(Y)},generateNodeStream:function(B,Y){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(Y)}};i.exports=z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,i,o){i.exports=r("stream")},{stream:void 0}],17:[function(r,i,o){var l=r("./DataReader");function u(f){l.call(this,f);for(var d=0;d<this.data.length;d++)f[d]=255&f[d]}r("../utils").inherits(u,l),u.prototype.byteAt=function(f){return this.data[this.zero+f]},u.prototype.lastIndexOfSignature=function(f){for(var d=f.charCodeAt(0),y=f.charCodeAt(1),_=f.charCodeAt(2),m=f.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===d&&this.data[b+1]===y&&this.data[b+2]===_&&this.data[b+3]===m)return b-this.zero;return-1},u.prototype.readAndCheckSignature=function(f){var d=f.charCodeAt(0),y=f.charCodeAt(1),_=f.charCodeAt(2),m=f.charCodeAt(3),b=this.readData(4);return d===b[0]&&y===b[1]&&_===b[2]&&m===b[3]},u.prototype.readData=function(f){if(this.checkOffset(f),f===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=u},{"../utils":32,"./DataReader":18}],18:[function(r,i,o){var l=r("../utils");function u(f){this.data=f,this.length=f.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(f){this.checkIndex(this.index+f)},checkIndex:function(f){if(this.length<this.zero+f||f<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+f+"). Corrupted zip ?")},setIndex:function(f){this.checkIndex(f),this.index=f},skip:function(f){this.setIndex(this.index+f)},byteAt:function(){},readInt:function(f){var d,y=0;for(this.checkOffset(f),d=this.index+f-1;d>=this.index;d--)y=(y<<8)+this.byteAt(d);return this.index+=f,y},readString:function(f){return l.transformTo("string",this.readData(f))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var f=this.readInt(4);return new Date(Date.UTC(1980+(f>>25&127),(f>>21&15)-1,f>>16&31,f>>11&31,f>>5&63,(31&f)<<1))}},i.exports=u},{"../utils":32}],19:[function(r,i,o){var l=r("./Uint8ArrayReader");function u(f){l.call(this,f)}r("../utils").inherits(u,l),u.prototype.readData=function(f){this.checkOffset(f);var d=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,i,o){var l=r("./DataReader");function u(f){l.call(this,f)}r("../utils").inherits(u,l),u.prototype.byteAt=function(f){return this.data.charCodeAt(this.zero+f)},u.prototype.lastIndexOfSignature=function(f){return this.data.lastIndexOf(f)-this.zero},u.prototype.readAndCheckSignature=function(f){return f===this.readData(4)},u.prototype.readData=function(f){this.checkOffset(f);var d=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=u},{"../utils":32,"./DataReader":18}],21:[function(r,i,o){var l=r("./ArrayReader");function u(f){l.call(this,f)}r("../utils").inherits(u,l),u.prototype.readData=function(f){if(this.checkOffset(f),f===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(r,i,o){var l=r("../utils"),u=r("../support"),f=r("./ArrayReader"),d=r("./StringReader"),y=r("./NodeBufferReader"),_=r("./Uint8ArrayReader");i.exports=function(m){var b=l.getTypeOf(m);return l.checkSupport(b),b!=="string"||u.uint8array?b==="nodebuffer"?new y(m):u.uint8array?new _(l.transformTo("uint8array",m)):new f(l.transformTo("array",m)):new d(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,i,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,i,o){var l=r("./GenericWorker"),u=r("../utils");function f(d){l.call(this,"ConvertWorker to "+d),this.destType=d}u.inherits(f,l),f.prototype.processChunk=function(d){this.push({data:u.transformTo(this.destType,d.data),meta:d.meta})},i.exports=f},{"../utils":32,"./GenericWorker":28}],25:[function(r,i,o){var l=r("./GenericWorker"),u=r("../crc32");function f(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(f,l),f.prototype.processChunk=function(d){this.streamInfo.crc32=u(d.data,this.streamInfo.crc32||0),this.push(d)},i.exports=f},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,i,o){var l=r("../utils"),u=r("./GenericWorker");function f(d){u.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}l.inherits(f,u),f.prototype.processChunk=function(d){if(d){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+d.data.length}u.prototype.processChunk.call(this,d)},i.exports=f},{"../utils":32,"./GenericWorker":28}],27:[function(r,i,o){var l=r("../utils"),u=r("./GenericWorker");function f(d){u.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(_){y.dataIsReady=!0,y.data=_,y.max=_&&_.length||0,y.type=l.getTypeOf(_),y.isPaused||y._tickAndRepeat()},function(_){y.error(_)})}l.inherits(f,u),f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},f.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},f.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},f.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,y);break;case"uint8array":d=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":d=this.data.slice(this.index,y)}return this.index=y,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=f},{"../utils":32,"./GenericWorker":28}],28:[function(r,i,o){function l(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,f){return this._listeners[u].push(f),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,f){if(this._listeners[u])for(var d=0;d<this._listeners[u].length;d++)this._listeners[u][d].call(this,f)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var f=this;return u.on("data",function(d){f.processChunk(d)}),u.on("end",function(){f.end()}),u.on("error",function(d){f.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,f){return this.extraStreamInfo[u]=f,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},i.exports=l},{}],29:[function(r,i,o){var l=r("../utils"),u=r("./ConvertWorker"),f=r("./GenericWorker"),d=r("../base64"),y=r("../support"),_=r("../external"),m=null;if(y.nodestream)try{m=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(C,x){return new _.Promise(function(T,A){var L=[],D=C._internalType,z=C._outputType,B=C._mimeType;C.on("data",function(Y,V){L.push(Y),x&&x(V)}).on("error",function(Y){L=[],A(Y)}).on("end",function(){try{var Y=function(V,tt,N){switch(V){case"blob":return l.newBlob(l.transformTo("arraybuffer",tt),N);case"base64":return d.encode(tt);default:return l.transformTo(V,tt)}}(z,function(V,tt){var N,I=0,K=null,k=0;for(N=0;N<tt.length;N++)k+=tt[N].length;switch(V){case"string":return tt.join("");case"array":return Array.prototype.concat.apply([],tt);case"uint8array":for(K=new Uint8Array(k),N=0;N<tt.length;N++)K.set(tt[N],I),I+=tt[N].length;return K;case"nodebuffer":return Buffer.concat(tt);default:throw new Error("concat : unsupported type '"+V+"'")}}(D,L),B);T(Y)}catch(V){A(V)}L=[]}).resume()})}function v(C,x,T){var A=x;switch(x){case"blob":case"arraybuffer":A="uint8array";break;case"base64":A="string"}try{this._internalType=A,this._outputType=x,this._mimeType=T,l.checkSupport(A),this._worker=C.pipe(new u(A)),C.lock()}catch(L){this._worker=new f("error"),this._worker.error(L)}}v.prototype={accumulate:function(C){return b(this,C)},on:function(C,x){var T=this;return C==="data"?this._worker.on(C,function(A){x.call(T,A.data,A.meta)}):this._worker.on(C,function(){l.delay(x,arguments,T)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(C){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},C)}},i.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,i,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var l=new ArrayBuffer(0);try{o.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(l),o.blob=u.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!r("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(r,i,o){for(var l=r("./utils"),u=r("./support"),f=r("./nodejsUtils"),d=r("./stream/GenericWorker"),y=new Array(256),_=0;_<256;_++)y[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;y[254]=y[254]=1;function m(){d.call(this,"utf-8 decode"),this.leftOver=null}function b(){d.call(this,"utf-8 encode")}o.utf8encode=function(v){return u.nodebuffer?f.newBufferFrom(v,"utf-8"):function(C){var x,T,A,L,D,z=C.length,B=0;for(L=0;L<z;L++)(64512&(T=C.charCodeAt(L)))==55296&&L+1<z&&(64512&(A=C.charCodeAt(L+1)))==56320&&(T=65536+(T-55296<<10)+(A-56320),L++),B+=T<128?1:T<2048?2:T<65536?3:4;for(x=u.uint8array?new Uint8Array(B):new Array(B),L=D=0;D<B;L++)(64512&(T=C.charCodeAt(L)))==55296&&L+1<z&&(64512&(A=C.charCodeAt(L+1)))==56320&&(T=65536+(T-55296<<10)+(A-56320),L++),T<128?x[D++]=T:(T<2048?x[D++]=192|T>>>6:(T<65536?x[D++]=224|T>>>12:(x[D++]=240|T>>>18,x[D++]=128|T>>>12&63),x[D++]=128|T>>>6&63),x[D++]=128|63&T);return x}(v)},o.utf8decode=function(v){return u.nodebuffer?l.transformTo("nodebuffer",v).toString("utf-8"):function(C){var x,T,A,L,D=C.length,z=new Array(2*D);for(x=T=0;x<D;)if((A=C[x++])<128)z[T++]=A;else if(4<(L=y[A]))z[T++]=65533,x+=L-1;else{for(A&=L===2?31:L===3?15:7;1<L&&x<D;)A=A<<6|63&C[x++],L--;1<L?z[T++]=65533:A<65536?z[T++]=A:(A-=65536,z[T++]=55296|A>>10&1023,z[T++]=56320|1023&A)}return z.length!==T&&(z.subarray?z=z.subarray(0,T):z.length=T),l.applyFromCharCode(z)}(v=l.transformTo(u.uint8array?"uint8array":"array",v))},l.inherits(m,d),m.prototype.processChunk=function(v){var C=l.transformTo(u.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var x=C;(C=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),C.set(x,this.leftOver.length)}else C=this.leftOver.concat(C);this.leftOver=null}var T=function(L,D){var z;for((D=D||L.length)>L.length&&(D=L.length),z=D-1;0<=z&&(192&L[z])==128;)z--;return z<0||z===0?D:z+y[L[z]]>D?z:D}(C),A=C;T!==C.length&&(u.uint8array?(A=C.subarray(0,T),this.leftOver=C.subarray(T,C.length)):(A=C.slice(0,T),this.leftOver=C.slice(T,C.length))),this.push({data:o.utf8decode(A),meta:v.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=m,l.inherits(b,d),b.prototype.processChunk=function(v){this.push({data:o.utf8encode(v.data),meta:v.meta})},o.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,i,o){var l=r("./support"),u=r("./base64"),f=r("./nodejsUtils"),d=r("./external");function y(x){return x}function _(x,T){for(var A=0;A<x.length;++A)T[A]=255&x.charCodeAt(A);return T}r("setimmediate"),o.newBlob=function(x,T){o.checkSupport("blob");try{return new Blob([x],{type:T})}catch{try{var A=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return A.append(x),A.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(x,T,A){var L=[],D=0,z=x.length;if(z<=A)return String.fromCharCode.apply(null,x);for(;D<z;)T==="array"||T==="nodebuffer"?L.push(String.fromCharCode.apply(null,x.slice(D,Math.min(D+A,z)))):L.push(String.fromCharCode.apply(null,x.subarray(D,Math.min(D+A,z)))),D+=A;return L.join("")},stringifyByChar:function(x){for(var T="",A=0;A<x.length;A++)T+=String.fromCharCode(x[A]);return T},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,f.allocBuffer(1)).length===1}catch{return!1}}()}};function b(x){var T=65536,A=o.getTypeOf(x),L=!0;if(A==="uint8array"?L=m.applyCanBeUsed.uint8array:A==="nodebuffer"&&(L=m.applyCanBeUsed.nodebuffer),L)for(;1<T;)try{return m.stringifyByChunk(x,A,T)}catch{T=Math.floor(T/2)}return m.stringifyByChar(x)}function v(x,T){for(var A=0;A<x.length;A++)T[A]=x[A];return T}o.applyFromCharCode=b;var C={};C.string={string:y,array:function(x){return _(x,new Array(x.length))},arraybuffer:function(x){return C.string.uint8array(x).buffer},uint8array:function(x){return _(x,new Uint8Array(x.length))},nodebuffer:function(x){return _(x,f.allocBuffer(x.length))}},C.array={string:b,array:y,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return f.newBufferFrom(x)}},C.arraybuffer={string:function(x){return b(new Uint8Array(x))},array:function(x){return v(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:y,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return f.newBufferFrom(new Uint8Array(x))}},C.uint8array={string:b,array:function(x){return v(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:y,nodebuffer:function(x){return f.newBufferFrom(x)}},C.nodebuffer={string:b,array:function(x){return v(x,new Array(x.length))},arraybuffer:function(x){return C.nodebuffer.uint8array(x).buffer},uint8array:function(x){return v(x,new Uint8Array(x.length))},nodebuffer:y},o.transformTo=function(x,T){if(T=T||"",!x)return T;o.checkSupport(x);var A=o.getTypeOf(T);return C[A][x](T)},o.resolve=function(x){for(var T=x.split("/"),A=[],L=0;L<T.length;L++){var D=T[L];D==="."||D===""&&L!==0&&L!==T.length-1||(D===".."?A.pop():A.push(D))}return A.join("/")},o.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":l.nodebuffer&&f.isBuffer(x)?"nodebuffer":l.uint8array&&x instanceof Uint8Array?"uint8array":l.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(x){if(!l[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(x){var T,A,L="";for(A=0;A<(x||"").length;A++)L+="\\x"+((T=x.charCodeAt(A))<16?"0":"")+T.toString(16).toUpperCase();return L},o.delay=function(x,T,A){setImmediate(function(){x.apply(A||null,T||[])})},o.inherits=function(x,T){function A(){}A.prototype=T.prototype,x.prototype=new A},o.extend=function(){var x,T,A={};for(x=0;x<arguments.length;x++)for(T in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],T)&&A[T]===void 0&&(A[T]=arguments[x][T]);return A},o.prepareContent=function(x,T,A,L,D){return d.Promise.resolve(T).then(function(z){return l.blob&&(z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(z))!==-1)&&typeof FileReader<"u"?new d.Promise(function(B,Y){var V=new FileReader;V.onload=function(tt){B(tt.target.result)},V.onerror=function(tt){Y(tt.target.error)},V.readAsArrayBuffer(z)}):z}).then(function(z){var B=o.getTypeOf(z);return B?(B==="arraybuffer"?z=o.transformTo("uint8array",z):B==="string"&&(D?z=u.decode(z):A&&L!==!0&&(z=function(Y){return _(Y,l.uint8array?new Uint8Array(Y.length):new Array(Y.length))}(z))),z):d.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,i,o){var l=r("./reader/readerFor"),u=r("./utils"),f=r("./signature"),d=r("./zipEntry"),y=r("./support");function _(m){this.files=[],this.loadOptions=m}_.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(b)+", expected "+u.pretty(m)+")")}},isSignature:function(m,b){var v=this.reader.index;this.reader.setIndex(m);var C=this.reader.readString(4)===b;return this.reader.setIndex(v),C},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),b=y.uint8array?"uint8array":"array",v=u.transformTo(b,m);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,b,v,C=this.zip64EndOfCentralSize-44;0<C;)m=this.reader.readInt(2),b=this.reader.readInt(4),v=this.reader.readData(b),this.zip64ExtensibleData[m]={id:m,length:b,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,b;for(m=0;m<this.files.length;m++)b=this.files[m],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(f.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(f.CENTRAL_FILE_HEADER);)(m=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(f.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,f.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var b=m;if(this.checkSignature(f.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,f.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var C=b-v;if(0<C)this.isSignature(b,f.CENTRAL_FILE_HEADER)||(this.reader.zero=C);else if(C<0)throw new Error("Corrupted zip: missing "+Math.abs(C)+" bytes.")},prepareReader:function(m){this.reader=l(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=_},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,i,o){var l=r("./reader/readerFor"),u=r("./utils"),f=r("./compressedObject"),d=r("./crc32"),y=r("./utf8"),_=r("./compressions"),m=r("./support");function b(v,C){this.options=v,this.loadOptions=C}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var C,x;if(v.skip(22),this.fileNameLength=v.readInt(2),x=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((C=function(T){for(var A in _)if(Object.prototype.hasOwnProperty.call(_,A)&&_[A].magic===T)return _[A];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new f(this.compressedSize,this.uncompressedSize,this.crc32,C,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var C=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(C),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=l(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var C,x,T,A=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<A;)C=v.readInt(2),x=v.readInt(2),T=v.readData(x),this.extraFields[C]={id:C,length:x,value:T};v.setIndex(A)},handleUTF8:function(){var v=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var C=this.findExtraFieldUnicodePath();if(C!==null)this.fileNameStr=C;else{var x=u.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var A=u.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(A)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var C=l(v.value);return C.readInt(1)!==1||d(this.fileName)!==C.readInt(4)?null:y.utf8decode(C.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var C=l(v.value);return C.readInt(1)!==1||d(this.fileComment)!==C.readInt(4)?null:y.utf8decode(C.readData(v.length-5))}return null}},i.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,i,o){function l(C,x,T){this.name=C,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=x,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var u=r("./stream/StreamHelper"),f=r("./stream/DataWorker"),d=r("./utf8"),y=r("./compressedObject"),_=r("./stream/GenericWorker");l.prototype={internalStream:function(C){var x=null,T="string";try{if(!C)throw new Error("No output type specified.");var A=(T=C.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),x=this._decompressWorker();var L=!this._dataBinary;L&&!A&&(x=x.pipe(new d.Utf8EncodeWorker)),!L&&A&&(x=x.pipe(new d.Utf8DecodeWorker))}catch(D){(x=new _("error")).error(D)}return new u(x,T,"")},async:function(C,x){return this.internalStream(C).accumulate(x)},nodeStream:function(C,x){return this.internalStream(C||"nodebuffer").toNodejsStream(x)},_compressWorker:function(C,x){if(this._data instanceof y&&this._data.compression.magic===C.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new d.Utf8EncodeWorker)),y.createWorkerFrom(T,C,x)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof _?this._data:new f(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<m.length;v++)l.prototype[m[v]]=b;i.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,i,o){(function(l){var u,f,d=l.MutationObserver||l.WebKitMutationObserver;if(d){var y=0,_=new d(C),m=l.document.createTextNode("");_.observe(m,{characterData:!0}),u=function(){m.data=y=++y%2}}else if(l.setImmediate||l.MessageChannel===void 0)u="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var x=l.document.createElement("script");x.onreadystatechange=function(){C(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},l.document.documentElement.appendChild(x)}:function(){setTimeout(C,0)};else{var b=new l.MessageChannel;b.port1.onmessage=C,u=function(){b.port2.postMessage(0)}}var v=[];function C(){var x,T;f=!0;for(var A=v.length;A;){for(T=v,v=[],x=-1;++x<A;)T[x]();A=v.length}f=!1}i.exports=function(x){v.push(x)!==1||f||u()}}).call(this,typeof ar<"u"?ar:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,i,o){var l=r("immediate");function u(){}var f={},d=["REJECTED"],y=["FULFILLED"],_=["PENDING"];function m(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,A!==u&&x(this,A)}function b(A,L,D){this.promise=A,typeof L=="function"&&(this.onFulfilled=L,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function v(A,L,D){l(function(){var z;try{z=L(D)}catch(B){return f.reject(A,B)}z===A?f.reject(A,new TypeError("Cannot resolve promise with itself")):f.resolve(A,z)})}function C(A){var L=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof L=="function")return function(){L.apply(A,arguments)}}function x(A,L){var D=!1;function z(V){D||(D=!0,f.reject(A,V))}function B(V){D||(D=!0,f.resolve(A,V))}var Y=T(function(){L(B,z)});Y.status==="error"&&z(Y.value)}function T(A,L){var D={};try{D.value=A(L),D.status="success"}catch(z){D.status="error",D.value=z}return D}(i.exports=m).prototype.finally=function(A){if(typeof A!="function")return this;var L=this.constructor;return this.then(function(D){return L.resolve(A()).then(function(){return D})},function(D){return L.resolve(A()).then(function(){throw D})})},m.prototype.catch=function(A){return this.then(null,A)},m.prototype.then=function(A,L){if(typeof A!="function"&&this.state===y||typeof L!="function"&&this.state===d)return this;var D=new this.constructor(u);return this.state!==_?v(D,this.state===y?A:L,this.outcome):this.queue.push(new b(D,A,L)),D},b.prototype.callFulfilled=function(A){f.resolve(this.promise,A)},b.prototype.otherCallFulfilled=function(A){v(this.promise,this.onFulfilled,A)},b.prototype.callRejected=function(A){f.reject(this.promise,A)},b.prototype.otherCallRejected=function(A){v(this.promise,this.onRejected,A)},f.resolve=function(A,L){var D=T(C,L);if(D.status==="error")return f.reject(A,D.value);var z=D.value;if(z)x(A,z);else{A.state=y,A.outcome=L;for(var B=-1,Y=A.queue.length;++B<Y;)A.queue[B].callFulfilled(L)}return A},f.reject=function(A,L){A.state=d,A.outcome=L;for(var D=-1,z=A.queue.length;++D<z;)A.queue[D].callRejected(L);return A},m.resolve=function(A){return A instanceof this?A:f.resolve(new this(u),A)},m.reject=function(A){var L=new this(u);return f.reject(L,A)},m.all=function(A){var L=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=A.length,z=!1;if(!D)return this.resolve([]);for(var B=new Array(D),Y=0,V=-1,tt=new this(u);++V<D;)N(A[V],V);return tt;function N(I,K){L.resolve(I).then(function(k){B[K]=k,++Y!==D||z||(z=!0,f.resolve(tt,B))},function(k){z||(z=!0,f.reject(tt,k))})}},m.race=function(A){var L=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=A.length,z=!1;if(!D)return this.resolve([]);for(var B=-1,Y=new this(u);++B<D;)V=A[B],L.resolve(V).then(function(tt){z||(z=!0,f.resolve(Y,tt))},function(tt){z||(z=!0,f.reject(Y,tt))});var V;return Y}},{immediate:36}],38:[function(r,i,o){var l={};(0,r("./lib/utils/common").assign)(l,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),i.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,i,o){var l=r("./zlib/deflate"),u=r("./utils/common"),f=r("./utils/strings"),d=r("./zlib/messages"),y=r("./zlib/zstream"),_=Object.prototype.toString,m=0,b=-1,v=0,C=8;function x(A){if(!(this instanceof x))return new x(A);this.options=u.assign({level:b,method:C,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},A||{});var L=this.options;L.raw&&0<L.windowBits?L.windowBits=-L.windowBits:L.gzip&&0<L.windowBits&&L.windowBits<16&&(L.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var D=l.deflateInit2(this.strm,L.level,L.method,L.windowBits,L.memLevel,L.strategy);if(D!==m)throw new Error(d[D]);if(L.header&&l.deflateSetHeader(this.strm,L.header),L.dictionary){var z;if(z=typeof L.dictionary=="string"?f.string2buf(L.dictionary):_.call(L.dictionary)==="[object ArrayBuffer]"?new Uint8Array(L.dictionary):L.dictionary,(D=l.deflateSetDictionary(this.strm,z))!==m)throw new Error(d[D]);this._dict_set=!0}}function T(A,L){var D=new x(L);if(D.push(A,!0),D.err)throw D.msg||d[D.err];return D.result}x.prototype.push=function(A,L){var D,z,B=this.strm,Y=this.options.chunkSize;if(this.ended)return!1;z=L===~~L?L:L===!0?4:0,typeof A=="string"?B.input=f.string2buf(A):_.call(A)==="[object ArrayBuffer]"?B.input=new Uint8Array(A):B.input=A,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new u.Buf8(Y),B.next_out=0,B.avail_out=Y),(D=l.deflate(B,z))!==1&&D!==m)return this.onEnd(D),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||z!==4&&z!==2)||(this.options.to==="string"?this.onData(f.buf2binstring(u.shrinkBuf(B.output,B.next_out))):this.onData(u.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&D!==1);return z===4?(D=l.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===m):z!==2||(this.onEnd(m),!(B.avail_out=0))},x.prototype.onData=function(A){this.chunks.push(A)},x.prototype.onEnd=function(A){A===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},o.Deflate=x,o.deflate=T,o.deflateRaw=function(A,L){return(L=L||{}).raw=!0,T(A,L)},o.gzip=function(A,L){return(L=L||{}).gzip=!0,T(A,L)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,i,o){var l=r("./zlib/inflate"),u=r("./utils/common"),f=r("./utils/strings"),d=r("./zlib/constants"),y=r("./zlib/messages"),_=r("./zlib/zstream"),m=r("./zlib/gzheader"),b=Object.prototype.toString;function v(x){if(!(this instanceof v))return new v(x);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},x||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||x&&x.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var A=l.inflateInit2(this.strm,T.windowBits);if(A!==d.Z_OK)throw new Error(y[A]);this.header=new m,l.inflateGetHeader(this.strm,this.header)}function C(x,T){var A=new v(T);if(A.push(x,!0),A.err)throw A.msg||y[A.err];return A.result}v.prototype.push=function(x,T){var A,L,D,z,B,Y,V=this.strm,tt=this.options.chunkSize,N=this.options.dictionary,I=!1;if(this.ended)return!1;L=T===~~T?T:T===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof x=="string"?V.input=f.binstring2buf(x):b.call(x)==="[object ArrayBuffer]"?V.input=new Uint8Array(x):V.input=x,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new u.Buf8(tt),V.next_out=0,V.avail_out=tt),(A=l.inflate(V,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&N&&(Y=typeof N=="string"?f.string2buf(N):b.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,A=l.inflateSetDictionary(this.strm,Y)),A===d.Z_BUF_ERROR&&I===!0&&(A=d.Z_OK,I=!1),A!==d.Z_STREAM_END&&A!==d.Z_OK)return this.onEnd(A),!(this.ended=!0);V.next_out&&(V.avail_out!==0&&A!==d.Z_STREAM_END&&(V.avail_in!==0||L!==d.Z_FINISH&&L!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(D=f.utf8border(V.output,V.next_out),z=V.next_out-D,B=f.buf2string(V.output,D),V.next_out=z,V.avail_out=tt-z,z&&u.arraySet(V.output,V.output,D,z,0),this.onData(B)):this.onData(u.shrinkBuf(V.output,V.next_out)))),V.avail_in===0&&V.avail_out===0&&(I=!0)}while((0<V.avail_in||V.avail_out===0)&&A!==d.Z_STREAM_END);return A===d.Z_STREAM_END&&(L=d.Z_FINISH),L===d.Z_FINISH?(A=l.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===d.Z_OK):L!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(V.avail_out=0))},v.prototype.onData=function(x){this.chunks.push(x)},v.prototype.onEnd=function(x){x===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},o.Inflate=v,o.inflate=C,o.inflateRaw=function(x,T){return(T=T||{}).raw=!0,C(x,T)},o.ungzip=C},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,i,o){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(d){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var _=y.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var m in _)_.hasOwnProperty(m)&&(d[m]=_[m])}}return d},o.shrinkBuf=function(d,y){return d.length===y?d:d.subarray?d.subarray(0,y):(d.length=y,d)};var u={arraySet:function(d,y,_,m,b){if(y.subarray&&d.subarray)d.set(y.subarray(_,_+m),b);else for(var v=0;v<m;v++)d[b+v]=y[_+v]},flattenChunks:function(d){var y,_,m,b,v,C;for(y=m=0,_=d.length;y<_;y++)m+=d[y].length;for(C=new Uint8Array(m),y=b=0,_=d.length;y<_;y++)v=d[y],C.set(v,b),b+=v.length;return C}},f={arraySet:function(d,y,_,m,b){for(var v=0;v<m;v++)d[b+v]=y[_+v]},flattenChunks:function(d){return[].concat.apply([],d)}};o.setTyped=function(d){d?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,u)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,f))},o.setTyped(l)},{}],42:[function(r,i,o){var l=r("./common"),u=!0,f=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f=!1}for(var d=new l.Buf8(256),y=0;y<256;y++)d[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function _(m,b){if(b<65537&&(m.subarray&&f||!m.subarray&&u))return String.fromCharCode.apply(null,l.shrinkBuf(m,b));for(var v="",C=0;C<b;C++)v+=String.fromCharCode(m[C]);return v}d[254]=d[254]=1,o.string2buf=function(m){var b,v,C,x,T,A=m.length,L=0;for(x=0;x<A;x++)(64512&(v=m.charCodeAt(x)))==55296&&x+1<A&&(64512&(C=m.charCodeAt(x+1)))==56320&&(v=65536+(v-55296<<10)+(C-56320),x++),L+=v<128?1:v<2048?2:v<65536?3:4;for(b=new l.Buf8(L),x=T=0;T<L;x++)(64512&(v=m.charCodeAt(x)))==55296&&x+1<A&&(64512&(C=m.charCodeAt(x+1)))==56320&&(v=65536+(v-55296<<10)+(C-56320),x++),v<128?b[T++]=v:(v<2048?b[T++]=192|v>>>6:(v<65536?b[T++]=224|v>>>12:(b[T++]=240|v>>>18,b[T++]=128|v>>>12&63),b[T++]=128|v>>>6&63),b[T++]=128|63&v);return b},o.buf2binstring=function(m){return _(m,m.length)},o.binstring2buf=function(m){for(var b=new l.Buf8(m.length),v=0,C=b.length;v<C;v++)b[v]=m.charCodeAt(v);return b},o.buf2string=function(m,b){var v,C,x,T,A=b||m.length,L=new Array(2*A);for(v=C=0;v<A;)if((x=m[v++])<128)L[C++]=x;else if(4<(T=d[x]))L[C++]=65533,v+=T-1;else{for(x&=T===2?31:T===3?15:7;1<T&&v<A;)x=x<<6|63&m[v++],T--;1<T?L[C++]=65533:x<65536?L[C++]=x:(x-=65536,L[C++]=55296|x>>10&1023,L[C++]=56320|1023&x)}return _(L,C)},o.utf8border=function(m,b){var v;for((b=b||m.length)>m.length&&(b=m.length),v=b-1;0<=v&&(192&m[v])==128;)v--;return v<0||v===0?b:v+d[m[v]]>b?v:b}},{"./common":41}],43:[function(r,i,o){i.exports=function(l,u,f,d){for(var y=65535&l|0,_=l>>>16&65535|0,m=0;f!==0;){for(f-=m=2e3<f?2e3:f;_=_+(y=y+u[d++]|0)|0,--m;);y%=65521,_%=65521}return y|_<<16|0}},{}],44:[function(r,i,o){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,i,o){var l=function(){for(var u,f=[],d=0;d<256;d++){u=d;for(var y=0;y<8;y++)u=1&u?3988292384^u>>>1:u>>>1;f[d]=u}return f}();i.exports=function(u,f,d,y){var _=l,m=y+d;u^=-1;for(var b=y;b<m;b++)u=u>>>8^_[255&(u^f[b])];return-1^u}},{}],46:[function(r,i,o){var l,u=r("../utils/common"),f=r("./trees"),d=r("./adler32"),y=r("./crc32"),_=r("./messages"),m=0,b=4,v=0,C=-2,x=-1,T=4,A=2,L=8,D=9,z=286,B=30,Y=19,V=2*z+1,tt=15,N=3,I=258,K=I+N+1,k=42,$=113,g=1,rt=2,Ct=3,pt=4;function At(h,F){return h.msg=_[F],F}function xt(h){return(h<<1)-(4<h?9:0)}function $t(h){for(var F=h.length;0<=--F;)h[F]=0}function it(h){var F=h.state,j=F.pending;j>h.avail_out&&(j=h.avail_out),j!==0&&(u.arraySet(h.output,F.pending_buf,F.pending_out,j,h.next_out),h.next_out+=j,F.pending_out+=j,h.total_out+=j,h.avail_out-=j,F.pending-=j,F.pending===0&&(F.pending_out=0))}function st(h,F){f._tr_flush_block(h,0<=h.block_start?h.block_start:-1,h.strstart-h.block_start,F),h.block_start=h.strstart,it(h.strm)}function Pt(h,F){h.pending_buf[h.pending++]=F}function Tt(h,F){h.pending_buf[h.pending++]=F>>>8&255,h.pending_buf[h.pending++]=255&F}function at(h,F){var j,E,O=h.max_chain_length,U=h.strstart,Q=h.prev_length,X=h.nice_match,G=h.strstart>h.w_size-K?h.strstart-(h.w_size-K):0,ot=h.window,_t=h.w_mask,ht=h.prev,St=h.strstart+I,Mt=ot[U+Q-1],Rt=ot[U+Q];h.prev_length>=h.good_match&&(O>>=2),X>h.lookahead&&(X=h.lookahead);do if(ot[(j=F)+Q]===Rt&&ot[j+Q-1]===Mt&&ot[j]===ot[U]&&ot[++j]===ot[U+1]){U+=2,j++;do;while(ot[++U]===ot[++j]&&ot[++U]===ot[++j]&&ot[++U]===ot[++j]&&ot[++U]===ot[++j]&&ot[++U]===ot[++j]&&ot[++U]===ot[++j]&&ot[++U]===ot[++j]&&ot[++U]===ot[++j]&&U<St);if(E=I-(St-U),U=St-I,Q<E){if(h.match_start=F,X<=(Q=E))break;Mt=ot[U+Q-1],Rt=ot[U+Q]}}while((F=ht[F&_t])>G&&--O!=0);return Q<=h.lookahead?Q:h.lookahead}function gt(h){var F,j,E,O,U,Q,X,G,ot,_t,ht=h.w_size;do{if(O=h.window_size-h.lookahead-h.strstart,h.strstart>=ht+(ht-K)){for(u.arraySet(h.window,h.window,ht,ht,0),h.match_start-=ht,h.strstart-=ht,h.block_start-=ht,F=j=h.hash_size;E=h.head[--F],h.head[F]=ht<=E?E-ht:0,--j;);for(F=j=ht;E=h.prev[--F],h.prev[F]=ht<=E?E-ht:0,--j;);O+=ht}if(h.strm.avail_in===0)break;if(Q=h.strm,X=h.window,G=h.strstart+h.lookahead,ot=O,_t=void 0,_t=Q.avail_in,ot<_t&&(_t=ot),j=_t===0?0:(Q.avail_in-=_t,u.arraySet(X,Q.input,Q.next_in,_t,G),Q.state.wrap===1?Q.adler=d(Q.adler,X,_t,G):Q.state.wrap===2&&(Q.adler=y(Q.adler,X,_t,G)),Q.next_in+=_t,Q.total_in+=_t,_t),h.lookahead+=j,h.lookahead+h.insert>=N)for(U=h.strstart-h.insert,h.ins_h=h.window[U],h.ins_h=(h.ins_h<<h.hash_shift^h.window[U+1])&h.hash_mask;h.insert&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[U+N-1])&h.hash_mask,h.prev[U&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=U,U++,h.insert--,!(h.lookahead+h.insert<N)););}while(h.lookahead<K&&h.strm.avail_in!==0)}function J(h,F){for(var j,E;;){if(h.lookahead<K){if(gt(h),h.lookahead<K&&F===m)return g;if(h.lookahead===0)break}if(j=0,h.lookahead>=N&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+N-1])&h.hash_mask,j=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),j!==0&&h.strstart-j<=h.w_size-K&&(h.match_length=at(h,j)),h.match_length>=N)if(E=f._tr_tally(h,h.strstart-h.match_start,h.match_length-N),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=N){for(h.match_length--;h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+N-1])&h.hash_mask,j=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart,--h.match_length!=0;);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else E=f._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(E&&(st(h,!1),h.strm.avail_out===0))return g}return h.insert=h.strstart<N-1?h.strstart:N-1,F===b?(st(h,!0),h.strm.avail_out===0?Ct:pt):h.last_lit&&(st(h,!1),h.strm.avail_out===0)?g:rt}function ut(h,F){for(var j,E,O;;){if(h.lookahead<K){if(gt(h),h.lookahead<K&&F===m)return g;if(h.lookahead===0)break}if(j=0,h.lookahead>=N&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+N-1])&h.hash_mask,j=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=N-1,j!==0&&h.prev_length<h.max_lazy_match&&h.strstart-j<=h.w_size-K&&(h.match_length=at(h,j),h.match_length<=5&&(h.strategy===1||h.match_length===N&&4096<h.strstart-h.match_start)&&(h.match_length=N-1)),h.prev_length>=N&&h.match_length<=h.prev_length){for(O=h.strstart+h.lookahead-N,E=f._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-N),h.lookahead-=h.prev_length-1,h.prev_length-=2;++h.strstart<=O&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+N-1])&h.hash_mask,j=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),--h.prev_length!=0;);if(h.match_available=0,h.match_length=N-1,h.strstart++,E&&(st(h,!1),h.strm.avail_out===0))return g}else if(h.match_available){if((E=f._tr_tally(h,0,h.window[h.strstart-1]))&&st(h,!1),h.strstart++,h.lookahead--,h.strm.avail_out===0)return g}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(E=f._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<N-1?h.strstart:N-1,F===b?(st(h,!0),h.strm.avail_out===0?Ct:pt):h.last_lit&&(st(h,!1),h.strm.avail_out===0)?g:rt}function mt(h,F,j,E,O){this.good_length=h,this.max_lazy=F,this.nice_length=j,this.max_chain=E,this.func=O}function kt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=L,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*V),this.dyn_dtree=new u.Buf16(2*(2*B+1)),this.bl_tree=new u.Buf16(2*(2*Y+1)),$t(this.dyn_ltree),$t(this.dyn_dtree),$t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(tt+1),this.heap=new u.Buf16(2*z+1),$t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*z+1),$t(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function dt(h){var F;return h&&h.state?(h.total_in=h.total_out=0,h.data_type=A,(F=h.state).pending=0,F.pending_out=0,F.wrap<0&&(F.wrap=-F.wrap),F.status=F.wrap?k:$,h.adler=F.wrap===2?0:1,F.last_flush=m,f._tr_init(F),v):At(h,C)}function S(h){var F=dt(h);return F===v&&function(j){j.window_size=2*j.w_size,$t(j.head),j.max_lazy_match=l[j.level].max_lazy,j.good_match=l[j.level].good_length,j.nice_match=l[j.level].nice_length,j.max_chain_length=l[j.level].max_chain,j.strstart=0,j.block_start=0,j.lookahead=0,j.insert=0,j.match_length=j.prev_length=N-1,j.match_available=0,j.ins_h=0}(h.state),F}function M(h,F,j,E,O,U){if(!h)return C;var Q=1;if(F===x&&(F=6),E<0?(Q=0,E=-E):15<E&&(Q=2,E-=16),O<1||D<O||j!==L||E<8||15<E||F<0||9<F||U<0||T<U)return At(h,C);E===8&&(E=9);var X=new kt;return(h.state=X).strm=h,X.wrap=Q,X.gzhead=null,X.w_bits=E,X.w_size=1<<X.w_bits,X.w_mask=X.w_size-1,X.hash_bits=O+7,X.hash_size=1<<X.hash_bits,X.hash_mask=X.hash_size-1,X.hash_shift=~~((X.hash_bits+N-1)/N),X.window=new u.Buf8(2*X.w_size),X.head=new u.Buf16(X.hash_size),X.prev=new u.Buf16(X.w_size),X.lit_bufsize=1<<O+6,X.pending_buf_size=4*X.lit_bufsize,X.pending_buf=new u.Buf8(X.pending_buf_size),X.d_buf=1*X.lit_bufsize,X.l_buf=3*X.lit_bufsize,X.level=F,X.strategy=U,X.method=j,S(h)}l=[new mt(0,0,0,0,function(h,F){var j=65535;for(j>h.pending_buf_size-5&&(j=h.pending_buf_size-5);;){if(h.lookahead<=1){if(gt(h),h.lookahead===0&&F===m)return g;if(h.lookahead===0)break}h.strstart+=h.lookahead,h.lookahead=0;var E=h.block_start+j;if((h.strstart===0||h.strstart>=E)&&(h.lookahead=h.strstart-E,h.strstart=E,st(h,!1),h.strm.avail_out===0)||h.strstart-h.block_start>=h.w_size-K&&(st(h,!1),h.strm.avail_out===0))return g}return h.insert=0,F===b?(st(h,!0),h.strm.avail_out===0?Ct:pt):(h.strstart>h.block_start&&(st(h,!1),h.strm.avail_out),g)}),new mt(4,4,8,4,J),new mt(4,5,16,8,J),new mt(4,6,32,32,J),new mt(4,4,16,16,ut),new mt(8,16,32,32,ut),new mt(8,16,128,128,ut),new mt(8,32,128,256,ut),new mt(32,128,258,1024,ut),new mt(32,258,258,4096,ut)],o.deflateInit=function(h,F){return M(h,F,L,15,8,0)},o.deflateInit2=M,o.deflateReset=S,o.deflateResetKeep=dt,o.deflateSetHeader=function(h,F){return h&&h.state?h.state.wrap!==2?C:(h.state.gzhead=F,v):C},o.deflate=function(h,F){var j,E,O,U;if(!h||!h.state||5<F||F<0)return h?At(h,C):C;if(E=h.state,!h.output||!h.input&&h.avail_in!==0||E.status===666&&F!==b)return At(h,h.avail_out===0?-5:C);if(E.strm=h,j=E.last_flush,E.last_flush=F,E.status===k)if(E.wrap===2)h.adler=0,Pt(E,31),Pt(E,139),Pt(E,8),E.gzhead?(Pt(E,(E.gzhead.text?1:0)+(E.gzhead.hcrc?2:0)+(E.gzhead.extra?4:0)+(E.gzhead.name?8:0)+(E.gzhead.comment?16:0)),Pt(E,255&E.gzhead.time),Pt(E,E.gzhead.time>>8&255),Pt(E,E.gzhead.time>>16&255),Pt(E,E.gzhead.time>>24&255),Pt(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),Pt(E,255&E.gzhead.os),E.gzhead.extra&&E.gzhead.extra.length&&(Pt(E,255&E.gzhead.extra.length),Pt(E,E.gzhead.extra.length>>8&255)),E.gzhead.hcrc&&(h.adler=y(h.adler,E.pending_buf,E.pending,0)),E.gzindex=0,E.status=69):(Pt(E,0),Pt(E,0),Pt(E,0),Pt(E,0),Pt(E,0),Pt(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),Pt(E,3),E.status=$);else{var Q=L+(E.w_bits-8<<4)<<8;Q|=(2<=E.strategy||E.level<2?0:E.level<6?1:E.level===6?2:3)<<6,E.strstart!==0&&(Q|=32),Q+=31-Q%31,E.status=$,Tt(E,Q),E.strstart!==0&&(Tt(E,h.adler>>>16),Tt(E,65535&h.adler)),h.adler=1}if(E.status===69)if(E.gzhead.extra){for(O=E.pending;E.gzindex<(65535&E.gzhead.extra.length)&&(E.pending!==E.pending_buf_size||(E.gzhead.hcrc&&E.pending>O&&(h.adler=y(h.adler,E.pending_buf,E.pending-O,O)),it(h),O=E.pending,E.pending!==E.pending_buf_size));)Pt(E,255&E.gzhead.extra[E.gzindex]),E.gzindex++;E.gzhead.hcrc&&E.pending>O&&(h.adler=y(h.adler,E.pending_buf,E.pending-O,O)),E.gzindex===E.gzhead.extra.length&&(E.gzindex=0,E.status=73)}else E.status=73;if(E.status===73)if(E.gzhead.name){O=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>O&&(h.adler=y(h.adler,E.pending_buf,E.pending-O,O)),it(h),O=E.pending,E.pending===E.pending_buf_size)){U=1;break}U=E.gzindex<E.gzhead.name.length?255&E.gzhead.name.charCodeAt(E.gzindex++):0,Pt(E,U)}while(U!==0);E.gzhead.hcrc&&E.pending>O&&(h.adler=y(h.adler,E.pending_buf,E.pending-O,O)),U===0&&(E.gzindex=0,E.status=91)}else E.status=91;if(E.status===91)if(E.gzhead.comment){O=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>O&&(h.adler=y(h.adler,E.pending_buf,E.pending-O,O)),it(h),O=E.pending,E.pending===E.pending_buf_size)){U=1;break}U=E.gzindex<E.gzhead.comment.length?255&E.gzhead.comment.charCodeAt(E.gzindex++):0,Pt(E,U)}while(U!==0);E.gzhead.hcrc&&E.pending>O&&(h.adler=y(h.adler,E.pending_buf,E.pending-O,O)),U===0&&(E.status=103)}else E.status=103;if(E.status===103&&(E.gzhead.hcrc?(E.pending+2>E.pending_buf_size&&it(h),E.pending+2<=E.pending_buf_size&&(Pt(E,255&h.adler),Pt(E,h.adler>>8&255),h.adler=0,E.status=$)):E.status=$),E.pending!==0){if(it(h),h.avail_out===0)return E.last_flush=-1,v}else if(h.avail_in===0&&xt(F)<=xt(j)&&F!==b)return At(h,-5);if(E.status===666&&h.avail_in!==0)return At(h,-5);if(h.avail_in!==0||E.lookahead!==0||F!==m&&E.status!==666){var X=E.strategy===2?function(G,ot){for(var _t;;){if(G.lookahead===0&&(gt(G),G.lookahead===0)){if(ot===m)return g;break}if(G.match_length=0,_t=f._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++,_t&&(st(G,!1),G.strm.avail_out===0))return g}return G.insert=0,ot===b?(st(G,!0),G.strm.avail_out===0?Ct:pt):G.last_lit&&(st(G,!1),G.strm.avail_out===0)?g:rt}(E,F):E.strategy===3?function(G,ot){for(var _t,ht,St,Mt,Rt=G.window;;){if(G.lookahead<=I){if(gt(G),G.lookahead<=I&&ot===m)return g;if(G.lookahead===0)break}if(G.match_length=0,G.lookahead>=N&&0<G.strstart&&(ht=Rt[St=G.strstart-1])===Rt[++St]&&ht===Rt[++St]&&ht===Rt[++St]){Mt=G.strstart+I;do;while(ht===Rt[++St]&&ht===Rt[++St]&&ht===Rt[++St]&&ht===Rt[++St]&&ht===Rt[++St]&&ht===Rt[++St]&&ht===Rt[++St]&&ht===Rt[++St]&&St<Mt);G.match_length=I-(Mt-St),G.match_length>G.lookahead&&(G.match_length=G.lookahead)}if(G.match_length>=N?(_t=f._tr_tally(G,1,G.match_length-N),G.lookahead-=G.match_length,G.strstart+=G.match_length,G.match_length=0):(_t=f._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++),_t&&(st(G,!1),G.strm.avail_out===0))return g}return G.insert=0,ot===b?(st(G,!0),G.strm.avail_out===0?Ct:pt):G.last_lit&&(st(G,!1),G.strm.avail_out===0)?g:rt}(E,F):l[E.level].func(E,F);if(X!==Ct&&X!==pt||(E.status=666),X===g||X===Ct)return h.avail_out===0&&(E.last_flush=-1),v;if(X===rt&&(F===1?f._tr_align(E):F!==5&&(f._tr_stored_block(E,0,0,!1),F===3&&($t(E.head),E.lookahead===0&&(E.strstart=0,E.block_start=0,E.insert=0))),it(h),h.avail_out===0))return E.last_flush=-1,v}return F!==b?v:E.wrap<=0?1:(E.wrap===2?(Pt(E,255&h.adler),Pt(E,h.adler>>8&255),Pt(E,h.adler>>16&255),Pt(E,h.adler>>24&255),Pt(E,255&h.total_in),Pt(E,h.total_in>>8&255),Pt(E,h.total_in>>16&255),Pt(E,h.total_in>>24&255)):(Tt(E,h.adler>>>16),Tt(E,65535&h.adler)),it(h),0<E.wrap&&(E.wrap=-E.wrap),E.pending!==0?v:1)},o.deflateEnd=function(h){var F;return h&&h.state?(F=h.state.status)!==k&&F!==69&&F!==73&&F!==91&&F!==103&&F!==$&&F!==666?At(h,C):(h.state=null,F===$?At(h,-3):v):C},o.deflateSetDictionary=function(h,F){var j,E,O,U,Q,X,G,ot,_t=F.length;if(!h||!h.state||(U=(j=h.state).wrap)===2||U===1&&j.status!==k||j.lookahead)return C;for(U===1&&(h.adler=d(h.adler,F,_t,0)),j.wrap=0,_t>=j.w_size&&(U===0&&($t(j.head),j.strstart=0,j.block_start=0,j.insert=0),ot=new u.Buf8(j.w_size),u.arraySet(ot,F,_t-j.w_size,j.w_size,0),F=ot,_t=j.w_size),Q=h.avail_in,X=h.next_in,G=h.input,h.avail_in=_t,h.next_in=0,h.input=F,gt(j);j.lookahead>=N;){for(E=j.strstart,O=j.lookahead-(N-1);j.ins_h=(j.ins_h<<j.hash_shift^j.window[E+N-1])&j.hash_mask,j.prev[E&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=E,E++,--O;);j.strstart=E,j.lookahead=N-1,gt(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=N-1,j.match_available=0,h.next_in=X,h.input=G,h.avail_in=Q,j.wrap=U,v},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,i,o){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,i,o){i.exports=function(l,u){var f,d,y,_,m,b,v,C,x,T,A,L,D,z,B,Y,V,tt,N,I,K,k,$,g,rt;f=l.state,d=l.next_in,g=l.input,y=d+(l.avail_in-5),_=l.next_out,rt=l.output,m=_-(u-l.avail_out),b=_+(l.avail_out-257),v=f.dmax,C=f.wsize,x=f.whave,T=f.wnext,A=f.window,L=f.hold,D=f.bits,z=f.lencode,B=f.distcode,Y=(1<<f.lenbits)-1,V=(1<<f.distbits)-1;t:do{D<15&&(L+=g[d++]<<D,D+=8,L+=g[d++]<<D,D+=8),tt=z[L&Y];e:for(;;){if(L>>>=N=tt>>>24,D-=N,(N=tt>>>16&255)===0)rt[_++]=65535&tt;else{if(!(16&N)){if(!(64&N)){tt=z[(65535&tt)+(L&(1<<N)-1)];continue e}if(32&N){f.mode=12;break t}l.msg="invalid literal/length code",f.mode=30;break t}I=65535&tt,(N&=15)&&(D<N&&(L+=g[d++]<<D,D+=8),I+=L&(1<<N)-1,L>>>=N,D-=N),D<15&&(L+=g[d++]<<D,D+=8,L+=g[d++]<<D,D+=8),tt=B[L&V];n:for(;;){if(L>>>=N=tt>>>24,D-=N,!(16&(N=tt>>>16&255))){if(!(64&N)){tt=B[(65535&tt)+(L&(1<<N)-1)];continue n}l.msg="invalid distance code",f.mode=30;break t}if(K=65535&tt,D<(N&=15)&&(L+=g[d++]<<D,(D+=8)<N&&(L+=g[d++]<<D,D+=8)),v<(K+=L&(1<<N)-1)){l.msg="invalid distance too far back",f.mode=30;break t}if(L>>>=N,D-=N,(N=_-m)<K){if(x<(N=K-N)&&f.sane){l.msg="invalid distance too far back",f.mode=30;break t}if($=A,(k=0)===T){if(k+=C-N,N<I){for(I-=N;rt[_++]=A[k++],--N;);k=_-K,$=rt}}else if(T<N){if(k+=C+T-N,(N-=T)<I){for(I-=N;rt[_++]=A[k++],--N;);if(k=0,T<I){for(I-=N=T;rt[_++]=A[k++],--N;);k=_-K,$=rt}}}else if(k+=T-N,N<I){for(I-=N;rt[_++]=A[k++],--N;);k=_-K,$=rt}for(;2<I;)rt[_++]=$[k++],rt[_++]=$[k++],rt[_++]=$[k++],I-=3;I&&(rt[_++]=$[k++],1<I&&(rt[_++]=$[k++]))}else{for(k=_-K;rt[_++]=rt[k++],rt[_++]=rt[k++],rt[_++]=rt[k++],2<(I-=3););I&&(rt[_++]=rt[k++],1<I&&(rt[_++]=rt[k++]))}break}}break}}while(d<y&&_<b);d-=I=D>>3,L&=(1<<(D-=I<<3))-1,l.next_in=d,l.next_out=_,l.avail_in=d<y?y-d+5:5-(d-y),l.avail_out=_<b?b-_+257:257-(_-b),f.hold=L,f.bits=D}},{}],49:[function(r,i,o){var l=r("../utils/common"),u=r("./adler32"),f=r("./crc32"),d=r("./inffast"),y=r("./inftrees"),_=1,m=2,b=0,v=-2,C=1,x=852,T=592;function A(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function L(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D(k){var $;return k&&k.state?($=k.state,k.total_in=k.total_out=$.total=0,k.msg="",$.wrap&&(k.adler=1&$.wrap),$.mode=C,$.last=0,$.havedict=0,$.dmax=32768,$.head=null,$.hold=0,$.bits=0,$.lencode=$.lendyn=new l.Buf32(x),$.distcode=$.distdyn=new l.Buf32(T),$.sane=1,$.back=-1,b):v}function z(k){var $;return k&&k.state?(($=k.state).wsize=0,$.whave=0,$.wnext=0,D(k)):v}function B(k,$){var g,rt;return k&&k.state?(rt=k.state,$<0?(g=0,$=-$):(g=1+($>>4),$<48&&($&=15)),$&&($<8||15<$)?v:(rt.window!==null&&rt.wbits!==$&&(rt.window=null),rt.wrap=g,rt.wbits=$,z(k))):v}function Y(k,$){var g,rt;return k?(rt=new L,(k.state=rt).window=null,(g=B(k,$))!==b&&(k.state=null),g):v}var V,tt,N=!0;function I(k){if(N){var $;for(V=new l.Buf32(512),tt=new l.Buf32(32),$=0;$<144;)k.lens[$++]=8;for(;$<256;)k.lens[$++]=9;for(;$<280;)k.lens[$++]=7;for(;$<288;)k.lens[$++]=8;for(y(_,k.lens,0,288,V,0,k.work,{bits:9}),$=0;$<32;)k.lens[$++]=5;y(m,k.lens,0,32,tt,0,k.work,{bits:5}),N=!1}k.lencode=V,k.lenbits=9,k.distcode=tt,k.distbits=5}function K(k,$,g,rt){var Ct,pt=k.state;return pt.window===null&&(pt.wsize=1<<pt.wbits,pt.wnext=0,pt.whave=0,pt.window=new l.Buf8(pt.wsize)),rt>=pt.wsize?(l.arraySet(pt.window,$,g-pt.wsize,pt.wsize,0),pt.wnext=0,pt.whave=pt.wsize):(rt<(Ct=pt.wsize-pt.wnext)&&(Ct=rt),l.arraySet(pt.window,$,g-rt,Ct,pt.wnext),(rt-=Ct)?(l.arraySet(pt.window,$,g-rt,rt,0),pt.wnext=rt,pt.whave=pt.wsize):(pt.wnext+=Ct,pt.wnext===pt.wsize&&(pt.wnext=0),pt.whave<pt.wsize&&(pt.whave+=Ct))),0}o.inflateReset=z,o.inflateReset2=B,o.inflateResetKeep=D,o.inflateInit=function(k){return Y(k,15)},o.inflateInit2=Y,o.inflate=function(k,$){var g,rt,Ct,pt,At,xt,$t,it,st,Pt,Tt,at,gt,J,ut,mt,kt,dt,S,M,h,F,j,E,O=0,U=new l.Buf8(4),Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return v;(g=k.state).mode===12&&(g.mode=13),At=k.next_out,Ct=k.output,$t=k.avail_out,pt=k.next_in,rt=k.input,xt=k.avail_in,it=g.hold,st=g.bits,Pt=xt,Tt=$t,F=b;t:for(;;)switch(g.mode){case C:if(g.wrap===0){g.mode=13;break}for(;st<16;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}if(2&g.wrap&&it===35615){U[g.check=0]=255&it,U[1]=it>>>8&255,g.check=f(g.check,U,2,0),st=it=0,g.mode=2;break}if(g.flags=0,g.head&&(g.head.done=!1),!(1&g.wrap)||(((255&it)<<8)+(it>>8))%31){k.msg="incorrect header check",g.mode=30;break}if((15&it)!=8){k.msg="unknown compression method",g.mode=30;break}if(st-=4,h=8+(15&(it>>>=4)),g.wbits===0)g.wbits=h;else if(h>g.wbits){k.msg="invalid window size",g.mode=30;break}g.dmax=1<<h,k.adler=g.check=1,g.mode=512&it?10:12,st=it=0;break;case 2:for(;st<16;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}if(g.flags=it,(255&g.flags)!=8){k.msg="unknown compression method",g.mode=30;break}if(57344&g.flags){k.msg="unknown header flags set",g.mode=30;break}g.head&&(g.head.text=it>>8&1),512&g.flags&&(U[0]=255&it,U[1]=it>>>8&255,g.check=f(g.check,U,2,0)),st=it=0,g.mode=3;case 3:for(;st<32;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}g.head&&(g.head.time=it),512&g.flags&&(U[0]=255&it,U[1]=it>>>8&255,U[2]=it>>>16&255,U[3]=it>>>24&255,g.check=f(g.check,U,4,0)),st=it=0,g.mode=4;case 4:for(;st<16;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}g.head&&(g.head.xflags=255&it,g.head.os=it>>8),512&g.flags&&(U[0]=255&it,U[1]=it>>>8&255,g.check=f(g.check,U,2,0)),st=it=0,g.mode=5;case 5:if(1024&g.flags){for(;st<16;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}g.length=it,g.head&&(g.head.extra_len=it),512&g.flags&&(U[0]=255&it,U[1]=it>>>8&255,g.check=f(g.check,U,2,0)),st=it=0}else g.head&&(g.head.extra=null);g.mode=6;case 6:if(1024&g.flags&&(xt<(at=g.length)&&(at=xt),at&&(g.head&&(h=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Array(g.head.extra_len)),l.arraySet(g.head.extra,rt,pt,at,h)),512&g.flags&&(g.check=f(g.check,rt,at,pt)),xt-=at,pt+=at,g.length-=at),g.length))break t;g.length=0,g.mode=7;case 7:if(2048&g.flags){if(xt===0)break t;for(at=0;h=rt[pt+at++],g.head&&h&&g.length<65536&&(g.head.name+=String.fromCharCode(h)),h&&at<xt;);if(512&g.flags&&(g.check=f(g.check,rt,at,pt)),xt-=at,pt+=at,h)break t}else g.head&&(g.head.name=null);g.length=0,g.mode=8;case 8:if(4096&g.flags){if(xt===0)break t;for(at=0;h=rt[pt+at++],g.head&&h&&g.length<65536&&(g.head.comment+=String.fromCharCode(h)),h&&at<xt;);if(512&g.flags&&(g.check=f(g.check,rt,at,pt)),xt-=at,pt+=at,h)break t}else g.head&&(g.head.comment=null);g.mode=9;case 9:if(512&g.flags){for(;st<16;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}if(it!==(65535&g.check)){k.msg="header crc mismatch",g.mode=30;break}st=it=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),k.adler=g.check=0,g.mode=12;break;case 10:for(;st<32;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}k.adler=g.check=A(it),st=it=0,g.mode=11;case 11:if(g.havedict===0)return k.next_out=At,k.avail_out=$t,k.next_in=pt,k.avail_in=xt,g.hold=it,g.bits=st,2;k.adler=g.check=1,g.mode=12;case 12:if($===5||$===6)break t;case 13:if(g.last){it>>>=7&st,st-=7&st,g.mode=27;break}for(;st<3;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}switch(g.last=1&it,st-=1,3&(it>>>=1)){case 0:g.mode=14;break;case 1:if(I(g),g.mode=20,$!==6)break;it>>>=2,st-=2;break t;case 2:g.mode=17;break;case 3:k.msg="invalid block type",g.mode=30}it>>>=2,st-=2;break;case 14:for(it>>>=7&st,st-=7&st;st<32;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}if((65535&it)!=(it>>>16^65535)){k.msg="invalid stored block lengths",g.mode=30;break}if(g.length=65535&it,st=it=0,g.mode=15,$===6)break t;case 15:g.mode=16;case 16:if(at=g.length){if(xt<at&&(at=xt),$t<at&&(at=$t),at===0)break t;l.arraySet(Ct,rt,pt,at,At),xt-=at,pt+=at,$t-=at,At+=at,g.length-=at;break}g.mode=12;break;case 17:for(;st<14;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}if(g.nlen=257+(31&it),it>>>=5,st-=5,g.ndist=1+(31&it),it>>>=5,st-=5,g.ncode=4+(15&it),it>>>=4,st-=4,286<g.nlen||30<g.ndist){k.msg="too many length or distance symbols",g.mode=30;break}g.have=0,g.mode=18;case 18:for(;g.have<g.ncode;){for(;st<3;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}g.lens[Q[g.have++]]=7&it,it>>>=3,st-=3}for(;g.have<19;)g.lens[Q[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,j={bits:g.lenbits},F=y(0,g.lens,0,19,g.lencode,0,g.work,j),g.lenbits=j.bits,F){k.msg="invalid code lengths set",g.mode=30;break}g.have=0,g.mode=19;case 19:for(;g.have<g.nlen+g.ndist;){for(;mt=(O=g.lencode[it&(1<<g.lenbits)-1])>>>16&255,kt=65535&O,!((ut=O>>>24)<=st);){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}if(kt<16)it>>>=ut,st-=ut,g.lens[g.have++]=kt;else{if(kt===16){for(E=ut+2;st<E;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}if(it>>>=ut,st-=ut,g.have===0){k.msg="invalid bit length repeat",g.mode=30;break}h=g.lens[g.have-1],at=3+(3&it),it>>>=2,st-=2}else if(kt===17){for(E=ut+3;st<E;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}st-=ut,h=0,at=3+(7&(it>>>=ut)),it>>>=3,st-=3}else{for(E=ut+7;st<E;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}st-=ut,h=0,at=11+(127&(it>>>=ut)),it>>>=7,st-=7}if(g.have+at>g.nlen+g.ndist){k.msg="invalid bit length repeat",g.mode=30;break}for(;at--;)g.lens[g.have++]=h}}if(g.mode===30)break;if(g.lens[256]===0){k.msg="invalid code -- missing end-of-block",g.mode=30;break}if(g.lenbits=9,j={bits:g.lenbits},F=y(_,g.lens,0,g.nlen,g.lencode,0,g.work,j),g.lenbits=j.bits,F){k.msg="invalid literal/lengths set",g.mode=30;break}if(g.distbits=6,g.distcode=g.distdyn,j={bits:g.distbits},F=y(m,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,j),g.distbits=j.bits,F){k.msg="invalid distances set",g.mode=30;break}if(g.mode=20,$===6)break t;case 20:g.mode=21;case 21:if(6<=xt&&258<=$t){k.next_out=At,k.avail_out=$t,k.next_in=pt,k.avail_in=xt,g.hold=it,g.bits=st,d(k,Tt),At=k.next_out,Ct=k.output,$t=k.avail_out,pt=k.next_in,rt=k.input,xt=k.avail_in,it=g.hold,st=g.bits,g.mode===12&&(g.back=-1);break}for(g.back=0;mt=(O=g.lencode[it&(1<<g.lenbits)-1])>>>16&255,kt=65535&O,!((ut=O>>>24)<=st);){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}if(mt&&!(240&mt)){for(dt=ut,S=mt,M=kt;mt=(O=g.lencode[M+((it&(1<<dt+S)-1)>>dt)])>>>16&255,kt=65535&O,!(dt+(ut=O>>>24)<=st);){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}it>>>=dt,st-=dt,g.back+=dt}if(it>>>=ut,st-=ut,g.back+=ut,g.length=kt,mt===0){g.mode=26;break}if(32&mt){g.back=-1,g.mode=12;break}if(64&mt){k.msg="invalid literal/length code",g.mode=30;break}g.extra=15&mt,g.mode=22;case 22:if(g.extra){for(E=g.extra;st<E;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}g.length+=it&(1<<g.extra)-1,it>>>=g.extra,st-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=23;case 23:for(;mt=(O=g.distcode[it&(1<<g.distbits)-1])>>>16&255,kt=65535&O,!((ut=O>>>24)<=st);){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}if(!(240&mt)){for(dt=ut,S=mt,M=kt;mt=(O=g.distcode[M+((it&(1<<dt+S)-1)>>dt)])>>>16&255,kt=65535&O,!(dt+(ut=O>>>24)<=st);){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}it>>>=dt,st-=dt,g.back+=dt}if(it>>>=ut,st-=ut,g.back+=ut,64&mt){k.msg="invalid distance code",g.mode=30;break}g.offset=kt,g.extra=15&mt,g.mode=24;case 24:if(g.extra){for(E=g.extra;st<E;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}g.offset+=it&(1<<g.extra)-1,it>>>=g.extra,st-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){k.msg="invalid distance too far back",g.mode=30;break}g.mode=25;case 25:if($t===0)break t;if(at=Tt-$t,g.offset>at){if((at=g.offset-at)>g.whave&&g.sane){k.msg="invalid distance too far back",g.mode=30;break}gt=at>g.wnext?(at-=g.wnext,g.wsize-at):g.wnext-at,at>g.length&&(at=g.length),J=g.window}else J=Ct,gt=At-g.offset,at=g.length;for($t<at&&(at=$t),$t-=at,g.length-=at;Ct[At++]=J[gt++],--at;);g.length===0&&(g.mode=21);break;case 26:if($t===0)break t;Ct[At++]=g.length,$t--,g.mode=21;break;case 27:if(g.wrap){for(;st<32;){if(xt===0)break t;xt--,it|=rt[pt++]<<st,st+=8}if(Tt-=$t,k.total_out+=Tt,g.total+=Tt,Tt&&(k.adler=g.check=g.flags?f(g.check,Ct,Tt,At-Tt):u(g.check,Ct,Tt,At-Tt)),Tt=$t,(g.flags?it:A(it))!==g.check){k.msg="incorrect data check",g.mode=30;break}st=it=0}g.mode=28;case 28:if(g.wrap&&g.flags){for(;st<32;){if(xt===0)break t;xt--,it+=rt[pt++]<<st,st+=8}if(it!==(4294967295&g.total)){k.msg="incorrect length check",g.mode=30;break}st=it=0}g.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;case 32:default:return v}return k.next_out=At,k.avail_out=$t,k.next_in=pt,k.avail_in=xt,g.hold=it,g.bits=st,(g.wsize||Tt!==k.avail_out&&g.mode<30&&(g.mode<27||$!==4))&&K(k,k.output,k.next_out,Tt-k.avail_out)?(g.mode=31,-4):(Pt-=k.avail_in,Tt-=k.avail_out,k.total_in+=Pt,k.total_out+=Tt,g.total+=Tt,g.wrap&&Tt&&(k.adler=g.check=g.flags?f(g.check,Ct,Tt,k.next_out-Tt):u(g.check,Ct,Tt,k.next_out-Tt)),k.data_type=g.bits+(g.last?64:0)+(g.mode===12?128:0)+(g.mode===20||g.mode===15?256:0),(Pt==0&&Tt===0||$===4)&&F===b&&(F=-5),F)},o.inflateEnd=function(k){if(!k||!k.state)return v;var $=k.state;return $.window&&($.window=null),k.state=null,b},o.inflateGetHeader=function(k,$){var g;return k&&k.state&&2&(g=k.state).wrap?((g.head=$).done=!1,b):v},o.inflateSetDictionary=function(k,$){var g,rt=$.length;return k&&k.state?(g=k.state).wrap!==0&&g.mode!==11?v:g.mode===11&&u(1,$,rt,0)!==g.check?-3:K(k,$,rt,rt)?(g.mode=31,-4):(g.havedict=1,b):v},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,i,o){var l=r("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(_,m,b,v,C,x,T,A){var L,D,z,B,Y,V,tt,N,I,K=A.bits,k=0,$=0,g=0,rt=0,Ct=0,pt=0,At=0,xt=0,$t=0,it=0,st=null,Pt=0,Tt=new l.Buf16(16),at=new l.Buf16(16),gt=null,J=0;for(k=0;k<=15;k++)Tt[k]=0;for($=0;$<v;$++)Tt[m[b+$]]++;for(Ct=K,rt=15;1<=rt&&Tt[rt]===0;rt--);if(rt<Ct&&(Ct=rt),rt===0)return C[x++]=20971520,C[x++]=20971520,A.bits=1,0;for(g=1;g<rt&&Tt[g]===0;g++);for(Ct<g&&(Ct=g),k=xt=1;k<=15;k++)if(xt<<=1,(xt-=Tt[k])<0)return-1;if(0<xt&&(_===0||rt!==1))return-1;for(at[1]=0,k=1;k<15;k++)at[k+1]=at[k]+Tt[k];for($=0;$<v;$++)m[b+$]!==0&&(T[at[m[b+$]]++]=$);if(V=_===0?(st=gt=T,19):_===1?(st=u,Pt-=257,gt=f,J-=257,256):(st=d,gt=y,-1),k=g,Y=x,At=$=it=0,z=-1,B=($t=1<<(pt=Ct))-1,_===1&&852<$t||_===2&&592<$t)return 1;for(;;){for(tt=k-At,I=T[$]<V?(N=0,T[$]):T[$]>V?(N=gt[J+T[$]],st[Pt+T[$]]):(N=96,0),L=1<<k-At,g=D=1<<pt;C[Y+(it>>At)+(D-=L)]=tt<<24|N<<16|I|0,D!==0;);for(L=1<<k-1;it&L;)L>>=1;if(L!==0?(it&=L-1,it+=L):it=0,$++,--Tt[k]==0){if(k===rt)break;k=m[b+T[$]]}if(Ct<k&&(it&B)!==z){for(At===0&&(At=Ct),Y+=g,xt=1<<(pt=k-At);pt+At<rt&&!((xt-=Tt[pt+At])<=0);)pt++,xt<<=1;if($t+=1<<pt,_===1&&852<$t||_===2&&592<$t)return 1;C[z=it&B]=Ct<<24|pt<<16|Y-x|0}}return it!==0&&(C[Y+it]=k-At<<24|64<<16|0),A.bits=Ct,0}},{"../utils/common":41}],51:[function(r,i,o){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,i,o){var l=r("../utils/common"),u=0,f=1;function d(O){for(var U=O.length;0<=--U;)O[U]=0}var y=0,_=29,m=256,b=m+1+_,v=30,C=19,x=2*b+1,T=15,A=16,L=7,D=256,z=16,B=17,Y=18,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(b+2));d(K);var k=new Array(2*v);d(k);var $=new Array(512);d($);var g=new Array(256);d(g);var rt=new Array(_);d(rt);var Ct,pt,At,xt=new Array(v);function $t(O,U,Q,X,G){this.static_tree=O,this.extra_bits=U,this.extra_base=Q,this.elems=X,this.max_length=G,this.has_stree=O&&O.length}function it(O,U){this.dyn_tree=O,this.max_code=0,this.stat_desc=U}function st(O){return O<256?$[O]:$[256+(O>>>7)]}function Pt(O,U){O.pending_buf[O.pending++]=255&U,O.pending_buf[O.pending++]=U>>>8&255}function Tt(O,U,Q){O.bi_valid>A-Q?(O.bi_buf|=U<<O.bi_valid&65535,Pt(O,O.bi_buf),O.bi_buf=U>>A-O.bi_valid,O.bi_valid+=Q-A):(O.bi_buf|=U<<O.bi_valid&65535,O.bi_valid+=Q)}function at(O,U,Q){Tt(O,Q[2*U],Q[2*U+1])}function gt(O,U){for(var Q=0;Q|=1&O,O>>>=1,Q<<=1,0<--U;);return Q>>>1}function J(O,U,Q){var X,G,ot=new Array(T+1),_t=0;for(X=1;X<=T;X++)ot[X]=_t=_t+Q[X-1]<<1;for(G=0;G<=U;G++){var ht=O[2*G+1];ht!==0&&(O[2*G]=gt(ot[ht]++,ht))}}function ut(O){var U;for(U=0;U<b;U++)O.dyn_ltree[2*U]=0;for(U=0;U<v;U++)O.dyn_dtree[2*U]=0;for(U=0;U<C;U++)O.bl_tree[2*U]=0;O.dyn_ltree[2*D]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function mt(O){8<O.bi_valid?Pt(O,O.bi_buf):0<O.bi_valid&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function kt(O,U,Q,X){var G=2*U,ot=2*Q;return O[G]<O[ot]||O[G]===O[ot]&&X[U]<=X[Q]}function dt(O,U,Q){for(var X=O.heap[Q],G=Q<<1;G<=O.heap_len&&(G<O.heap_len&&kt(U,O.heap[G+1],O.heap[G],O.depth)&&G++,!kt(U,X,O.heap[G],O.depth));)O.heap[Q]=O.heap[G],Q=G,G<<=1;O.heap[Q]=X}function S(O,U,Q){var X,G,ot,_t,ht=0;if(O.last_lit!==0)for(;X=O.pending_buf[O.d_buf+2*ht]<<8|O.pending_buf[O.d_buf+2*ht+1],G=O.pending_buf[O.l_buf+ht],ht++,X===0?at(O,G,U):(at(O,(ot=g[G])+m+1,U),(_t=V[ot])!==0&&Tt(O,G-=rt[ot],_t),at(O,ot=st(--X),Q),(_t=tt[ot])!==0&&Tt(O,X-=xt[ot],_t)),ht<O.last_lit;);at(O,D,U)}function M(O,U){var Q,X,G,ot=U.dyn_tree,_t=U.stat_desc.static_tree,ht=U.stat_desc.has_stree,St=U.stat_desc.elems,Mt=-1;for(O.heap_len=0,O.heap_max=x,Q=0;Q<St;Q++)ot[2*Q]!==0?(O.heap[++O.heap_len]=Mt=Q,O.depth[Q]=0):ot[2*Q+1]=0;for(;O.heap_len<2;)ot[2*(G=O.heap[++O.heap_len]=Mt<2?++Mt:0)]=1,O.depth[G]=0,O.opt_len--,ht&&(O.static_len-=_t[2*G+1]);for(U.max_code=Mt,Q=O.heap_len>>1;1<=Q;Q--)dt(O,ot,Q);for(G=St;Q=O.heap[1],O.heap[1]=O.heap[O.heap_len--],dt(O,ot,1),X=O.heap[1],O.heap[--O.heap_max]=Q,O.heap[--O.heap_max]=X,ot[2*G]=ot[2*Q]+ot[2*X],O.depth[G]=(O.depth[Q]>=O.depth[X]?O.depth[Q]:O.depth[X])+1,ot[2*Q+1]=ot[2*X+1]=G,O.heap[1]=G++,dt(O,ot,1),2<=O.heap_len;);O.heap[--O.heap_max]=O.heap[1],function(Rt,ne){var be,_e,Te,re,Sn,Se,xe=ne.dyn_tree,Hn=ne.max_code,Yr=ne.stat_desc.static_tree,Vo=ne.stat_desc.has_stree,Ko=ne.stat_desc.extra_bits,As=ne.stat_desc.extra_base,dr=ne.stat_desc.max_length,Jr=0;for(re=0;re<=T;re++)Rt.bl_count[re]=0;for(xe[2*Rt.heap[Rt.heap_max]+1]=0,be=Rt.heap_max+1;be<x;be++)dr<(re=xe[2*xe[2*(_e=Rt.heap[be])+1]+1]+1)&&(re=dr,Jr++),xe[2*_e+1]=re,Hn<_e||(Rt.bl_count[re]++,Sn=0,As<=_e&&(Sn=Ko[_e-As]),Se=xe[2*_e],Rt.opt_len+=Se*(re+Sn),Vo&&(Rt.static_len+=Se*(Yr[2*_e+1]+Sn)));if(Jr!==0){do{for(re=dr-1;Rt.bl_count[re]===0;)re--;Rt.bl_count[re]--,Rt.bl_count[re+1]+=2,Rt.bl_count[dr]--,Jr-=2}while(0<Jr);for(re=dr;re!==0;re--)for(_e=Rt.bl_count[re];_e!==0;)Hn<(Te=Rt.heap[--be])||(xe[2*Te+1]!==re&&(Rt.opt_len+=(re-xe[2*Te+1])*xe[2*Te],xe[2*Te+1]=re),_e--)}}(O,U),J(ot,Mt,O.bl_count)}function h(O,U,Q){var X,G,ot=-1,_t=U[1],ht=0,St=7,Mt=4;for(_t===0&&(St=138,Mt=3),U[2*(Q+1)+1]=65535,X=0;X<=Q;X++)G=_t,_t=U[2*(X+1)+1],++ht<St&&G===_t||(ht<Mt?O.bl_tree[2*G]+=ht:G!==0?(G!==ot&&O.bl_tree[2*G]++,O.bl_tree[2*z]++):ht<=10?O.bl_tree[2*B]++:O.bl_tree[2*Y]++,ot=G,Mt=(ht=0)===_t?(St=138,3):G===_t?(St=6,3):(St=7,4))}function F(O,U,Q){var X,G,ot=-1,_t=U[1],ht=0,St=7,Mt=4;for(_t===0&&(St=138,Mt=3),X=0;X<=Q;X++)if(G=_t,_t=U[2*(X+1)+1],!(++ht<St&&G===_t)){if(ht<Mt)for(;at(O,G,O.bl_tree),--ht!=0;);else G!==0?(G!==ot&&(at(O,G,O.bl_tree),ht--),at(O,z,O.bl_tree),Tt(O,ht-3,2)):ht<=10?(at(O,B,O.bl_tree),Tt(O,ht-3,3)):(at(O,Y,O.bl_tree),Tt(O,ht-11,7));ot=G,Mt=(ht=0)===_t?(St=138,3):G===_t?(St=6,3):(St=7,4)}}d(xt);var j=!1;function E(O,U,Q,X){Tt(O,(y<<1)+(X?1:0),3),function(G,ot,_t,ht){mt(G),Pt(G,_t),Pt(G,~_t),l.arraySet(G.pending_buf,G.window,ot,_t,G.pending),G.pending+=_t}(O,U,Q)}o._tr_init=function(O){j||(function(){var U,Q,X,G,ot,_t=new Array(T+1);for(G=X=0;G<_-1;G++)for(rt[G]=X,U=0;U<1<<V[G];U++)g[X++]=G;for(g[X-1]=G,G=ot=0;G<16;G++)for(xt[G]=ot,U=0;U<1<<tt[G];U++)$[ot++]=G;for(ot>>=7;G<v;G++)for(xt[G]=ot<<7,U=0;U<1<<tt[G]-7;U++)$[256+ot++]=G;for(Q=0;Q<=T;Q++)_t[Q]=0;for(U=0;U<=143;)K[2*U+1]=8,U++,_t[8]++;for(;U<=255;)K[2*U+1]=9,U++,_t[9]++;for(;U<=279;)K[2*U+1]=7,U++,_t[7]++;for(;U<=287;)K[2*U+1]=8,U++,_t[8]++;for(J(K,b+1,_t),U=0;U<v;U++)k[2*U+1]=5,k[2*U]=gt(U,5);Ct=new $t(K,V,m+1,b,T),pt=new $t(k,tt,0,v,T),At=new $t(new Array(0),N,0,C,L)}(),j=!0),O.l_desc=new it(O.dyn_ltree,Ct),O.d_desc=new it(O.dyn_dtree,pt),O.bl_desc=new it(O.bl_tree,At),O.bi_buf=0,O.bi_valid=0,ut(O)},o._tr_stored_block=E,o._tr_flush_block=function(O,U,Q,X){var G,ot,_t=0;0<O.level?(O.strm.data_type===2&&(O.strm.data_type=function(ht){var St,Mt=4093624447;for(St=0;St<=31;St++,Mt>>>=1)if(1&Mt&&ht.dyn_ltree[2*St]!==0)return u;if(ht.dyn_ltree[18]!==0||ht.dyn_ltree[20]!==0||ht.dyn_ltree[26]!==0)return f;for(St=32;St<m;St++)if(ht.dyn_ltree[2*St]!==0)return f;return u}(O)),M(O,O.l_desc),M(O,O.d_desc),_t=function(ht){var St;for(h(ht,ht.dyn_ltree,ht.l_desc.max_code),h(ht,ht.dyn_dtree,ht.d_desc.max_code),M(ht,ht.bl_desc),St=C-1;3<=St&&ht.bl_tree[2*I[St]+1]===0;St--);return ht.opt_len+=3*(St+1)+5+5+4,St}(O),G=O.opt_len+3+7>>>3,(ot=O.static_len+3+7>>>3)<=G&&(G=ot)):G=ot=Q+5,Q+4<=G&&U!==-1?E(O,U,Q,X):O.strategy===4||ot===G?(Tt(O,2+(X?1:0),3),S(O,K,k)):(Tt(O,4+(X?1:0),3),function(ht,St,Mt,Rt){var ne;for(Tt(ht,St-257,5),Tt(ht,Mt-1,5),Tt(ht,Rt-4,4),ne=0;ne<Rt;ne++)Tt(ht,ht.bl_tree[2*I[ne]+1],3);F(ht,ht.dyn_ltree,St-1),F(ht,ht.dyn_dtree,Mt-1)}(O,O.l_desc.max_code+1,O.d_desc.max_code+1,_t+1),S(O,O.dyn_ltree,O.dyn_dtree)),ut(O),X&&mt(O)},o._tr_tally=function(O,U,Q){return O.pending_buf[O.d_buf+2*O.last_lit]=U>>>8&255,O.pending_buf[O.d_buf+2*O.last_lit+1]=255&U,O.pending_buf[O.l_buf+O.last_lit]=255&Q,O.last_lit++,U===0?O.dyn_ltree[2*Q]++:(O.matches++,U--,O.dyn_ltree[2*(g[Q]+m+1)]++,O.dyn_dtree[2*st(U)]++),O.last_lit===O.lit_bufsize-1},o._tr_align=function(O){Tt(O,2,3),at(O,D,K),function(U){U.bi_valid===16?(Pt(U,U.bi_buf),U.bi_buf=0,U.bi_valid=0):8<=U.bi_valid&&(U.pending_buf[U.pending++]=255&U.bi_buf,U.bi_buf>>=8,U.bi_valid-=8)}(O)}},{"../utils/common":41}],53:[function(r,i,o){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,i,o){(function(l){(function(u,f){if(!u.setImmediate){var d,y,_,m,b=1,v={},C=!1,x=u.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(u);T=T&&T.setTimeout?T:u,d={}.toString.call(u.process)==="[object process]"?function(z){process.nextTick(function(){L(z)})}:function(){if(u.postMessage&&!u.importScripts){var z=!0,B=u.onmessage;return u.onmessage=function(){z=!1},u.postMessage("","*"),u.onmessage=B,z}}()?(m="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",D,!1):u.attachEvent("onmessage",D),function(z){u.postMessage(m+z,"*")}):u.MessageChannel?((_=new MessageChannel).port1.onmessage=function(z){L(z.data)},function(z){_.port2.postMessage(z)}):x&&"onreadystatechange"in x.createElement("script")?(y=x.documentElement,function(z){var B=x.createElement("script");B.onreadystatechange=function(){L(z),B.onreadystatechange=null,y.removeChild(B),B=null},y.appendChild(B)}):function(z){setTimeout(L,0,z)},T.setImmediate=function(z){typeof z!="function"&&(z=new Function(""+z));for(var B=new Array(arguments.length-1),Y=0;Y<B.length;Y++)B[Y]=arguments[Y+1];var V={callback:z,args:B};return v[b]=V,d(b),b++},T.clearImmediate=A}function A(z){delete v[z]}function L(z){if(C)setTimeout(L,0,z);else{var B=v[z];if(B){C=!0;try{(function(Y){var V=Y.callback,tt=Y.args;switch(tt.length){case 0:V();break;case 1:V(tt[0]);break;case 2:V(tt[0],tt[1]);break;case 3:V(tt[0],tt[1],tt[2]);break;default:V.apply(f,tt)}})(B)}finally{A(z),C=!1}}}}function D(z){z.source===u&&typeof z.data=="string"&&z.data.indexOf(m)===0&&L(+z.data.slice(m.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof ar<"u"?ar:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(_p);var rS=_p.exports;const sS=w5(rS),iS={key:0,class:"text-center p-10 card max-w-2xl mx-auto"},oS={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},aS={class:"lg:col-span-1 card flex flex-col"},lS={class:"mt-4 p-4 bg-slate-800 rounded-lg text-center"},uS={class:"text-5xl font-bold text-white tracking-widest"},cS={class:"text-lg font-semibold text-slate-800 mb-2"},fS={class:"h-48 overflow-y-auto bg-slate-100 p-3 rounded-md border space-y-2 flex-grow"},dS={key:0,class:"text-slate-400 text-center pt-10"},hS={class:"lg:col-span-2 card"},pS={key:0},gS={class:"space-y-6"},mS={class:"mt-1 border border-gray-300 rounded-lg"},vS={class:"border-b bg-slate-50 p-2 flex items-center gap-3"},_S={key:0},yS={class:"mt-2 flex space-x-4"},bS=["onClick"],xS={key:1},wS={class:"mt-2 flex space-x-4"},kS={key:1},CS=["innerHTML"],SS={class:"text-center my-6 text-2xl text-slate-600"},ES={class:"font-bold text-sky-600 text-3xl"},AS={key:2,class:"fixed inset-0 bg-gray-900 bg-opacity-90 flex flex-col items-center justify-center p-4 z-50"},TS={class:"w-full max-w-7xl h-[90vh] bg-white rounded-lg shadow-2xl flex flex-col p-6"},OS={class:"flex-grow overflow-y-auto"},RS={key:0,class:"space-y-6 p-4"},IS={class:"flex justify-between items-center mb-2"},$S={key:0,class:"w-8 h-8 ml-2 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},PS={class:"text-2xl font-bold"},LS={class:"w-full bg-slate-200 rounded-full h-12"},MS={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},BS=["onClick"],DS={class:"text-lg font-semibold text-center truncate mb-2"},zS=["src"],NS={key:1,class:"text-base p-2 bg-slate-100 rounded h-32 overflow-hidden"},US={key:3,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50"},FS={class:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col"},jS={class:"p-4 border-b flex justify-between items-center bg-slate-50 rounded-t-lg"},WS={class:"text-2xl font-bold"},qS={class:"p-6 overflow-y-auto flex-grow flex items-center justify-center"},HS=["src"],VS={key:1,class:"text-3xl whitespace-pre-wrap"},KS={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},GS={class:"bg-white rounded-lg shadow-xl p-4 w-full max-w-3xl"},ZS={class:"bg-slate-100 p-2 rounded-t-lg flex items-center justify-center gap-4 flex-wrap"},YS={class:"text-base font-medium"},JS={class:"text-base font-medium flex items-center gap-2"},XS={__name:"TeacherPingPongView",setup(t){const n=ft(null),r=ft(""),i=ft([]),o=ft("waiting"),l=Ze({type:"multiple-choice",htmlContent:"",correctAnswer:"A"}),u=ft({}),f=ft(null),d=ft(null),y=ft(null),_=ft(!1),m=ft({name:"",answer:""}),b=ft(!1),v=ft(!1),C=ft({}),x=ft({}),T=ft(null),A=ft(!1),L=ft("#ff0000"),D=ft(5),z=pe(()=>{if(!v.value||C.value.type!=="multiple-choice"&&C.value.type!=="true-false")return[];const at={},gt=C.value.type==="multiple-choice"?["A","B","C","D"]:["O","X"];gt.forEach(ut=>at[ut]=0);for(const ut in x.value){const mt=x.value[ut].answer;at[mt]!==void 0&&at[mt]++}const J=Object.keys(x.value).length;return gt.map(ut=>({option:ut,count:at[ut],percentage:J>0?(at[ut]/J*100).toFixed(0):0,isCorrect:ut===C.value.correctAnswer}))}),B=()=>n.value.emit("teacher:createRoom",at=>{at.roomCode&&(r.value=at.roomCode)}),Y=()=>{l.htmlContent=f.value.innerHTML,n.value.emit("teacher:startQuestion",{roomCode:r.value,question:l})},V=()=>n.value.emit("teacher:stopAnswering",{roomCode:r.value}),tt=()=>{confirm("確定要結束活動嗎？")&&(n.value.emit("teacher:endActivity",{roomCode:r.value}),r.value="")},N=at=>{m.value=at,_.value=!0},I=()=>{b.value=!1,pt()},K=()=>{v.value=!1,o.value="results",f.value&&(f.value.innerHTML="")},k=()=>{if(!y.value)return;T.value=y.value.getContext("2d");const at=y.value,gt=at.getBoundingClientRect();at.width=gt.width,at.height=gt.height,at.addEventListener("mousedown",g),at.addEventListener("mousemove",rt),at.addEventListener("mouseup",Ct),at.addEventListener("mouseleave",Ct),at.addEventListener("touchstart",g,{passive:!1}),at.addEventListener("touchmove",rt,{passive:!1}),at.addEventListener("touchend",Ct)},$=at=>{const gt=y.value,J=gt.getBoundingClientRect(),ut=gt.width/J.width,mt=gt.height/J.height,kt=at.touches?at.touches[0].clientX:at.clientX,dt=at.touches?at.touches[0].clientY:at.clientY;return{x:(kt-J.left)*ut,y:(dt-J.top)*mt}},g=at=>{at.preventDefault(),A.value=!0;const{x:gt,y:J}=$(at);T.value.beginPath(),T.value.moveTo(gt,J)},rt=at=>{if(!A.value)return;at.preventDefault();const{x:gt,y:J}=$(at);T.value.lineTo(gt,J),T.value.strokeStyle=L.value,T.value.lineWidth=D.value,T.value.lineCap="round",T.value.lineJoin="round",T.value.stroke()},Ct=()=>{A.value&&(A.value=!1,T.value.closePath())},pt=()=>T.value.clearRect(0,0,y.value.width,y.value.height),At=()=>{const at=y.value.toDataURL("image/png"),gt=document.createElement("img");gt.src=at,gt.style.maxWidth="100%",gt.style.maxHeight="200px",gt.style.display="block",gt.style.margin="0.5rem auto",f.value.appendChild(gt),I()},xt=()=>d.value.click(),$t=at=>{const gt=at.target.files[0];gt&&(it(gt,800,800,.8).then(J=>{const ut=document.createElement("img");ut.src=J,ut.style.maxWidth="100%",ut.style.maxHeight="200px",ut.style.display="block",ut.style.margin="0.5rem auto",f.value.appendChild(ut)}).catch(J=>console.error("圖片處理失敗:",J)),at.target.value="")};function it(at,gt,J,ut){return new Promise((mt,kt)=>{const dt=new FileReader;dt.onload=S=>{const M=new Image;M.onload=()=>{let{width:h,height:F}=M;h>F?h>gt&&(F*=gt/h,h=gt):F>J&&(h*=J/F,F=J);const j=document.createElement("canvas");j.width=h,j.height=F,j.getContext("2d").drawImage(M,0,0,h,F),mt(j.toDataURL(at.type,ut))},M.onerror=kt,M.src=S.target.result},dt.onerror=kt,dt.readAsDataURL(at)})}const st=async()=>{const at=new Date,gt=`${at.getFullYear()}-${String(at.getMonth()+1).padStart(2,"0")}-${String(at.getDate()).padStart(2,"0")}_${String(at.getHours()).padStart(2,"0")}${String(at.getMinutes()).padStart(2,"0")}`,J=Object.values(x.value);if(C.value.type==="image"){const ut=new sS;for(const kt of J){const dt=await Pt(kt.answer),S=await(await fetch(dt)).blob(),M=`${kt.name}_${gt}.png`;ut.file(M,S)}const mt=await ut.generateAsync({type:"blob"});Tt(mt,`繪圖作品_${r.value}_${gt}.zip`)}else{let ut=`\uFEFF學生暱稱,回答內容
`;J.forEach(kt=>{const dt=`"${kt.name.replace(/"/g,'""')}"`,S=`"${String(kt.answer).replace(/"/g,'""')}"`;ut+=`${dt},${S}
`});const mt=new Blob([ut],{type:"text/csv;charset=utf-8;"});Tt(mt,`答題記錄_${r.value}_${gt}.csv`)}},Pt=at=>new Promise(gt=>{const J=new Image;J.onload=()=>{const ut=document.createElement("canvas");ut.width=J.width,ut.height=J.height;const mt=ut.getContext("2d");mt.fillStyle="white",mt.fillRect(0,0,ut.width,ut.height),mt.drawImage(J,0,0),gt(ut.toDataURL("image/png"))},J.src=at}),Tt=(at,gt)=>{const J=document.createElement("a");J.href=URL.createObjectURL(at),J.download=gt,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(J.href)};return Ar(b,at=>{at&&pi(k)}),Ye(()=>{n.value=Vr("http://localhost:3000"),n.value.on("connect",()=>console.log("成功連接到 Socket.IO 伺服器")),n.value.on("student:joined",at=>i.value=at),n.value.on("student:left",at=>i.value=at),n.value.on("teacher:questionStarted",()=>{o.value="question",u.value={}}),n.value.on("student:answered",at=>u.value=at),n.value.on("question:ended",at=>{C.value={...l},x.value=at,o.value="results",v.value=!0}),n.value.on("activity:ended",at=>{alert(at||"活動已結束"),r.value="",o.value="waiting"})}),Zr(()=>{n.value&&(r.value&&n.value.emit("teacher:endActivity",{roomCode:r.value}),n.value.disconnect())}),(at,gt)=>(W(),H("div",null,[gt[27]||(gt[27]=c("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"PingPong 即時問答",-1)),r.value?(W(),H("div",oS,[c("div",aS,[gt[11]||(gt[11]=c("h2",{class:"text-xl font-semibold text-slate-800"},"活動進行中",-1)),c("div",lS,[gt[10]||(gt[10]=c("p",{class:"text-sm text-slate-300"},"房間代碼",-1)),c("p",uS,lt(r.value),1)]),gt[12]||(gt[12]=c("p",{class:"text-center text-slate-500 mt-4 text-base"},"請學生輸入此代碼加入活動",-1)),gt[13]||(gt[13]=c("hr",{class:"my-6"},null,-1)),c("h3",cS,"已連線學生 ("+lt(i.value.length)+")",1),c("ul",fS,[(W(!0),H(Ft,null,Xt(i.value,J=>(W(),H("li",{key:J.id,class:"text-slate-700 py-1 px-2 bg-white rounded shadow-sm"},lt(J.name),1))),128)),i.value.length===0?(W(),H("li",dS,"尚無學生加入...")):Et("",!0)]),c("button",{onClick:tt,class:"btn btn-danger w-full mt-6 py-3 text-lg"}," 結束活動 ")]),c("div",hS,[o.value==="waiting"||o.value==="results"?(W(),H("div",pS,[gt[19]||(gt[19]=c("h2",{class:"text-2xl font-semibold text-slate-800 mb-6"},"設定新問題",-1)),c("div",gS,[c("div",null,[gt[15]||(gt[15]=c("label",{class:"block text-base font-medium text-slate-700"},"問題類型",-1)),Bt(c("select",{"onUpdate:modelValue":gt[0]||(gt[0]=J=>l.type=J),class:"mt-1 form-input text-lg py-3"},[...gt[14]||(gt[14]=[c("option",{value:"multiple-choice"},"單選題 (4選1)",-1),c("option",{value:"true-false"},"是非題",-1),c("option",{value:"short-answer"},"簡答題",-1),c("option",{value:"image"},"繪圖題",-1)])],512),[[ui,l.type]])]),c("div",null,[gt[16]||(gt[16]=c("label",{class:"block text-base font-medium text-slate-700"},"題目內容 (可選)",-1)),c("div",mS,[c("div",vS,[c("button",{onClick:gt[1]||(gt[1]=J=>b.value=!0),class:"btn btn-secondary text-sm"},"繪圖"),c("button",{onClick:xt,class:"btn btn-secondary text-sm"},"插入圖片"),c("input",{type:"file",ref_key:"imageUploader",ref:d,onChange:$t,class:"hidden",accept:"image/*"},null,544)]),c("div",{ref_key:"questionEditor",ref:f,contenteditable:"true",class:"w-full min-h-[150px] p-3 text-lg bg-white overflow-y-auto focus:outline-none focus:ring-2 focus:ring-sky-400 rounded-b-lg",style:{"-webkit-user-modify":"read-write-plaintext-only"}},null,512)])]),l.type==="multiple-choice"?(W(),H("div",_S,[gt[17]||(gt[17]=c("label",{class:"block text-base font-medium text-slate-700"},"正確答案",-1)),c("div",yS,[(W(),H(Ft,null,Xt(["A","B","C","D"],J=>c("button",{key:J,onClick:ut=>l.correctAnswer=J,class:ce(["w-16 h-16 rounded-full font-bold text-2xl",l.correctAnswer===J?"bg-green-500 text-white ring-2 ring-offset-2 ring-green-500":"bg-slate-200 text-slate-700 hover:bg-slate-300"])},lt(J),11,bS)),64))])])):Et("",!0),l.type==="true-false"?(W(),H("div",xS,[gt[18]||(gt[18]=c("label",{class:"block text-base font-medium text-slate-700"},"正確答案",-1)),c("div",wS,[c("button",{onClick:gt[2]||(gt[2]=J=>l.correctAnswer="O"),class:ce(["px-8 py-4 rounded-lg font-bold text-2xl",l.correctAnswer==="O"?"bg-green-500 text-white ring-2 ring-offset-2 ring-green-500":"bg-slate-200 text-slate-700 hover:bg-slate-300"])},"O (是)",2),c("button",{onClick:gt[3]||(gt[3]=J=>l.correctAnswer="X"),class:ce(["px-8 py-4 rounded-lg font-bold text-2xl",l.correctAnswer==="X"?"bg-red-500 text-white ring-2 ring-offset-2 ring-red-500":"bg-slate-200 text-slate-700 hover:bg-slate-300"])},"X (否)",2)])])):Et("",!0),c("button",{onClick:Y,class:"btn bg-green-500 hover:bg-green-600 w-full text-xl py-4"}," 開始提問 ")])])):Et("",!0),o.value==="question"?(W(),H("div",kS,[gt[21]||(gt[21]=c("h2",{class:"text-2xl font-semibold text-slate-800 mb-4"},"問題進行中...",-1)),c("div",{class:"p-4 border-2 border-sky-500 rounded-lg bg-sky-50 min-h-[150px]",innerHTML:l.htmlContent},null,8,CS),c("p",SS,[gt[20]||(gt[20]=ee("已作答人數: ",-1)),c("span",ES,lt(Object.keys(u.value).length),1),ee(" / "+lt(i.value.length),1)]),c("button",{onClick:V,class:"btn btn-danger w-full text-xl py-4"}," 結束作答 ")])):Et("",!0)])])):(W(),H("div",iS,[gt[7]||(gt[7]=c("svg",{class:"mx-auto h-24 w-24 text-sky-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),gt[8]||(gt[8]=c("h2",{class:"mt-6 text-2xl font-semibold text-slate-700"},"開始一個新的問答活動",-1)),gt[9]||(gt[9]=c("p",{class:"mt-2 text-slate-500"},"點擊下方按鈕以產生一個活動房間代碼，讓學生可以加入。",-1)),c("button",{onClick:B,class:"btn btn-primary text-xl px-8 py-4 rounded-full mt-8"}," 建立新活動 ")])),v.value?(W(),H("div",AS,[c("div",TS,[c("div",{class:"flex justify-between items-center border-b pb-4 mb-6"},[gt[22]||(gt[22]=c("h2",{class:"text-3xl font-bold"},"作答結果",-1)),c("div",{class:"flex items-center gap-4"},[c("button",{onClick:st,class:"btn btn-success text-base"}," 匯出答題記錄 "),c("button",{onClick:K,class:"text-4xl text-slate-400 hover:text-slate-800"},"×")])]),c("div",OS,[C.value.type==="multiple-choice"||C.value.type==="true-false"?(W(),H("div",RS,[(W(!0),H(Ft,null,Xt(z.value,J=>(W(),H("div",{key:J.option,class:"w-full"},[c("div",IS,[c("span",{class:ce(["font-semibold text-3xl flex items-center",[J.isCorrect?"text-green-600":"text-slate-700"]])},[ee(lt(J.option)+" ",1),J.isCorrect?(W(),H("svg",$S,[...gt[23]||(gt[23]=[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):Et("",!0)],2),c("span",PS,lt(J.count)+"人 ("+lt(J.percentage)+"%)",1)]),c("div",LS,[c("div",{class:ce(["h-12 rounded-full flex items-center justify-center text-white font-bold text-lg",[J.isCorrect?"bg-green-500":"bg-sky-500"]]),style:Gr({width:J.percentage+"%"})},lt(J.percentage>10?J.percentage+"%":""),7)])]))),128))])):Et("",!0),C.value.type==="image"||C.value.type==="short-answer"?(W(),H("div",MS,[(W(!0),H(Ft,null,Xt(x.value,J=>(W(),H("div",{key:J.id,onClick:ut=>N(J),class:"card p-2 cursor-pointer hover:shadow-xl hover:-translate-y-1 transition-all"},[c("p",DS,lt(J.name),1),C.value.type==="image"?(W(),H("img",{key:0,src:J.answer,class:"w-full rounded-md aspect-video object-contain bg-slate-100"},null,8,zS)):(W(),H("p",NS,lt(J.answer),1))],8,BS))),128))])):Et("",!0)])])])):Et("",!0),_.value?(W(),H("div",US,[c("div",FS,[c("div",jS,[c("h3",WS,lt(m.value.name)+" 的回應",1),c("button",{onClick:gt[4]||(gt[4]=J=>_.value=!1),class:"text-4xl text-slate-400 hover:text-slate-800"},"×")]),c("div",qS,[C.value.type==="image"?(W(),H("img",{key:0,src:m.value.answer,class:"max-w-full max-h-full object-contain"},null,8,HS)):(W(),H("p",VS,lt(m.value.answer),1))])])])):Et("",!0),b.value?(W(),H("div",KS,[c("div",GS,[gt[26]||(gt[26]=c("h3",{class:"text-2xl font-bold mb-4"},"繪製題目插圖",-1)),c("div",ZS,[c("label",YS,[gt[24]||(gt[24]=ee("顏色: ",-1)),Bt(c("input",{type:"color","onUpdate:modelValue":gt[5]||(gt[5]=J=>L.value=J)},null,512),[[jt,L.value]])]),c("label",JS,[gt[25]||(gt[25]=ee("筆刷: ",-1)),Bt(c("input",{type:"range","onUpdate:modelValue":gt[6]||(gt[6]=J=>D.value=J),min:"1",max:"50"},null,512),[[jt,D.value]])])]),c("canvas",{ref_key:"drawingCanvas",ref:y,class:"border bg-white w-full aspect-video",style:{"touch-action":"none"}},null,512),c("div",{class:"flex justify-end gap-4 mt-4"},[c("button",{onClick:I,class:"btn btn-secondary text-base"},"取消"),c("button",{onClick:At,class:"btn bg-teal-500 hover:bg-teal-600 text-base"},"儲存繪圖")])])])):Et("",!0)]))}},QS={class:"min-h-screen bg-sky-100 flex items-center justify-center p-4 font-sans"},t8={key:0,class:"card p-8 text-center"},e8={class:"text-3xl font-bold text-slate-700"},n8={key:1,class:"card p-8 transform transition-all hover:shadow-2xl duration-300"},r8={key:0,class:"text-red-500 text-sm text-center pt-2"},s8={key:2,class:"card p-8 text-center"},i8={key:0},o8={key:0},a8={key:1},l8={key:0,class:"text-slate-500 mt-4 text-2xl"},u8={class:"font-bold text-slate-700"},c8={key:1},f8={key:0},d8=["src"],h8={key:1,class:"text-2xl text-slate-600 bg-slate-100 p-4 rounded-lg break-words whitespace-pre-wrap"},p8=["innerHTML"],g8={key:1,class:"mb-6"},m8={class:"text-3xl font-semibold text-center text-slate-800"},v8={key:2,class:"grid grid-cols-2 gap-4"},_8=["onClick"],y8={key:3,class:"grid grid-cols-2 gap-4"},b8={key:5},x8={class:"bg-slate-100 p-2 rounded-t-lg flex items-center justify-center gap-2 md:gap-4 flex-wrap"},w8={class:"text-base font-medium"},k8={class:"flex items-center gap-2"},C8={class:"w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center"},S8={key:4,class:"text-center p-8 card"},E8={key:5,class:"text-center p-8 card"},A8={__name:"StudentPingPongView",setup(t){const n=ft(null),r=lu(),i=Ze({roomCode:"",name:""}),o=Ze({joined:!1}),l=ft(""),u=ft(null),f=ft(!1),d=ft(""),y=ft(""),_=ft(null),m=ft(null),b=ft(null),v=ft(null),C=ft(!1),x=ft("#000000"),T=ft(5),A=()=>{if(!b.value)return;v.value=b.value.getContext("2d");const I=b.value,K=I.getBoundingClientRect();I.width=K.width,I.height=K.height,I.addEventListener("mousedown",D),I.addEventListener("mousemove",z),I.addEventListener("mouseup",B),I.addEventListener("mouseleave",B),I.addEventListener("touchstart",D,{passive:!1}),I.addEventListener("touchmove",z,{passive:!1}),I.addEventListener("touchend",B)},L=I=>{const K=b.value,k=K.getBoundingClientRect(),$=K.width/k.width,g=K.height/k.height,rt=I.touches?I.touches[0].clientX:I.clientX,Ct=I.touches?I.touches[0].clientY:I.clientY;return{x:(rt-k.left)*$,y:(Ct-k.top)*g}},D=I=>{I.preventDefault(),C.value=!0;const{x:K,y:k}=L(I);v.value.beginPath(),v.value.moveTo(K,k)},z=I=>{if(!C.value)return;I.preventDefault();const{x:K,y:k}=L(I);v.value.lineTo(K,k),v.value.strokeStyle=x.value,v.value.lineWidth=T.value,v.value.lineCap="round",v.value.lineJoin="round",v.value.stroke()},B=()=>{C.value&&(C.value=!1,v.value.closePath())},Y=()=>{v.value.clearRect(0,0,b.value.width,b.value.height)},V=()=>{const I=b.value,K=document.createElement("canvas");K.width=I.width,K.height=I.height;const k=K.getContext("2d");k.fillStyle="white",k.fillRect(0,0,K.width,K.height),k.drawImage(I,0,0),N(K.toDataURL("image/png"))};Ar(u,I=>{(I==null?void 0:I.type)==="image"&&pi(A)});const tt=()=>{if(!i.roomCode||!i.name){l.value="房間代碼和姓名為必填項。";return}l.value="",n.value.emit("student:joinRoom",{roomCode:i.roomCode.toUpperCase(),name:i.name},I=>{I.success?o.joined=!0:l.value=I.message})},N=I=>{typeof I=="string"&&!I.trim()||(_.value=I,n.value.emit("student:submitAnswer",{roomCode:i.roomCode.toUpperCase(),answer:I}),f.value=!0)};return Ye(()=>{const I=r.query.room;I&&(i.roomCode=I.toUpperCase());const K=localStorage.getItem("studentInfo");K&&(i.name=JSON.parse(K).name),n.value=Vr("http://localhost:3000"),n.value.on("connect",()=>console.log("成功連接到 Socket.IO 伺服器")),n.value.on("question:started",k=>{u.value=k,f.value=!1,d.value=""}),n.value.on("question:ended",()=>{var rt,Ct;const k=(rt=u.value)==null?void 0:rt.type,$=(Ct=u.value)==null?void 0:Ct.correctAnswer;let g=null;(k==="multiple-choice"||k==="true-false")&&(g=_.value===$),m.value={myAnswer:_.value,correctAnswer:$,questionType:k,isCorrect:g},u.value=null,f.value=!1,setTimeout(()=>{m.value=null,_.value=null},5e3)}),n.value.on("activity:ended",k=>{y.value=k||"老師已結束活動。",o.joined=!1,u.value=null,f.value=!1,setTimeout(()=>{y.value="",l.value=""},5e3)})}),Zr(()=>{n.value&&n.value.disconnect()}),(I,K)=>{var k,$;return W(),H("div",QS,[c("div",{class:ce(["w-full transition-all duration-300",((k=u.value)==null?void 0:k.type)==="image"||(($=m.value)==null?void 0:$.questionType)==="image"?"max-w-4xl":"max-w-lg"])},[y.value?(W(),H("div",t8,[c("h2",e8,lt(y.value),1),K[8]||(K[8]=c("p",{class:"text-slate-500 mt-2 text-xl"},"此頁面將在幾秒後重設。",-1)),K[9]||(K[9]=c("div",{class:"mt-8"},[c("svg",{class:"h-16 w-16 text-slate-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])):o.joined?m.value?(W(),H("div",s8,[m.value.isCorrect!==null?(W(),H("div",i8,[m.value.isCorrect?(W(),H("div",o8,[...K[15]||(K[15]=[c("svg",{class:"mx-auto h-24 w-24 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),c("h2",{class:"mt-6 text-5xl font-bold text-green-600"},"答對了！",-1)])])):(W(),H("div",a8,[K[17]||(K[17]=c("svg",{class:"mx-auto h-24 w-24 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),K[18]||(K[18]=c("h2",{class:"mt-6 text-5xl font-bold text-red-600"},"答錯了",-1)),m.value.correctAnswer?(W(),H("p",l8,[K[16]||(K[16]=ee("正確答案是： ",-1)),c("span",u8,lt(m.value.correctAnswer),1)])):Et("",!0)]))])):(W(),H("div",c8,[K[19]||(K[19]=c("h2",{class:"text-3xl font-bold text-slate-700 mb-6"},"您回答的內容：",-1)),m.value.questionType==="image"?(W(),H("div",f8,[c("img",{src:m.value.myAnswer,class:"max-w-full max-h-80 mx-auto border rounded-lg bg-white p-2"},null,8,d8)])):(W(),H("div",h8,lt(m.value.myAnswer),1))])),K[20]||(K[20]=c("p",{class:"text-slate-400 mt-8 text-lg animate-pulse"},"準備下一題...",-1))])):o.joined&&u.value&&!f.value?(W(),H("div",{key:3,class:ce(["card",u.value.type==="image"?"p-4":"p-8"])},[u.value.htmlContent?(W(),H("div",{key:0,id:"question-area",class:"mb-6 max-h-60 overflow-y-auto p-2 text-xl",innerHTML:u.value.htmlContent},null,8,p8)):u.value.text?(W(),H("div",g8,[c("p",m8,lt(u.value.text),1)])):Et("",!0),u.value.type==="multiple-choice"?(W(),H("div",v8,[(W(),H(Ft,null,Xt(["A","B","C","D"],g=>c("button",{key:g,onClick:rt=>N(g),class:"answer-btn-student text-7xl font-bold h-40"},lt(g),9,_8)),64))])):Et("",!0),u.value.type==="true-false"?(W(),H("div",y8,[c("button",{onClick:K[2]||(K[2]=g=>N("O")),class:"answer-btn-student h-40"},[...K[21]||(K[21]=[c("svg",{class:"w-24 h-24 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])]),c("button",{onClick:K[3]||(K[3]=g=>N("X")),class:"answer-btn-student h-40"},[...K[22]||(K[22]=[c("svg",{class:"w-24 h-24 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])])):Et("",!0),u.value.type==="short-answer"?(W(),H("form",{key:4,onSubmit:K[5]||(K[5]=De(g=>N(d.value),["prevent"]))},[Bt(c("textarea",{"onUpdate:modelValue":K[4]||(K[4]=g=>d.value=g),rows:"6",class:"form-input text-xl",placeholder:"請在此輸入您的答案..."},null,512),[[jt,d.value]]),K[23]||(K[23]=c("button",{type:"submit",class:"w-full mt-4 btn btn-primary py-4 text-xl font-bold"},"送出答案",-1))],32)):Et("",!0),u.value.type==="image"?(W(),H("div",b8,[c("div",x8,[c("label",w8,[K[24]||(K[24]=ee("顏色: ",-1)),Bt(c("input",{type:"color","onUpdate:modelValue":K[6]||(K[6]=g=>x.value=g),class:"w-10 h-10"},null,512),[[jt,x.value]])]),c("div",k8,[K[25]||(K[25]=c("label",{class:"text-base font-medium"},"筆刷:",-1)),Bt(c("input",{type:"range","onUpdate:modelValue":K[7]||(K[7]=g=>T.value=g),min:"1",max:"50",class:"w-32 md:w-48"},null,512),[[jt,T.value]]),c("span",C8,[c("span",{class:"rounded-full bg-black",style:Gr({width:T.value+"px",height:T.value+"px"})},null,4)])]),c("button",{onClick:Y,class:"btn btn-secondary text-base"},"清除")]),c("canvas",{ref_key:"drawingCanvas",ref:b,class:"border-x border-b border-gray-300 bg-white w-full aspect-video",style:{"touch-action":"none"}},null,512),c("button",{onClick:V,class:"mt-4 w-full btn bg-orange-500 hover:bg-orange-600 text-xl font-bold py-4"},"送出我的作品")])):Et("",!0)],2)):o.joined&&f.value?(W(),H("div",S8,[...K[26]||(K[26]=[c("svg",{class:"mx-auto h-24 w-24 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),c("h2",{class:"mt-6 text-3xl font-bold text-green-600"},"已成功送出答案！",-1),c("p",{class:"text-slate-500 mt-2 text-lg"},"請等待下一題或老師公佈結果...",-1)])])):o.joined&&!u.value?(W(),H("div",E8,[...K[27]||(K[27]=[lr('<h2 class="text-4xl font-bold text-slate-700">已成功加入！</h2><p class="text-slate-500 mt-2 text-xl">請等待老師開始提問...</p><div class="mt-12"><svg class="animate-spin h-16 w-16 text-sky-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>',3)])])):Et("",!0):(W(),H("div",n8,[K[13]||(K[13]=c("h1",{class:"text-3xl font-bold text-center text-sky-600 mb-2"},"加入 PingPong 活動",-1)),K[14]||(K[14]=c("p",{class:"text-center text-slate-500 mb-8"},"請輸入老師提供的房間代碼",-1)),c("form",{onSubmit:De(tt,["prevent"]),class:"space-y-6"},[c("div",null,[K[10]||(K[10]=c("label",{for:"roomCode",class:"block text-lg font-bold text-slate-600 mb-1"},"房間代碼",-1)),Bt(c("input",{"onUpdate:modelValue":K[0]||(K[0]=g=>i.roomCode=g),type:"text",id:"roomCode",placeholder:"ABCDEF",class:"form-input text-4xl tracking-widest text-center uppercase py-3"},null,512),[[jt,i.roomCode,void 0,{trim:!0}]])]),c("div",null,[K[11]||(K[11]=c("label",{for:"studentName",class:"block text-lg font-bold text-slate-600 mb-1"},"你的名字",-1)),Bt(c("input",{"onUpdate:modelValue":K[1]||(K[1]=g=>i.name=g),type:"text",id:"studentName",placeholder:"請輸入姓名或座號",class:"form-input text-2xl py-3"},null,512),[[jt,i.name,void 0,{trim:!0}]])]),l.value?(W(),H("p",r8,lt(l.value),1)):Et("",!0),K[12]||(K[12]=c("button",{type:"submit",class:"w-full btn btn-primary py-4 text-2xl font-bold"}," 加入 ",-1))],32)]))],2)])}}},T8={class:"flex justify-between items-center mb-8"},O8={key:0,class:"text-center py-10 text-slate-500"},R8={key:1,class:"text-center bg-white rounded-lg p-12 shadow"},I8={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},$8={class:"flex-grow"},P8={key:0,class:"px-2 py-1 text-xs font-semibold rounded-full bg-sky-100 text-sky-800"},L8={class:"text-2xl font-bold text-slate-800 mt-2"},M8={class:"text-sm text-slate-500 mt-2"},B8={class:"text-sm text-slate-500 mt-1"},D8={class:"mt-6 grid grid-cols-2 gap-3"},z8=["onClick"],N8={class:"mt-3 flex justify-end items-center text-sm"},U8=["onClick"],F8=["onClick"],j8={key:3,class:"fixed z-10 inset-0 overflow-y-auto"},W8={class:"flex items-center justify-center min-h-screen"},q8={class:"p-6"},H8={class:"text-xl font-bold mb-4"},V8={class:"space-y-4"},K8=["value"],G8={class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"},Z8={key:4,class:"fixed z-20 inset-0 overflow-y-auto"},Y8={class:"flex items-center justify-center min-h-screen p-4"},J8={class:"bg-white rounded-lg shadow-xl transform transition-all w-full max-w-5xl h-[90vh] flex flex-col"},X8={class:"p-4 border-b flex justify-between items-center"},Q8={class:"text-2xl font-bold"},tE={class:"flex-grow p-6 overflow-y-auto"},eE={class:"flex justify-end items-center gap-4 mb-6"},nE={key:0,class:"text-center text-slate-500 py-10"},rE={key:1,class:"space-y-4"},sE={class:"flex justify-between items-start"},iE={class:"font-bold text-lg"},oE=["innerHTML"],aE={class:"grid grid-cols-2 gap-x-8 gap-y-2 mt-2 pl-6"},lE={key:0,class:"w-5 h-5 ml-1 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},uE={class:"flex items-center space-x-2"},cE=["onClick"],fE=["onClick"],dE={key:5,class:"fixed z-30 inset-0 overflow-y-auto"},hE={class:"flex items-center justify-center min-h-screen"},pE={class:"p-6"},gE={class:"text-xl font-bold mb-4"},mE={class:"space-y-4"},vE=["onUpdate:modelValue","placeholder"],_E={class:"flex items-center gap-1.5"},yE=["name","value"],bE=["onClick"],xE={class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"},wE={__name:"QuizManagerView",setup(t){const n=ft(!0),r=ft([]),i=ft([]),o=ft(!1),l=ft({}),u=ft(!1),f=ft(null),d=ft([]),y=ft(!1),_=ft({}),m=ft(null),b=N=>{l.value=N?{...N}:{title:"",subject_id:null},o.value=!0},v=async()=>{const N=!!l.value.id,I=N?`/api/quiz-sets/${l.value.id}`:"/api/quiz-sets",K=N?"PUT":"POST";try{const k=await qt(I,{method:K,body:JSON.stringify(l.value)});if(!k.ok){const g=await k.json();throw new Error(g.error||"儲存失敗，請檢查您的輸入")}const $=await k.json();if(N){const g=r.value.findIndex(rt=>rt.id===$.id);g!==-1&&(r.value[g]=$)}else r.value.unshift($);o.value=!1}catch(k){console.error("儲存測驗集失敗:",k),alert(`儲存失敗: ${k.message}`)}},C=async N=>{if(confirm("確定要刪除這個測驗集嗎？所有相關的題目將會一併刪除！"))try{await qt(`/api/quiz-sets/${N}`,{method:"DELETE"}),r.value=r.value.filter(I=>I.id!==N)}catch(I){console.error("刪除測驗集失敗:",I)}},x=async N=>{try{const I=await qt(`/api/quiz-questions/${N.id}`);if(!I.ok)throw new Error("讀取題目失敗");d.value=await I.json()}catch(I){console.error("讀取題目失敗:",I),alert(I.message)}},T=async N=>{f.value=N,u.value=!0,await x(N)},A=()=>{u.value=!1,f.value=null,d.value=[]},L=N=>{N?(_.value={...N,options:JSON.parse(N.options).map(I=>({text:I}))},_.value.correct_answer=N.correct_answer):_.value={quiz_set_id:f.value.id,question_text:"",options:[{text:""},{text:""}],correct_answer:""},y.value=!0},D=()=>{_.value.options.length<4&&_.value.options.push({text:""})},z=N=>{_.value.options.length>2&&_.value.options.splice(N,1)},B=async()=>{const N=!!_.value.id,I=N?`/api/quiz-questions/${_.value.id}`:"/api/quiz-questions",K=N?"PUT":"POST",k={..._.value,options:_.value.options.map($=>$.text)};try{const $=await qt(I,{method:K,body:JSON.stringify(k)});if(!$.ok){const rt=await $.json();throw new Error(rt.error||"儲存題目失敗")}const g=await $.json();if(N){const rt=d.value.findIndex(Ct=>Ct.id===g.id);rt!==-1&&(d.value[rt]=g)}else d.value.push(g);y.value=!1}catch($){console.error("儲存題目失敗:",$),alert(`儲存失敗: ${$.message}`)}},Y=async N=>{if(confirm("確定要刪除這個題目嗎？"))try{await qt(`/api/quiz-questions/${N}`,{method:"DELETE"}),d.value=d.value.filter(I=>I.id!==N)}catch(I){console.error("刪除題目失敗:",I)}},V=()=>{m.value.click()},tt=async N=>{const I=N.target.files[0];if(!I||!f.value)return;const K=new FormData;K.append("file",I);try{const k=await qt(`/api/quiz-questions/import/${f.value.id}`,{method:"POST",body:K}),$=await k.json();if(!k.ok)throw new Error($.error);alert($.message),await x(f.value)}catch(k){console.error("匯入題庫失敗:",k),alert(`匯入失敗: ${k.message}`)}finally{m.value.value=""}};return Ye(async()=>{try{const[N,I]=await Promise.all([qt("/api/quiz-sets"),qt("/api/subjects")]);if(!N.ok||!I.ok)throw new Error("無法載入初始資料");r.value=await N.json(),i.value=await I.json()}catch(N){console.error("初始化失敗:",N)}finally{n.value=!1}}),(N,I)=>{const K=So("router-link");return W(),H("div",null,[c("div",T8,[I[10]||(I[10]=c("h1",{class:"text-4xl font-bold text-slate-800"},"搶答競賽 (QuizRace)",-1)),c("button",{onClick:I[0]||(I[0]=k=>b(null)),class:"btn btn-primary"},"建立新測驗集")]),n.value?(W(),H("div",O8,"正在載入題庫...")):r.value.length===0?(W(),H("div",R8,[...I[11]||(I[11]=[c("h3",{class:"text-2xl font-semibold text-slate-700"},"尚未建立任何測驗集",-1),c("p",{class:"text-slate-500 mt-2"},"點擊右上角的「建立新測驗集」來開始吧！",-1)])])):(W(),H("div",I8,[(W(!0),H(Ft,null,Xt(r.value,k=>(W(),H("div",{key:k.id,class:"card flex flex-col"},[c("div",$8,[k.subject_name?(W(),H("span",P8,lt(k.subject_name),1)):Et("",!0),c("h3",L8,lt(k.title),1),c("p",M8,"題目數量: "+lt(k.question_count||0)+" 題",1),c("p",B8,"建立於: "+lt(new Date(k.created_at).toLocaleDateString()),1)]),c("div",D8,[c("button",{onClick:$=>T(k),class:"btn bg-slate-600 hover:bg-slate-700 w-full"},"管理題目",8,z8),fe(K,{to:{name:"quiz-game-teacher",params:{setId:k.id}},class:"btn btn-success w-full text-center"},{default:cn(()=>[...I[12]||(I[12]=[ee("開始競賽",-1)])]),_:1},8,["to"])]),c("div",N8,[c("button",{onClick:$=>b(k),class:"text-blue-500 hover:text-blue-700 font-medium"},"編輯資訊",8,U8),I[13]||(I[13]=c("span",{class:"mx-2 text-slate-300"},"|",-1)),c("button",{onClick:$=>C(k.id),class:"text-red-500 hover:text-red-700 font-medium"},"刪除",8,F8)])]))),128))])),o.value?(W(),H("div",j8,[c("div",W8,[c("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:I[1]||(I[1]=k=>o.value=!1)}),c("form",{onSubmit:De(v,["prevent"]),class:"bg-white rounded-lg shadow-xl transform transition-all max-w-lg w-full"},[c("div",q8,[c("h3",H8,lt(l.value.id?"編輯測驗集":"建立新測驗集"),1),c("div",V8,[c("div",null,[I[14]||(I[14]=c("label",{class:"block text-sm font-medium text-slate-700"},"測驗集標題",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[2]||(I[2]=k=>l.value.title=k),required:"",class:"mt-1 form-input"},null,512),[[jt,l.value.title]])]),c("div",null,[I[16]||(I[16]=c("label",{class:"block text-sm font-medium text-slate-700"},"關聯科目 (選填)",-1)),Bt(c("select",{"onUpdate:modelValue":I[3]||(I[3]=k=>l.value.subject_id=k),class:"mt-1 form-input"},[I[15]||(I[15]=c("option",{value:null},"-- 無 --",-1)),(W(!0),H(Ft,null,Xt(i.value,k=>(W(),H("option",{key:k.id,value:k.id},lt(k.name),9,K8))),128))],512),[[ui,l.value.subject_id]])])])]),c("div",G8,[c("button",{type:"button",onClick:I[4]||(I[4]=k=>o.value=!1),class:"btn btn-secondary"},"取消"),I[17]||(I[17]=c("button",{type:"submit",class:"btn btn-primary"},"儲存",-1))])],32)])])):Et("",!0),u.value&&f.value?(W(),H("div",Z8,[c("div",Y8,[c("div",{class:"fixed inset-0 bg-gray-800 bg-opacity-80",onClick:A}),c("div",J8,[c("div",X8,[c("h3",Q8,"管理題目: "+lt(f.value.title),1),c("button",{onClick:A,class:"text-3xl text-gray-500 hover:text-gray-800"},"×")]),c("div",tE,[c("div",eE,[c("input",{type:"file",ref_key:"quizFileInput",ref:m,onChange:tt,class:"hidden",accept:".xlsx, .xls, .csv"},null,544),c("button",{onClick:V,class:"btn bg-emerald-500 hover:bg-emerald-600"},"匯入題庫"),c("button",{onClick:I[5]||(I[5]=k=>L(null)),class:"btn btn-primary"},"新增題目")]),d.value.length===0?(W(),H("div",nE,[...I[18]||(I[18]=[c("p",null,"這個測驗集還沒有題目喔！",-1)])])):(W(),H("div",rE,[(W(!0),H(Ft,null,Xt(d.value,(k,$)=>(W(),H("div",{key:k.id,class:"border rounded-lg p-4 bg-slate-50"},[c("div",sE,[c("div",null,[c("p",iE,[ee(lt($+1)+". ",1),c("span",{innerHTML:k.question_text||"無題目文字"},null,8,oE)]),c("div",aE,[(W(!0),H(Ft,null,Xt(JSON.parse(k.options),(g,rt)=>(W(),H("div",{key:rt,class:ce(["flex items-center",{"font-bold text-green-600":g===k.correct_answer}])},[ee(lt(g)+" ",1),g===k.correct_answer?(W(),H("svg",lE,[...I[19]||(I[19]=[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):Et("",!0)],2))),128))])]),c("div",uE,[c("button",{onClick:g=>L(k),class:"btn bg-yellow-500 hover:bg-yellow-600 text-sm"},"編輯",8,cE),c("button",{onClick:g=>Y(k.id),class:"btn btn-danger text-sm"},"刪除",8,fE)])])]))),128))]))])])])])):Et("",!0),y.value?(W(),H("div",dE,[c("div",hE,[c("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50",onClick:I[6]||(I[6]=k=>y.value=!1)}),c("form",{onSubmit:De(B,["prevent"]),class:"bg-white rounded-lg shadow-xl transform transition-all max-w-2xl w-full"},[c("div",pE,[c("h3",gE,lt(_.value.id?"編輯題目":"新增題目"),1),c("div",mE,[c("div",null,[I[20]||(I[20]=c("label",{class:"block text-sm font-medium text-slate-700"},"題目內容",-1)),Bt(c("input",{type:"text","onUpdate:modelValue":I[7]||(I[7]=k=>_.value.question_text=k),class:"mt-1 form-input"},null,512),[[jt,_.value.question_text]])]),c("div",null,[I[22]||(I[22]=c("label",{class:"block text-sm font-medium text-slate-700"},"選項與答案",-1)),(W(!0),H(Ft,null,Xt(_.value.options,(k,$)=>(W(),H("div",{key:$,class:"flex items-center mt-2 gap-2"},[Bt(c("input",{type:"text","onUpdate:modelValue":g=>k.text=g,class:"form-input flex-grow",required:"",placeholder:`選項 ${$+1}`},null,8,vE),[[jt,k.text]]),c("label",_E,[Bt(c("input",{type:"radio",name:"correct-option-"+_.value.id,value:k.text,"onUpdate:modelValue":I[8]||(I[8]=g=>_.value.correct_answer=g)},null,8,yE),[[hw,_.value.correct_answer]]),I[21]||(I[21]=ee(" 正確 ",-1))]),_.value.options.length>2?(W(),H("button",{key:0,type:"button",onClick:g=>z($),class:"text-red-500 text-xl font-bold"},"×",8,bE)):Et("",!0)]))),128)),_.value.options.length<4?(W(),H("button",{key:0,type:"button",onClick:D,class:"text-sm text-sky-600 mt-2"},"新增選項")):Et("",!0)])])]),c("div",xE,[c("button",{type:"button",onClick:I[9]||(I[9]=k=>y.value=!1),class:"btn btn-secondary"},"取消"),I[23]||(I[23]=c("button",{type:"submit",class:"btn btn-primary"},"儲存題目",-1))])],32)])])):Et("",!0)])}}},kE={class:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-4 font-sans"},CE={key:0,class:"text-center"},SE={key:1,class:"w-full max-w-5xl text-center relative"},EE={class:"mt-8 p-8 bg-gray-800 rounded-2xl shadow-lg flex items-center justify-center"},AE={class:"text-center"},TE={class:"text-8xl font-mono font-bold tracking-widest text-white"},OE=["disabled"],RE={class:"mt-8"},IE={key:0,class:"text-gray-400 mt-4 text-lg"},$E={key:1,class:"flex flex-wrap justify-center gap-4 mt-4 max-w-4xl mx-auto"},PE={class:"font-bold text-sky-300"},LE={key:2,class:"w-full max-w-6xl mx-auto flex flex-col h-full"},ME={class:"flex justify-between items-center bg-gray-800 p-4 rounded-t-lg"},BE={class:"text-2xl font-bold"},DE={class:"text-5xl font-bold text-yellow-300"},zE={class:"text-2xl font-bold"},NE={class:"flex-grow bg-white text-gray-900 flex flex-col items-center justify-center p-8 text-center rounded-b-lg"},UE=["innerHTML"],FE={class:"grid grid-cols-2 gap-4 p-4 mt-4"},jE={class:"text-5xl mr-6 font-black"},WE={key:3,class:"w-full max-w-4xl mx-auto text-center"},qE={class:"space-y-4"},HE={class:"flex items-center"},VE={class:"font-bold w-12"},KE={class:"font-bold text-yellow-300"},GE={key:4,class:"w-full max-w-4xl mx-auto text-center"},ZE={class:"space-y-4"},YE={class:"flex items-center gap-4"},JE={class:"font-bold text-5xl w-16"},XE={class:"font-bold"},QE={__name:"QuizGameTeacher",props:{setId:{type:String,required:!0}},setup(t){const n=t,r=Wo(),i=ft(null),o=ft(!0),l=ft(""),u=ft("lobby"),f=ft([]),d=ft(null),y=ft(0),_=ft(0),m=ft(15),b=ft(null),v=ft(0),C=ft([]),x=["bg-red-600","bg-blue-600","bg-yellow-500","bg-green-600"],T=pe(()=>y.value>=_.value-1),A=B=>B===0?"bg-yellow-400 text-gray-900 scale-110 shadow-lg":B===1?"bg-gray-300 text-gray-900":B===2?"bg-yellow-700 text-white":"bg-gray-800",L=()=>{i.value.emit("quiz:teacher:start",{roomCode:l.value})},D=()=>{i.value.emit("quiz:teacher:nextQuestion",{roomCode:l.value})},z=()=>{r.push({name:"quiz-manager"})};return Ye(()=>{i.value=Vr("http://localhost:3000"),i.value.on("connect",()=>{i.value.emit("quiz:teacher:create",{quizSetId:n.setId},B=>{o.value=!1,B.roomCode?l.value=B.roomCode:(alert(B.error||"無法建立遊戲室"),r.back())})}),i.value.on("quiz:updatePlayers",B=>{f.value=B,v.value=B.filter(Y=>Y.answered).length}),i.value.on("quiz:newQuestion",B=>{d.value=B,y.value=B.index,_.value=B.total,m.value=15,v.value=0,u.value="question",clearInterval(b.value),b.value=setInterval(()=>{m.value>0?m.value--:clearInterval(b.value)},1e3)}),i.value.on("quiz:showLeaderboard",B=>{u.value="leaderboard",C.value=B,clearInterval(b.value)}),i.value.on("quiz:finished",B=>{u.value="finished",C.value=B})}),Zr(()=>{i.value&&i.value.disconnect(),clearInterval(b.value)}),(B,Y)=>(W(),H("div",kE,[o.value?(W(),H("div",CE,[...Y[0]||(Y[0]=[lr('<svg class="animate-spin h-12 w-12 text-yellow-300 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><h2 class="text-3xl font-bold mt-4">正在建立遊戲房間...</h2><p class="text-gray-400 mt-2">請稍候</p>',3)])])):u.value==="lobby"?(W(),H("div",SE,[c("button",{onClick:z,class:"absolute top-0 left-0 btn btn-secondary flex items-center gap-2 text-lg"},[...Y[1]||(Y[1]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1),ee(" 返回題庫管理 ",-1)])]),Y[4]||(Y[4]=c("h1",{class:"text-5xl font-bold text-yellow-300"},"遊戲大廳",-1)),Y[5]||(Y[5]=c("p",{class:"text-2xl text-gray-300 mt-4"},"請學生輸入以下房間代碼加入",-1)),c("div",EE,[c("div",AE,[Y[2]||(Y[2]=c("p",{class:"text-3xl text-gray-400"},"房間代碼",-1)),c("p",TE,lt(l.value),1),c("button",{onClick:L,class:"mt-6 w-full btn bg-green-500 hover:bg-green-600 text-2xl px-12 py-4 rounded-full",disabled:f.value.length===0},lt(f.value.length===0?"等待玩家加入...":`開始遊戲 (${f.value.length}人)`),9,OE)])]),c("div",RE,[Y[3]||(Y[3]=c("h2",{class:"text-3xl font-semibold"},"已加入的玩家:",-1)),f.value.length===0?(W(),H("div",IE,"還沒有玩家加入...")):(W(),H("div",$E,[(W(!0),H(Ft,null,Xt(f.value,(V,tt)=>(W(),H("span",{key:V.id,class:"bg-gray-700 text-white px-4 py-2 rounded-full text-xl"},[c("span",PE,lt(tt+1)+".",1),ee(" "+lt(V.name),1)]))),128))]))])])):Et("",!0),u.value==="question"&&d.value?(W(),H("div",LE,[c("div",ME,[c("div",BE,"第 "+lt(y.value+1)+" / "+lt(_.value)+" 題",1),c("div",DE,lt(m.value),1),c("div",zE,lt(v.value)+" / "+lt(f.value.length)+" 人已作答",1)]),c("div",NE,[d.value.text?(W(),H("div",{key:0,innerHTML:d.value.text,class:"text-5xl font-bold"},null,8,UE)):Et("",!0)]),c("div",FE,[(W(!0),H(Ft,null,Xt(d.value.options,(V,tt)=>(W(),H("div",{key:tt,class:ce(["p-6 rounded-lg text-3xl font-bold flex items-center transition-all duration-300",[x[tt]]])},[c("div",jE,lt(["A","B","C","D"][tt]),1),c("div",null,lt(V),1)],2))),128))])])):Et("",!0),u.value==="leaderboard"?(W(),H("div",WE,[Y[6]||(Y[6]=c("h1",{class:"text-5xl font-bold text-yellow-300 mb-8"},"排行榜",-1)),c("div",qE,[(W(!0),H(Ft,null,Xt(C.value,(V,tt)=>(W(),H("div",{key:V.id,class:"bg-gray-800 p-4 rounded-lg flex items-center justify-between text-2xl"},[c("div",HE,[c("span",VE,lt(tt+1)+".",1),c("span",null,lt(V.name),1)]),c("span",KE,lt(V.score)+" 分",1)]))),128))]),c("button",{onClick:D,class:"btn btn-primary text-2xl px-12 py-4 rounded-full mt-10"},lt(T.value?"查看最終結果":"下一題"),1)])):Et("",!0),u.value==="finished"?(W(),H("div",GE,[Y[7]||(Y[7]=c("h1",{class:"text-6xl font-bold text-yellow-300 mb-8"},"遊戲結束！",-1)),c("div",ZE,[(W(!0),H(Ft,null,Xt(C.value.slice(0,3),(V,tt)=>(W(),H("div",{key:V.id,class:ce(["p-6 rounded-lg flex items-center justify-between text-4xl",A(tt)])},[c("div",YE,[c("span",JE,lt(tt+1),1),c("span",null,lt(V.name),1)]),c("span",XE,lt(V.score)+" 分",1)],2))),128))]),c("button",{onClick:z,class:"btn btn-secondary text-2xl px-12 py-4 rounded-full mt-12"},"返回題庫管理")])):Et("",!0)]))}},tA={class:"min-h-screen bg-gray-800 text-white flex items-center justify-center p-4 font-sans"},eA={class:"w-full max-w-2xl mx-auto"},nA={key:0,class:"card bg-gray-900 p-8 shadow-2xl"},rA={key:0,class:"text-red-400 text-sm text-center pt-2"},sA={key:1,class:"text-center p-8 card bg-gray-900"},iA={key:2,class:"w-full max-w-4xl mx-auto"},oA={class:"flex justify-between items-center bg-gray-900 p-4 rounded-t-lg"},aA={class:"text-2xl font-bold"},lA={class:"text-5xl font-bold text-yellow-300"},uA={class:"p-8 bg-white text-gray-900 rounded-b-lg text-center"},cA={class:"text-4xl font-bold"},fA={class:"mt-6 grid grid-cols-2 gap-4"},dA=["onClick"],hA={key:3,class:"text-center p-8 card bg-gray-900"},pA={key:4,class:"w-full max-w-2xl mx-auto text-center"},gA={class:"text-5xl font-bold text-yellow-300 mb-8"},mA={class:"space-y-4"},vA={class:"font-bold"},_A={class:"font-semibold text-sky-300"},yA={key:0,class:"mt-8"},bA={__name:"QuizGameStudent",setup(t){const n=ft(null),r=lu(),i=Ze({roomCode:"",name:""}),o=ft("joining"),l=ft(""),u=ft(null),f=ft(0),d=ft(null),y=ft([]),_=["bg-red-600","bg-blue-600","bg-yellow-500","bg-green-600"],m=()=>{if(!i.roomCode||!i.name){l.value="房間代碼和姓名為必填項。";return}l.value="",n.value.emit("quiz:student:join",{roomCode:i.roomCode.toUpperCase(),name:i.name},v=>{v.success?o.value="lobby":l.value=v.message})},b=v=>{n.value.emit("quiz:student:answer",{roomCode:i.roomCode.toUpperCase(),answer:v}),o.value="answered"};return Ye(()=>{const v=r.query.room;v&&(i.roomCode=v.toUpperCase());const C=localStorage.getItem("studentInfo");C&&(i.name=JSON.parse(C).name),n.value=Vr("http://localhost:3000"),n.value.on("connect",()=>console.log("已連接到遊戲伺服器")),n.value.on("quiz:newQuestion",x=>{u.value=x,f.value=15,o.value="question",clearInterval(d.value),d.value=setInterval(()=>{f.value>0?f.value--:clearInterval(d.value)},1e3)}),n.value.on("quiz:showLeaderboard",x=>{y.value=x,o.value="leaderboard"}),n.value.on("quiz:finished",x=>{y.value=x,o.value="finished",clearInterval(d.value)})}),Zr(()=>{n.value&&n.value.disconnect(),clearInterval(d.value)}),(v,C)=>(W(),H("div",tA,[c("div",eA,[o.value==="joining"?(W(),H("div",nA,[C[5]||(C[5]=c("h1",{class:"text-3xl font-bold text-center text-sky-400 mb-2"},"加入搶答競賽",-1)),C[6]||(C[6]=c("p",{class:"text-center text-gray-400 mb-8"},"請輸入老師提供的房間代碼",-1)),c("form",{onSubmit:De(m,["prevent"]),class:"space-y-6"},[c("div",null,[C[2]||(C[2]=c("label",{for:"roomCode",class:"block text-lg font-bold text-black mb-1 text-center"},"房間代碼",-1)),Bt(c("input",{"onUpdate:modelValue":C[0]||(C[0]=x=>i.roomCode=x),type:"text",id:"roomCode",placeholder:"ABCDEF",class:"form-input bg-gray-800 border-gray-700 text-sky-400 font-bold text-4xl tracking-widest text-center uppercase py-3 focus:ring-yellow-400 focus:border-yellow-500"},null,512),[[jt,i.roomCode,void 0,{trim:!0}]])]),c("div",null,[C[3]||(C[3]=c("label",{for:"studentName",class:"block text-lg font-bold text-black mb-1 text-center"},"你的名字",-1)),Bt(c("input",{"onUpdate:modelValue":C[1]||(C[1]=x=>i.name=x),type:"text",id:"studentName",placeholder:"請輸入姓名或座號",class:"form-input bg-gray-800 border-gray-700 text-sky-400 font-bold text-2xl py-3 focus:ring-yellow-400 focus:border-yellow-500 text-center"},null,512),[[jt,i.name,void 0,{trim:!0}]])]),l.value?(W(),H("p",rA,lt(l.value),1)):Et("",!0),C[4]||(C[4]=c("button",{type:"submit",class:"w-full btn bg-green-500 hover:bg-green-600 py-4 text-2xl font-bold"}," 加入遊戲 ",-1))],32)])):Et("",!0),o.value==="lobby"?(W(),H("div",sA,[...C[7]||(C[7]=[lr('<h2 class="text-4xl font-bold text-white">已成功加入！</h2><p class="text-gray-400 mt-2 text-xl">請等待老師開始遊戲...</p><div class="mt-12"><svg class="animate-spin h-16 w-16 text-yellow-300 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>',3)])])):Et("",!0),o.value==="question"&&u.value?(W(),H("div",iA,[c("div",oA,[c("div",aA,"第 "+lt(u.value.index+1)+" / "+lt(u.value.total)+" 題",1),c("div",lA,lt(f.value),1)]),c("div",uA,[c("p",cA,lt(u.value.text),1)]),c("div",fA,[(W(!0),H(Ft,null,Xt(u.value.options,(x,T)=>(W(),H("button",{key:T,onClick:A=>b(x),class:ce(["p-6 rounded-lg text-3xl font-bold flex items-center justify-center h-32 transition-transform transform hover:scale-105",_[T]])},lt(x),11,dA))),128))])])):Et("",!0),o.value==="answered"?(W(),H("div",hA,[...C[8]||(C[8]=[c("svg",{class:"mx-auto h-24 w-24 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),c("h2",{class:"mt-6 text-3xl font-bold text-white"},"已送出答案！",-1),c("p",{class:"text-gray-400 mt-2 text-lg"},"等待其他玩家...",-1)])])):Et("",!0),o.value==="leaderboard"||o.value==="finished"?(W(),H("div",pA,[c("h1",gA,lt(o.value==="finished"?"最終結果":"即時排行榜"),1),c("div",mA,[(W(!0),H(Ft,null,Xt(y.value,(x,T)=>(W(),H("div",{key:x.id,class:"bg-gray-700 p-4 rounded-lg flex justify-between items-center text-2xl"},[c("span",vA,lt(T+1)+". "+lt(x.name),1),c("span",_A,lt(x.score)+" 分",1)]))),128))]),o.value==="finished"?(W(),H("div",yA,[...C[9]||(C[9]=[c("p",{class:"text-2xl"},"遊戲結束！感謝參與！",-1)])])):Et("",!0)])):Et("",!0)])]))}},yp=C2({history:Qw("/"),routes:[{path:"/auth",name:"auth",component:u6,meta:{layout:"clean"}},{path:"/",name:"home",component:W2,meta:{requiresAuth:!0,layout:"default"}},{path:"/students",name:"student-management",component:Ak,meta:{requiresAuth:!0,layout:"default"}},{path:"/seating-chart",name:"seating-chart",component:Qk,meta:{requiresAuth:!0,layout:"default"}},{path:"/dashboard",name:"classroom-dashboard",component:m3,meta:{requiresAuth:!0,layout:"default"}},{path:"/assignments",name:"assignments",component:x5,meta:{requiresAuth:!0,layout:"default"}},{path:"/grades",name:"grade-management",component:gC,meta:{requiresAuth:!0,layout:"default"}},{path:"/pingpong-teacher",name:"pingpong-teacher",component:XS,meta:{requiresAuth:!0,layout:"default"}},{path:"/quiz",name:"quiz-manager",component:wE,meta:{requiresAuth:!0,layout:"default"}},{path:"/quiz/host/:setId",name:"quiz-game-teacher",component:QE,props:!0,meta:{requiresAuth:!0,layout:"clean"}},{path:"/student/dashboard",name:"student-dashboard",component:YC,meta:{requiresStudentAuth:!0,layout:"clean"}},{path:"/pingpong-student",name:"pingpong-student",component:A8,meta:{layout:"clean"}},{path:"/quiz/play",name:"quiz-game-student",component:bA,meta:{layout:"clean"}}]});yp.beforeEach((t,n,r)=>{const i=!!localStorage.getItem("teacherToken"),o=!!localStorage.getItem("studentToken");t.meta.requiresAuth&&!i?r({name:"auth"}):t.meta.requiresStudentAuth&&!o?r({name:"auth"}):t.name==="auth"&&(i||o)?r(i?{name:"home"}:{name:"student-dashboard"}):r()});const bp=bw(M2);bp.use(yp);bp.mount("#app");
