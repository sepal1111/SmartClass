(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function jl(t){const n=Object.create(null);for(const r of t.split(","))n[r]=1;return r=>r in n}const de={},hs=[],Nn=()=>{},jd=()=>!1,$o=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Wl=t=>t.startsWith("onUpdate:"),qe=Object.assign,ql=(t,n)=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)},Zy=Object.prototype.hasOwnProperty,ae=(t,n)=>Zy.call(t,n),Ut=Array.isArray,ps=t=>fi(t)==="[object Map]",ks=t=>fi(t)==="[object Set]",jf=t=>fi(t)==="[object Date]",Ht=t=>typeof t=="function",Oe=t=>typeof t=="string",Fn=t=>typeof t=="symbol",he=t=>t!==null&&typeof t=="object",Wd=t=>(he(t)||Ht(t))&&Ht(t.then)&&Ht(t.catch),qd=Object.prototype.toString,fi=t=>qd.call(t),Yy=t=>fi(t).slice(8,-1),Hd=t=>fi(t)==="[object Object]",Hl=t=>Oe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ks=jl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Po=t=>{const n=Object.create(null);return r=>n[r]||(n[r]=t(r))},Jy=/-\w/g,kn=Po(t=>t.replace(Jy,n=>n.slice(1).toUpperCase())),Qy=/\B([A-Z])/g,Or=Po(t=>t.replace(Qy,"-$1").toLowerCase()),Lo=Po(t=>t.charAt(0).toUpperCase()+t.slice(1)),ol=Po(t=>t?`on${Lo(t)}`:""),Sr=(t,n)=>!Object.is(t,n),fo=(t,...n)=>{for(let r=0;r<t.length;r++)t[r](...n)},Vd=(t,n,r,i=!1)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:i,value:r})},bo=t=>{const n=parseFloat(t);return isNaN(n)?t:n};let Wf;const Bo=()=>Wf||(Wf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Vr(t){if(Ut(t)){const n={};for(let r=0;r<t.length;r++){const i=t[r],o=Oe(i)?nb(i):Vr(i);if(o)for(const l in o)n[l]=o[l]}return n}else if(Oe(t)||he(t))return t}const Xy=/;(?![^(]*\))/g,tb=/:([^]+)/,eb=/\/\*[^]*?\*\//g;function nb(t){const n={};return t.replace(eb,"").split(Xy).forEach(r=>{if(r){const i=r.split(tb);i.length>1&&(n[i[0].trim()]=i[1].trim())}}),n}function me(t){let n="";if(Oe(t))n=t;else if(Ut(t))for(let r=0;r<t.length;r++){const i=me(t[r]);i&&(n+=i+" ")}else if(he(t))for(const r in t)t[r]&&(n+=r+" ");return n.trim()}const rb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sb=jl(rb);function Kd(t){return!!t||t===""}function ib(t,n){if(t.length!==n.length)return!1;let r=!0;for(let i=0;r&&i<t.length;i++)r=di(t[i],n[i]);return r}function di(t,n){if(t===n)return!0;let r=jf(t),i=jf(n);if(r||i)return r&&i?t.getTime()===n.getTime():!1;if(r=Fn(t),i=Fn(n),r||i)return t===n;if(r=Ut(t),i=Ut(n),r||i)return r&&i?ib(t,n):!1;if(r=he(t),i=he(n),r||i){if(!r||!i)return!1;const o=Object.keys(t).length,l=Object.keys(n).length;if(o!==l)return!1;for(const u in t){const c=t.hasOwnProperty(u),d=n.hasOwnProperty(u);if(c&&!d||!c&&d||!di(t[u],n[u]))return!1}}return String(t)===String(n)}function Vl(t,n){return t.findIndex(r=>di(r,n))}const Gd=t=>!!(t&&t.__v_isRef===!0),ft=t=>Oe(t)?t:t==null?"":Ut(t)||he(t)&&(t.toString===qd||!Ht(t.toString))?Gd(t)?ft(t.value):JSON.stringify(t,Zd,2):String(t),Zd=(t,n)=>Gd(n)?Zd(t,n.value):ps(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[i,o],l)=>(r[al(i,l)+" =>"]=o,r),{})}:ks(n)?{[`Set(${n.size})`]:[...n.values()].map(r=>al(r))}:Fn(n)?al(n):he(n)&&!Ut(n)&&!Hd(n)?String(n):n,al=(t,n="")=>{var r;return Fn(t)?`Symbol(${(r=t.description)!=null?r:n})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let en;class ob{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=en,!n&&en&&(this.index=(en.scopes||(en.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].pause();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].resume();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].resume()}}run(n){if(this._active){const r=en;try{return en=this,n()}finally{en=r}}}on(){++this._on===1&&(this.prevScope=en,en=this)}off(){this._on>0&&--this._on===0&&(en=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(this.effects.length=0,r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function ab(){return en}let ge;const ll=new WeakSet;class Yd{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,en&&en.active&&en.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ll.has(this)&&(ll.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Qd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qf(this),Xd(this);const n=ge,r=On;ge=this,On=!0;try{return this.fn()}finally{th(this),ge=n,On=r,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Zl(n);this.deps=this.depsTail=void 0,qf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ll.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wl(this)&&this.run()}get dirty(){return wl(this)}}let Jd=0,Gs,Zs;function Qd(t,n=!1){if(t.flags|=8,n){t.next=Zs,Zs=t;return}t.next=Gs,Gs=t}function Kl(){Jd++}function Gl(){if(--Jd>0)return;if(Zs){let n=Zs;for(Zs=void 0;n;){const r=n.next;n.next=void 0,n.flags&=-9,n=r}}let t;for(;Gs;){let n=Gs;for(Gs=void 0;n;){const r=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(i){t||(t=i)}n=r}}if(t)throw t}function Xd(t){for(let n=t.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function th(t){let n,r=t.depsTail,i=r;for(;i;){const o=i.prevDep;i.version===-1?(i===r&&(r=o),Zl(i),lb(i)):n=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=o}t.deps=n,t.depsTail=r}function wl(t){for(let n=t.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(eh(n.dep.computed)||n.dep.version!==n.version))return!0;return!!t._dirty}function eh(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ni)||(t.globalVersion=ni,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!wl(t))))return;t.flags|=2;const n=t.dep,r=ge,i=On;ge=t,On=!0;try{Xd(t);const o=t.fn(t._value);(n.version===0||Sr(o,t._value))&&(t.flags|=128,t._value=o,n.version++)}catch(o){throw n.version++,o}finally{ge=r,On=i,th(t),t.flags&=-3}}function Zl(t,n=!1){const{dep:r,prevSub:i,nextSub:o}=t;if(i&&(i.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=i,t.nextSub=void 0),r.subs===t&&(r.subs=i,!i&&r.computed)){r.computed.flags&=-5;for(let l=r.computed.deps;l;l=l.nextDep)Zl(l,!0)}!n&&!--r.sc&&r.map&&r.map.delete(r.key)}function lb(t){const{prevDep:n,nextDep:r}=t;n&&(n.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=n,t.nextDep=void 0)}let On=!0;const nh=[];function ar(){nh.push(On),On=!1}function lr(){const t=nh.pop();On=t===void 0?!0:t}function qf(t){const{cleanup:n}=t;if(t.cleanup=void 0,n){const r=ge;ge=void 0;try{n()}finally{ge=r}}}let ni=0;class ub{constructor(n,r){this.sub=n,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Yl{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!ge||!On||ge===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==ge)r=this.activeLink=new ub(ge,this),ge.deps?(r.prevDep=ge.depsTail,ge.depsTail.nextDep=r,ge.depsTail=r):ge.deps=ge.depsTail=r,rh(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const i=r.nextDep;i.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=i),r.prevDep=ge.depsTail,r.nextDep=void 0,ge.depsTail.nextDep=r,ge.depsTail=r,ge.deps===r&&(ge.deps=i)}return r}trigger(n){this.version++,ni++,this.notify(n)}notify(n){Kl();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Gl()}}}function rh(t){if(t.dep.sc++,t.sub.flags&4){const n=t.dep.computed;if(n&&!t.dep.subs){n.flags|=20;for(let i=n.deps;i;i=i.nextDep)rh(i)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const kl=new WeakMap,Wr=Symbol(""),Cl=Symbol(""),ri=Symbol("");function Ne(t,n,r){if(On&&ge){let i=kl.get(t);i||kl.set(t,i=new Map);let o=i.get(r);o||(i.set(r,o=new Yl),o.map=i,o.key=r),o.track()}}function rr(t,n,r,i,o,l){const u=kl.get(t);if(!u){ni++;return}const c=d=>{d&&d.trigger()};if(Kl(),n==="clear")u.forEach(c);else{const d=Ut(t),y=d&&Hl(r);if(d&&r==="length"){const g=Number(i);u.forEach((m,b)=>{(b==="length"||b===ri||!Fn(b)&&b>=g)&&c(m)})}else switch((r!==void 0||u.has(void 0))&&c(u.get(r)),y&&c(u.get(ri)),n){case"add":d?y&&c(u.get("length")):(c(u.get(Wr)),ps(t)&&c(u.get(Cl)));break;case"delete":d||(c(u.get(Wr)),ps(t)&&c(u.get(Cl)));break;case"set":ps(t)&&c(u.get(Wr));break}}Gl()}function cs(t){const n=oe(t);return n===t?n:(Ne(n,"iterate",ri),wn(t)?n:n.map(De))}function Do(t){return Ne(t=oe(t),"iterate",ri),t}const cb={__proto__:null,[Symbol.iterator](){return ul(this,Symbol.iterator,De)},concat(...t){return cs(this).concat(...t.map(n=>Ut(n)?cs(n):n))},entries(){return ul(this,"entries",t=>(t[1]=De(t[1]),t))},every(t,n){return tr(this,"every",t,n,void 0,arguments)},filter(t,n){return tr(this,"filter",t,n,r=>r.map(De),arguments)},find(t,n){return tr(this,"find",t,n,De,arguments)},findIndex(t,n){return tr(this,"findIndex",t,n,void 0,arguments)},findLast(t,n){return tr(this,"findLast",t,n,De,arguments)},findLastIndex(t,n){return tr(this,"findLastIndex",t,n,void 0,arguments)},forEach(t,n){return tr(this,"forEach",t,n,void 0,arguments)},includes(...t){return cl(this,"includes",t)},indexOf(...t){return cl(this,"indexOf",t)},join(t){return cs(this).join(t)},lastIndexOf(...t){return cl(this,"lastIndexOf",t)},map(t,n){return tr(this,"map",t,n,void 0,arguments)},pop(){return Fs(this,"pop")},push(...t){return Fs(this,"push",t)},reduce(t,...n){return Hf(this,"reduce",t,n)},reduceRight(t,...n){return Hf(this,"reduceRight",t,n)},shift(){return Fs(this,"shift")},some(t,n){return tr(this,"some",t,n,void 0,arguments)},splice(...t){return Fs(this,"splice",t)},toReversed(){return cs(this).toReversed()},toSorted(t){return cs(this).toSorted(t)},toSpliced(...t){return cs(this).toSpliced(...t)},unshift(...t){return Fs(this,"unshift",t)},values(){return ul(this,"values",De)}};function ul(t,n,r){const i=Do(t),o=i[n]();return i!==t&&!wn(t)&&(o._next=o.next,o.next=()=>{const l=o._next();return l.done||(l.value=r(l.value)),l}),o}const fb=Array.prototype;function tr(t,n,r,i,o,l){const u=Do(t),c=u!==t&&!wn(t),d=u[n];if(d!==fb[n]){const m=d.apply(t,l);return c?De(m):m}let y=r;u!==t&&(c?y=function(m,b){return r.call(this,De(m),b,t)}:r.length>2&&(y=function(m,b){return r.call(this,m,b,t)}));const g=d.call(u,y,i);return c&&o?o(g):g}function Hf(t,n,r,i){const o=Do(t);let l=r;return o!==t&&(wn(t)?r.length>3&&(l=function(u,c,d){return r.call(this,u,c,d,t)}):l=function(u,c,d){return r.call(this,u,De(c),d,t)}),o[n](l,...i)}function cl(t,n,r){const i=oe(t);Ne(i,"iterate",ri);const o=i[n](...r);return(o===-1||o===!1)&&Xl(r[0])?(r[0]=oe(r[0]),i[n](...r)):o}function Fs(t,n,r=[]){ar(),Kl();const i=oe(t)[n].apply(t,r);return Gl(),lr(),i}const db=jl("__proto__,__v_isRef,__isVue"),sh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Fn));function hb(t){Fn(t)||(t=String(t));const n=oe(this);return Ne(n,"has",t),n.hasOwnProperty(t)}class ih{constructor(n=!1,r=!1){this._isReadonly=n,this._isShallow=r}get(n,r,i){if(r==="__v_skip")return n.__v_skip;const o=this._isReadonly,l=this._isShallow;if(r==="__v_isReactive")return!o;if(r==="__v_isReadonly")return o;if(r==="__v_isShallow")return l;if(r==="__v_raw")return i===(o?l?kb:uh:l?lh:ah).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(i)?n:void 0;const u=Ut(n);if(!o){let d;if(u&&(d=cb[r]))return d;if(r==="hasOwnProperty")return hb}const c=Reflect.get(n,r,je(n)?n:i);if((Fn(r)?sh.has(r):db(r))||(o||Ne(n,"get",r),l))return c;if(je(c)){const d=u&&Hl(r)?c:c.value;return o&&he(d)?El(d):d}return he(c)?o?El(c):Fe(c):c}}class oh extends ih{constructor(n=!1){super(!1,n)}set(n,r,i,o){let l=n[r];if(!this._isShallow){const d=Rr(l);if(!wn(i)&&!Rr(i)&&(l=oe(l),i=oe(i)),!Ut(n)&&je(l)&&!je(i))return d||(l.value=i),!0}const u=Ut(n)&&Hl(r)?Number(r)<n.length:ae(n,r),c=Reflect.set(n,r,i,je(n)?n:o);return n===oe(o)&&(u?Sr(i,l)&&rr(n,"set",r,i):rr(n,"add",r,i)),c}deleteProperty(n,r){const i=ae(n,r);n[r];const o=Reflect.deleteProperty(n,r);return o&&i&&rr(n,"delete",r,void 0),o}has(n,r){const i=Reflect.has(n,r);return(!Fn(r)||!sh.has(r))&&Ne(n,"has",r),i}ownKeys(n){return Ne(n,"iterate",Ut(n)?"length":Wr),Reflect.ownKeys(n)}}class pb extends ih{constructor(n=!1){super(!0,n)}set(n,r){return!0}deleteProperty(n,r){return!0}}const gb=new oh,mb=new pb,vb=new oh(!0);const Sl=t=>t,io=t=>Reflect.getPrototypeOf(t);function _b(t,n,r){return function(...i){const o=this.__v_raw,l=oe(o),u=ps(l),c=t==="entries"||t===Symbol.iterator&&u,d=t==="keys"&&u,y=o[t](...i),g=r?Sl:n?xo:De;return!n&&Ne(l,"iterate",d?Cl:Wr),{next(){const{value:m,done:b}=y.next();return b?{value:m,done:b}:{value:c?[g(m[0]),g(m[1])]:g(m),done:b}},[Symbol.iterator](){return this}}}}function oo(t){return function(...n){return t==="delete"?!1:t==="clear"?void 0:this}}function yb(t,n){const r={get(o){const l=this.__v_raw,u=oe(l),c=oe(o);t||(Sr(o,c)&&Ne(u,"get",o),Ne(u,"get",c));const{has:d}=io(u),y=n?Sl:t?xo:De;if(d.call(u,o))return y(l.get(o));if(d.call(u,c))return y(l.get(c));l!==u&&l.get(o)},get size(){const o=this.__v_raw;return!t&&Ne(oe(o),"iterate",Wr),o.size},has(o){const l=this.__v_raw,u=oe(l),c=oe(o);return t||(Sr(o,c)&&Ne(u,"has",o),Ne(u,"has",c)),o===c?l.has(o):l.has(o)||l.has(c)},forEach(o,l){const u=this,c=u.__v_raw,d=oe(c),y=n?Sl:t?xo:De;return!t&&Ne(d,"iterate",Wr),c.forEach((g,m)=>o.call(l,y(g),y(m),u))}};return qe(r,t?{add:oo("add"),set:oo("set"),delete:oo("delete"),clear:oo("clear")}:{add(o){!n&&!wn(o)&&!Rr(o)&&(o=oe(o));const l=oe(this);return io(l).has.call(l,o)||(l.add(o),rr(l,"add",o,o)),this},set(o,l){!n&&!wn(l)&&!Rr(l)&&(l=oe(l));const u=oe(this),{has:c,get:d}=io(u);let y=c.call(u,o);y||(o=oe(o),y=c.call(u,o));const g=d.call(u,o);return u.set(o,l),y?Sr(l,g)&&rr(u,"set",o,l):rr(u,"add",o,l),this},delete(o){const l=oe(this),{has:u,get:c}=io(l);let d=u.call(l,o);d||(o=oe(o),d=u.call(l,o)),c&&c.call(l,o);const y=l.delete(o);return d&&rr(l,"delete",o,void 0),y},clear(){const o=oe(this),l=o.size!==0,u=o.clear();return l&&rr(o,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=_b(o,t,n)}),r}function Jl(t,n){const r=yb(t,n);return(i,o,l)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?i:Reflect.get(ae(r,o)&&o in i?r:i,o,l)}const bb={get:Jl(!1,!1)},xb={get:Jl(!1,!0)},wb={get:Jl(!0,!1)};const ah=new WeakMap,lh=new WeakMap,uh=new WeakMap,kb=new WeakMap;function Cb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sb(t){return t.__v_skip||!Object.isExtensible(t)?0:Cb(Yy(t))}function Fe(t){return Rr(t)?t:Ql(t,!1,gb,bb,ah)}function ch(t){return Ql(t,!1,vb,xb,lh)}function El(t){return Ql(t,!0,mb,wb,uh)}function Ql(t,n,r,i,o){if(!he(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const l=Sb(t);if(l===0)return t;const u=o.get(t);if(u)return u;const c=new Proxy(t,l===2?i:r);return o.set(t,c),c}function gs(t){return Rr(t)?gs(t.__v_raw):!!(t&&t.__v_isReactive)}function Rr(t){return!!(t&&t.__v_isReadonly)}function wn(t){return!!(t&&t.__v_isShallow)}function Xl(t){return t?!!t.__v_raw:!1}function oe(t){const n=t&&t.__v_raw;return n?oe(n):t}function Eb(t){return!ae(t,"__v_skip")&&Object.isExtensible(t)&&Vd(t,"__v_skip",!0),t}const De=t=>he(t)?Fe(t):t,xo=t=>he(t)?El(t):t;function je(t){return t?t.__v_isRef===!0:!1}function pt(t){return fh(t,!1)}function Ab(t){return fh(t,!0)}function fh(t,n){return je(t)?t:new Rb(t,n)}class Rb{constructor(n,r){this.dep=new Yl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?n:oe(n),this._value=r?n:De(n),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(n){const r=this._rawValue,i=this.__v_isShallow||wn(n)||Rr(n);n=i?n:oe(n),Sr(n,r)&&(this._rawValue=n,this._value=i?n:De(n),this.dep.trigger())}}function ms(t){return je(t)?t.value:t}const Tb={get:(t,n,r)=>n==="__v_raw"?t:ms(Reflect.get(t,n,r)),set:(t,n,r,i)=>{const o=t[n];return je(o)&&!je(r)?(o.value=r,!0):Reflect.set(t,n,r,i)}};function dh(t){return gs(t)?t:new Proxy(t,Tb)}class Ob{constructor(n,r,i){this.fn=n,this.setter=r,this._value=void 0,this.dep=new Yl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ni-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&ge!==this)return Qd(this,!0),!0}get value(){const n=this.dep.track();return eh(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Ib(t,n,r=!1){let i,o;return Ht(t)?i=t:(i=t.get,o=t.set),new Ob(i,o,r)}const ao={},wo=new WeakMap;let jr;function $b(t,n=!1,r=jr){if(r){let i=wo.get(r);i||wo.set(r,i=[]),i.push(t)}}function Pb(t,n,r=de){const{immediate:i,deep:o,once:l,scheduler:u,augmentJob:c,call:d}=r,y=P=>o?P:wn(P)||o===!1||o===0?sr(P,1):sr(P);let g,m,b,v,O=!1,w=!1;if(je(t)?(m=()=>t.value,O=wn(t)):gs(t)?(m=()=>y(t),O=!0):Ut(t)?(w=!0,O=t.some(P=>gs(P)||wn(P)),m=()=>t.map(P=>{if(je(P))return P.value;if(gs(P))return y(P);if(Ht(P))return d?d(P,2):P()})):Ht(t)?n?m=d?()=>d(t,2):t:m=()=>{if(b){ar();try{b()}finally{lr()}}const P=jr;jr=g;try{return d?d(t,3,[v]):t(v)}finally{jr=P}}:m=Nn,n&&o){const P=m,U=o===!0?1/0:o;m=()=>sr(P(),U)}const I=ab(),S=()=>{g.stop(),I&&I.active&&ql(I.effects,g)};if(l&&n){const P=n;n=(...U)=>{P(...U),S()}}let A=w?new Array(t.length).fill(ao):ao;const E=P=>{if(!(!(g.flags&1)||!g.dirty&&!P))if(n){const U=g.run();if(o||O||(w?U.some((rt,F)=>Sr(rt,A[F])):Sr(U,A))){b&&b();const rt=jr;jr=g;try{const F=[U,A===ao?void 0:w&&A[0]===ao?[]:A,v];A=U,d?d(n,3,F):n(...F)}finally{jr=rt}}}else g.run()};return c&&c(E),g=new Yd(m),g.scheduler=u?()=>u(E,!1):E,v=P=>$b(P,!1,g),b=g.onStop=()=>{const P=wo.get(g);if(P){if(d)d(P,4);else for(const U of P)U();wo.delete(g)}},n?i?E(!0):A=g.run():u?u(E.bind(null,!0),!0):g.run(),S.pause=g.pause.bind(g),S.resume=g.resume.bind(g),S.stop=S,S}function sr(t,n=1/0,r){if(n<=0||!he(t)||t.__v_skip||(r=r||new Map,(r.get(t)||0)>=n))return t;if(r.set(t,n),n--,je(t))sr(t.value,n,r);else if(Ut(t))for(let i=0;i<t.length;i++)sr(t[i],n,r);else if(ks(t)||ps(t))t.forEach(i=>{sr(i,n,r)});else if(Hd(t)){for(const i in t)sr(t[i],n,r);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&sr(t[i],n,r)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hi(t,n,r,i){try{return i?t(...i):t()}catch(o){Mo(o,n,r)}}function jn(t,n,r,i){if(Ht(t)){const o=hi(t,n,r,i);return o&&Wd(o)&&o.catch(l=>{Mo(l,n,r)}),o}if(Ut(t)){const o=[];for(let l=0;l<t.length;l++)o.push(jn(t[l],n,r,i));return o}}function Mo(t,n,r,i=!0){const o=n?n.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:u}=n&&n.appContext.config||de;if(n){let c=n.parent;const d=n.proxy,y=`https://vuejs.org/error-reference/#runtime-${r}`;for(;c;){const g=c.ec;if(g){for(let m=0;m<g.length;m++)if(g[m](t,d,y)===!1)return}c=c.parent}if(l){ar(),hi(l,null,10,[t,d,y]),lr();return}}Lb(t,r,o,i,u)}function Lb(t,n,r,i=!0,o=!1){if(o)throw t;console.error(t)}const Ze=[];let Mn=-1;const vs=[];let xr=null,fs=0;const hh=Promise.resolve();let ko=null;function pi(t){const n=ko||hh;return t?n.then(this?t.bind(this):t):n}function Bb(t){let n=Mn+1,r=Ze.length;for(;n<r;){const i=n+r>>>1,o=Ze[i],l=si(o);l<t||l===t&&o.flags&2?n=i+1:r=i}return n}function tu(t){if(!(t.flags&1)){const n=si(t),r=Ze[Ze.length-1];!r||!(t.flags&2)&&n>=si(r)?Ze.push(t):Ze.splice(Bb(n),0,t),t.flags|=1,ph()}}function ph(){ko||(ko=hh.then(mh))}function Db(t){Ut(t)?vs.push(...t):xr&&t.id===-1?xr.splice(fs+1,0,t):t.flags&1||(vs.push(t),t.flags|=1),ph()}function Vf(t,n,r=Mn+1){for(;r<Ze.length;r++){const i=Ze[r];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;Ze.splice(r,1),r--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function gh(t){if(vs.length){const n=[...new Set(vs)].sort((r,i)=>si(r)-si(i));if(vs.length=0,xr){xr.push(...n);return}for(xr=n,fs=0;fs<xr.length;fs++){const r=xr[fs];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}xr=null,fs=0}}const si=t=>t.id==null?t.flags&2?-1:1/0:t.id;function mh(t){try{for(Mn=0;Mn<Ze.length;Mn++){const n=Ze[Mn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),hi(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Mn<Ze.length;Mn++){const n=Ze[Mn];n&&(n.flags&=-2)}Mn=-1,Ze.length=0,gh(),ko=null,(Ze.length||vs.length)&&mh()}}let fn=null,vh=null;function Co(t){const n=fn;return fn=t,vh=t&&t.type.__scopeId||null,n}function cn(t,n=fn,r){if(!n||t._n)return t;const i=(...o)=>{i._d&&Ro(-1);const l=Co(n);let u;try{u=t(...o)}finally{Co(l),i._d&&Ro(1)}return u};return i._n=!0,i._c=!0,i._d=!0,i}function Mt(t,n){if(fn===null)return t;const r=Fo(fn),i=t.dirs||(t.dirs=[]);for(let o=0;o<n.length;o++){let[l,u,c,d=de]=n[o];l&&(Ht(l)&&(l={mounted:l,updated:l}),l.deep&&sr(u),i.push({dir:l,instance:r,value:u,oldValue:void 0,arg:c,modifiers:d}))}return t}function Ur(t,n,r,i){const o=t.dirs,l=n&&n.dirs;for(let u=0;u<o.length;u++){const c=o[u];l&&(c.oldValue=l[u].value);let d=c.dir[i];d&&(ar(),jn(d,r,8,[t.el,c,t,n]),lr())}}const Mb=Symbol("_vte"),zb=t=>t.__isTeleport,Nb=Symbol("_leaveCb");function eu(t,n){t.shapeFlag&6&&t.component?(t.transition=n,eu(t.component.subTree,n)):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function _h(t,n){return Ht(t)?qe({name:t.name},n,{setup:t}):t}function yh(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const So=new WeakMap;function Ys(t,n,r,i,o=!1){if(Ut(t)){t.forEach((O,w)=>Ys(O,n&&(Ut(n)?n[w]:n),r,i,o));return}if(Js(i)&&!o){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Ys(t,n,r,i.component.subTree);return}const l=i.shapeFlag&4?Fo(i.component):i.el,u=o?null:l,{i:c,r:d}=t,y=n&&n.r,g=c.refs===de?c.refs={}:c.refs,m=c.setupState,b=oe(m),v=m===de?jd:O=>ae(b,O);if(y!=null&&y!==d){if(Kf(n),Oe(y))g[y]=null,v(y)&&(m[y]=null);else if(je(y)){y.value=null;const O=n;O.k&&(g[O.k]=null)}}if(Ht(d))hi(d,c,12,[u,g]);else{const O=Oe(d),w=je(d);if(O||w){const I=()=>{if(t.f){const S=O?v(d)?m[d]:g[d]:d.value;if(o)Ut(S)&&ql(S,l);else if(Ut(S))S.includes(l)||S.push(l);else if(O)g[d]=[l],v(d)&&(m[d]=g[d]);else{const A=[l];d.value=A,t.k&&(g[t.k]=A)}}else O?(g[d]=u,v(d)&&(m[d]=u)):w&&(d.value=u,t.k&&(g[t.k]=u))};if(u){const S=()=>{I(),So.delete(t)};S.id=-1,So.set(t,S),un(S,r)}else Kf(t),I()}}}function Kf(t){const n=So.get(t);n&&(n.flags|=8,So.delete(t))}Bo().requestIdleCallback;Bo().cancelIdleCallback;const Js=t=>!!t.type.__asyncLoader,bh=t=>t.type.__isKeepAlive;function Ub(t,n){xh(t,"a",n)}function Fb(t,n){xh(t,"da",n)}function xh(t,n,r=Ue){const i=t.__wdc||(t.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(zo(n,i,r),r){let o=r.parent;for(;o&&o.parent;)bh(o.parent.vnode)&&jb(i,n,r,o),o=o.parent}}function jb(t,n,r,i){const o=zo(n,t,i,!0);Kr(()=>{ql(i[n],o)},r)}function zo(t,n,r=Ue,i=!1){if(r){const o=r[t]||(r[t]=[]),l=n.__weh||(n.__weh=(...u)=>{ar();const c=gi(r),d=jn(n,r,t,u);return c(),lr(),d});return i?o.unshift(l):o.push(l),l}}const ur=t=>(n,r=Ue)=>{(!oi||t==="sp")&&zo(t,(...i)=>n(...i),r)},Wb=ur("bm"),Ye=ur("m"),qb=ur("bu"),Hb=ur("u"),Vb=ur("bum"),Kr=ur("um"),Kb=ur("sp"),Gb=ur("rtg"),Zb=ur("rtc");function Yb(t,n=Ue){zo("ec",t,n)}const Jb="components";function Eo(t,n){return Xb(Jb,t,!0,n)||t}const Qb=Symbol.for("v-ndc");function Xb(t,n,r=!0,i=!1){const o=fn||Ue;if(o){const l=o.type;{const c=jx(l,!1);if(c&&(c===n||c===kn(n)||c===Lo(kn(n))))return l}const u=Gf(o[t]||l[t],n)||Gf(o.appContext[t],n);return!u&&i?l:u}}function Gf(t,n){return t&&(t[n]||t[kn(n)]||t[Lo(kn(n))])}function te(t,n,r,i){let o;const l=r,u=Ut(t);if(u||Oe(t)){const c=u&&gs(t);let d=!1,y=!1;c&&(d=!wn(t),y=Rr(t),t=Do(t)),o=new Array(t.length);for(let g=0,m=t.length;g<m;g++)o[g]=n(d?y?xo(De(t[g])):De(t[g]):t[g],g,void 0,l)}else if(typeof t=="number"){o=new Array(t);for(let c=0;c<t;c++)o[c]=n(c+1,c,void 0,l)}else if(he(t))if(t[Symbol.iterator])o=Array.from(t,(c,d)=>n(c,d,void 0,l));else{const c=Object.keys(t);o=new Array(c.length);for(let d=0,y=c.length;d<y;d++){const g=c[d];o[d]=n(t[g],g,d,l)}}else o=[];return o}const Al=t=>t?Fh(t)?Fo(t):Al(t.parent):null,Qs=qe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Al(t.parent),$root:t=>Al(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>kh(t),$forceUpdate:t=>t.f||(t.f=()=>{tu(t.update)}),$nextTick:t=>t.n||(t.n=pi.bind(t.proxy)),$watch:t=>bx.bind(t)}),fl=(t,n)=>t!==de&&!t.__isScriptSetup&&ae(t,n),tx={get({_:t},n){if(n==="__v_skip")return!0;const{ctx:r,setupState:i,data:o,props:l,accessCache:u,type:c,appContext:d}=t;let y;if(n[0]!=="$"){const v=u[n];if(v!==void 0)switch(v){case 1:return i[n];case 2:return o[n];case 4:return r[n];case 3:return l[n]}else{if(fl(i,n))return u[n]=1,i[n];if(o!==de&&ae(o,n))return u[n]=2,o[n];if((y=t.propsOptions[0])&&ae(y,n))return u[n]=3,l[n];if(r!==de&&ae(r,n))return u[n]=4,r[n];Rl&&(u[n]=0)}}const g=Qs[n];let m,b;if(g)return n==="$attrs"&&Ne(t.attrs,"get",""),g(t);if((m=c.__cssModules)&&(m=m[n]))return m;if(r!==de&&ae(r,n))return u[n]=4,r[n];if(b=d.config.globalProperties,ae(b,n))return b[n]},set({_:t},n,r){const{data:i,setupState:o,ctx:l}=t;return fl(o,n)?(o[n]=r,!0):i!==de&&ae(i,n)?(i[n]=r,!0):ae(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(l[n]=r,!0)},has({_:{data:t,setupState:n,accessCache:r,ctx:i,appContext:o,propsOptions:l,type:u}},c){let d,y;return!!(r[c]||t!==de&&c[0]!=="$"&&ae(t,c)||fl(n,c)||(d=l[0])&&ae(d,c)||ae(i,c)||ae(Qs,c)||ae(o.config.globalProperties,c)||(y=u.__cssModules)&&y[c])},defineProperty(t,n,r){return r.get!=null?t._.accessCache[n]=0:ae(r,"value")&&this.set(t,n,r.value,null),Reflect.defineProperty(t,n,r)}};function Zf(t){return Ut(t)?t.reduce((n,r)=>(n[r]=null,n),{}):t}let Rl=!0;function ex(t){const n=kh(t),r=t.proxy,i=t.ctx;Rl=!1,n.beforeCreate&&Yf(n.beforeCreate,t,"bc");const{data:o,computed:l,methods:u,watch:c,provide:d,inject:y,created:g,beforeMount:m,mounted:b,beforeUpdate:v,updated:O,activated:w,deactivated:I,beforeDestroy:S,beforeUnmount:A,destroyed:E,unmounted:P,render:U,renderTracked:rt,renderTriggered:F,errorCaptured:M,serverPrefetch:L,expose:D,inheritAttrs:st,components:k,directives:K,filters:_}=n;if(y&&nx(y,i,null),u)for(const ct in u){const St=u[ct];Ht(St)&&(i[ct]=St.bind(r))}if(o){const ct=o.call(r,r);he(ct)&&(t.data=Fe(ct))}if(Rl=!0,l)for(const ct in l){const St=l[ct],bt=Ht(St)?St.bind(r,r):Ht(St.get)?St.get.bind(r,r):Nn,$t=!Ht(St)&&Ht(St.set)?St.set.bind(r):Nn,ot=le({get:bt,set:$t});Object.defineProperty(i,ct,{enumerable:!0,configurable:!0,get:()=>ot.value,set:it=>ot.value=it})}if(c)for(const ct in c)wh(c[ct],i,r,ct);if(d){const ct=Ht(d)?d.call(r):d;Reflect.ownKeys(ct).forEach(St=>{ho(St,ct[St])})}g&&Yf(g,t,"c");function wt(ct,St){Ut(St)?St.forEach(bt=>ct(bt.bind(r))):St&&ct(St.bind(r))}if(wt(Wb,m),wt(Ye,b),wt(qb,v),wt(Hb,O),wt(Ub,w),wt(Fb,I),wt(Yb,M),wt(Zb,rt),wt(Gb,F),wt(Vb,A),wt(Kr,P),wt(Kb,L),Ut(D))if(D.length){const ct=t.exposed||(t.exposed={});D.forEach(St=>{Object.defineProperty(ct,St,{get:()=>r[St],set:bt=>r[St]=bt,enumerable:!0})})}else t.exposed||(t.exposed={});U&&t.render===Nn&&(t.render=U),st!=null&&(t.inheritAttrs=st),k&&(t.components=k),K&&(t.directives=K),L&&yh(t)}function nx(t,n,r=Nn){Ut(t)&&(t=Tl(t));for(const i in t){const o=t[i];let l;he(o)?"default"in o?l=In(o.from||i,o.default,!0):l=In(o.from||i):l=In(o),je(l)?Object.defineProperty(n,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:u=>l.value=u}):n[i]=l}}function Yf(t,n,r){jn(Ut(t)?t.map(i=>i.bind(n.proxy)):t.bind(n.proxy),n,r)}function wh(t,n,r,i){let o=i.includes(".")?Dh(r,i):()=>r[i];if(Oe(t)){const l=n[t];Ht(l)&&Er(o,l)}else if(Ht(t))Er(o,t.bind(r));else if(he(t))if(Ut(t))t.forEach(l=>wh(l,n,r,i));else{const l=Ht(t.handler)?t.handler.bind(r):n[t.handler];Ht(l)&&Er(o,l,t)}}function kh(t){const n=t.type,{mixins:r,extends:i}=n,{mixins:o,optionsCache:l,config:{optionMergeStrategies:u}}=t.appContext,c=l.get(n);let d;return c?d=c:!o.length&&!r&&!i?d=n:(d={},o.length&&o.forEach(y=>Ao(d,y,u,!0)),Ao(d,n,u)),he(n)&&l.set(n,d),d}function Ao(t,n,r,i=!1){const{mixins:o,extends:l}=n;l&&Ao(t,l,r,!0),o&&o.forEach(u=>Ao(t,u,r,!0));for(const u in n)if(!(i&&u==="expose")){const c=rx[u]||r&&r[u];t[u]=c?c(t[u],n[u]):n[u]}return t}const rx={data:Jf,props:Qf,emits:Qf,methods:Hs,computed:Hs,beforeCreate:Ge,created:Ge,beforeMount:Ge,mounted:Ge,beforeUpdate:Ge,updated:Ge,beforeDestroy:Ge,beforeUnmount:Ge,destroyed:Ge,unmounted:Ge,activated:Ge,deactivated:Ge,errorCaptured:Ge,serverPrefetch:Ge,components:Hs,directives:Hs,watch:ix,provide:Jf,inject:sx};function Jf(t,n){return n?t?function(){return qe(Ht(t)?t.call(this,this):t,Ht(n)?n.call(this,this):n)}:n:t}function sx(t,n){return Hs(Tl(t),Tl(n))}function Tl(t){if(Ut(t)){const n={};for(let r=0;r<t.length;r++)n[t[r]]=t[r];return n}return t}function Ge(t,n){return t?[...new Set([].concat(t,n))]:n}function Hs(t,n){return t?qe(Object.create(null),t,n):n}function Qf(t,n){return t?Ut(t)&&Ut(n)?[...new Set([...t,...n])]:qe(Object.create(null),Zf(t),Zf(n??{})):n}function ix(t,n){if(!t)return n;if(!n)return t;const r=qe(Object.create(null),t);for(const i in n)r[i]=Ge(t[i],n[i]);return r}function Ch(){return{app:null,config:{isNativeTag:jd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ox=0;function ax(t,n){return function(i,o=null){Ht(i)||(i=qe({},i)),o!=null&&!he(o)&&(o=null);const l=Ch(),u=new WeakSet,c=[];let d=!1;const y=l.app={_uid:ox++,_component:i,_props:o,_container:null,_context:l,_instance:null,version:qx,get config(){return l.config},set config(g){},use(g,...m){return u.has(g)||(g&&Ht(g.install)?(u.add(g),g.install(y,...m)):Ht(g)&&(u.add(g),g(y,...m))),y},mixin(g){return l.mixins.includes(g)||l.mixins.push(g),y},component(g,m){return m?(l.components[g]=m,y):l.components[g]},directive(g,m){return m?(l.directives[g]=m,y):l.directives[g]},mount(g,m,b){if(!d){const v=y._ceVNode||ce(i,o);return v.appContext=l,b===!0?b="svg":b===!1&&(b=void 0),t(v,g,b),d=!0,y._container=g,g.__vue_app__=y,Fo(v.component)}},onUnmount(g){c.push(g)},unmount(){d&&(jn(c,y._instance,16),t(null,y._container),delete y._container.__vue_app__)},provide(g,m){return l.provides[g]=m,y},runWithContext(g){const m=_s;_s=y;try{return g()}finally{_s=m}}};return y}}let _s=null;function ho(t,n){if(Ue){let r=Ue.provides;const i=Ue.parent&&Ue.parent.provides;i===r&&(r=Ue.provides=Object.create(i)),r[t]=n}}function In(t,n,r=!1){const i=Mx();if(i||_s){let o=_s?_s._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return r&&Ht(n)?n.call(i&&i.proxy):n}}const Sh={},Eh=()=>Object.create(Sh),Ah=t=>Object.getPrototypeOf(t)===Sh;function lx(t,n,r,i=!1){const o={},l=Eh();t.propsDefaults=Object.create(null),Rh(t,n,o,l);for(const u in t.propsOptions[0])u in o||(o[u]=void 0);r?t.props=i?o:ch(o):t.type.props?t.props=o:t.props=l,t.attrs=l}function ux(t,n,r,i){const{props:o,attrs:l,vnode:{patchFlag:u}}=t,c=oe(o),[d]=t.propsOptions;let y=!1;if((i||u>0)&&!(u&16)){if(u&8){const g=t.vnode.dynamicProps;for(let m=0;m<g.length;m++){let b=g[m];if(No(t.emitsOptions,b))continue;const v=n[b];if(d)if(ae(l,b))v!==l[b]&&(l[b]=v,y=!0);else{const O=kn(b);o[O]=Ol(d,c,O,v,t,!1)}else v!==l[b]&&(l[b]=v,y=!0)}}}else{Rh(t,n,o,l)&&(y=!0);let g;for(const m in c)(!n||!ae(n,m)&&((g=Or(m))===m||!ae(n,g)))&&(d?r&&(r[m]!==void 0||r[g]!==void 0)&&(o[m]=Ol(d,c,m,void 0,t,!0)):delete o[m]);if(l!==c)for(const m in l)(!n||!ae(n,m))&&(delete l[m],y=!0)}y&&rr(t.attrs,"set","")}function Rh(t,n,r,i){const[o,l]=t.propsOptions;let u=!1,c;if(n)for(let d in n){if(Ks(d))continue;const y=n[d];let g;o&&ae(o,g=kn(d))?!l||!l.includes(g)?r[g]=y:(c||(c={}))[g]=y:No(t.emitsOptions,d)||(!(d in i)||y!==i[d])&&(i[d]=y,u=!0)}if(l){const d=oe(r),y=c||de;for(let g=0;g<l.length;g++){const m=l[g];r[m]=Ol(o,d,m,y[m],t,!ae(y,m))}}return u}function Ol(t,n,r,i,o,l){const u=t[r];if(u!=null){const c=ae(u,"default");if(c&&i===void 0){const d=u.default;if(u.type!==Function&&!u.skipFactory&&Ht(d)){const{propsDefaults:y}=o;if(r in y)i=y[r];else{const g=gi(o);i=y[r]=d.call(null,n),g()}}else i=d;o.ce&&o.ce._setProp(r,i)}u[0]&&(l&&!c?i=!1:u[1]&&(i===""||i===Or(r))&&(i=!0))}return i}const cx=new WeakMap;function Th(t,n,r=!1){const i=r?cx:n.propsCache,o=i.get(t);if(o)return o;const l=t.props,u={},c=[];let d=!1;if(!Ht(t)){const g=m=>{d=!0;const[b,v]=Th(m,n,!0);qe(u,b),v&&c.push(...v)};!r&&n.mixins.length&&n.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}if(!l&&!d)return he(t)&&i.set(t,hs),hs;if(Ut(l))for(let g=0;g<l.length;g++){const m=kn(l[g]);Xf(m)&&(u[m]=de)}else if(l)for(const g in l){const m=kn(g);if(Xf(m)){const b=l[g],v=u[m]=Ut(b)||Ht(b)?{type:b}:qe({},b),O=v.type;let w=!1,I=!0;if(Ut(O))for(let S=0;S<O.length;++S){const A=O[S],E=Ht(A)&&A.name;if(E==="Boolean"){w=!0;break}else E==="String"&&(I=!1)}else w=Ht(O)&&O.name==="Boolean";v[0]=w,v[1]=I,(w||ae(v,"default"))&&c.push(m)}}const y=[u,c];return he(t)&&i.set(t,y),y}function Xf(t){return t[0]!=="$"&&!Ks(t)}const nu=t=>t==="_"||t==="_ctx"||t==="$stable",ru=t=>Ut(t)?t.map(zn):[zn(t)],fx=(t,n,r)=>{if(n._n)return n;const i=cn((...o)=>ru(n(...o)),r);return i._c=!1,i},Oh=(t,n,r)=>{const i=t._ctx;for(const o in t){if(nu(o))continue;const l=t[o];if(Ht(l))n[o]=fx(o,l,i);else if(l!=null){const u=ru(l);n[o]=()=>u}}},Ih=(t,n)=>{const r=ru(n);t.slots.default=()=>r},$h=(t,n,r)=>{for(const i in n)(r||!nu(i))&&(t[i]=n[i])},dx=(t,n,r)=>{const i=t.slots=Eh();if(t.vnode.shapeFlag&32){const o=n._;o?($h(i,n,r),r&&Vd(i,"_",o,!0)):Oh(n,i)}else n&&Ih(t,n)},hx=(t,n,r)=>{const{vnode:i,slots:o}=t;let l=!0,u=de;if(i.shapeFlag&32){const c=n._;c?r&&c===1?l=!1:$h(o,n,r):(l=!n.$stable,Oh(n,o)),u=n}else n&&(Ih(t,n),u={default:1});if(l)for(const c in o)!nu(c)&&u[c]==null&&delete o[c]},un=Rx;function px(t){return gx(t)}function gx(t,n){const r=Bo();r.__VUE__=!0;const{insert:i,remove:o,patchProp:l,createElement:u,createText:c,createComment:d,setText:y,setElementText:g,parentNode:m,nextSibling:b,setScopeId:v=Nn,insertStaticContent:O}=t,w=(B,q,h,V=null,j=null,C=null,R=void 0,N=null,tt=!!q.dynamicChildren)=>{if(B===q)return;B&&!js(B,q)&&(V=G(B),it(B,j,C,!0),B=null),q.patchFlag===-2&&(tt=!1,q.dynamicChildren=null);const{type:X,ref:J,shapeFlag:at}=q;switch(X){case Uo:I(B,q,h,V);break;case Tr:S(B,q,h,V);break;case po:B==null&&A(q,h,V,R);break;case Wt:k(B,q,h,V,j,C,R,N,tt);break;default:at&1?U(B,q,h,V,j,C,R,N,tt):at&6?K(B,q,h,V,j,C,R,N,tt):(at&64||at&128)&&X.process(B,q,h,V,j,C,R,N,tt,ut)}J!=null&&j?Ys(J,B&&B.ref,C,q||B,!q):J==null&&B&&B.ref!=null&&Ys(B.ref,null,C,B,!0)},I=(B,q,h,V)=>{if(B==null)i(q.el=c(q.children),h,V);else{const j=q.el=B.el;q.children!==B.children&&y(j,q.children)}},S=(B,q,h,V)=>{B==null?i(q.el=d(q.children||""),h,V):q.el=B.el},A=(B,q,h,V)=>{[B.el,B.anchor]=O(B.children,q,h,V,B.el,B.anchor)},E=({el:B,anchor:q},h,V)=>{let j;for(;B&&B!==q;)j=b(B),i(B,h,V),B=j;i(q,h,V)},P=({el:B,anchor:q})=>{let h;for(;B&&B!==q;)h=b(B),o(B),B=h;o(q)},U=(B,q,h,V,j,C,R,N,tt)=>{q.type==="svg"?R="svg":q.type==="math"&&(R="mathml"),B==null?rt(q,h,V,j,C,R,N,tt):L(B,q,j,C,R,N,tt)},rt=(B,q,h,V,j,C,R,N)=>{let tt,X;const{props:J,shapeFlag:at,transition:mt,dirs:ht}=B;if(tt=B.el=u(B.type,C,J&&J.is,J),at&8?g(tt,B.children):at&16&&M(B.children,tt,null,V,j,dl(B,C),R,N),ht&&Ur(B,null,V,"created"),F(tt,B,B.scopeId,R,V),J){for(const Bt in J)Bt!=="value"&&!Ks(Bt)&&l(tt,Bt,null,J[Bt],C,V);"value"in J&&l(tt,"value",null,J.value,C),(X=J.onVnodeBeforeMount)&&Dn(X,V,B)}ht&&Ur(B,null,V,"beforeMount");const Ct=mx(j,mt);Ct&&mt.beforeEnter(tt),i(tt,q,h),((X=J&&J.onVnodeMounted)||Ct||ht)&&un(()=>{X&&Dn(X,V,B),Ct&&mt.enter(tt),ht&&Ur(B,null,V,"mounted")},j)},F=(B,q,h,V,j)=>{if(h&&v(B,h),V)for(let C=0;C<V.length;C++)v(B,V[C]);if(j){let C=j.subTree;if(q===C||zh(C.type)&&(C.ssContent===q||C.ssFallback===q)){const R=j.vnode;F(B,R,R.scopeId,R.slotScopeIds,j.parent)}}},M=(B,q,h,V,j,C,R,N,tt=0)=>{for(let X=tt;X<B.length;X++){const J=B[X]=N?wr(B[X]):zn(B[X]);w(null,J,q,h,V,j,C,R,N)}},L=(B,q,h,V,j,C,R)=>{const N=q.el=B.el;let{patchFlag:tt,dynamicChildren:X,dirs:J}=q;tt|=B.patchFlag&16;const at=B.props||de,mt=q.props||de;let ht;if(h&&Fr(h,!1),(ht=mt.onVnodeBeforeUpdate)&&Dn(ht,h,q,B),J&&Ur(q,B,h,"beforeUpdate"),h&&Fr(h,!0),(at.innerHTML&&mt.innerHTML==null||at.textContent&&mt.textContent==null)&&g(N,""),X?D(B.dynamicChildren,X,N,h,V,dl(q,j),C):R||St(B,q,N,null,h,V,dl(q,j),C,!1),tt>0){if(tt&16)st(N,at,mt,h,j);else if(tt&2&&at.class!==mt.class&&l(N,"class",null,mt.class,j),tt&4&&l(N,"style",at.style,mt.style,j),tt&8){const Ct=q.dynamicProps;for(let Bt=0;Bt<Ct.length;Bt++){const Ot=Ct[Bt],ee=at[Ot],be=mt[Ot];(be!==ee||Ot==="value")&&l(N,Ot,ee,be,j,h)}}tt&1&&B.children!==q.children&&g(N,q.children)}else!R&&X==null&&st(N,at,mt,h,j);((ht=mt.onVnodeUpdated)||J)&&un(()=>{ht&&Dn(ht,h,q,B),J&&Ur(q,B,h,"updated")},V)},D=(B,q,h,V,j,C,R)=>{for(let N=0;N<q.length;N++){const tt=B[N],X=q[N],J=tt.el&&(tt.type===Wt||!js(tt,X)||tt.shapeFlag&198)?m(tt.el):h;w(tt,X,J,null,V,j,C,R,!0)}},st=(B,q,h,V,j)=>{if(q!==h){if(q!==de)for(const C in q)!Ks(C)&&!(C in h)&&l(B,C,q[C],null,j,V);for(const C in h){if(Ks(C))continue;const R=h[C],N=q[C];R!==N&&C!=="value"&&l(B,C,N,R,j,V)}"value"in h&&l(B,"value",q.value,h.value,j)}},k=(B,q,h,V,j,C,R,N,tt)=>{const X=q.el=B?B.el:c(""),J=q.anchor=B?B.anchor:c("");let{patchFlag:at,dynamicChildren:mt,slotScopeIds:ht}=q;ht&&(N=N?N.concat(ht):ht),B==null?(i(X,h,V),i(J,h,V),M(q.children||[],h,J,j,C,R,N,tt)):at>0&&at&64&&mt&&B.dynamicChildren?(D(B.dynamicChildren,mt,h,j,C,R,N),(q.key!=null||j&&q===j.subTree)&&Ph(B,q,!0)):St(B,q,h,J,j,C,R,N,tt)},K=(B,q,h,V,j,C,R,N,tt)=>{q.slotScopeIds=N,B==null?q.shapeFlag&512?j.ctx.activate(q,h,V,R,tt):_(q,h,V,j,C,R,tt):lt(B,q,tt)},_=(B,q,h,V,j,C,R)=>{const N=B.component=Dx(B,V,j);if(bh(B)&&(N.ctx.renderer=ut),zx(N,!1,R),N.asyncDep){if(j&&j.registerDep(N,wt,R),!B.el){const tt=N.subTree=ce(Tr);S(null,tt,q,h),B.placeholder=tt.el}}else wt(N,B,q,h,j,C,R)},lt=(B,q,h)=>{const V=q.component=B.component;if(Ex(B,q,h))if(V.asyncDep&&!V.asyncResolved){ct(V,q,h);return}else V.next=q,V.update();else q.el=B.el,V.vnode=q},wt=(B,q,h,V,j,C,R)=>{const N=()=>{if(B.isMounted){let{next:at,bu:mt,u:ht,parent:Ct,vnode:Bt}=B;{const Re=Lh(B);if(Re){at&&(at.el=Bt.el,ct(B,at,R)),Re.asyncDep.then(()=>{B.isUnmounted||N()});return}}let Ot=at,ee;Fr(B,!1),at?(at.el=Bt.el,ct(B,at,R)):at=Bt,mt&&fo(mt),(ee=at.props&&at.props.onVnodeBeforeUpdate)&&Dn(ee,Ct,at,Bt),Fr(B,!0);const be=ed(B),_e=B.subTree;B.subTree=be,w(_e,be,m(_e.el),G(_e),B,j,C),at.el=be.el,Ot===null&&Ax(B,be.el),ht&&un(ht,j),(ee=at.props&&at.props.onVnodeUpdated)&&un(()=>Dn(ee,Ct,at,Bt),j)}else{let at;const{el:mt,props:ht}=q,{bm:Ct,m:Bt,parent:Ot,root:ee,type:be}=B,_e=Js(q);Fr(B,!1),Ct&&fo(Ct),!_e&&(at=ht&&ht.onVnodeBeforeMount)&&Dn(at,Ot,q),Fr(B,!0);{ee.ce&&ee.ce._def.shadowRoot!==!1&&ee.ce._injectChildStyle(be);const Re=B.subTree=ed(B);w(null,Re,h,V,B,j,C),q.el=Re.el}if(Bt&&un(Bt,j),!_e&&(at=ht&&ht.onVnodeMounted)){const Re=q;un(()=>Dn(at,Ot,Re),j)}(q.shapeFlag&256||Ot&&Js(Ot.vnode)&&Ot.vnode.shapeFlag&256)&&B.a&&un(B.a,j),B.isMounted=!0,q=h=V=null}};B.scope.on();const tt=B.effect=new Yd(N);B.scope.off();const X=B.update=tt.run.bind(tt),J=B.job=tt.runIfDirty.bind(tt);J.i=B,J.id=B.uid,tt.scheduler=()=>tu(J),Fr(B,!0),X()},ct=(B,q,h)=>{q.component=B;const V=B.vnode.props;B.vnode=q,B.next=null,ux(B,q.props,V,h),hx(B,q.children,h),ar(),Vf(B),lr()},St=(B,q,h,V,j,C,R,N,tt=!1)=>{const X=B&&B.children,J=B?B.shapeFlag:0,at=q.children,{patchFlag:mt,shapeFlag:ht}=q;if(mt>0){if(mt&128){$t(X,at,h,V,j,C,R,N,tt);return}else if(mt&256){bt(X,at,h,V,j,C,R,N,tt);return}}ht&8?(J&16&&yt(X,j,C),at!==X&&g(h,at)):J&16?ht&16?$t(X,at,h,V,j,C,R,N,tt):yt(X,j,C,!0):(J&8&&g(h,""),ht&16&&M(at,h,V,j,C,R,N,tt))},bt=(B,q,h,V,j,C,R,N,tt)=>{B=B||hs,q=q||hs;const X=B.length,J=q.length,at=Math.min(X,J);let mt;for(mt=0;mt<at;mt++){const ht=q[mt]=tt?wr(q[mt]):zn(q[mt]);w(B[mt],ht,h,null,j,C,R,N,tt)}X>J?yt(B,j,C,!0,!1,at):M(q,h,V,j,C,R,N,tt,at)},$t=(B,q,h,V,j,C,R,N,tt)=>{let X=0;const J=q.length;let at=B.length-1,mt=J-1;for(;X<=at&&X<=mt;){const ht=B[X],Ct=q[X]=tt?wr(q[X]):zn(q[X]);if(js(ht,Ct))w(ht,Ct,h,null,j,C,R,N,tt);else break;X++}for(;X<=at&&X<=mt;){const ht=B[at],Ct=q[mt]=tt?wr(q[mt]):zn(q[mt]);if(js(ht,Ct))w(ht,Ct,h,null,j,C,R,N,tt);else break;at--,mt--}if(X>at){if(X<=mt){const ht=mt+1,Ct=ht<J?q[ht].el:V;for(;X<=mt;)w(null,q[X]=tt?wr(q[X]):zn(q[X]),h,Ct,j,C,R,N,tt),X++}}else if(X>mt)for(;X<=at;)it(B[X],j,C,!0),X++;else{const ht=X,Ct=X,Bt=new Map;for(X=Ct;X<=mt;X++){const Se=q[X]=tt?wr(q[X]):zn(q[X]);Se.key!=null&&Bt.set(Se.key,X)}let Ot,ee=0;const be=mt-Ct+1;let _e=!1,Re=0;const ne=new Array(be);for(X=0;X<be;X++)ne[X]=0;for(X=ht;X<=at;X++){const Se=B[X];if(ee>=be){it(Se,j,C,!0);continue}let xe;if(Se.key!=null)xe=Bt.get(Se.key);else for(Ot=Ct;Ot<=mt;Ot++)if(ne[Ot-Ct]===0&&js(Se,q[Ot])){xe=Ot;break}xe===void 0?it(Se,j,C,!0):(ne[xe-Ct]=X+1,xe>=Re?Re=xe:_e=!0,w(Se,q[xe],h,null,j,C,R,N,tt),ee++)}const Cn=_e?vx(ne):hs;for(Ot=Cn.length-1,X=be-1;X>=0;X--){const Se=Ct+X,xe=q[Se],qn=q[Se+1],Gr=Se+1<J?qn.el||qn.placeholder:V;ne[X]===0?w(null,xe,h,Gr,j,C,R,N,tt):_e&&(Ot<0||X!==Cn[Ot]?ot(xe,h,Gr,2):Ot--)}}},ot=(B,q,h,V,j=null)=>{const{el:C,type:R,transition:N,children:tt,shapeFlag:X}=B;if(X&6){ot(B.component.subTree,q,h,V);return}if(X&128){B.suspense.move(q,h,V);return}if(X&64){R.move(B,q,h,ut);return}if(R===Wt){i(C,q,h);for(let at=0;at<tt.length;at++)ot(tt[at],q,h,V);i(B.anchor,q,h);return}if(R===po){E(B,q,h);return}if(V!==2&&X&1&&N)if(V===0)N.beforeEnter(C),i(C,q,h),un(()=>N.enter(C),j);else{const{leave:at,delayLeave:mt,afterLeave:ht}=N,Ct=()=>{B.ctx.isUnmounted?o(C):i(C,q,h)},Bt=()=>{C._isLeaving&&C[Nb](!0),at(C,()=>{Ct(),ht&&ht()})};mt?mt(C,Ct,Bt):Bt()}else i(C,q,h)},it=(B,q,h,V=!1,j=!1)=>{const{type:C,props:R,ref:N,children:tt,dynamicChildren:X,shapeFlag:J,patchFlag:at,dirs:mt,cacheIndex:ht}=B;if(at===-2&&(j=!1),N!=null&&(ar(),Ys(N,null,h,B,!0),lr()),ht!=null&&(q.renderCache[ht]=void 0),J&256){q.ctx.deactivate(B);return}const Ct=J&1&&mt,Bt=!Js(B);let Ot;if(Bt&&(Ot=R&&R.onVnodeBeforeUnmount)&&Dn(Ot,q,B),J&6)kt(B.component,h,V);else{if(J&128){B.suspense.unmount(h,V);return}Ct&&Ur(B,null,q,"beforeUnmount"),J&64?B.type.remove(B,q,h,ut,V):X&&!X.hasOnce&&(C!==Wt||at>0&&at&64)?yt(X,q,h,!1,!0):(C===Wt&&at&384||!j&&J&16)&&yt(tt,q,h),V&&Pt(B)}(Bt&&(Ot=R&&R.onVnodeUnmounted)||Ct)&&un(()=>{Ot&&Dn(Ot,q,B),Ct&&Ur(B,null,q,"unmounted")},h)},Pt=B=>{const{type:q,el:h,anchor:V,transition:j}=B;if(q===Wt){At(h,V);return}if(q===po){P(B);return}const C=()=>{o(h),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(B.shapeFlag&1&&j&&!j.persisted){const{leave:R,delayLeave:N}=j,tt=()=>R(h,C);N?N(B.el,C,tt):tt()}else C()},At=(B,q)=>{let h;for(;B!==q;)h=b(B),o(B),B=h;o(q)},kt=(B,q,h)=>{const{bum:V,scope:j,job:C,subTree:R,um:N,m:tt,a:X}=B;td(tt),td(X),V&&fo(V),j.stop(),C&&(C.flags|=8,it(R,B,q,h)),N&&un(N,q),un(()=>{B.isUnmounted=!0},q)},yt=(B,q,h,V=!1,j=!1,C=0)=>{for(let R=C;R<B.length;R++)it(B[R],q,h,V,j)},G=B=>{if(B.shapeFlag&6)return G(B.component.subTree);if(B.shapeFlag&128)return B.suspense.next();const q=b(B.anchor||B.el),h=q&&q[Mb];return h?b(h):q};let W=!1;const z=(B,q,h)=>{B==null?q._vnode&&it(q._vnode,null,null,!0):w(q._vnode||null,B,q,null,null,null,h),q._vnode=B,W||(W=!0,Vf(),gh(),W=!1)},ut={p:w,um:it,m:ot,r:Pt,mt:_,mc:M,pc:St,pbc:D,n:G,o:t};return{render:z,hydrate:void 0,createApp:ax(z)}}function dl({type:t,props:n},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:r}function Fr({effect:t,job:n},r){r?(t.flags|=32,n.flags|=4):(t.flags&=-33,n.flags&=-5)}function mx(t,n){return(!t||t&&!t.pendingBranch)&&n&&!n.persisted}function Ph(t,n,r=!1){const i=t.children,o=n.children;if(Ut(i)&&Ut(o))for(let l=0;l<i.length;l++){const u=i[l];let c=o[l];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=o[l]=wr(o[l]),c.el=u.el),!r&&c.patchFlag!==-2&&Ph(u,c)),c.type===Uo&&c.patchFlag!==-1&&(c.el=u.el),c.type===Tr&&!c.el&&(c.el=u.el)}}function vx(t){const n=t.slice(),r=[0];let i,o,l,u,c;const d=t.length;for(i=0;i<d;i++){const y=t[i];if(y!==0){if(o=r[r.length-1],t[o]<y){n[i]=o,r.push(i);continue}for(l=0,u=r.length-1;l<u;)c=l+u>>1,t[r[c]]<y?l=c+1:u=c;y<t[r[l]]&&(l>0&&(n[i]=r[l-1]),r[l]=i)}}for(l=r.length,u=r[l-1];l-- >0;)r[l]=u,u=n[u];return r}function Lh(t){const n=t.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Lh(n)}function td(t){if(t)for(let n=0;n<t.length;n++)t[n].flags|=8}const _x=Symbol.for("v-scx"),yx=()=>In(_x);function Er(t,n,r){return Bh(t,n,r)}function Bh(t,n,r=de){const{immediate:i,deep:o,flush:l,once:u}=r,c=qe({},r),d=n&&i||!n&&l!=="post";let y;if(oi){if(l==="sync"){const v=yx();y=v.__watcherHandles||(v.__watcherHandles=[])}else if(!d){const v=()=>{};return v.stop=Nn,v.resume=Nn,v.pause=Nn,v}}const g=Ue;c.call=(v,O,w)=>jn(v,g,O,w);let m=!1;l==="post"?c.scheduler=v=>{un(v,g&&g.suspense)}:l!=="sync"&&(m=!0,c.scheduler=(v,O)=>{O?v():tu(v)}),c.augmentJob=v=>{n&&(v.flags|=4),m&&(v.flags|=2,g&&(v.id=g.uid,v.i=g))};const b=Pb(t,n,c);return oi&&(y?y.push(b):d&&b()),b}function bx(t,n,r){const i=this.proxy,o=Oe(t)?t.includes(".")?Dh(i,t):()=>i[t]:t.bind(i,i);let l;Ht(n)?l=n:(l=n.handler,r=n);const u=gi(this),c=Bh(o,l.bind(i),r);return u(),c}function Dh(t,n){const r=n.split(".");return()=>{let i=t;for(let o=0;o<r.length&&i;o++)i=i[r[o]];return i}}const xx=(t,n)=>n==="modelValue"||n==="model-value"?t.modelModifiers:t[`${n}Modifiers`]||t[`${kn(n)}Modifiers`]||t[`${Or(n)}Modifiers`];function wx(t,n,...r){if(t.isUnmounted)return;const i=t.vnode.props||de;let o=r;const l=n.startsWith("update:"),u=l&&xx(i,n.slice(7));u&&(u.trim&&(o=r.map(g=>Oe(g)?g.trim():g)),u.number&&(o=r.map(bo)));let c,d=i[c=ol(n)]||i[c=ol(kn(n))];!d&&l&&(d=i[c=ol(Or(n))]),d&&jn(d,t,6,o);const y=i[c+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,jn(y,t,6,o)}}const kx=new WeakMap;function Mh(t,n,r=!1){const i=r?kx:n.emitsCache,o=i.get(t);if(o!==void 0)return o;const l=t.emits;let u={},c=!1;if(!Ht(t)){const d=y=>{const g=Mh(y,n,!0);g&&(c=!0,qe(u,g))};!r&&n.mixins.length&&n.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}return!l&&!c?(he(t)&&i.set(t,null),null):(Ut(l)?l.forEach(d=>u[d]=null):qe(u,l),he(t)&&i.set(t,u),u)}function No(t,n){return!t||!$o(n)?!1:(n=n.slice(2).replace(/Once$/,""),ae(t,n[0].toLowerCase()+n.slice(1))||ae(t,Or(n))||ae(t,n))}function ed(t){const{type:n,vnode:r,proxy:i,withProxy:o,propsOptions:[l],slots:u,attrs:c,emit:d,render:y,renderCache:g,props:m,data:b,setupState:v,ctx:O,inheritAttrs:w}=t,I=Co(t);let S,A;try{if(r.shapeFlag&4){const P=o||i,U=P;S=zn(y.call(U,P,g,m,v,b,O)),A=c}else{const P=n;S=zn(P.length>1?P(m,{attrs:c,slots:u,emit:d}):P(m,null)),A=n.props?c:Cx(c)}}catch(P){Xs.length=0,Mo(P,t,1),S=ce(Tr)}let E=S;if(A&&w!==!1){const P=Object.keys(A),{shapeFlag:U}=E;P.length&&U&7&&(l&&P.some(Wl)&&(A=Sx(A,l)),E=ys(E,A,!1,!0))}return r.dirs&&(E=ys(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(r.dirs):r.dirs),r.transition&&eu(E,r.transition),S=E,Co(I),S}const Cx=t=>{let n;for(const r in t)(r==="class"||r==="style"||$o(r))&&((n||(n={}))[r]=t[r]);return n},Sx=(t,n)=>{const r={};for(const i in t)(!Wl(i)||!(i.slice(9)in n))&&(r[i]=t[i]);return r};function Ex(t,n,r){const{props:i,children:o,component:l}=t,{props:u,children:c,patchFlag:d}=n,y=l.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&d>=0){if(d&1024)return!0;if(d&16)return i?nd(i,u,y):!!u;if(d&8){const g=n.dynamicProps;for(let m=0;m<g.length;m++){const b=g[m];if(u[b]!==i[b]&&!No(y,b))return!0}}}else return(o||c)&&(!c||!c.$stable)?!0:i===u?!1:i?u?nd(i,u,y):!0:!!u;return!1}function nd(t,n,r){const i=Object.keys(n);if(i.length!==Object.keys(t).length)return!0;for(let o=0;o<i.length;o++){const l=i[o];if(n[l]!==t[l]&&!No(r,l))return!0}return!1}function Ax({vnode:t,parent:n},r){for(;n;){const i=n.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=n.vnode).el=r,n=n.parent;else break}}const zh=t=>t.__isSuspense;function Rx(t,n){n&&n.pendingBranch?Ut(t)?n.effects.push(...t):n.effects.push(t):Db(t)}const Wt=Symbol.for("v-fgt"),Uo=Symbol.for("v-txt"),Tr=Symbol.for("v-cmt"),po=Symbol.for("v-stc"),Xs=[];let dn=null;function Z(t=!1){Xs.push(dn=t?null:[])}function Tx(){Xs.pop(),dn=Xs[Xs.length-1]||null}let ii=1;function Ro(t,n=!1){ii+=t,t<0&&dn&&n&&(dn.hasOnce=!0)}function Nh(t){return t.dynamicChildren=ii>0?dn||hs:null,Tx(),ii>0&&dn&&dn.push(t),t}function Y(t,n,r,i,o,l){return Nh(f(t,n,r,i,o,l,!0))}function Ox(t,n,r,i,o){return Nh(ce(t,n,r,i,o,!0))}function To(t){return t?t.__v_isVNode===!0:!1}function js(t,n){return t.type===n.type&&t.key===n.key}const Uh=({key:t})=>t??null,go=({ref:t,ref_key:n,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Oe(t)||je(t)||Ht(t)?{i:fn,r:t,k:n,f:!!r}:t:null);function f(t,n=null,r=null,i=0,o=null,l=t===Wt?0:1,u=!1,c=!1){const d={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&Uh(n),ref:n&&go(n),scopeId:vh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:fn};return c?(su(d,r),l&128&&t.normalize(d)):r&&(d.shapeFlag|=Oe(r)?8:16),ii>0&&!u&&dn&&(d.patchFlag>0||l&6)&&d.patchFlag!==32&&dn.push(d),d}const ce=Ix;function Ix(t,n=null,r=null,i=0,o=null,l=!1){if((!t||t===Qb)&&(t=Tr),To(t)){const c=ys(t,n,!0);return r&&su(c,r),ii>0&&!l&&dn&&(c.shapeFlag&6?dn[dn.indexOf(t)]=c:dn.push(c)),c.patchFlag=-2,c}if(Wx(t)&&(t=t.__vccOpts),n){n=$x(n);let{class:c,style:d}=n;c&&!Oe(c)&&(n.class=me(c)),he(d)&&(Xl(d)&&!Ut(d)&&(d=qe({},d)),n.style=Vr(d))}const u=Oe(t)?1:zh(t)?128:zb(t)?64:he(t)?4:Ht(t)?2:0;return f(t,n,r,i,o,u,l,!0)}function $x(t){return t?Xl(t)||Ah(t)?qe({},t):t:null}function ys(t,n,r=!1,i=!1){const{props:o,ref:l,patchFlag:u,children:c,transition:d}=t,y=n?Px(o||{},n):o,g={__v_isVNode:!0,__v_skip:!0,type:t.type,props:y,key:y&&Uh(y),ref:n&&n.ref?r&&l?Ut(l)?l.concat(go(n)):[l,go(n)]:go(n):l,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Wt?u===-1?16:u|16:u,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:d,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ys(t.ssContent),ssFallback:t.ssFallback&&ys(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return d&&i&&eu(g,d.clone(g)),g}function ve(t=" ",n=0){return ce(Uo,null,t,n)}function qr(t,n){const r=ce(po,null,t);return r.staticCount=n,r}function Rt(t="",n=!1){return n?(Z(),Ox(Tr,null,t)):ce(Tr,null,t)}function zn(t){return t==null||typeof t=="boolean"?ce(Tr):Ut(t)?ce(Wt,null,t.slice()):To(t)?wr(t):ce(Uo,null,String(t))}function wr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ys(t)}function su(t,n){let r=0;const{shapeFlag:i}=t;if(n==null)n=null;else if(Ut(n))r=16;else if(typeof n=="object")if(i&65){const o=n.default;o&&(o._c&&(o._d=!1),su(t,o()),o._c&&(o._d=!0));return}else{r=32;const o=n._;!o&&!Ah(n)?n._ctx=fn:o===3&&fn&&(fn.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else Ht(n)?(n={default:n,_ctx:fn},r=32):(n=String(n),i&64?(r=16,n=[ve(n)]):r=8);t.children=n,t.shapeFlag|=r}function Px(...t){const n={};for(let r=0;r<t.length;r++){const i=t[r];for(const o in i)if(o==="class")n.class!==i.class&&(n.class=me([n.class,i.class]));else if(o==="style")n.style=Vr([n.style,i.style]);else if($o(o)){const l=n[o],u=i[o];u&&l!==u&&!(Ut(l)&&l.includes(u))&&(n[o]=l?[].concat(l,u):u)}else o!==""&&(n[o]=i[o])}return n}function Dn(t,n,r,i=null){jn(t,n,7,[r,i])}const Lx=Ch();let Bx=0;function Dx(t,n,r){const i=t.type,o=(n?n.appContext:t.appContext)||Lx,l={uid:Bx++,vnode:t,type:i,parent:n,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ob(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(o.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Th(i,o),emitsOptions:Mh(i,o),emit:null,emitted:null,propsDefaults:de,inheritAttrs:i.inheritAttrs,ctx:de,data:de,props:de,attrs:de,slots:de,refs:de,setupState:de,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=n?n.root:l,l.emit=wx.bind(null,l),t.ce&&t.ce(l),l}let Ue=null;const Mx=()=>Ue||fn;let Oo,Il;{const t=Bo(),n=(r,i)=>{let o;return(o=t[r])||(o=t[r]=[]),o.push(i),l=>{o.length>1?o.forEach(u=>u(l)):o[0](l)}};Oo=n("__VUE_INSTANCE_SETTERS__",r=>Ue=r),Il=n("__VUE_SSR_SETTERS__",r=>oi=r)}const gi=t=>{const n=Ue;return Oo(t),t.scope.on(),()=>{t.scope.off(),Oo(n)}},rd=()=>{Ue&&Ue.scope.off(),Oo(null)};function Fh(t){return t.vnode.shapeFlag&4}let oi=!1;function zx(t,n=!1,r=!1){n&&Il(n);const{props:i,children:o}=t.vnode,l=Fh(t);lx(t,i,l,n),dx(t,o,r||n);const u=l?Nx(t,n):void 0;return n&&Il(!1),u}function Nx(t,n){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,tx);const{setup:i}=r;if(i){ar();const o=t.setupContext=i.length>1?Fx(t):null,l=gi(t),u=hi(i,t,0,[t.props,o]),c=Wd(u);if(lr(),l(),(c||t.sp)&&!Js(t)&&yh(t),c){if(u.then(rd,rd),n)return u.then(d=>{sd(t,d)}).catch(d=>{Mo(d,t,0)});t.asyncDep=u}else sd(t,u)}else jh(t)}function sd(t,n,r){Ht(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:he(n)&&(t.setupState=dh(n)),jh(t)}function jh(t,n,r){const i=t.type;t.render||(t.render=i.render||Nn);{const o=gi(t);ar();try{ex(t)}finally{lr(),o()}}}const Ux={get(t,n){return Ne(t,"get",""),t[n]}};function Fx(t){const n=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,Ux),slots:t.slots,emit:t.emit,expose:n}}function Fo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(dh(Eb(t.exposed)),{get(n,r){if(r in n)return n[r];if(r in Qs)return Qs[r](t)},has(n,r){return r in n||r in Qs}})):t.proxy}function jx(t,n=!0){return Ht(t)?t.displayName||t.name:t.name||n&&t.__name}function Wx(t){return Ht(t)&&"__vccOpts"in t}const le=(t,n)=>Ib(t,n,oi);function Wh(t,n,r){try{Ro(-1);const i=arguments.length;return i===2?he(n)&&!Ut(n)?To(n)?ce(t,null,[n]):ce(t,n):ce(t,null,n):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&To(r)&&(r=[r]),ce(t,n,r))}finally{Ro(1)}}const qx="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $l;const id=typeof window<"u"&&window.trustedTypes;if(id)try{$l=id.createPolicy("vue",{createHTML:t=>t})}catch{}const qh=$l?t=>$l.createHTML(t):t=>t,Hx="http://www.w3.org/2000/svg",Vx="http://www.w3.org/1998/Math/MathML",nr=typeof document<"u"?document:null,od=nr&&nr.createElement("template"),Kx={insert:(t,n,r)=>{n.insertBefore(t,r||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,r,i)=>{const o=n==="svg"?nr.createElementNS(Hx,t):n==="mathml"?nr.createElementNS(Vx,t):r?nr.createElement(t,{is:r}):nr.createElement(t);return t==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:t=>nr.createTextNode(t),createComment:t=>nr.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>nr.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,r,i,o,l){const u=r?r.previousSibling:n.lastChild;if(o&&(o===l||o.nextSibling))for(;n.insertBefore(o.cloneNode(!0),r),!(o===l||!(o=o.nextSibling)););else{od.innerHTML=qh(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const c=od.content;if(i==="svg"||i==="mathml"){const d=c.firstChild;for(;d.firstChild;)c.appendChild(d.firstChild);c.removeChild(d)}n.insertBefore(c,r)}return[u?u.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}},Gx=Symbol("_vtc");function Zx(t,n,r){const i=t[Gx];i&&(n=(n?[n,...i]:[...i]).join(" ")),n==null?t.removeAttribute("class"):r?t.setAttribute("class",n):t.className=n}const ad=Symbol("_vod"),Yx=Symbol("_vsh"),Jx=Symbol(""),Qx=/(?:^|;)\s*display\s*:/;function Xx(t,n,r){const i=t.style,o=Oe(r);let l=!1;if(r&&!o){if(n)if(Oe(n))for(const u of n.split(";")){const c=u.slice(0,u.indexOf(":")).trim();r[c]==null&&mo(i,c,"")}else for(const u in n)r[u]==null&&mo(i,u,"");for(const u in r)u==="display"&&(l=!0),mo(i,u,r[u])}else if(o){if(n!==r){const u=i[Jx];u&&(r+=";"+u),i.cssText=r,l=Qx.test(r)}}else n&&t.removeAttribute("style");ad in t&&(t[ad]=l?i.display:"",t[Yx]&&(i.display="none"))}const ld=/\s*!important$/;function mo(t,n,r){if(Ut(r))r.forEach(i=>mo(t,n,i));else if(r==null&&(r=""),n.startsWith("--"))t.setProperty(n,r);else{const i=tw(t,n);ld.test(r)?t.setProperty(Or(i),r.replace(ld,""),"important"):t[i]=r}}const ud=["Webkit","Moz","ms"],hl={};function tw(t,n){const r=hl[n];if(r)return r;let i=kn(n);if(i!=="filter"&&i in t)return hl[n]=i;i=Lo(i);for(let o=0;o<ud.length;o++){const l=ud[o]+i;if(l in t)return hl[n]=l}return n}const cd="http://www.w3.org/1999/xlink";function fd(t,n,r,i,o,l=sb(n)){i&&n.startsWith("xlink:")?r==null?t.removeAttributeNS(cd,n.slice(6,n.length)):t.setAttributeNS(cd,n,r):r==null||l&&!Kd(r)?t.removeAttribute(n):t.setAttribute(n,l?"":Fn(r)?String(r):r)}function dd(t,n,r,i,o){if(n==="innerHTML"||n==="textContent"){r!=null&&(t[n]=n==="innerHTML"?qh(r):r);return}const l=t.tagName;if(n==="value"&&l!=="PROGRESS"&&!l.includes("-")){const c=l==="OPTION"?t.getAttribute("value")||"":t.value,d=r==null?t.type==="checkbox"?"on":"":String(r);(c!==d||!("_value"in t))&&(t.value=d),r==null&&t.removeAttribute(n),t._value=r;return}let u=!1;if(r===""||r==null){const c=typeof t[n];c==="boolean"?r=Kd(r):r==null&&c==="string"?(r="",u=!0):c==="number"&&(r=0,u=!0)}try{t[n]=r}catch{}u&&t.removeAttribute(o||n)}function Cr(t,n,r,i){t.addEventListener(n,r,i)}function ew(t,n,r,i){t.removeEventListener(n,r,i)}const hd=Symbol("_vei");function nw(t,n,r,i,o=null){const l=t[hd]||(t[hd]={}),u=l[n];if(i&&u)u.value=i;else{const[c,d]=rw(n);if(i){const y=l[n]=ow(i,o);Cr(t,c,y,d)}else u&&(ew(t,c,u,d),l[n]=void 0)}}const pd=/(?:Once|Passive|Capture)$/;function rw(t){let n;if(pd.test(t)){n={};let i;for(;i=t.match(pd);)t=t.slice(0,t.length-i[0].length),n[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Or(t.slice(2)),n]}let pl=0;const sw=Promise.resolve(),iw=()=>pl||(sw.then(()=>pl=0),pl=Date.now());function ow(t,n){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;jn(aw(i,r.value),n,5,[i])};return r.value=t,r.attached=iw(),r}function aw(t,n){if(Ut(n)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},n.map(i=>o=>!o._stopped&&i&&i(o))}else return n}const gd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,lw=(t,n,r,i,o,l)=>{const u=o==="svg";n==="class"?Zx(t,i,u):n==="style"?Xx(t,r,i):$o(n)?Wl(n)||nw(t,n,r,i,l):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):uw(t,n,i,u))?(dd(t,n,i),!t.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&fd(t,n,i,u,l,n!=="value")):t._isVueCE&&(/[A-Z]/.test(n)||!Oe(i))?dd(t,kn(n),i,l,n):(n==="true-value"?t._trueValue=i:n==="false-value"&&(t._falseValue=i),fd(t,n,i,u))};function uw(t,n,r,i){if(i)return!!(n==="innerHTML"||n==="textContent"||n in t&&gd(n)&&Ht(r));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return gd(n)&&Oe(r)?!1:n in t}const bs=t=>{const n=t.props["onUpdate:modelValue"]||!1;return Ut(n)?r=>fo(n,r):n};function cw(t){t.target.composing=!0}function md(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const or=Symbol("_assign"),Ft={created(t,{modifiers:{lazy:n,trim:r,number:i}},o){t[or]=bs(o);const l=i||o.props&&o.props.type==="number";Cr(t,n?"change":"input",u=>{if(u.target.composing)return;let c=t.value;r&&(c=c.trim()),l&&(c=bo(c)),t[or](c)}),r&&Cr(t,"change",()=>{t.value=t.value.trim()}),n||(Cr(t,"compositionstart",cw),Cr(t,"compositionend",md),Cr(t,"change",md))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,oldValue:r,modifiers:{lazy:i,trim:o,number:l}},u){if(t[or]=bs(u),t.composing)return;const c=(l||t.type==="number")&&!/^0\d/.test(t.value)?bo(t.value):t.value,d=n??"";c!==d&&(document.activeElement===t&&t.type!=="range"&&(i&&n===r||o&&t.value.trim()===d)||(t.value=d))}},fw={deep:!0,created(t,n,r){t[or]=bs(r),Cr(t,"change",()=>{const i=t._modelValue,o=li(t),l=t.checked,u=t[or];if(Ut(i)){const c=Vl(i,o),d=c!==-1;if(l&&!d)u(i.concat(o));else if(!l&&d){const y=[...i];y.splice(c,1),u(y)}}else if(ks(i)){const c=new Set(i);l?c.add(o):c.delete(o),u(c)}else u(Hh(t,l))})},mounted:vd,beforeUpdate(t,n,r){t[or]=bs(r),vd(t,n,r)}};function vd(t,{value:n,oldValue:r},i){t._modelValue=n;let o;if(Ut(n))o=Vl(n,i.props.value)>-1;else if(ks(n))o=n.has(i.props.value);else{if(n===r)return;o=di(n,Hh(t,!0))}t.checked!==o&&(t.checked=o)}const ai={deep:!0,created(t,{value:n,modifiers:{number:r}},i){const o=ks(n);Cr(t,"change",()=>{const l=Array.prototype.filter.call(t.options,u=>u.selected).map(u=>r?bo(li(u)):li(u));t[or](t.multiple?o?new Set(l):l:l[0]),t._assigning=!0,pi(()=>{t._assigning=!1})}),t[or]=bs(i)},mounted(t,{value:n}){_d(t,n)},beforeUpdate(t,n,r){t[or]=bs(r)},updated(t,{value:n}){t._assigning||_d(t,n)}};function _d(t,n){const r=t.multiple,i=Ut(n);if(!(r&&!i&&!ks(n))){for(let o=0,l=t.options.length;o<l;o++){const u=t.options[o],c=li(u);if(r)if(i){const d=typeof c;d==="string"||d==="number"?u.selected=n.some(y=>String(y)===String(c)):u.selected=Vl(n,c)>-1}else u.selected=n.has(c);else if(di(li(u),n)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function li(t){return"_value"in t?t._value:t.value}function Hh(t,n){const r=n?"_trueValue":"_falseValue";return r in t?t[r]:n}const dw=["ctrl","shift","alt","meta"],hw={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>dw.some(r=>t[`${r}Key`]&&!n.includes(r))},We=(t,n)=>{const r=t._withMods||(t._withMods={}),i=n.join(".");return r[i]||(r[i]=(o,...l)=>{for(let u=0;u<n.length;u++){const c=hw[n[u]];if(c&&c(o,n))return}return t(o,...l)})},pw={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},gw=(t,n)=>{const r=t._withKeys||(t._withKeys={}),i=n.join(".");return r[i]||(r[i]=o=>{if(!("key"in o))return;const l=Or(o.key);if(n.some(u=>u===l||pw[u]===l))return t(o)})},mw=qe({patchProp:lw},Kx);let yd;function vw(){return yd||(yd=px(mw))}const _w=(...t)=>{const n=vw().createApp(...t),{mount:r}=n;return n.mount=i=>{const o=bw(i);if(!o)return;const l=n._component;!Ht(l)&&!l.render&&!l.template&&(l.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const u=r(o,!1,yw(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},n};function yw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function bw(t){return Oe(t)?document.querySelector(t):t}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ds=typeof document<"u";function Vh(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function xw(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Vh(t.default)}const ie=Object.assign;function gl(t,n){const r={};for(const i in n){const o=n[i];r[i]=$n(o)?o.map(t):t(o)}return r}const ti=()=>{},$n=Array.isArray,Kh=/#/g,ww=/&/g,kw=/\//g,Cw=/=/g,Sw=/\?/g,Gh=/\+/g,Ew=/%5B/g,Aw=/%5D/g,Zh=/%5E/g,Rw=/%60/g,Yh=/%7B/g,Tw=/%7C/g,Jh=/%7D/g,Ow=/%20/g;function iu(t){return encodeURI(""+t).replace(Tw,"|").replace(Ew,"[").replace(Aw,"]")}function Iw(t){return iu(t).replace(Yh,"{").replace(Jh,"}").replace(Zh,"^")}function Pl(t){return iu(t).replace(Gh,"%2B").replace(Ow,"+").replace(Kh,"%23").replace(ww,"%26").replace(Rw,"`").replace(Yh,"{").replace(Jh,"}").replace(Zh,"^")}function $w(t){return Pl(t).replace(Cw,"%3D")}function Pw(t){return iu(t).replace(Kh,"%23").replace(Sw,"%3F")}function Lw(t){return t==null?"":Pw(t).replace(kw,"%2F")}function ui(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Bw=/\/$/,Dw=t=>t.replace(Bw,"");function ml(t,n,r="/"){let i,o={},l="",u="";const c=n.indexOf("#");let d=n.indexOf("?");return c<d&&c>=0&&(d=-1),d>-1&&(i=n.slice(0,d),l=n.slice(d+1,c>-1?c:n.length),o=t(l)),c>-1&&(i=i||n.slice(0,c),u=n.slice(c,n.length)),i=Uw(i??n,r),{fullPath:i+(l&&"?")+l+u,path:i,query:o,hash:ui(u)}}function Mw(t,n){const r=n.query?t(n.query):"";return n.path+(r&&"?")+r+(n.hash||"")}function bd(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function zw(t,n,r){const i=n.matched.length-1,o=r.matched.length-1;return i>-1&&i===o&&xs(n.matched[i],r.matched[o])&&Qh(n.params,r.params)&&t(n.query)===t(r.query)&&n.hash===r.hash}function xs(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function Qh(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(!Nw(t[r],n[r]))return!1;return!0}function Nw(t,n){return $n(t)?xd(t,n):$n(n)?xd(n,t):t===n}function xd(t,n){return $n(n)?t.length===n.length&&t.every((r,i)=>r===n[i]):t.length===1&&t[0]===n}function Uw(t,n){if(t.startsWith("/"))return t;if(!t)return n;const r=n.split("/"),i=t.split("/"),o=i[i.length-1];(o===".."||o===".")&&i.push("");let l=r.length-1,u,c;for(u=0;u<i.length;u++)if(c=i[u],c!==".")if(c==="..")l>1&&l--;else break;return r.slice(0,l).join("/")+"/"+i.slice(u).join("/")}const br={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ci;(function(t){t.pop="pop",t.push="push"})(ci||(ci={}));var ei;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ei||(ei={}));function Fw(t){if(!t)if(ds){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Dw(t)}const jw=/^[^#]+#/;function Ww(t,n){return t.replace(jw,"#")+n}function qw(t,n){const r=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:n.behavior,left:i.left-r.left-(n.left||0),top:i.top-r.top-(n.top||0)}}const jo=()=>({left:window.scrollX,top:window.scrollY});function Hw(t){let n;if("el"in t){const r=t.el,i=typeof r=="string"&&r.startsWith("#"),o=typeof r=="string"?i?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!o)return;n=qw(o,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function wd(t,n){return(history.state?history.state.position-n:-1)+t}const Ll=new Map;function Vw(t,n){Ll.set(t,n)}function Kw(t){const n=Ll.get(t);return Ll.delete(t),n}let Gw=()=>location.protocol+"//"+location.host;function Xh(t,n){const{pathname:r,search:i,hash:o}=n,l=t.indexOf("#");if(l>-1){let c=o.includes(t.slice(l))?t.slice(l).length:1,d=o.slice(c);return d[0]!=="/"&&(d="/"+d),bd(d,"")}return bd(r,t)+i+o}function Zw(t,n,r,i){let o=[],l=[],u=null;const c=({state:b})=>{const v=Xh(t,location),O=r.value,w=n.value;let I=0;if(b){if(r.value=v,n.value=b,u&&u===O){u=null;return}I=w?b.position-w.position:0}else i(v);o.forEach(S=>{S(r.value,O,{delta:I,type:ci.pop,direction:I?I>0?ei.forward:ei.back:ei.unknown})})};function d(){u=r.value}function y(b){o.push(b);const v=()=>{const O=o.indexOf(b);O>-1&&o.splice(O,1)};return l.push(v),v}function g(){const{history:b}=window;b.state&&b.replaceState(ie({},b.state,{scroll:jo()}),"")}function m(){for(const b of l)b();l=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",g,{passive:!0}),{pauseListeners:d,listen:y,destroy:m}}function kd(t,n,r,i=!1,o=!1){return{back:t,current:n,forward:r,replaced:i,position:window.history.length,scroll:o?jo():null}}function Yw(t){const{history:n,location:r}=window,i={value:Xh(t,r)},o={value:n.state};o.value||l(i.value,{back:null,current:i.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function l(d,y,g){const m=t.indexOf("#"),b=m>-1?(r.host&&document.querySelector("base")?t:t.slice(m))+d:Gw()+t+d;try{n[g?"replaceState":"pushState"](y,"",b),o.value=y}catch(v){console.error(v),r[g?"replace":"assign"](b)}}function u(d,y){const g=ie({},n.state,kd(o.value.back,d,o.value.forward,!0),y,{position:o.value.position});l(d,g,!0),i.value=d}function c(d,y){const g=ie({},o.value,n.state,{forward:d,scroll:jo()});l(g.current,g,!0);const m=ie({},kd(i.value,d,null),{position:g.position+1},y);l(d,m,!1),i.value=d}return{location:i,state:o,push:c,replace:u}}function Jw(t){t=Fw(t);const n=Yw(t),r=Zw(t,n.state,n.location,n.replace);function i(l,u=!0){u||r.pauseListeners(),history.go(l)}const o=ie({location:"",base:t,go:i,createHref:Ww.bind(null,t)},n,r);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>n.state.value}),o}function Qw(t){return typeof t=="string"||t&&typeof t=="object"}function tp(t){return typeof t=="string"||typeof t=="symbol"}const ep=Symbol("");var Cd;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Cd||(Cd={}));function ws(t,n){return ie(new Error,{type:t,[ep]:!0},n)}function er(t,n){return t instanceof Error&&ep in t&&(n==null||!!(t.type&n))}const Sd="[^/]+?",Xw={sensitive:!1,strict:!1,start:!0,end:!0},t2=/[.+*?^${}()[\]/\\]/g;function e2(t,n){const r=ie({},Xw,n),i=[];let o=r.start?"^":"";const l=[];for(const y of t){const g=y.length?[]:[90];r.strict&&!y.length&&(o+="/");for(let m=0;m<y.length;m++){const b=y[m];let v=40+(r.sensitive?.25:0);if(b.type===0)m||(o+="/"),o+=b.value.replace(t2,"\\$&"),v+=40;else if(b.type===1){const{value:O,repeatable:w,optional:I,regexp:S}=b;l.push({name:O,repeatable:w,optional:I});const A=S||Sd;if(A!==Sd){v+=10;try{new RegExp(`(${A})`)}catch(P){throw new Error(`Invalid custom RegExp for param "${O}" (${A}): `+P.message)}}let E=w?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;m||(E=I&&y.length<2?`(?:/${E})`:"/"+E),I&&(E+="?"),o+=E,v+=20,I&&(v+=-8),w&&(v+=-20),A===".*"&&(v+=-50)}g.push(v)}i.push(g)}if(r.strict&&r.end){const y=i.length-1;i[y][i[y].length-1]+=.7000000000000001}r.strict||(o+="/?"),r.end?o+="$":r.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const u=new RegExp(o,r.sensitive?"":"i");function c(y){const g=y.match(u),m={};if(!g)return null;for(let b=1;b<g.length;b++){const v=g[b]||"",O=l[b-1];m[O.name]=v&&O.repeatable?v.split("/"):v}return m}function d(y){let g="",m=!1;for(const b of t){(!m||!g.endsWith("/"))&&(g+="/"),m=!1;for(const v of b)if(v.type===0)g+=v.value;else if(v.type===1){const{value:O,repeatable:w,optional:I}=v,S=O in y?y[O]:"";if($n(S)&&!w)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const A=$n(S)?S.join("/"):S;if(!A)if(I)b.length<2&&(g.endsWith("/")?g=g.slice(0,-1):m=!0);else throw new Error(`Missing required param "${O}"`);g+=A}}return g||"/"}return{re:u,score:i,keys:l,parse:c,stringify:d}}function n2(t,n){let r=0;for(;r<t.length&&r<n.length;){const i=n[r]-t[r];if(i)return i;r++}return t.length<n.length?t.length===1&&t[0]===80?-1:1:t.length>n.length?n.length===1&&n[0]===80?1:-1:0}function np(t,n){let r=0;const i=t.score,o=n.score;for(;r<i.length&&r<o.length;){const l=n2(i[r],o[r]);if(l)return l;r++}if(Math.abs(o.length-i.length)===1){if(Ed(i))return 1;if(Ed(o))return-1}return o.length-i.length}function Ed(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const r2={type:0,value:""},s2=/[a-zA-Z0-9_]/;function i2(t){if(!t)return[[]];if(t==="/")return[[r2]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(v){throw new Error(`ERR (${r})/"${y}": ${v}`)}let r=0,i=r;const o=[];let l;function u(){l&&o.push(l),l=[]}let c=0,d,y="",g="";function m(){y&&(r===0?l.push({type:0,value:y}):r===1||r===2||r===3?(l.length>1&&(d==="*"||d==="+")&&n(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:y,regexp:g,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):n("Invalid state to consume buffer"),y="")}function b(){y+=d}for(;c<t.length;){if(d=t[c++],d==="\\"&&r!==2){i=r,r=4;continue}switch(r){case 0:d==="/"?(y&&m(),u()):d===":"?(m(),r=1):b();break;case 4:b(),r=i;break;case 1:d==="("?r=2:s2.test(d)?b():(m(),r=0,d!=="*"&&d!=="?"&&d!=="+"&&c--);break;case 2:d===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+d:r=3:g+=d;break;case 3:m(),r=0,d!=="*"&&d!=="?"&&d!=="+"&&c--,g="";break;default:n("Unknown state");break}}return r===2&&n(`Unfinished custom RegExp for param "${y}"`),m(),u(),o}function o2(t,n,r){const i=e2(i2(t.path),r),o=ie(i,{record:t,parent:n,children:[],alias:[]});return n&&!o.record.aliasOf==!n.record.aliasOf&&n.children.push(o),o}function a2(t,n){const r=[],i=new Map;n=Od({strict:!1,end:!0,sensitive:!1},n);function o(m){return i.get(m)}function l(m,b,v){const O=!v,w=Rd(m);w.aliasOf=v&&v.record;const I=Od(n,m),S=[w];if("alias"in m){const P=typeof m.alias=="string"?[m.alias]:m.alias;for(const U of P)S.push(Rd(ie({},w,{components:v?v.record.components:w.components,path:U,aliasOf:v?v.record:w})))}let A,E;for(const P of S){const{path:U}=P;if(b&&U[0]!=="/"){const rt=b.record.path,F=rt[rt.length-1]==="/"?"":"/";P.path=b.record.path+(U&&F+U)}if(A=o2(P,b,I),v?v.alias.push(A):(E=E||A,E!==A&&E.alias.push(A),O&&m.name&&!Td(A)&&u(m.name)),rp(A)&&d(A),w.children){const rt=w.children;for(let F=0;F<rt.length;F++)l(rt[F],A,v&&v.children[F])}v=v||A}return E?()=>{u(E)}:ti}function u(m){if(tp(m)){const b=i.get(m);b&&(i.delete(m),r.splice(r.indexOf(b),1),b.children.forEach(u),b.alias.forEach(u))}else{const b=r.indexOf(m);b>-1&&(r.splice(b,1),m.record.name&&i.delete(m.record.name),m.children.forEach(u),m.alias.forEach(u))}}function c(){return r}function d(m){const b=c2(m,r);r.splice(b,0,m),m.record.name&&!Td(m)&&i.set(m.record.name,m)}function y(m,b){let v,O={},w,I;if("name"in m&&m.name){if(v=i.get(m.name),!v)throw ws(1,{location:m});I=v.record.name,O=ie(Ad(b.params,v.keys.filter(E=>!E.optional).concat(v.parent?v.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),m.params&&Ad(m.params,v.keys.map(E=>E.name))),w=v.stringify(O)}else if(m.path!=null)w=m.path,v=r.find(E=>E.re.test(w)),v&&(O=v.parse(w),I=v.record.name);else{if(v=b.name?i.get(b.name):r.find(E=>E.re.test(b.path)),!v)throw ws(1,{location:m,currentLocation:b});I=v.record.name,O=ie({},b.params,m.params),w=v.stringify(O)}const S=[];let A=v;for(;A;)S.unshift(A.record),A=A.parent;return{name:I,path:w,params:O,matched:S,meta:u2(S)}}t.forEach(m=>l(m));function g(){r.length=0,i.clear()}return{addRoute:l,resolve:y,removeRoute:u,clearRoutes:g,getRoutes:c,getRecordMatcher:o}}function Ad(t,n){const r={};for(const i of n)i in t&&(r[i]=t[i]);return r}function Rd(t){const n={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:l2(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function l2(t){const n={},r=t.props||!1;if("component"in t)n.default=r;else for(const i in t.components)n[i]=typeof r=="object"?r[i]:r;return n}function Td(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function u2(t){return t.reduce((n,r)=>ie(n,r.meta),{})}function Od(t,n){const r={};for(const i in t)r[i]=i in n?n[i]:t[i];return r}function c2(t,n){let r=0,i=n.length;for(;r!==i;){const l=r+i>>1;np(t,n[l])<0?i=l:r=l+1}const o=f2(t);return o&&(i=n.lastIndexOf(o,i-1)),i}function f2(t){let n=t;for(;n=n.parent;)if(rp(n)&&np(t,n)===0)return n}function rp({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function d2(t){const n={};if(t===""||t==="?")return n;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<i.length;++o){const l=i[o].replace(Gh," "),u=l.indexOf("="),c=ui(u<0?l:l.slice(0,u)),d=u<0?null:ui(l.slice(u+1));if(c in n){let y=n[c];$n(y)||(y=n[c]=[y]),y.push(d)}else n[c]=d}return n}function Id(t){let n="";for(let r in t){const i=t[r];if(r=$w(r),i==null){i!==void 0&&(n+=(n.length?"&":"")+r);continue}($n(i)?i.map(l=>l&&Pl(l)):[i&&Pl(i)]).forEach(l=>{l!==void 0&&(n+=(n.length?"&":"")+r,l!=null&&(n+="="+l))})}return n}function h2(t){const n={};for(const r in t){const i=t[r];i!==void 0&&(n[r]=$n(i)?i.map(o=>o==null?null:""+o):i==null?i:""+i)}return n}const p2=Symbol(""),$d=Symbol(""),Wo=Symbol(""),ou=Symbol(""),Bl=Symbol("");function Ws(){let t=[];function n(i){return t.push(i),()=>{const o=t.indexOf(i);o>-1&&t.splice(o,1)}}function r(){t=[]}return{add:n,list:()=>t.slice(),reset:r}}function kr(t,n,r,i,o,l=u=>u()){const u=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise((c,d)=>{const y=b=>{b===!1?d(ws(4,{from:r,to:n})):b instanceof Error?d(b):Qw(b)?d(ws(2,{from:n,to:b})):(u&&i.enterCallbacks[o]===u&&typeof b=="function"&&u.push(b),c())},g=l(()=>t.call(i&&i.instances[o],n,r,y));let m=Promise.resolve(g);t.length<3&&(m=m.then(y)),m.catch(b=>d(b))})}function vl(t,n,r,i,o=l=>l()){const l=[];for(const u of t)for(const c in u.components){let d=u.components[c];if(!(n!=="beforeRouteEnter"&&!u.instances[c]))if(Vh(d)){const g=(d.__vccOpts||d)[n];g&&l.push(kr(g,r,i,u,c,o))}else{let y=d();l.push(()=>y.then(g=>{if(!g)throw new Error(`Couldn't resolve component "${c}" at "${u.path}"`);const m=xw(g)?g.default:g;u.mods[c]=g,u.components[c]=m;const v=(m.__vccOpts||m)[n];return v&&kr(v,r,i,u,c,o)()}))}}return l}function Pd(t){const n=In(Wo),r=In(ou),i=le(()=>{const d=ms(t.to);return n.resolve(d)}),o=le(()=>{const{matched:d}=i.value,{length:y}=d,g=d[y-1],m=r.matched;if(!g||!m.length)return-1;const b=m.findIndex(xs.bind(null,g));if(b>-1)return b;const v=Ld(d[y-2]);return y>1&&Ld(g)===v&&m[m.length-1].path!==v?m.findIndex(xs.bind(null,d[y-2])):b}),l=le(()=>o.value>-1&&y2(r.params,i.value.params)),u=le(()=>o.value>-1&&o.value===r.matched.length-1&&Qh(r.params,i.value.params));function c(d={}){if(_2(d)){const y=n[ms(t.replace)?"replace":"push"](ms(t.to)).catch(ti);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>y),y}return Promise.resolve()}return{route:i,href:le(()=>i.value.href),isActive:l,isExactActive:u,navigate:c}}function g2(t){return t.length===1?t[0]:t}const m2=_h({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Pd,setup(t,{slots:n}){const r=Fe(Pd(t)),{options:i}=In(Wo),o=le(()=>({[Bd(t.activeClass,i.linkActiveClass,"router-link-active")]:r.isActive,[Bd(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const l=n.default&&g2(n.default(r));return t.custom?l:Wh("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:o.value},l)}}}),v2=m2;function _2(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function y2(t,n){for(const r in n){const i=n[r],o=t[r];if(typeof i=="string"){if(i!==o)return!1}else if(!$n(o)||o.length!==i.length||i.some((l,u)=>l!==o[u]))return!1}return!0}function Ld(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Bd=(t,n,r)=>t??n??r,b2=_h({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:r}){const i=In(Bl),o=le(()=>t.route||i.value),l=In($d,0),u=le(()=>{let y=ms(l);const{matched:g}=o.value;let m;for(;(m=g[y])&&!m.components;)y++;return y}),c=le(()=>o.value.matched[u.value]);ho($d,le(()=>u.value+1)),ho(p2,c),ho(Bl,o);const d=pt();return Er(()=>[d.value,c.value,t.name],([y,g,m],[b,v,O])=>{g&&(g.instances[m]=y,v&&v!==g&&y&&y===b&&(g.leaveGuards.size||(g.leaveGuards=v.leaveGuards),g.updateGuards.size||(g.updateGuards=v.updateGuards))),y&&g&&(!v||!xs(g,v)||!b)&&(g.enterCallbacks[m]||[]).forEach(w=>w(y))},{flush:"post"}),()=>{const y=o.value,g=t.name,m=c.value,b=m&&m.components[g];if(!b)return Dd(r.default,{Component:b,route:y});const v=m.props[g],O=v?v===!0?y.params:typeof v=="function"?v(y):v:null,I=Wh(b,ie({},O,n,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(m.instances[g]=null)},ref:d}));return Dd(r.default,{Component:I,route:y})||I}}});function Dd(t,n){if(!t)return null;const r=t(n);return r.length===1?r[0]:r}const x2=b2;function w2(t){const n=a2(t.routes,t),r=t.parseQuery||d2,i=t.stringifyQuery||Id,o=t.history,l=Ws(),u=Ws(),c=Ws(),d=Ab(br);let y=br;ds&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=gl.bind(null,G=>""+G),m=gl.bind(null,Lw),b=gl.bind(null,ui);function v(G,W){let z,ut;return tp(G)?(z=n.getRecordMatcher(G),ut=W):ut=G,n.addRoute(ut,z)}function O(G){const W=n.getRecordMatcher(G);W&&n.removeRoute(W)}function w(){return n.getRoutes().map(G=>G.record)}function I(G){return!!n.getRecordMatcher(G)}function S(G,W){if(W=ie({},W||d.value),typeof G=="string"){const h=ml(r,G,W.path),V=n.resolve({path:h.path},W),j=o.createHref(h.fullPath);return ie(h,V,{params:b(V.params),hash:ui(h.hash),redirectedFrom:void 0,href:j})}let z;if(G.path!=null)z=ie({},G,{path:ml(r,G.path,W.path).path});else{const h=ie({},G.params);for(const V in h)h[V]==null&&delete h[V];z=ie({},G,{params:m(h)}),W.params=m(W.params)}const ut=n.resolve(z,W),Et=G.hash||"";ut.params=g(b(ut.params));const B=Mw(i,ie({},G,{hash:Iw(Et),path:ut.path})),q=o.createHref(B);return ie({fullPath:B,hash:Et,query:i===Id?h2(G.query):G.query||{}},ut,{redirectedFrom:void 0,href:q})}function A(G){return typeof G=="string"?ml(r,G,d.value.path):ie({},G)}function E(G,W){if(y!==G)return ws(8,{from:W,to:G})}function P(G){return F(G)}function U(G){return P(ie(A(G),{replace:!0}))}function rt(G){const W=G.matched[G.matched.length-1];if(W&&W.redirect){const{redirect:z}=W;let ut=typeof z=="function"?z(G):z;return typeof ut=="string"&&(ut=ut.includes("?")||ut.includes("#")?ut=A(ut):{path:ut},ut.params={}),ie({query:G.query,hash:G.hash,params:ut.path!=null?{}:G.params},ut)}}function F(G,W){const z=y=S(G),ut=d.value,Et=G.state,B=G.force,q=G.replace===!0,h=rt(z);if(h)return F(ie(A(h),{state:typeof h=="object"?ie({},Et,h.state):Et,force:B,replace:q}),W||z);const V=z;V.redirectedFrom=W;let j;return!B&&zw(i,ut,z)&&(j=ws(16,{to:V,from:ut}),ot(ut,ut,!0,!1)),(j?Promise.resolve(j):D(V,ut)).catch(C=>er(C)?er(C,2)?C:$t(C):St(C,V,ut)).then(C=>{if(C){if(er(C,2))return F(ie({replace:q},A(C.to),{state:typeof C.to=="object"?ie({},Et,C.to.state):Et,force:B}),W||V)}else C=k(V,ut,!0,q,Et);return st(V,ut,C),C})}function M(G,W){const z=E(G,W);return z?Promise.reject(z):Promise.resolve()}function L(G){const W=At.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext(G):G()}function D(G,W){let z;const[ut,Et,B]=k2(G,W);z=vl(ut.reverse(),"beforeRouteLeave",G,W);for(const h of ut)h.leaveGuards.forEach(V=>{z.push(kr(V,G,W))});const q=M.bind(null,G,W);return z.push(q),yt(z).then(()=>{z=[];for(const h of l.list())z.push(kr(h,G,W));return z.push(q),yt(z)}).then(()=>{z=vl(Et,"beforeRouteUpdate",G,W);for(const h of Et)h.updateGuards.forEach(V=>{z.push(kr(V,G,W))});return z.push(q),yt(z)}).then(()=>{z=[];for(const h of B)if(h.beforeEnter)if($n(h.beforeEnter))for(const V of h.beforeEnter)z.push(kr(V,G,W));else z.push(kr(h.beforeEnter,G,W));return z.push(q),yt(z)}).then(()=>(G.matched.forEach(h=>h.enterCallbacks={}),z=vl(B,"beforeRouteEnter",G,W,L),z.push(q),yt(z))).then(()=>{z=[];for(const h of u.list())z.push(kr(h,G,W));return z.push(q),yt(z)}).catch(h=>er(h,8)?h:Promise.reject(h))}function st(G,W,z){c.list().forEach(ut=>L(()=>ut(G,W,z)))}function k(G,W,z,ut,Et){const B=E(G,W);if(B)return B;const q=W===br,h=ds?history.state:{};z&&(ut||q?o.replace(G.fullPath,ie({scroll:q&&h&&h.scroll},Et)):o.push(G.fullPath,Et)),d.value=G,ot(G,W,z,q),$t()}let K;function _(){K||(K=o.listen((G,W,z)=>{if(!kt.listening)return;const ut=S(G),Et=rt(ut);if(Et){F(ie(Et,{replace:!0,force:!0}),ut).catch(ti);return}y=ut;const B=d.value;ds&&Vw(wd(B.fullPath,z.delta),jo()),D(ut,B).catch(q=>er(q,12)?q:er(q,2)?(F(ie(A(q.to),{force:!0}),ut).then(h=>{er(h,20)&&!z.delta&&z.type===ci.pop&&o.go(-1,!1)}).catch(ti),Promise.reject()):(z.delta&&o.go(-z.delta,!1),St(q,ut,B))).then(q=>{q=q||k(ut,B,!1),q&&(z.delta&&!er(q,8)?o.go(-z.delta,!1):z.type===ci.pop&&er(q,20)&&o.go(-1,!1)),st(ut,B,q)}).catch(ti)}))}let lt=Ws(),wt=Ws(),ct;function St(G,W,z){$t(G);const ut=wt.list();return ut.length?ut.forEach(Et=>Et(G,W,z)):console.error(G),Promise.reject(G)}function bt(){return ct&&d.value!==br?Promise.resolve():new Promise((G,W)=>{lt.add([G,W])})}function $t(G){return ct||(ct=!G,_(),lt.list().forEach(([W,z])=>G?z(G):W()),lt.reset()),G}function ot(G,W,z,ut){const{scrollBehavior:Et}=t;if(!ds||!Et)return Promise.resolve();const B=!z&&Kw(wd(G.fullPath,0))||(ut||!z)&&history.state&&history.state.scroll||null;return pi().then(()=>Et(G,W,B)).then(q=>q&&Hw(q)).catch(q=>St(q,G,W))}const it=G=>o.go(G);let Pt;const At=new Set,kt={currentRoute:d,listening:!0,addRoute:v,removeRoute:O,clearRoutes:n.clearRoutes,hasRoute:I,getRoutes:w,resolve:S,options:t,push:P,replace:U,go:it,back:()=>it(-1),forward:()=>it(1),beforeEach:l.add,beforeResolve:u.add,afterEach:c.add,onError:wt.add,isReady:bt,install(G){const W=this;G.component("RouterLink",v2),G.component("RouterView",x2),G.config.globalProperties.$router=W,Object.defineProperty(G.config.globalProperties,"$route",{enumerable:!0,get:()=>ms(d)}),ds&&!Pt&&d.value===br&&(Pt=!0,P(o.location).catch(Et=>{}));const z={};for(const Et in br)Object.defineProperty(z,Et,{get:()=>d.value[Et],enumerable:!0});G.provide(Wo,W),G.provide(ou,ch(z)),G.provide(Bl,d);const ut=G.unmount;At.add(G),G.unmount=function(){At.delete(G),At.size<1&&(y=br,K&&K(),K=null,d.value=br,Pt=!1,ct=!1),ut()}}};function yt(G){return G.reduce((W,z)=>W.then(()=>L(z)),Promise.resolve())}return kt}function k2(t,n){const r=[],i=[],o=[],l=Math.max(n.matched.length,t.matched.length);for(let u=0;u<l;u++){const c=n.matched[u];c&&(t.matched.find(y=>xs(y,c))?i.push(c):r.push(c));const d=t.matched[u];d&&(n.matched.find(y=>xs(y,d))||o.push(d))}return[r,i,o]}function mi(){return In(Wo)}function au(t){return In(ou)}const lu=(t,n)=>{const r=t.__vccOpts||t;for(const[i,o]of n)r[i]=o;return r},C2={key:0,class:"flex h-screen bg-slate-50 font-sans"},S2={class:"w-60 bg-white border-r border-slate-200 flex flex-col"},E2={class:"p-6 border-b border-slate-200"},A2={class:"text-base text-slate-500 mt-2"},R2={class:"flex-grow p-4 space-y-2"},T2={class:"flex-1 overflow-y-auto p-10"},O2={key:1},I2={__name:"App",setup(t){const n=au(),r=mi(),i=pt(!1),o=pt({}),l=()=>{const y=localStorage.getItem("teacherToken"),g=localStorage.getItem("teacherInfo");i.value=!!y,o.value=g?JSON.parse(g):{}},u=le(()=>n.meta.layout||"default"),c=()=>{localStorage.removeItem("teacherToken"),localStorage.removeItem("teacherInfo"),l(),r.push({name:"auth"})},d=y=>{(y.key==="teacherToken"||y.key==="teacherInfo")&&l()};return Ye(()=>{l(),window.addEventListener("storage",d),r.afterEach(()=>{l()})}),Kr(()=>{window.removeEventListener("storage",d)}),(y,g)=>{const m=Eo("router-link"),b=Eo("router-view");return u.value==="default"&&i.value?(Z(),Y("div",C2,[f("aside",S2,[f("div",E2,[g[0]||(g[0]=f("h1",{class:"text-3xl font-bold text-sky-600"},"智慧班級",-1)),f("p",A2,"歡迎，"+ft(o.value.name)+" 老師",1)]),f("nav",R2,[ce(m,{to:"/dashboard",class:"nav-link"},{default:cn(()=>[...g[1]||(g[1]=[f("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2a4 4 0 00-4-4H3V9h2a4 4 0 004-4V3l4 4-4 4zm11-1V9l-4-4 4-4v2a4 4 0 014 4h2v2h-2a4 4 0 01-4 4z"})],-1),f("span",{class:"text-lg"},"課堂儀表板",-1)])]),_:1}),ce(m,{to:"/seating-chart",class:"nav-link"},{default:cn(()=>[...g[2]||(g[2]=[f("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"})],-1),f("span",{class:"text-lg"},"座位表",-1)])]),_:1}),ce(m,{to:"/students",class:"nav-link"},{default:cn(()=>[...g[3]||(g[3]=[f("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),f("span",{class:"text-lg"},"學生管理",-1)])]),_:1}),ce(m,{to:"/grades",class:"nav-link"},{default:cn(()=>[...g[4]||(g[4]=[f("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),f("span",{class:"text-lg"},"成績管理",-1)])]),_:1}),ce(m,{to:"/assignments",class:"nav-link"},{default:cn(()=>[...g[5]||(g[5]=[f("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5V3a2 2 0 012-2h2a2 2 0 012 2v2"})],-1),f("span",{class:"text-lg"},"作業管理",-1)])]),_:1}),ce(m,{to:"/pingpong-teacher",class:"nav-link"},{default:cn(()=>[...g[6]||(g[6]=[f("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),f("span",{class:"text-lg"},"PingPong",-1)])]),_:1}),ce(m,{to:"/quiz",class:"nav-link"},{default:cn(()=>[...g[7]||(g[7]=[f("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),f("span",{class:"text-lg"},"搶答競賽",-1)])]),_:1}),ce(m,{to:"/",class:"nav-link"},{default:cn(()=>[...g[8]||(g[8]=[f("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),f("span",{class:"text-lg"},"首頁",-1)])]),_:1})]),f("div",{class:"p-6 mt-auto"},[f("button",{onClick:c,class:"w-full flex items-center justify-center gap-3 p-4 rounded-xl text-red-600 bg-red-100 hover:bg-red-200 transition-colors font-semibold text-lg"},[...g[9]||(g[9]=[f("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),f("span",null,"登出",-1)])])])]),f("main",T2,[ce(b)])])):(Z(),Y("div",O2,[ce(b)]))}}},$2=lu(I2,[["__scopeId","data-v-4a67df17"]]),Kt=(t,n={})=>{const r=localStorage.getItem("studentToken")||localStorage.getItem("teacherToken"),i={...n.headers};r&&(i.Authorization=`Bearer ${r}`),n.body instanceof FormData||(i["Content-Type"]="application/json");const o={...n,headers:i};return fetch(t,o)},P2={class:"flex justify-between items-start mb-8"},L2={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},B2={class:"card p-8 flex flex-col items-start hover:shadow-xl transition-shadow"},D2={class:"card p-8 flex flex-col items-start hover:shadow-xl transition-shadow"},M2={class:"card p-8 flex flex-col items-start hover:shadow-xl transition-shadow"},z2=["src"],N2={class:"mt-4 text-xl font-mono bg-gray-100 p-3 rounded-md"},U2={__name:"HomeView",setup(t){const n=pt(""),r=pt(!1),i=le(()=>n.value?`https://api.qrserver.com/v1/create-qr-code/?size=512x512&data=${encodeURIComponent(n.value)}`:"");return Ye(async()=>{try{const l=await(await Kt("/api/server-info")).json();n.value=l.url}catch(o){console.error("無法獲取伺服器資訊:",o)}}),(o,l)=>{const u=Eo("router-link");return Z(),Y("div",null,[f("div",P2,[l[4]||(l[4]=f("div",null,[f("h1",{class:"text-4xl font-bold text-slate-800 mb-2"},"歡迎使用智慧班級系統"),f("p",{class:"text-lg text-slate-600"},"您可以從左側導覽列選擇功能，或透過下方快速入口開始。")],-1)),f("button",{onClick:l[0]||(l[0]=c=>r.value=!0),class:"btn btn-secondary flex items-center gap-2"},[...l[3]||(l[3]=[f("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v1m6 11h2m-6.5 6.5v1M4.5 12.5h-1M12 20.5v-1m7.5-6.5h1M4 12V6a2 2 0 012-2h6v6h6v6a2 2 0 01-2 2H6a2 2 0 01-2-2v-2m-2-4h2m18 0h2M12 7.5h6.5M7.5 12v6.5m7.5-11h2"})],-1),ve(" 顯示連線 QR Code ",-1)])])]),f("div",L2,[f("div",B2,[l[6]||(l[6]=qr('<div class="bg-sky-100 p-4 rounded-xl mb-4"><svg class="w-10 h-10 text-sky-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2a4 4 0 00-4-4H3V9h2a4 4 0 004-4V3l4 4-4 4zm11-1V9l-4-4 4-4v2a4 4 0 014 4h2v2h-2a4 4 0 01-4 4z"></path></svg></div><h2 class="text-2xl font-bold text-slate-800">課堂儀表板</h2><p class="text-base text-slate-600 mt-2 flex-grow">即時掌握學生出缺席、課堂表現，並進行隨機抽籤。</p>',3)),ce(u,{to:"/dashboard",class:"btn btn-primary mt-6 w-full text-center"},{default:cn(()=>[...l[5]||(l[5]=[ve("前往儀表板",-1)])]),_:1})]),f("div",D2,[l[8]||(l[8]=qr('<div class="bg-teal-100 p-4 rounded-xl mb-4"><svg class="w-10 h-10 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><h2 class="text-2xl font-bold text-slate-800">學生管理</h2><p class="text-base text-slate-600 mt-2 flex-grow">管理班級學生名單、帳號、密碼，並支援批次匯入。</p>',3)),ce(u,{to:"/students",class:"btn bg-teal-500 hover:bg-teal-600 mt-6 w-full text-center"},{default:cn(()=>[...l[7]||(l[7]=[ve("管理學生",-1)])]),_:1})]),f("div",M2,[l[10]||(l[10]=qr('<div class="bg-amber-100 p-4 rounded-xl mb-4"><svg class="w-10 h-10 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h2 class="text-2xl font-bold text-slate-800">成績管理</h2><p class="text-base text-slate-600 mt-2 flex-grow">登錄平時測驗、定期評量成績，並查看課堂表現總分。</p>',3)),ce(u,{to:"/grades",class:"btn bg-amber-500 hover:bg-amber-600 mt-6 w-full text-center"},{default:cn(()=>[...l[9]||(l[9]=[ve("登錄成績",-1)])]),_:1})])]),r.value?(Z(),Y("div",{key:0,onClick:l[2]||(l[2]=c=>r.value=!1),class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4"},[f("div",{onClick:l[1]||(l[1]=We(()=>{},["stop"])),class:"bg-white p-8 rounded-2xl text-center"},[l[11]||(l[11]=f("h3",{class:"text-2xl font-bold mb-4"},"學生連線網址",-1)),f("img",{src:i.value,alt:"Connection QR Code",class:"w-80 h-80 md:w-96 md:h-96 lg:w-[500px] lg:h-[500px] mx-auto border-8 border-gray-200 rounded-lg"},null,8,z2),f("p",N2,ft(n.value),1),l[12]||(l[12]=f("p",{class:"mt-2 text-gray-500"},"請學生使用手機掃描，或在瀏覽器輸入上方網址",-1))])])):Rt("",!0)])}}},F2={class:"card p-8"},j2={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},W2={class:"flex gap-4 flex-wrap"},q2={class:"w-full md:w-1/3"},H2={key:0,class:"text-red-500 mb-4"},V2={key:1,class:"text-green-500 mb-4"},K2={class:"overflow-x-auto"},G2={class:"min-w-full divide-y divide-gray-200"},Z2={class:"bg-slate-50"},Y2={key:0},J2={key:0},Q2={key:0},X2={key:0},tk={key:0},ek={class:"bg-white divide-y divide-gray-200"},nk={key:0},rk={key:1},sk={class:"table-cell"},ik={class:"table-cell font-medium"},ok={class:"table-cell"},ak={class:"table-cell"},lk={class:"table-cell"},uk={class:"table-cell text-right"},ck=["onClick"],fk=["onClick"],dk={key:0,class:"fixed z-10 inset-0 overflow-y-auto"},hk={class:"flex items-center justify-center min-h-screen"},pk={class:"bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all max-w-lg w-full"},gk={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},mk={class:"text-lg leading-6 font-medium text-gray-900"},vk={class:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4"},_k={class:"block text-sm font-medium text-gray-700"},yk=["required"],bk={class:"sm:col-span-2"},xk={key:0,class:"text-red-500 text-sm sm:col-span-2"},wk={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},kk={__name:"StudentManagementView",setup(t){const n=pt([]),r=pt(!1),i=pt(null),o=pt({}),l=pt(!0),u=pt(""),c=pt(""),d=pt(""),y=pt(null),g=pt(null),m=pt(""),b=pt("seat_number"),v=pt("asc"),O=L=>L==null?"":String(L).padStart(2,"0"),w=le(()=>{let L=n.value;if(m.value){const D=m.value.toLowerCase();L=L.filter(st=>{var k,K,_;return((k=st.name)==null?void 0:k.toLowerCase().includes(D))||((K=st.student_id)==null?void 0:K.toLowerCase().includes(D))||((_=st.account)==null?void 0:_.toLowerCase().includes(D))})}return b.value&&L.sort((D,st)=>{let k=D[b.value],K=st[b.value];return b.value==="seat_number"&&(k=Number(k||1/0),K=Number(K||1/0)),k<K?v.value==="asc"?-1:1:k>K?v.value==="asc"?1:-1:0}),L}),I=L=>{b.value===L?v.value=v.value==="asc"?"desc":"asc":(b.value=L,v.value="asc")},S=async()=>{l.value=!0,u.value="";try{const L=await Kt("/api/students");if(!L.ok)throw new Error("無法讀取學生資料");n.value=await L.json()}catch(L){u.value=`錯誤: ${L.message}`}finally{l.value=!1}},A=L=>{d.value="",i.value=L,o.value=L?{...L,password:""}:{student_id:"",name:"",class:"",seat_number:"",gender:"",account:"",password:""},r.value=!0},E=async()=>{d.value="";const L=i.value?"PUT":"POST",D=i.value?`/api/students/${i.value.id}`:"/api/students",st={...o.value};i.value&&!st.password&&delete st.password;try{const k=await Kt(D,{method:L,body:JSON.stringify(st)}),K=await k.json();if(!k.ok)throw new Error(K.error||"儲存失敗");await S(),r.value=!1,c.value=`學生資料已成功${i.value?"更新":"新增"}！`,setTimeout(()=>c.value="",3e3)}catch(k){d.value=k.message}},P=async L=>{if(confirm("確定要刪除這位學生嗎？")){u.value="";try{const D=await Kt(`/api/students/${L}`,{method:"DELETE"});if(!D.ok)throw new Error((await D.json()).error||"刪除失敗");n.value=n.value.filter(st=>st.id!==L),c.value="學生已成功刪除！",setTimeout(()=>c.value="",3e3)}catch(D){u.value=`錯誤: ${D.message}`}}},U=()=>y.value.click(),rt=async L=>{const D=L.target.files[0];if(!D)return;const st=new FormData;st.append("file",D),u.value="",c.value="正在上傳並匯入資料...";try{const k=await Kt("/api/students/import",{method:"POST",body:st}),K=await k.json();if(!k.ok)throw new Error(K.error||"匯入失敗");c.value=K.message||"匯入成功！",await S()}catch(k){u.value=`錯誤: ${k.message}`,c.value=""}finally{y.value.value=""}},F=()=>g.value.click(),M=async L=>{const D=L.target.files;if(!D.length)return;const st=new FormData;for(const k of D)st.append("photos",k);u.value="",c.value=`正在上傳 ${D.length} 張照片...`;try{const k=await Kt("/api/students/photos/upload",{method:"POST",body:st}),K=await k.json();if(!k.ok)throw new Error(K.error||"照片上傳失敗");c.value=K.message||"照片上傳完成！",setTimeout(()=>c.value="",5e3)}catch(k){u.value=`錯誤: ${k.message}`,c.value=""}finally{g.value.value=""}};return Ye(S),(L,D)=>(Z(),Y("div",null,[D[31]||(D[31]=f("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"學生管理",-1)),f("div",F2,[f("div",j2,[f("div",W2,[f("button",{onClick:D[0]||(D[0]=st=>A(null)),class:"btn btn-primary"}," 新增學生 "),f("div",null,[f("input",{type:"file",ref_key:"fileInput",ref:y,onChange:rt,class:"hidden",accept:".xlsx, .xls, .csv"},null,544),f("button",{onClick:U,class:"btn btn-success"}," 從檔案匯入 ")]),f("div",null,[f("input",{type:"file",ref_key:"photoInput",ref:g,onChange:M,multiple:"",class:"hidden",accept:"image/jpeg, image/png"},null,544),f("button",{onClick:F,class:"btn bg-orange-500 hover:bg-orange-600"}," 上傳學生照片 ")])]),f("div",q2,[Mt(f("input",{type:"text","onUpdate:modelValue":D[1]||(D[1]=st=>m.value=st),placeholder:"搜尋姓名、學號、帳號...",class:"form-input w-full text-base py-2"},null,512),[[Ft,m.value]])])]),u.value?(Z(),Y("p",H2,ft(u.value),1)):Rt("",!0),c.value?(Z(),Y("p",V2,ft(c.value),1)):Rt("",!0),f("div",K2,[f("table",G2,[f("thead",Z2,[f("tr",null,[f("th",{onClick:D[2]||(D[2]=st=>I("student_id")),class:"table-header cursor-pointer"},[D[16]||(D[16]=ve("學號 ",-1)),b.value==="student_id"?(Z(),Y("span",Y2,ft(v.value==="asc"?"▲":"▼"),1)):Rt("",!0)]),f("th",{onClick:D[3]||(D[3]=st=>I("name")),class:"table-header cursor-pointer"},[D[17]||(D[17]=ve("姓名 ",-1)),b.value==="name"?(Z(),Y("span",J2,ft(v.value==="asc"?"▲":"▼"),1)):Rt("",!0)]),f("th",{onClick:D[4]||(D[4]=st=>I("class")),class:"table-header cursor-pointer"},[D[18]||(D[18]=ve("班級 ",-1)),b.value==="class"?(Z(),Y("span",Q2,ft(v.value==="asc"?"▲":"▼"),1)):Rt("",!0)]),f("th",{onClick:D[5]||(D[5]=st=>I("seat_number")),class:"table-header cursor-pointer"},[D[19]||(D[19]=ve("座號 ",-1)),b.value==="seat_number"?(Z(),Y("span",X2,ft(v.value==="asc"?"▲":"▼"),1)):Rt("",!0)]),f("th",{onClick:D[6]||(D[6]=st=>I("account")),class:"table-header cursor-pointer"},[D[20]||(D[20]=ve("帳號 ",-1)),b.value==="account"?(Z(),Y("span",tk,ft(v.value==="asc"?"▲":"▼"),1)):Rt("",!0)]),D[21]||(D[21]=f("th",{class:"table-header text-right"},"操作",-1))])]),f("tbody",ek,[l.value?(Z(),Y("tr",nk,[...D[22]||(D[22]=[f("td",{colspan:"6",class:"text-center py-4"},"正在載入學生資料...",-1)])])):w.value.length===0?(Z(),Y("tr",rk,[...D[23]||(D[23]=[f("td",{colspan:"6",class:"text-center py-4 text-gray-500"},"找不到符合條件的學生。",-1)])])):Rt("",!0),(Z(!0),Y(Wt,null,te(w.value,st=>(Z(),Y("tr",{key:st.id,class:"hover:bg-slate-50"},[f("td",sk,ft(st.student_id),1),f("td",ik,ft(st.name),1),f("td",ok,ft(st.class),1),f("td",ak,ft(O(st.seat_number)),1),f("td",lk,ft(st.account),1),f("td",uk,[f("button",{onClick:We(k=>A(st),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 font-medium"},"編輯",8,ck),f("button",{onClick:We(k=>P(st.id),["prevent"]),class:"text-red-600 hover:text-red-900 ml-4 font-medium"},"刪除",8,fk)])]))),128))])])])]),r.value?(Z(),Y("div",dk,[f("div",hk,[f("div",{class:"fixed inset-0 bg-gray-500 opacity-75",onClick:D[7]||(D[7]=st=>r.value=!1)}),f("div",pk,[f("form",{onSubmit:We(E,["prevent"])},[f("div",gk,[f("h3",mk,ft(i.value?"編輯學生":"新增學生"),1),f("div",vk,[f("div",null,[D[24]||(D[24]=f("label",{class:"block text-sm font-medium text-gray-700"},"學號",-1)),Mt(f("input",{type:"text","onUpdate:modelValue":D[8]||(D[8]=st=>o.value.student_id=st),required:"",class:"mt-1 form-input"},null,512),[[Ft,o.value.student_id]])]),f("div",null,[D[25]||(D[25]=f("label",{class:"block text-sm font-medium text-gray-700"},"姓名",-1)),Mt(f("input",{type:"text","onUpdate:modelValue":D[9]||(D[9]=st=>o.value.name=st),required:"",class:"mt-1 form-input"},null,512),[[Ft,o.value.name]])]),f("div",null,[D[26]||(D[26]=f("label",{class:"block text-sm font-medium text-gray-700"},"帳號",-1)),Mt(f("input",{type:"text","onUpdate:modelValue":D[10]||(D[10]=st=>o.value.account=st),required:"",class:"mt-1 form-input"},null,512),[[Ft,o.value.account]])]),f("div",null,[f("label",_k,"密碼 ("+ft(i.value?"留空表示不變更":"必填")+")",1),Mt(f("input",{type:"password","onUpdate:modelValue":D[11]||(D[11]=st=>o.value.password=st),required:!i.value,class:"mt-1 form-input"},null,8,yk),[[Ft,o.value.password]])]),f("div",null,[D[27]||(D[27]=f("label",{class:"block text-sm font-medium text-gray-700"},"班級",-1)),Mt(f("input",{type:"text","onUpdate:modelValue":D[12]||(D[12]=st=>o.value.class=st),class:"mt-1 form-input"},null,512),[[Ft,o.value.class]])]),f("div",null,[D[28]||(D[28]=f("label",{class:"block text-sm font-medium text-gray-700"},"座號",-1)),Mt(f("input",{type:"number","onUpdate:modelValue":D[13]||(D[13]=st=>o.value.seat_number=st),class:"mt-1 form-input"},null,512),[[Ft,o.value.seat_number]])]),f("div",bk,[D[29]||(D[29]=f("label",{class:"block text-sm font-medium text-gray-700"},"性別",-1)),Mt(f("input",{type:"text","onUpdate:modelValue":D[14]||(D[14]=st=>o.value.gender=st),class:"mt-1 form-input"},null,512),[[Ft,o.value.gender]])]),d.value?(Z(),Y("p",xk,ft(d.value),1)):Rt("",!0)])]),f("div",wk,[D[30]||(D[30]=f("button",{type:"submit",class:"btn btn-primary w-full sm:w-auto"},"儲存",-1)),f("button",{type:"button",onClick:D[15]||(D[15]=st=>r.value=!1),class:"btn btn-secondary mt-2 sm:mt-0 sm:ml-3 w-full sm:w-auto"},"取消")])],32)])])])):Rt("",!0)]))}},Ck=lu(kk,[["__scopeId","data-v-0cf4172d"]]),Sk={class:"grid grid-cols-1 lg:grid-cols-5 gap-8"},Ek={class:"lg:col-span-1 card h-full"},Ak={class:"mb-4"},Rk={class:"max-h-[50vh] overflow-y-auto pr-2"},Tk=["onDragstart"],Ok={class:"font-bold text-sky-600"},Ik={class:"space-y-3 mb-4"},$k={class:"flex items-center"},Pk={class:"flex items-center"},Lk={key:0,class:"text-green-600 mt-2"},Bk={key:1,class:"text-red-600 mt-2"},Dk={class:"lg:col-span-4 card p-4"},Mk={key:0,class:"text-center py-10"},zk=["onDrop"],Nk={key:0,class:"w-full h-full p-2 relative flex flex-col justify-center items-center text-center"},Uk=["src"],Fk={class:"font-bold truncate text-slate-800"},jk={class:"text-sky-600"},Wk={class:"text-gray-500 text-sm truncate"},qk=["onClick"],Hk={key:1,class:"text-slate-400 text-sm"},Vk={key:0,class:"fixed z-10 inset-0 overflow-y-auto"},Kk={class:"flex items-center justify-center min-h-screen"},Gk={class:"bg-white rounded-lg shadow-xl transform transition-all max-w-lg w-full"},Zk={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},_l="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2NkY2RjZCI+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgM2MxLjY2IDAgMyAxLjM0IDMgM3MtMS4zNCAzLTMgMy0zLTEuMzQtMy0zIDEuMzQtMyAzLTMzem0wIDE0LjJjLTIuNSAwLTQuNzEtMS4yOC02LTMuMjIuMDMtMS40OSw0LTMuMDggNi0zLjA4czUuOTcgMS4wOSA2IDMuMDhjLTEuMjkgMS45NC0zLjUgMy4yMi02IDMuMjJ6Ii8+PC9zdmc+",Yk={__name:"SeatingChartView",setup(t){const n=pt([]),r=pt(6),i=pt(5),o=pt({}),l=pt(!0),u=pt(""),c=pt(""),d=pt(""),y=pt(new Set),g=pt(!1),m=F=>F==null?"":String(F).padStart(2,"0"),b=le(()=>({display:"grid",gridTemplateColumns:`repeat(${i.value}, 1fr)`})),v=le(()=>{const F=new Set(Object.values(o.value).filter(Boolean).map(M=>M.id));return n.value.filter(M=>!F.has(M.id)).filter(M=>M.name.toLowerCase().includes(d.value.toLowerCase()))}),O=async()=>{l.value=!0,u.value="";try{const[F,M,L]=await Promise.all([Kt("/api/students"),Kt("/api/seating-chart"),Kt("/api/students/photos")]);if(!F.ok)throw new Error("無法讀取學生列表");if(n.value=await F.json(),!M.ok)throw new Error("無法讀取座位表資料");const D=await M.json();if(!L.ok)throw new Error("無法讀取學生照片列表");y.value=new Set(await L.json()),r.value=D.rows||6,i.value=D.cols||5,o.value=D.seats||{}}catch(F){u.value=F.message}finally{l.value=!1}},w=F=>{if(!(F!=null&&F.student_id))return _l;for(const M of[".jpg",".jpeg",".png"])if(y.value.has(F.student_id+M))return`/photos/${F.student_id}${M}?t=${new Date().getTime()}`;return _l},I=F=>{F.target.src=_l},S=(F,M)=>{F.dataTransfer.setData("studentId",M.id)},A=(F,M)=>{var st;const L=parseInt(F.dataTransfer.getData("studentId"),10),D=n.value.find(k=>k.id===L);if(D){for(const k in o.value)((st=o.value[k])==null?void 0:st.id)===L&&(o.value[k]=null);o.value[M]=D}},E=F=>{o.value[F]=null},P=async()=>{u.value="",c.value="";try{const F=await Kt("/api/seating-chart",{method:"POST",body:JSON.stringify({rows:r.value,cols:i.value,seats:o.value})});if(!F.ok)throw new Error((await F.json()).error||"儲存失敗");c.value="座位表已成功儲存！",setTimeout(()=>c.value="",3e3)}catch(F){u.value=F.message}},U=()=>{g.value=!0},rt=()=>{const F=[...n.value].sort((L,D)=>(Number(L.seat_number)||1/0)-(Number(D.seat_number)||1/0)),M={};for(let L=0;L<r.value*i.value;L++)M[L]=F[L]||null;o.value=M,g.value=!1};return Ye(O),(F,M)=>(Z(),Y("div",null,[M[13]||(M[13]=f("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"座位表設定",-1)),f("div",Sk,[f("div",Ek,[M[9]||(M[9]=f("h2",{class:"text-2xl font-semibold mb-4"},"學生列表",-1)),f("div",Ak,[Mt(f("input",{type:"text","onUpdate:modelValue":M[0]||(M[0]=L=>d.value=L),placeholder:"搜尋學生...",class:"form-input w-full"},null,512),[[Ft,d.value]])]),f("div",Rk,[(Z(!0),Y(Wt,null,te(v.value,L=>(Z(),Y("div",{key:L.id,draggable:"true",onDragstart:D=>S(D,L),class:"p-3 mb-2 border rounded-lg cursor-grab bg-slate-100 hover:bg-sky-100 transition-colors flex items-center gap-3"},[f("span",Ok,ft(m(L.seat_number)),1),f("span",null,ft(L.name),1)],40,Tk))),128))]),M[10]||(M[10]=f("hr",{class:"my-6"},null,-1)),M[11]||(M[11]=f("h2",{class:"text-2xl font-semibold mb-4"},"版面設定",-1)),f("div",Ik,[f("div",$k,[M[7]||(M[7]=f("label",{class:"w-1/2 font-medium text-slate-700"},"行數:",-1)),Mt(f("input",{type:"number","onUpdate:modelValue":M[1]||(M[1]=L=>r.value=L),min:"1",max:"20",class:"form-input w-1/2 text-center"},null,512),[[Ft,r.value,void 0,{number:!0}]])]),f("div",Pk,[M[8]||(M[8]=f("label",{class:"w-1/2 font-medium text-slate-700"},"列數:",-1)),Mt(f("input",{type:"number","onUpdate:modelValue":M[2]||(M[2]=L=>i.value=L),min:"1",max:"20",class:"form-input w-1/2 text-center"},null,512),[[Ft,i.value,void 0,{number:!0}]])])]),f("button",{onClick:U,class:"w-full btn btn-success mb-3 px-0"}," 自動排列 "),f("button",{onClick:P,class:"w-full btn btn-primary px-0"}," 儲存座位表 "),c.value?(Z(),Y("p",Lk,ft(c.value),1)):Rt("",!0),u.value?(Z(),Y("p",Bk,ft(u.value),1)):Rt("",!0)]),f("div",Dk,[l.value?(Z(),Y("div",Mk,"讀取中...")):(Z(),Y("div",{key:1,style:Vr(b.value),class:"grid gap-4"},[(Z(!0),Y(Wt,null,te(r.value*i.value,L=>(Z(),Y("div",{key:L,onDrop:D=>A(D,L-1),onDragover:M[3]||(M[3]=We(()=>{},["prevent"])),onDragenter:M[4]||(M[4]=We(()=>{},["prevent"])),class:me(["border-2 border-dashed rounded-lg h-36 flex flex-col justify-center items-center relative",{"bg-slate-50 hover:border-sky-400":!o.value[L-1],"bg-sky-50 border-sky-200":o.value[L-1]}])},[o.value[L-1]?(Z(),Y("div",Nk,[f("img",{src:w(o.value[L-1]),onError:I,class:"w-16 h-16 object-cover rounded-full bg-gray-200 mb-2 border-2 border-white shadow"},null,40,Uk),f("p",Fk,[f("span",jk,ft(m(o.value[L-1].seat_number))+".",1),ve(" "+ft(o.value[L-1].name),1)]),f("p",Wk,ft(o.value[L-1].account),1),f("button",{onClick:D=>E(L-1),class:"absolute top-1 right-1 text-red-500 hover:text-red-700 bg-white rounded-full h-6 w-6 flex items-center justify-center shadow"},"✕",8,qk)])):(Z(),Y("div",Hk,"(空位)"))],42,zk))),128))],4))])]),g.value?(Z(),Y("div",Vk,[f("div",Kk,[f("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:M[5]||(M[5]=L=>g.value=!1)}),f("div",Gk,[M[12]||(M[12]=qr('<div class="p-6"><div class="flex items-start"><div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 sm:mx-0 sm:h-10 sm:w-10"><svg class="h-6 w-6 text-yellow-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"><h3 class="text-lg leading-6 font-medium text-gray-900"> 確認自動排列 </h3><div class="mt-2"><p class="text-sm text-gray-500"> 此操作將會覆蓋目前的座位表，您確定要依座號自動排列嗎？ </p></div></div></div></div>',1)),f("div",Zk,[f("button",{onClick:rt,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-yellow-500 text-base font-medium text-white hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 sm:ml-3 sm:w-auto sm:text-sm"}," 確認排列 "),f("button",{onClick:M[6]||(M[6]=L=>g.value=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm"}," 取消 ")])])])])):Rt("",!0)]))}},Jk={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8"},Qk={class:"card h-full"},Xk={class:"flex justify-between items-start mb-4"},t4={class:"text-xl font-semibold text-slate-700"},e4={key:0,class:"mt-2 text-center py-8"},n4={key:1,class:"grid grid-cols-3 gap-4 text-center"},r4={class:"text-5xl font-bold text-green-600"},s4={class:"text-5xl font-bold text-orange-500"},i4={class:"text-5xl font-bold text-red-600"},o4={class:"card flex flex-col items-center justify-center text-center h-full"},a4=["disabled"],l4={class:"card flex flex-col items-center justify-center text-center h-full"},u4={key:0,class:"text-5xl font-bold mt-4"},c4={key:1,class:"text-6xl font-bold text-slate-800 mt-4"},f4={key:0,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6",role:"alert"},d4={class:"card p-4"},h4={key:0,class:"text-center py-16"},p4=["onClick"],g4={class:"absolute top-2 left-2 text-slate-500"},m4={key:0,class:"w-6 h-6 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v4={key:1,class:"w-6 h-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_4={key:2,class:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},y4={class:"flex-grow flex flex-col items-center justify-center pt-4"},b4={class:"font-bold text-xl leading-tight"},x4={class:"text-sm text-slate-600 mt-1"},w4={key:1,class:"text-slate-400 text-sm"},k4={key:1,class:"fixed z-20 inset-0 overflow-y-auto"},C4={class:"flex items-center justify-center min-h-screen"},S4={class:"inline-block bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all my-8 max-w-sm w-full"},E4={class:"bg-white p-6"},A4={class:"text-2xl leading-6 font-bold text-gray-900 text-center mb-2"},R4={class:"my-4 text-center"},T4={class:"grid grid-cols-2 gap-4 mt-2"},O4={class:"bg-gray-50 px-4 py-3 text-right"},I4={key:2,class:"fixed z-30 inset-0 overflow-y-auto"},$4={class:"flex items-center justify-center min-h-screen"},P4={class:"inline-block bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all my-8 max-w-5xl w-full"},L4={class:"bg-white px-6 pt-5 pb-4"},B4={class:"max-h-[60vh] overflow-y-auto pr-4"},D4={class:"col-span-1 font-semibold text-lg"},M4={class:"col-span-5 grid grid-cols-5 gap-2"},z4=["onClick"],N4={class:"bg-gray-100 px-6 py-4 flex justify-end space-x-4"},U4={key:3,class:"fixed z-40 inset-0 overflow-y-auto"},F4={class:"flex items-center justify-center min-h-screen"},j4={class:"inline-block bg-white rounded-2xl text-center overflow-hidden shadow-2xl transform transition-all my-8 max-w-md w-full relative border-4 border-yellow-400"},W4={class:"p-8 sm:p-12 relative"},q4={class:"text-8xl font-extrabold text-gray-900 my-4"},H4={class:"text-3xl text-gray-500 font-semibold"},V4={key:4,class:"fixed z-50 inset-0 overflow-y-auto"},K4={class:"flex items-center justify-center min-h-screen p-4"},G4={class:"inline-block bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all my-8 max-w-6xl w-full"},Z4={class:"bg-white px-6 pt-5 pb-4"},Y4={class:"flex items-center space-x-4 mb-4 p-4 bg-slate-50 rounded-md"},J4={class:"max-h-[60vh] overflow-y-auto"},Q4={key:0,class:"text-center py-8"},X4={key:1,class:"min-w-full divide-y divide-gray-200"},t3={class:"bg-white divide-y divide-gray-200"},e3={class:"px-4 py-3 whitespace-nowrap"},n3={class:"px-4 py-3 whitespace-nowrap font-semibold"},r3={class:"px-4 py-3 text-center"},s3={class:"px-4 py-3 text-center"},i3={class:"px-4 py-3 text-center"},o3={class:"px-4 py-3 text-center"},a3={class:"px-4 py-3 text-center text-red-600 font-bold"},l3={class:"px-4 py-3 text-center font-medium"},u3={key:0},c3={key:1},f3={class:"bg-gray-100 px-6 py-4 flex justify-end"},d3={__name:"ClassroomDashboardView",setup(t){const n=pt([]),r=pt({rows:0,cols:0,seats:{}}),i=pt({}),o=pt({}),l=pt(!0),u=pt(""),c=pt(!1),d=pt(!1),y=pt(!1),g=pt(null),m=pt({}),b=pt(!1),v=pt(null),O={present:{label:"出席",color:"green",bgColor:"bg-green-500",hoverBg:"hover:bg-green-200"},sick:{label:"病假",color:"orange",bgColor:"bg-orange-500",hoverBg:"hover:bg-orange-200"},official:{label:"公假",color:"blue",bgColor:"bg-blue-500",hoverBg:"hover:bg-blue-200"},personal:{label:"事假",color:"yellow",bgColor:"bg-yellow-500",hoverBg:"hover:bg-yellow-200"},absent:{label:"曠課",color:"red",bgColor:"bg-red-500",hoverBg:"hover:bg-red-200"}},w=pt(!1),I=pt(""),S=pt(""),A=pt([]),E=pt(!1),P=le(()=>new Date().toISOString().split("T")[0]),U=le(()=>new Date().toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"})),rt=le(()=>({display:"grid",gridTemplateColumns:`repeat(${r.value.cols}, 1fr)`})),F=le(()=>Object.values(r.value.seats).filter(Boolean).length),M=le(()=>[...n.value].sort((W,z)=>(Number(W.seat_number)||1/0)-(Number(z.seat_number)||1/0))),L=le(()=>{const W={present:0,leave:0,absent:0},z=Object.values(r.value.seats).filter(Boolean);return z.length&&z.forEach(ut=>{const Et=i.value[ut.student_id];Et==="present"?W.present++:Et==="absent"?W.absent++:["sick","official","personal"].includes(Et)?W.leave++:W.present++}),W}),D=le(()=>g.value&&o.value[g.value.student_id]||0),st=le(()=>{const W=D.value;return W>0?"text-green-600":W<0?"text-red-600":"text-gray-800"}),k=W=>i.value[W]||"present",K=W=>{if(!W)return"bg-slate-100 border-slate-200";if(v.value&&v.value.id===W.id)return"ring-4 ring-offset-2 ring-indigo-500 scale-105 shadow-lg z-10 bg-white";const z=k(W.student_id),ut=O[z],Et=z!=="present"?" opacity-50":"";return ut?`bg-${ut.color}-100 hover:bg-${ut.color}-200 border-${ut.color}-300${Et}`:`bg-slate-200 hover:bg-slate-300 border-slate-400${Et}`},_=W=>{if(!W)return"bg-slate-800";const z=o.value[W.student_id]||0;return z>0?"bg-green-600":z<0?"bg-red-600":"bg-slate-800"},lt=(W,z)=>m.value[W]===z?`${O[z].bgColor} text-white`:`bg-slate-200 ${O[z].hoverBg} text-slate-700`,wt=async()=>{l.value=!0,u.value="";try{const[W,z]=await Promise.all([Kt(`/api/classroom-status?date=${P.value}`),Kt("/api/students")]);if(!W.ok)throw new Error("無法讀取課堂儀表板資料");if(!z.ok)throw new Error("無法讀取學生列表");const ut=await W.json();n.value=await z.json(),r.value=ut.seatingChart||{rows:6,cols:5,seats:{}},o.value=ut.performance||{};const Et=ut.attendance||{},B=Object.values(r.value.seats).filter(Boolean),q={};B.forEach(h=>{q[h.student_id]=Et[h.student_id]||"present"}),i.value=q}catch(W){u.value=`錯誤: ${W.message}`}finally{l.value=!1}},ct=W=>{if(!W)return;(i.value[W.student_id]||"present")==="present"&&St(W)},St=W=>{g.value=W,c.value=!0},bt=()=>{const W={};n.value.forEach(z=>{W[z.student_id]=i.value[z.student_id]||"present"}),m.value=W,d.value=!0},$t=(W,z)=>{m.value[W]=z},ot=async()=>{const W=[];for(const z in m.value)m.value[z]!==i.value[z]&&W.push(Kt("/api/attendance",{method:"POST",body:JSON.stringify({student_id:z,date:P.value,status:m.value[z]})}));if(W.length===0){d.value=!1;return}try{await Promise.all(W),i.value={...m.value},d.value=!1}catch{u.value="儲存出缺席狀態時發生錯誤。請重新整理頁面。"}},it=async W=>{if(!g.value)return;const z=g.value.student_id;o.value[z]||(o.value[z]=0),o.value[z]+=W;try{await Kt("/api/performance",{method:"POST",body:JSON.stringify({student_id:z,date:P.value,points:W})})}catch{u.value="新增表現分數失敗",wt()}},Pt=()=>{const W=Object.keys(i.value).filter(B=>i.value[B]==="present"),z=n.value.filter(B=>W.includes(B.student_id));if(z.length===0){alert("目前沒有標記為「出席」的學生可以抽籤。");return}b.value=!0,v.value=null;let ut=0;const Et=setInterval(()=>{const B=Math.floor(Math.random()*z.length);v.value=z[B],ut++,ut>20&&(clearInterval(Et),b.value=!1,y.value=!0)},100)},At=()=>{y.value=!1,setTimeout(()=>{v.value=null},300)},kt=()=>{const W=new Date,z=new Date;z.setDate(W.getDate()-90),S.value=W.toISOString().split("T")[0],I.value=z.toISOString().split("T")[0],w.value=!0,yt()},yt=async()=>{E.value=!0,u.value="";try{const W=await Kt(`/api/attendance-summary?startDate=${I.value}&endDate=${S.value}`);if(!W.ok)throw new Error("無法讀取學期統計資料");A.value=await W.json()}catch(W){u.value=W.message}finally{E.value=!1}},G=W=>{const z=W.present+W.sick+W.official+W.personal+W.absent;return z===0?null:(W.present/z*100).toFixed(1)};return Ye(wt),(W,z)=>(Z(),Y("div",null,[f("div",{class:"flex justify-between items-center mb-8"},[z[10]||(z[10]=f("h1",{class:"text-4xl font-bold text-slate-800"},"班級儀表板",-1)),f("div",{class:"flex space-x-4"},[f("button",{onClick:bt,class:"btn btn-secondary px-4 py-2"},"批次登記"),f("button",{onClick:kt,class:"btn bg-slate-600 hover:bg-slate-700 px-4 py-2"},"學期統計")])]),f("div",Jk,[f("div",Qk,[f("div",Xk,[f("h2",t4,"今日出缺席 ("+ft(U.value)+")",1)]),l.value?(Z(),Y("div",e4,"讀取中...")):(Z(),Y("div",n4,[f("div",null,[f("p",r4,ft(L.value.present),1),z[11]||(z[11]=f("p",{class:"text-base text-slate-500"},"出席",-1))]),f("div",null,[f("p",s4,ft(L.value.leave),1),z[12]||(z[12]=f("p",{class:"text-base text-slate-500"},"請假",-1))]),f("div",null,[f("p",i4,ft(L.value.absent),1),z[13]||(z[13]=f("p",{class:"text-base text-slate-500"},"曠課",-1))])]))]),f("div",o4,[z[14]||(z[14]=f("h2",{class:"text-xl font-semibold text-slate-700 mb-4"},"隨機抽籤",-1)),f("button",{onClick:Pt,class:"btn btn-primary text-xl px-8 py-4 rounded-full",disabled:b.value},ft(b.value?"抽籤中...":"開始抽籤"),9,a4),z[15]||(z[15]=f("p",{class:"mt-3 text-sm h-8 text-slate-400"},"點擊按鈕從出席學生中抽籤",-1))]),f("div",l4,[z[17]||(z[17]=f("h2",{class:"text-xl font-semibold text-slate-700"},"座位表學生總數",-1)),l.value?(Z(),Y("p",u4,"...")):(Z(),Y("p",c4,[ve(ft(F.value)+" ",1),z[16]||(z[16]=f("span",{class:"text-2xl text-slate-500"},"人",-1))]))])]),u.value?(Z(),Y("div",f4,[z[18]||(z[18]=f("p",{class:"font-bold"},"發生錯誤：",-1)),f("p",null,ft(u.value),1)])):Rt("",!0),f("div",d4,[l.value?(Z(),Y("div",h4,"座位表讀取中...")):(Z(),Y("div",{key:1,style:Vr(rt.value),class:"grid gap-3"},[(Z(!0),Y(Wt,null,te(r.value.rows*r.value.cols,ut=>(Z(),Y("div",{key:ut,class:me(["h-36 rounded-xl flex flex-col justify-center items-center text-center p-2 transition-all duration-300 relative border-2",K(r.value.seats[ut-1])])},[r.value.seats[ut-1]?(Z(),Y("div",{key:0,onClick:Et=>ct(r.value.seats[ut-1]),class:me(["w-full h-full flex flex-col justify-between p-2",(i.value[r.value.seats[ut-1].student_id]||"present")==="present"?"cursor-pointer":"cursor-not-allowed"])},[f("div",{class:me(["absolute top-2 right-2 rounded-full h-9 w-9 flex items-center justify-center text-lg font-bold text-white shadow-md",_(r.value.seats[ut-1])])},ft(o.value[r.value.seats[ut-1].student_id]||0),3),f("div",g4,[k(r.value.seats[ut-1].student_id)==="sick"?(Z(),Y("svg",m4,[...z[19]||(z[19]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):Rt("",!0),["official","personal"].includes(k(r.value.seats[ut-1].student_id))?(Z(),Y("svg",v4,[...z[20]||(z[20]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):Rt("",!0),k(r.value.seats[ut-1].student_id)==="absent"?(Z(),Y("svg",_4,[...z[21]||(z[21]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"},null,-1)])])):Rt("",!0)]),f("div",y4,[f("p",b4,ft(r.value.seats[ut-1].name),1),f("p",x4,"("+ft(r.value.seats[ut-1].seat_number)+")",1)])],10,p4)):(Z(),Y("div",w4,"(空位)"))],2))),128))],4))]),c.value?(Z(),Y("div",k4,[f("div",C4,[f("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:z[0]||(z[0]=ut=>c.value=!1)},[...z[22]||(z[22]=[f("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])]),f("div",S4,[f("div",E4,[f("h3",A4,ft(g.value.name),1),f("div",R4,[z[23]||(z[23]=f("p",{class:"text-base font-medium text-gray-500"},"本日累計分數",-1)),f("p",{class:me(["text-7xl font-bold",st.value])},ft(D.value),3)]),f("div",null,[z[24]||(z[24]=f("h4",{class:"font-semibold text-center mt-6 text-gray-600"},"調整分數",-1)),f("div",T4,[f("button",{onClick:z[1]||(z[1]=ut=>it(1)),class:"btn btn-primary text-lg py-3"},"+1 分"),f("button",{onClick:z[2]||(z[2]=ut=>it(-1)),class:"btn btn-warning text-lg py-3"},"-1 分")])])]),f("div",O4,[f("button",{onClick:z[3]||(z[3]=ut=>c.value=!1),type:"button",class:"btn btn-secondary"},"關閉")])])])])):Rt("",!0),d.value?(Z(),Y("div",I4,[f("div",$4,[f("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:z[4]||(z[4]=ut=>d.value=!1)},[...z[25]||(z[25]=[f("div",{class:"absolute inset-0 bg-gray-600 opacity-75"},null,-1)])]),f("div",P4,[f("div",L4,[z[26]||(z[26]=f("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"批次登記今日出缺席",-1)),f("div",B4,[(Z(!0),Y(Wt,null,te(M.value,ut=>(Z(),Y("div",{key:ut.id,class:"grid grid-cols-6 gap-4 items-center mb-2 p-2 rounded-md hover:bg-slate-50"},[f("div",D4,ft(ut.seat_number)+". "+ft(ut.name),1),f("div",M4,[(Z(!0),Y(Wt,null,te(Object.keys(O),Et=>(Z(),Y("button",{key:Et,onClick:B=>$t(ut.student_id,Et),class:me(["px-2 py-2 text-base rounded-md transition-colors",lt(ut.student_id,Et)])},ft(O[Et].label),11,z4))),128))])]))),128))])]),f("div",N4,[f("button",{onClick:z[5]||(z[5]=ut=>d.value=!1),type:"button",class:"btn btn-secondary text-base py-2 px-6"},"取消"),f("button",{onClick:ot,type:"button",class:"btn bg-purple-600 hover:bg-purple-700 text-base py-2 px-6"},"儲存變更")])])])])):Rt("",!0),y.value&&v.value?(Z(),Y("div",U4,[f("div",F4,[f("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:At},[...z[27]||(z[27]=[f("div",{class:"absolute inset-0 bg-gray-800 opacity-75"},null,-1)])]),f("div",j4,[f("div",W4,[z[28]||(z[28]=f("p",{class:"text-xl font-medium text-indigo-600"},"恭喜！抽中了...",-1)),f("p",q4,ft(v.value.name),1),f("p",H4,ft(v.value.seat_number)+" 號",1),f("div",{class:"mt-8"},[f("button",{onClick:At,type:"button",class:"btn btn-primary text-lg px-8 py-3"}," 關閉 ")])])])])])):Rt("",!0),w.value?(Z(),Y("div",V4,[f("div",K4,[f("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:z[6]||(z[6]=ut=>w.value=!1)},[...z[29]||(z[29]=[f("div",{class:"absolute inset-0 bg-gray-600 opacity-75"},null,-1)])]),f("div",G4,[f("div",Z4,[z[33]||(z[33]=f("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"學期出缺席統計",-1)),f("div",Y4,[z[30]||(z[30]=f("label",{for:"startDate",class:"text-sm font-medium"},"開始日期:",-1)),Mt(f("input",{type:"date",id:"startDate","onUpdate:modelValue":z[7]||(z[7]=ut=>I.value=ut),class:"form-input"},null,512),[[Ft,I.value]]),z[31]||(z[31]=f("label",{for:"endDate",class:"text-sm font-medium"},"結束日期:",-1)),Mt(f("input",{type:"date",id:"endDate","onUpdate:modelValue":z[8]||(z[8]=ut=>S.value=ut),class:"form-input"},null,512),[[Ft,S.value]]),f("button",{onClick:yt,class:"btn btn-primary"},"查詢")]),f("div",J4,[E.value?(Z(),Y("div",Q4,"正在讀取統計資料...")):(Z(),Y("table",X4,[z[32]||(z[32]=f("thead",{class:"bg-slate-50 sticky top-0"},[f("tr",null,[f("th",{class:"px-4 py-3 text-left text-sm font-medium uppercase"},"座號"),f("th",{class:"px-4 py-3 text-left text-sm font-medium uppercase"},"姓名"),f("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-green-600"},"出席"),f("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-orange-600"},"病假"),f("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-blue-600"},"公假"),f("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-yellow-600"},"事假"),f("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase text-red-600"},"曠課"),f("th",{class:"px-4 py-3 text-center text-sm font-medium uppercase"},"出席率")])],-1)),f("tbody",t3,[(Z(!0),Y(Wt,null,te(A.value,ut=>(Z(),Y("tr",{key:ut.student_id,class:"hover:bg-slate-50"},[f("td",e3,ft(ut.seat_number),1),f("td",n3,ft(ut.name),1),f("td",r3,ft(ut.present),1),f("td",s3,ft(ut.sick),1),f("td",i3,ft(ut.official),1),f("td",o3,ft(ut.personal),1),f("td",a3,ft(ut.absent),1),f("td",l3,[G(ut)!==null?(Z(),Y("span",u3,ft(G(ut))+"%",1)):(Z(),Y("span",c3,"N/A"))])]))),128))])]))])]),f("div",f3,[f("button",{onClick:z[9]||(z[9]=ut=>w.value=!1),type:"button",class:"btn btn-secondary"},"關閉")])])])])):Rt("",!0)]))}},h3={class:"card p-8 mb-8"},p3={class:"text-2xl font-semibold mb-6"},g3={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},m3=["value"],v3={class:"grid grid-cols-1 md:grid-cols-2 gap-6 items-center"},_3={class:"flex items-center pt-6"},y3={class:"flex items-center justify-end space-x-4 pt-4"},b3={type:"submit",class:"btn btn-primary text-base px-6 py-2.5"},x3={key:0,class:"text-red-500 mb-4"},w3={class:"card p-8"},k3={key:0,class:"text-center text-slate-500 py-8"},C3={key:1,class:"space-y-4"},S3={class:"px-2 py-1 text-xs font-semibold rounded-full bg-sky-100 text-sky-800"},E3={class:"font-bold text-xl mt-2"},A3={class:"text-sm text-slate-600"},R3={class:"text-xs text-slate-500 mt-2"},T3={class:"flex items-center space-x-3"},O3=["onClick"],I3=["onClick"],$3=["onClick"],P3={key:2,class:"text-slate-500 text-center py-8"},L3={key:1,class:"fixed z-10 inset-0 overflow-y-auto"},B3={class:"flex items-center justify-center min-h-screen p-4"},D3={class:"bg-white rounded-lg shadow-xl transform transition-all w-full max-w-6xl h-[80vh] flex flex-col"},M3={class:"p-4 border-b flex justify-between items-center"},z3={class:"text-xl font-bold"},N3={class:"flex-grow flex overflow-hidden"},U3={class:"w-1/4 bg-slate-50 border-r overflow-y-auto"},F3={key:0,class:"p-4 text-center"},j3={key:1},W3=["onClick"],q3={class:"font-semibold"},H3={class:"text-sm text-slate-500"},V3={class:"w-3/4 p-6 overflow-y-auto"},K3={key:0,class:"flex items-center justify-center h-full text-slate-500"},G3={key:1},Z3={class:"text-lg font-bold mb-4"},Y3={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},J3=["href"],Q3=["src"],X3={key:1,class:"w-full h-24 bg-slate-100 rounded-md mb-2 flex items-center justify-center"},t5={class:"text-xs text-slate-700 truncate"},e5={__name:"AssignmentsView",setup(t){const n=pt([]),r=pt([]),i=Fe({title:"",description:"",due_date:"",subject_id:null,allow_resubmission:!0}),o=pt(!1),l=pt(null),u=pt(!0),c=pt(""),d=pt(!1),y=pt(null),g=pt([]),m=pt(!1),b=pt(null),v=M=>M==null?"":String(M).padStart(2,"0"),O=async()=>{u.value=!0,c.value="";try{const[M,L]=await Promise.all([Kt("/api/assignments"),Kt("/api/subjects")]);if(!M.ok)throw new Error("無法讀取作業列表");if(!L.ok)throw new Error("無法讀取科目列表");n.value=await M.json(),r.value=await L.json()}catch(M){c.value=`錯誤: ${M.message}`}finally{u.value=!1}},w=async()=>{o.value?await S():await I()},I=async()=>{c.value="";try{const M=await Kt("/api/assignments",{method:"POST",body:JSON.stringify(i)}),L=await M.json();if(!M.ok)throw new Error(L.error||"建立作業失敗");n.value.unshift(L),Object.assign(i,{title:"",description:"",due_date:"",subject_id:null,allow_resubmission:!0})}catch(M){c.value=`錯誤: ${M.message}`}},S=async()=>{c.value="";try{const M=await Kt(`/api/assignments/${l.value}`,{method:"PUT",body:JSON.stringify(i)}),L=await M.json();if(!M.ok)throw new Error(L.error||"更新作業失敗");const D=n.value.findIndex(st=>st.id===l.value);D!==-1&&(n.value[D]=L),E()}catch(M){c.value=`錯誤: ${M.message}`}},A=M=>{o.value=!0,l.value=M.id,Object.assign(i,{...M,allow_resubmission:!!M.allow_resubmission})},E=()=>{o.value=!1,l.value=null,Object.assign(i,{title:"",description:"",due_date:"",subject_id:null,allow_resubmission:!0})},P=async M=>{if(confirm("確定要刪除這個作業嗎？")){c.value="";try{const L=await Kt(`/api/assignments/${M}`,{method:"DELETE"}),D=await L.json();if(!L.ok)throw new Error(D.error||"刪除失敗");n.value=n.value.filter(st=>st.id!==M)}catch(L){c.value=`錯誤: ${L.message}`}}},U=async M=>{y.value=M,d.value=!0,m.value=!0,b.value=null;try{const L=await Kt(`/api/assignments/${M.id}/submissions`);if(!L.ok)throw new Error("無法讀取繳交列表");const D=await L.json();D.sort((st,k)=>parseInt(st.seat_number,10)-parseInt(k.seat_number,10)),g.value=D}catch(L){c.value=`讀取繳交列表時發生錯誤: ${L.message}`}finally{m.value=!1}},rt=()=>{d.value=!1,y.value=null,g.value=[],b.value=null},F=M=>/\.(jpg|jpeg|png|gif|webp)$/i.test(M);return Ye(O),(M,L)=>(Z(),Y("div",null,[L[13]||(L[13]=f("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"作業管理",-1)),f("div",h3,[f("h2",p3,ft(o.value?"編輯作業":"新增作業"),1),f("form",{onSubmit:We(w,["prevent"]),class:"space-y-6"},[f("div",g3,[f("div",null,[L[5]||(L[5]=f("label",{for:"title",class:"block text-base font-medium text-slate-700"},"作業標題",-1)),Mt(f("input",{type:"text",id:"title","onUpdate:modelValue":L[0]||(L[0]=D=>i.title=D),required:"",class:"mt-1 form-input text-lg py-3"},null,512),[[Ft,i.title]])]),f("div",null,[L[7]||(L[7]=f("label",{for:"subject",class:"block text-base font-medium text-slate-700"},"科目",-1)),Mt(f("select",{id:"subject","onUpdate:modelValue":L[1]||(L[1]=D=>i.subject_id=D),required:"",class:"mt-1 form-input text-lg py-3"},[L[6]||(L[6]=f("option",{value:null,disabled:""},"-- 請選擇科目 --",-1)),(Z(!0),Y(Wt,null,te(r.value,D=>(Z(),Y("option",{key:D.id,value:D.id},ft(D.name),9,m3))),128))],512),[[ai,i.subject_id]])])]),f("div",null,[L[8]||(L[8]=f("label",{for:"description",class:"block text-base font-medium text-slate-700"},"作業說明 (選填)",-1)),Mt(f("textarea",{id:"description","onUpdate:modelValue":L[2]||(L[2]=D=>i.description=D),rows:"3",class:"mt-1 form-input text-lg py-3"},null,512),[[Ft,i.description]])]),f("div",v3,[f("div",null,[L[9]||(L[9]=f("label",{for:"due_date",class:"block text-base font-medium text-slate-700"},"繳交截止日期 (選填)",-1)),Mt(f("input",{type:"datetime-local",id:"due_date","onUpdate:modelValue":L[3]||(L[3]=D=>i.due_date=D),class:"mt-1 form-input text-lg py-3"},null,512),[[Ft,i.due_date]])]),f("div",_3,[Mt(f("input",{type:"checkbox",id:"allow_resubmission","onUpdate:modelValue":L[4]||(L[4]=D=>i.allow_resubmission=D),class:"h-5 w-5 text-sky-600 border-gray-300 rounded focus:ring-sky-500"},null,512),[[fw,i.allow_resubmission]]),L[10]||(L[10]=f("label",{for:"allow_resubmission",class:"ml-2 block text-base text-slate-700"},"允許學生重複上傳",-1))])]),f("div",y3,[o.value?(Z(),Y("button",{key:0,onClick:E,type:"button",class:"btn btn-secondary text-base px-6 py-2.5"},"取消")):Rt("",!0),f("button",b3,ft(o.value?"更新作業":"建立作業"),1)])],32)]),c.value?(Z(),Y("p",x3,ft(c.value),1)):Rt("",!0),f("div",w3,[L[11]||(L[11]=f("h2",{class:"text-2xl font-semibold mb-6"},"現有作業列表",-1)),u.value?(Z(),Y("div",k3,"讀取中...")):n.value.length>0?(Z(),Y("ul",C3,[(Z(!0),Y(Wt,null,te(n.value,D=>(Z(),Y("li",{key:D.id,class:"p-4 border rounded-lg flex justify-between items-center hover:bg-slate-50 transition-colors"},[f("div",null,[f("span",S3,ft(D.subject_name),1),f("h3",E3,ft(D.title),1),f("p",A3,ft(D.description),1),f("p",R3,[ve(" 建立於: "+ft(new Date(D.created_at).toLocaleString())+" | 截止於: "+ft(D.due_date?new Date(D.due_date).toLocaleString():"無")+" | ",1),f("span",{class:me(D.allow_resubmission?"text-green-600":"text-red-600")},ft(D.allow_resubmission?"允許多次上傳":"僅限單次上傳"),3)])]),f("div",T3,[f("button",{onClick:st=>U(D),class:"btn bg-teal-500 hover:bg-teal-600 text-sm"},"查看繳交",8,O3),f("button",{onClick:st=>A(D),class:"btn bg-yellow-500 hover:bg-yellow-600 text-sm"},"編輯",8,I3),f("button",{onClick:st=>P(D.id),class:"btn btn-danger text-sm"},"刪除",8,$3)])]))),128))])):(Z(),Y("p",P3,"目前沒有任何作業。"))]),d.value?(Z(),Y("div",L3,[f("div",B3,[f("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:rt}),f("div",D3,[f("div",M3,[f("h3",z3,"查看「"+ft(y.value.title)+"」繳交狀況",1),f("button",{onClick:rt,class:"text-2xl text-gray-500 hover:text-gray-800"},"×")]),f("div",N3,[f("div",U3,[m.value?(Z(),Y("div",F3,"讀取中...")):(Z(),Y("ul",j3,[(Z(!0),Y(Wt,null,te(g.value,D=>(Z(),Y("li",{key:D.studentId,onClick:st=>b.value=D,class:me(["p-4 cursor-pointer hover:bg-sky-100",{"bg-sky-200":b.value&&b.value.name===D.name}])},[f("p",q3,ft(v(D.seat_number))+". "+ft(D.name),1),f("p",H3,ft(D.files.length)+" 個檔案",1)],10,W3))),128))]))]),f("div",V3,[b.value?(Z(),Y("div",G3,[f("h4",Z3,ft(b.value.name)+" 的檔案",1),f("div",Y3,[(Z(!0),Y(Wt,null,te(b.value.files,D=>(Z(),Y("a",{key:D.name,href:D.url,target:"_blank",class:"block border rounded-lg p-2 text-center hover:shadow-md transition-shadow"},[F(D.name)?(Z(),Y("img",{key:0,src:D.url,class:"w-full h-24 object-cover rounded-md mb-2 bg-slate-100"},null,8,Q3)):(Z(),Y("div",X3,[...L[12]||(L[12]=[f("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 text-slate-400",viewBox:"0 0 20 20",fill:"currentColor"},[f("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})],-1)])])),f("p",t5,ft(D.name.split("_").slice(3).join("_")),1)],8,J3))),128))])])):(Z(),Y("div",K3," 請從左側選擇一位學生以檢視檔案 "))])])])])])):Rt("",!0)]))}};var ir=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Io={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Io.exports;(function(t,n){(function(){var r,i="4.17.21",o=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",y=500,g="__lodash_placeholder__",m=1,b=2,v=4,O=1,w=2,I=1,S=2,A=4,E=8,P=16,U=32,rt=64,F=128,M=256,L=512,D=30,st="...",k=800,K=16,_=1,lt=2,wt=3,ct=1/0,St=9007199254740991,bt=17976931348623157e292,$t=NaN,ot=4294967295,it=ot-1,Pt=ot>>>1,At=[["ary",F],["bind",I],["bindKey",S],["curry",E],["curryRight",P],["flip",L],["partial",U],["partialRight",rt],["rearg",M]],kt="[object Arguments]",yt="[object Array]",G="[object AsyncFunction]",W="[object Boolean]",z="[object Date]",ut="[object DOMException]",Et="[object Error]",B="[object Function]",q="[object GeneratorFunction]",h="[object Map]",V="[object Number]",j="[object Null]",C="[object Object]",R="[object Promise]",N="[object Proxy]",tt="[object RegExp]",X="[object Set]",J="[object String]",at="[object Symbol]",mt="[object Undefined]",ht="[object WeakMap]",Ct="[object WeakSet]",Bt="[object ArrayBuffer]",Ot="[object DataView]",ee="[object Float32Array]",be="[object Float64Array]",_e="[object Int8Array]",Re="[object Int16Array]",ne="[object Int32Array]",Cn="[object Uint8Array]",Se="[object Uint8ClampedArray]",xe="[object Uint16Array]",qn="[object Uint32Array]",Gr=/\b__p \+= '';/g,Vo=/\b(__p \+=) '' \+/g,Ko=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ss=/&(?:amp|lt|gt|quot|#39);/g,cr=/[&<>"']/g,Zr=RegExp(Ss.source),bp=RegExp(cr.source),xp=/<%-([\s\S]+?)%>/g,wp=/<%([\s\S]+?)%>/g,pu=/<%=([\s\S]+?)%>/g,kp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cp=/^\w*$/,Sp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Go=/[\\^$.*+?()[\]{}|]/g,Ep=RegExp(Go.source),Zo=/^\s+/,Ap=/\s/,Rp=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Tp=/\{\n\/\* \[wrapped with (.+)\] \*/,Op=/,? & /,Ip=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$p=/[()=,{}\[\]\/\s]/,Pp=/\\(\\)?/g,Lp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gu=/\w*$/,Bp=/^[-+]0x[0-9a-f]+$/i,Dp=/^0b[01]+$/i,Mp=/^\[object .+?Constructor\]$/,zp=/^0o[0-7]+$/i,Np=/^(?:0|[1-9]\d*)$/,Up=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vi=/($^)/,Fp=/['\n\r\u2028\u2029\\]/g,_i="\\ud800-\\udfff",jp="\\u0300-\\u036f",Wp="\\ufe20-\\ufe2f",qp="\\u20d0-\\u20ff",mu=jp+Wp+qp,vu="\\u2700-\\u27bf",_u="a-z\\xdf-\\xf6\\xf8-\\xff",Hp="\\xac\\xb1\\xd7\\xf7",Vp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Kp="\\u2000-\\u206f",Gp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yu="A-Z\\xc0-\\xd6\\xd8-\\xde",bu="\\ufe0e\\ufe0f",xu=Hp+Vp+Kp+Gp,Yo="['’]",Zp="["+_i+"]",wu="["+xu+"]",yi="["+mu+"]",ku="\\d+",Yp="["+vu+"]",Cu="["+_u+"]",Su="[^"+_i+xu+ku+vu+_u+yu+"]",Jo="\\ud83c[\\udffb-\\udfff]",Jp="(?:"+yi+"|"+Jo+")",Eu="[^"+_i+"]",Qo="(?:\\ud83c[\\udde6-\\uddff]){2}",Xo="[\\ud800-\\udbff][\\udc00-\\udfff]",Yr="["+yu+"]",Au="\\u200d",Ru="(?:"+Cu+"|"+Su+")",Qp="(?:"+Yr+"|"+Su+")",Tu="(?:"+Yo+"(?:d|ll|m|re|s|t|ve))?",Ou="(?:"+Yo+"(?:D|LL|M|RE|S|T|VE))?",Iu=Jp+"?",$u="["+bu+"]?",Xp="(?:"+Au+"(?:"+[Eu,Qo,Xo].join("|")+")"+$u+Iu+")*",t0="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",e0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Pu=$u+Iu+Xp,n0="(?:"+[Yp,Qo,Xo].join("|")+")"+Pu,r0="(?:"+[Eu+yi+"?",yi,Qo,Xo,Zp].join("|")+")",s0=RegExp(Yo,"g"),i0=RegExp(yi,"g"),ta=RegExp(Jo+"(?="+Jo+")|"+r0+Pu,"g"),o0=RegExp([Yr+"?"+Cu+"+"+Tu+"(?="+[wu,Yr,"$"].join("|")+")",Qp+"+"+Ou+"(?="+[wu,Yr+Ru,"$"].join("|")+")",Yr+"?"+Ru+"+"+Tu,Yr+"+"+Ou,e0,t0,ku,n0].join("|"),"g"),a0=RegExp("["+Au+_i+mu+bu+"]"),l0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,u0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],c0=-1,ye={};ye[ee]=ye[be]=ye[_e]=ye[Re]=ye[ne]=ye[Cn]=ye[Se]=ye[xe]=ye[qn]=!0,ye[kt]=ye[yt]=ye[Bt]=ye[W]=ye[Ot]=ye[z]=ye[Et]=ye[B]=ye[h]=ye[V]=ye[C]=ye[tt]=ye[X]=ye[J]=ye[ht]=!1;var pe={};pe[kt]=pe[yt]=pe[Bt]=pe[Ot]=pe[W]=pe[z]=pe[ee]=pe[be]=pe[_e]=pe[Re]=pe[ne]=pe[h]=pe[V]=pe[C]=pe[tt]=pe[X]=pe[J]=pe[at]=pe[Cn]=pe[Se]=pe[xe]=pe[qn]=!0,pe[Et]=pe[B]=pe[ht]=!1;var f0={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},d0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},p0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},g0=parseFloat,m0=parseInt,Lu=typeof ir=="object"&&ir&&ir.Object===Object&&ir,v0=typeof self=="object"&&self&&self.Object===Object&&self,Le=Lu||v0||Function("return this")(),ea=n&&!n.nodeType&&n,Ir=ea&&!0&&t&&!t.nodeType&&t,Bu=Ir&&Ir.exports===ea,na=Bu&&Lu.process,hn=function(){try{var et=Ir&&Ir.require&&Ir.require("util").types;return et||na&&na.binding&&na.binding("util")}catch{}}(),Du=hn&&hn.isArrayBuffer,Mu=hn&&hn.isDate,zu=hn&&hn.isMap,Nu=hn&&hn.isRegExp,Uu=hn&&hn.isSet,Fu=hn&&hn.isTypedArray;function nn(et,gt,dt){switch(dt.length){case 0:return et.call(gt);case 1:return et.call(gt,dt[0]);case 2:return et.call(gt,dt[0],dt[1]);case 3:return et.call(gt,dt[0],dt[1],dt[2])}return et.apply(gt,dt)}function _0(et,gt,dt,It){for(var jt=-1,re=et==null?0:et.length;++jt<re;){var Ie=et[jt];gt(It,Ie,dt(Ie),et)}return It}function pn(et,gt){for(var dt=-1,It=et==null?0:et.length;++dt<It&&gt(et[dt],dt,et)!==!1;);return et}function y0(et,gt){for(var dt=et==null?0:et.length;dt--&&gt(et[dt],dt,et)!==!1;);return et}function ju(et,gt){for(var dt=-1,It=et==null?0:et.length;++dt<It;)if(!gt(et[dt],dt,et))return!1;return!0}function fr(et,gt){for(var dt=-1,It=et==null?0:et.length,jt=0,re=[];++dt<It;){var Ie=et[dt];gt(Ie,dt,et)&&(re[jt++]=Ie)}return re}function bi(et,gt){var dt=et==null?0:et.length;return!!dt&&Jr(et,gt,0)>-1}function ra(et,gt,dt){for(var It=-1,jt=et==null?0:et.length;++It<jt;)if(dt(gt,et[It]))return!0;return!1}function we(et,gt){for(var dt=-1,It=et==null?0:et.length,jt=Array(It);++dt<It;)jt[dt]=gt(et[dt],dt,et);return jt}function dr(et,gt){for(var dt=-1,It=gt.length,jt=et.length;++dt<It;)et[jt+dt]=gt[dt];return et}function sa(et,gt,dt,It){var jt=-1,re=et==null?0:et.length;for(It&&re&&(dt=et[++jt]);++jt<re;)dt=gt(dt,et[jt],jt,et);return dt}function b0(et,gt,dt,It){var jt=et==null?0:et.length;for(It&&jt&&(dt=et[--jt]);jt--;)dt=gt(dt,et[jt],jt,et);return dt}function ia(et,gt){for(var dt=-1,It=et==null?0:et.length;++dt<It;)if(gt(et[dt],dt,et))return!0;return!1}var x0=oa("length");function w0(et){return et.split("")}function k0(et){return et.match(Ip)||[]}function Wu(et,gt,dt){var It;return dt(et,function(jt,re,Ie){if(gt(jt,re,Ie))return It=re,!1}),It}function xi(et,gt,dt,It){for(var jt=et.length,re=dt+(It?1:-1);It?re--:++re<jt;)if(gt(et[re],re,et))return re;return-1}function Jr(et,gt,dt){return gt===gt?B0(et,gt,dt):xi(et,qu,dt)}function C0(et,gt,dt,It){for(var jt=dt-1,re=et.length;++jt<re;)if(It(et[jt],gt))return jt;return-1}function qu(et){return et!==et}function Hu(et,gt){var dt=et==null?0:et.length;return dt?la(et,gt)/dt:$t}function oa(et){return function(gt){return gt==null?r:gt[et]}}function aa(et){return function(gt){return et==null?r:et[gt]}}function Vu(et,gt,dt,It,jt){return jt(et,function(re,Ie,fe){dt=It?(It=!1,re):gt(dt,re,Ie,fe)}),dt}function S0(et,gt){var dt=et.length;for(et.sort(gt);dt--;)et[dt]=et[dt].value;return et}function la(et,gt){for(var dt,It=-1,jt=et.length;++It<jt;){var re=gt(et[It]);re!==r&&(dt=dt===r?re:dt+re)}return dt}function ua(et,gt){for(var dt=-1,It=Array(et);++dt<et;)It[dt]=gt(dt);return It}function E0(et,gt){return we(gt,function(dt){return[dt,et[dt]]})}function Ku(et){return et&&et.slice(0,Ju(et)+1).replace(Zo,"")}function rn(et){return function(gt){return et(gt)}}function ca(et,gt){return we(gt,function(dt){return et[dt]})}function Es(et,gt){return et.has(gt)}function Gu(et,gt){for(var dt=-1,It=et.length;++dt<It&&Jr(gt,et[dt],0)>-1;);return dt}function Zu(et,gt){for(var dt=et.length;dt--&&Jr(gt,et[dt],0)>-1;);return dt}function A0(et,gt){for(var dt=et.length,It=0;dt--;)et[dt]===gt&&++It;return It}var R0=aa(f0),T0=aa(d0);function O0(et){return"\\"+p0[et]}function I0(et,gt){return et==null?r:et[gt]}function Qr(et){return a0.test(et)}function $0(et){return l0.test(et)}function P0(et){for(var gt,dt=[];!(gt=et.next()).done;)dt.push(gt.value);return dt}function fa(et){var gt=-1,dt=Array(et.size);return et.forEach(function(It,jt){dt[++gt]=[jt,It]}),dt}function Yu(et,gt){return function(dt){return et(gt(dt))}}function hr(et,gt){for(var dt=-1,It=et.length,jt=0,re=[];++dt<It;){var Ie=et[dt];(Ie===gt||Ie===g)&&(et[dt]=g,re[jt++]=dt)}return re}function wi(et){var gt=-1,dt=Array(et.size);return et.forEach(function(It){dt[++gt]=It}),dt}function L0(et){var gt=-1,dt=Array(et.size);return et.forEach(function(It){dt[++gt]=[It,It]}),dt}function B0(et,gt,dt){for(var It=dt-1,jt=et.length;++It<jt;)if(et[It]===gt)return It;return-1}function D0(et,gt,dt){for(var It=dt+1;It--;)if(et[It]===gt)return It;return It}function Xr(et){return Qr(et)?z0(et):x0(et)}function Sn(et){return Qr(et)?N0(et):w0(et)}function Ju(et){for(var gt=et.length;gt--&&Ap.test(et.charAt(gt)););return gt}var M0=aa(h0);function z0(et){for(var gt=ta.lastIndex=0;ta.test(et);)++gt;return gt}function N0(et){return et.match(ta)||[]}function U0(et){return et.match(o0)||[]}var F0=function et(gt){gt=gt==null?Le:ts.defaults(Le.Object(),gt,ts.pick(Le,u0));var dt=gt.Array,It=gt.Date,jt=gt.Error,re=gt.Function,Ie=gt.Math,fe=gt.Object,da=gt.RegExp,j0=gt.String,gn=gt.TypeError,ki=dt.prototype,W0=re.prototype,es=fe.prototype,Ci=gt["__core-js_shared__"],Si=W0.toString,ue=es.hasOwnProperty,q0=0,Qu=function(){var e=/[^.]+$/.exec(Ci&&Ci.keys&&Ci.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ei=es.toString,H0=Si.call(fe),V0=Le._,K0=da("^"+Si.call(ue).replace(Go,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ai=Bu?gt.Buffer:r,pr=gt.Symbol,Ri=gt.Uint8Array,Xu=Ai?Ai.allocUnsafe:r,Ti=Yu(fe.getPrototypeOf,fe),tc=fe.create,ec=es.propertyIsEnumerable,Oi=ki.splice,nc=pr?pr.isConcatSpreadable:r,As=pr?pr.iterator:r,$r=pr?pr.toStringTag:r,Ii=function(){try{var e=Mr(fe,"defineProperty");return e({},"",{}),e}catch{}}(),G0=gt.clearTimeout!==Le.clearTimeout&&gt.clearTimeout,Z0=It&&It.now!==Le.Date.now&&It.now,Y0=gt.setTimeout!==Le.setTimeout&&gt.setTimeout,$i=Ie.ceil,Pi=Ie.floor,ha=fe.getOwnPropertySymbols,J0=Ai?Ai.isBuffer:r,rc=gt.isFinite,Q0=ki.join,X0=Yu(fe.keys,fe),$e=Ie.max,Me=Ie.min,tg=It.now,eg=gt.parseInt,sc=Ie.random,ng=ki.reverse,pa=Mr(gt,"DataView"),Rs=Mr(gt,"Map"),ga=Mr(gt,"Promise"),ns=Mr(gt,"Set"),Ts=Mr(gt,"WeakMap"),Os=Mr(fe,"create"),Li=Ts&&new Ts,rs={},rg=zr(pa),sg=zr(Rs),ig=zr(ga),og=zr(ns),ag=zr(Ts),Bi=pr?pr.prototype:r,Is=Bi?Bi.valueOf:r,ic=Bi?Bi.toString:r;function T(e){if(Ce(e)&&!qt(e)&&!(e instanceof Jt)){if(e instanceof mn)return e;if(ue.call(e,"__wrapped__"))return af(e)}return new mn(e)}var ss=function(){function e(){}return function(s){if(!ke(s))return{};if(tc)return tc(s);e.prototype=s;var a=new e;return e.prototype=r,a}}();function Di(){}function mn(e,s){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=r}T.templateSettings={escape:xp,evaluate:wp,interpolate:pu,variable:"",imports:{_:T}},T.prototype=Di.prototype,T.prototype.constructor=T,mn.prototype=ss(Di.prototype),mn.prototype.constructor=mn;function Jt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ot,this.__views__=[]}function lg(){var e=new Jt(this.__wrapped__);return e.__actions__=Je(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Je(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Je(this.__views__),e}function ug(){if(this.__filtered__){var e=new Jt(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function cg(){var e=this.__wrapped__.value(),s=this.__dir__,a=qt(e),p=s<0,x=a?e.length:0,$=wm(0,x,this.__views__),H=$.start,Q=$.end,nt=Q-H,vt=p?Q:H-1,_t=this.__iteratees__,xt=_t.length,Tt=0,Lt=Me(nt,this.__takeCount__);if(!a||!p&&x==nt&&Lt==nt)return Tc(e,this.__actions__);var zt=[];t:for(;nt--&&Tt<Lt;){vt+=s;for(var Gt=-1,Nt=e[vt];++Gt<xt;){var Yt=_t[Gt],Qt=Yt.iteratee,an=Yt.type,Ke=Qt(Nt);if(an==lt)Nt=Ke;else if(!Ke){if(an==_)continue t;break t}}zt[Tt++]=Nt}return zt}Jt.prototype=ss(Di.prototype),Jt.prototype.constructor=Jt;function Pr(e){var s=-1,a=e==null?0:e.length;for(this.clear();++s<a;){var p=e[s];this.set(p[0],p[1])}}function fg(){this.__data__=Os?Os(null):{},this.size=0}function dg(e){var s=this.has(e)&&delete this.__data__[e];return this.size-=s?1:0,s}function hg(e){var s=this.__data__;if(Os){var a=s[e];return a===d?r:a}return ue.call(s,e)?s[e]:r}function pg(e){var s=this.__data__;return Os?s[e]!==r:ue.call(s,e)}function gg(e,s){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Os&&s===r?d:s,this}Pr.prototype.clear=fg,Pr.prototype.delete=dg,Pr.prototype.get=hg,Pr.prototype.has=pg,Pr.prototype.set=gg;function Hn(e){var s=-1,a=e==null?0:e.length;for(this.clear();++s<a;){var p=e[s];this.set(p[0],p[1])}}function mg(){this.__data__=[],this.size=0}function vg(e){var s=this.__data__,a=Mi(s,e);if(a<0)return!1;var p=s.length-1;return a==p?s.pop():Oi.call(s,a,1),--this.size,!0}function _g(e){var s=this.__data__,a=Mi(s,e);return a<0?r:s[a][1]}function yg(e){return Mi(this.__data__,e)>-1}function bg(e,s){var a=this.__data__,p=Mi(a,e);return p<0?(++this.size,a.push([e,s])):a[p][1]=s,this}Hn.prototype.clear=mg,Hn.prototype.delete=vg,Hn.prototype.get=_g,Hn.prototype.has=yg,Hn.prototype.set=bg;function Vn(e){var s=-1,a=e==null?0:e.length;for(this.clear();++s<a;){var p=e[s];this.set(p[0],p[1])}}function xg(){this.size=0,this.__data__={hash:new Pr,map:new(Rs||Hn),string:new Pr}}function wg(e){var s=Zi(this,e).delete(e);return this.size-=s?1:0,s}function kg(e){return Zi(this,e).get(e)}function Cg(e){return Zi(this,e).has(e)}function Sg(e,s){var a=Zi(this,e),p=a.size;return a.set(e,s),this.size+=a.size==p?0:1,this}Vn.prototype.clear=xg,Vn.prototype.delete=wg,Vn.prototype.get=kg,Vn.prototype.has=Cg,Vn.prototype.set=Sg;function Lr(e){var s=-1,a=e==null?0:e.length;for(this.__data__=new Vn;++s<a;)this.add(e[s])}function Eg(e){return this.__data__.set(e,d),this}function Ag(e){return this.__data__.has(e)}Lr.prototype.add=Lr.prototype.push=Eg,Lr.prototype.has=Ag;function En(e){var s=this.__data__=new Hn(e);this.size=s.size}function Rg(){this.__data__=new Hn,this.size=0}function Tg(e){var s=this.__data__,a=s.delete(e);return this.size=s.size,a}function Og(e){return this.__data__.get(e)}function Ig(e){return this.__data__.has(e)}function $g(e,s){var a=this.__data__;if(a instanceof Hn){var p=a.__data__;if(!Rs||p.length<o-1)return p.push([e,s]),this.size=++a.size,this;a=this.__data__=new Vn(p)}return a.set(e,s),this.size=a.size,this}En.prototype.clear=Rg,En.prototype.delete=Tg,En.prototype.get=Og,En.prototype.has=Ig,En.prototype.set=$g;function oc(e,s){var a=qt(e),p=!a&&Nr(e),x=!a&&!p&&yr(e),$=!a&&!p&&!x&&ls(e),H=a||p||x||$,Q=H?ua(e.length,j0):[],nt=Q.length;for(var vt in e)(s||ue.call(e,vt))&&!(H&&(vt=="length"||x&&(vt=="offset"||vt=="parent")||$&&(vt=="buffer"||vt=="byteLength"||vt=="byteOffset")||Yn(vt,nt)))&&Q.push(vt);return Q}function ac(e){var s=e.length;return s?e[Ea(0,s-1)]:r}function Pg(e,s){return Yi(Je(e),Br(s,0,e.length))}function Lg(e){return Yi(Je(e))}function ma(e,s,a){(a!==r&&!An(e[s],a)||a===r&&!(s in e))&&Kn(e,s,a)}function $s(e,s,a){var p=e[s];(!(ue.call(e,s)&&An(p,a))||a===r&&!(s in e))&&Kn(e,s,a)}function Mi(e,s){for(var a=e.length;a--;)if(An(e[a][0],s))return a;return-1}function Bg(e,s,a,p){return gr(e,function(x,$,H){s(p,x,a(x),H)}),p}function lc(e,s){return e&&Ln(s,Pe(s),e)}function Dg(e,s){return e&&Ln(s,Xe(s),e)}function Kn(e,s,a){s=="__proto__"&&Ii?Ii(e,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[s]=a}function va(e,s){for(var a=-1,p=s.length,x=dt(p),$=e==null;++a<p;)x[a]=$?r:Ja(e,s[a]);return x}function Br(e,s,a){return e===e&&(a!==r&&(e=e<=a?e:a),s!==r&&(e=e>=s?e:s)),e}function vn(e,s,a,p,x,$){var H,Q=s&m,nt=s&b,vt=s&v;if(a&&(H=x?a(e,p,x,$):a(e)),H!==r)return H;if(!ke(e))return e;var _t=qt(e);if(_t){if(H=Cm(e),!Q)return Je(e,H)}else{var xt=ze(e),Tt=xt==B||xt==q;if(yr(e))return $c(e,Q);if(xt==C||xt==kt||Tt&&!x){if(H=nt||Tt?{}:Jc(e),!Q)return nt?hm(e,Dg(H,e)):dm(e,lc(H,e))}else{if(!pe[xt])return x?e:{};H=Sm(e,xt,Q)}}$||($=new En);var Lt=$.get(e);if(Lt)return Lt;$.set(e,H),Af(e)?e.forEach(function(Nt){H.add(vn(Nt,s,a,Nt,e,$))}):Sf(e)&&e.forEach(function(Nt,Yt){H.set(Yt,vn(Nt,s,a,Yt,e,$))});var zt=vt?nt?Ma:Da:nt?Xe:Pe,Gt=_t?r:zt(e);return pn(Gt||e,function(Nt,Yt){Gt&&(Yt=Nt,Nt=e[Yt]),$s(H,Yt,vn(Nt,s,a,Yt,e,$))}),H}function Mg(e){var s=Pe(e);return function(a){return uc(a,e,s)}}function uc(e,s,a){var p=a.length;if(e==null)return!p;for(e=fe(e);p--;){var x=a[p],$=s[x],H=e[x];if(H===r&&!(x in e)||!$(H))return!1}return!0}function cc(e,s,a){if(typeof e!="function")throw new gn(u);return Ns(function(){e.apply(r,a)},s)}function Ps(e,s,a,p){var x=-1,$=bi,H=!0,Q=e.length,nt=[],vt=s.length;if(!Q)return nt;a&&(s=we(s,rn(a))),p?($=ra,H=!1):s.length>=o&&($=Es,H=!1,s=new Lr(s));t:for(;++x<Q;){var _t=e[x],xt=a==null?_t:a(_t);if(_t=p||_t!==0?_t:0,H&&xt===xt){for(var Tt=vt;Tt--;)if(s[Tt]===xt)continue t;nt.push(_t)}else $(s,xt,p)||nt.push(_t)}return nt}var gr=Mc(Pn),fc=Mc(ya,!0);function zg(e,s){var a=!0;return gr(e,function(p,x,$){return a=!!s(p,x,$),a}),a}function zi(e,s,a){for(var p=-1,x=e.length;++p<x;){var $=e[p],H=s($);if(H!=null&&(Q===r?H===H&&!on(H):a(H,Q)))var Q=H,nt=$}return nt}function Ng(e,s,a,p){var x=e.length;for(a=Vt(a),a<0&&(a=-a>x?0:x+a),p=p===r||p>x?x:Vt(p),p<0&&(p+=x),p=a>p?0:Tf(p);a<p;)e[a++]=s;return e}function dc(e,s){var a=[];return gr(e,function(p,x,$){s(p,x,$)&&a.push(p)}),a}function Be(e,s,a,p,x){var $=-1,H=e.length;for(a||(a=Am),x||(x=[]);++$<H;){var Q=e[$];s>0&&a(Q)?s>1?Be(Q,s-1,a,p,x):dr(x,Q):p||(x[x.length]=Q)}return x}var _a=zc(),hc=zc(!0);function Pn(e,s){return e&&_a(e,s,Pe)}function ya(e,s){return e&&hc(e,s,Pe)}function Ni(e,s){return fr(s,function(a){return Jn(e[a])})}function Dr(e,s){s=vr(s,e);for(var a=0,p=s.length;e!=null&&a<p;)e=e[Bn(s[a++])];return a&&a==p?e:r}function pc(e,s,a){var p=s(e);return qt(e)?p:dr(p,a(e))}function He(e){return e==null?e===r?mt:j:$r&&$r in fe(e)?xm(e):Lm(e)}function ba(e,s){return e>s}function Ug(e,s){return e!=null&&ue.call(e,s)}function Fg(e,s){return e!=null&&s in fe(e)}function jg(e,s,a){return e>=Me(s,a)&&e<$e(s,a)}function xa(e,s,a){for(var p=a?ra:bi,x=e[0].length,$=e.length,H=$,Q=dt($),nt=1/0,vt=[];H--;){var _t=e[H];H&&s&&(_t=we(_t,rn(s))),nt=Me(_t.length,nt),Q[H]=!a&&(s||x>=120&&_t.length>=120)?new Lr(H&&_t):r}_t=e[0];var xt=-1,Tt=Q[0];t:for(;++xt<x&&vt.length<nt;){var Lt=_t[xt],zt=s?s(Lt):Lt;if(Lt=a||Lt!==0?Lt:0,!(Tt?Es(Tt,zt):p(vt,zt,a))){for(H=$;--H;){var Gt=Q[H];if(!(Gt?Es(Gt,zt):p(e[H],zt,a)))continue t}Tt&&Tt.push(zt),vt.push(Lt)}}return vt}function Wg(e,s,a,p){return Pn(e,function(x,$,H){s(p,a(x),$,H)}),p}function Ls(e,s,a){s=vr(s,e),e=ef(e,s);var p=e==null?e:e[Bn(yn(s))];return p==null?r:nn(p,e,a)}function gc(e){return Ce(e)&&He(e)==kt}function qg(e){return Ce(e)&&He(e)==Bt}function Hg(e){return Ce(e)&&He(e)==z}function Bs(e,s,a,p,x){return e===s?!0:e==null||s==null||!Ce(e)&&!Ce(s)?e!==e&&s!==s:Vg(e,s,a,p,Bs,x)}function Vg(e,s,a,p,x,$){var H=qt(e),Q=qt(s),nt=H?yt:ze(e),vt=Q?yt:ze(s);nt=nt==kt?C:nt,vt=vt==kt?C:vt;var _t=nt==C,xt=vt==C,Tt=nt==vt;if(Tt&&yr(e)){if(!yr(s))return!1;H=!0,_t=!1}if(Tt&&!_t)return $||($=new En),H||ls(e)?Gc(e,s,a,p,x,$):ym(e,s,nt,a,p,x,$);if(!(a&O)){var Lt=_t&&ue.call(e,"__wrapped__"),zt=xt&&ue.call(s,"__wrapped__");if(Lt||zt){var Gt=Lt?e.value():e,Nt=zt?s.value():s;return $||($=new En),x(Gt,Nt,a,p,$)}}return Tt?($||($=new En),bm(e,s,a,p,x,$)):!1}function Kg(e){return Ce(e)&&ze(e)==h}function wa(e,s,a,p){var x=a.length,$=x,H=!p;if(e==null)return!$;for(e=fe(e);x--;){var Q=a[x];if(H&&Q[2]?Q[1]!==e[Q[0]]:!(Q[0]in e))return!1}for(;++x<$;){Q=a[x];var nt=Q[0],vt=e[nt],_t=Q[1];if(H&&Q[2]){if(vt===r&&!(nt in e))return!1}else{var xt=new En;if(p)var Tt=p(vt,_t,nt,e,s,xt);if(!(Tt===r?Bs(_t,vt,O|w,p,xt):Tt))return!1}}return!0}function mc(e){if(!ke(e)||Tm(e))return!1;var s=Jn(e)?K0:Mp;return s.test(zr(e))}function Gg(e){return Ce(e)&&He(e)==tt}function Zg(e){return Ce(e)&&ze(e)==X}function Yg(e){return Ce(e)&&no(e.length)&&!!ye[He(e)]}function vc(e){return typeof e=="function"?e:e==null?tn:typeof e=="object"?qt(e)?bc(e[0],e[1]):yc(e):Uf(e)}function ka(e){if(!zs(e))return X0(e);var s=[];for(var a in fe(e))ue.call(e,a)&&a!="constructor"&&s.push(a);return s}function Jg(e){if(!ke(e))return Pm(e);var s=zs(e),a=[];for(var p in e)p=="constructor"&&(s||!ue.call(e,p))||a.push(p);return a}function Ca(e,s){return e<s}function _c(e,s){var a=-1,p=Qe(e)?dt(e.length):[];return gr(e,function(x,$,H){p[++a]=s(x,$,H)}),p}function yc(e){var s=Na(e);return s.length==1&&s[0][2]?Xc(s[0][0],s[0][1]):function(a){return a===e||wa(a,e,s)}}function bc(e,s){return Fa(e)&&Qc(s)?Xc(Bn(e),s):function(a){var p=Ja(a,e);return p===r&&p===s?Qa(a,e):Bs(s,p,O|w)}}function Ui(e,s,a,p,x){e!==s&&_a(s,function($,H){if(x||(x=new En),ke($))Qg(e,s,H,a,Ui,p,x);else{var Q=p?p(Wa(e,H),$,H+"",e,s,x):r;Q===r&&(Q=$),ma(e,H,Q)}},Xe)}function Qg(e,s,a,p,x,$,H){var Q=Wa(e,a),nt=Wa(s,a),vt=H.get(nt);if(vt){ma(e,a,vt);return}var _t=$?$(Q,nt,a+"",e,s,H):r,xt=_t===r;if(xt){var Tt=qt(nt),Lt=!Tt&&yr(nt),zt=!Tt&&!Lt&&ls(nt);_t=nt,Tt||Lt||zt?qt(Q)?_t=Q:Ee(Q)?_t=Je(Q):Lt?(xt=!1,_t=$c(nt,!0)):zt?(xt=!1,_t=Pc(nt,!0)):_t=[]:Us(nt)||Nr(nt)?(_t=Q,Nr(Q)?_t=Of(Q):(!ke(Q)||Jn(Q))&&(_t=Jc(nt))):xt=!1}xt&&(H.set(nt,_t),x(_t,nt,p,$,H),H.delete(nt)),ma(e,a,_t)}function xc(e,s){var a=e.length;if(a)return s+=s<0?a:0,Yn(s,a)?e[s]:r}function wc(e,s,a){s.length?s=we(s,function($){return qt($)?function(H){return Dr(H,$.length===1?$[0]:$)}:$}):s=[tn];var p=-1;s=we(s,rn(Dt()));var x=_c(e,function($,H,Q){var nt=we(s,function(vt){return vt($)});return{criteria:nt,index:++p,value:$}});return S0(x,function($,H){return fm($,H,a)})}function Xg(e,s){return kc(e,s,function(a,p){return Qa(e,p)})}function kc(e,s,a){for(var p=-1,x=s.length,$={};++p<x;){var H=s[p],Q=Dr(e,H);a(Q,H)&&Ds($,vr(H,e),Q)}return $}function tm(e){return function(s){return Dr(s,e)}}function Sa(e,s,a,p){var x=p?C0:Jr,$=-1,H=s.length,Q=e;for(e===s&&(s=Je(s)),a&&(Q=we(e,rn(a)));++$<H;)for(var nt=0,vt=s[$],_t=a?a(vt):vt;(nt=x(Q,_t,nt,p))>-1;)Q!==e&&Oi.call(Q,nt,1),Oi.call(e,nt,1);return e}function Cc(e,s){for(var a=e?s.length:0,p=a-1;a--;){var x=s[a];if(a==p||x!==$){var $=x;Yn(x)?Oi.call(e,x,1):Ta(e,x)}}return e}function Ea(e,s){return e+Pi(sc()*(s-e+1))}function em(e,s,a,p){for(var x=-1,$=$e($i((s-e)/(a||1)),0),H=dt($);$--;)H[p?$:++x]=e,e+=a;return H}function Aa(e,s){var a="";if(!e||s<1||s>St)return a;do s%2&&(a+=e),s=Pi(s/2),s&&(e+=e);while(s);return a}function Zt(e,s){return qa(tf(e,s,tn),e+"")}function nm(e){return ac(us(e))}function rm(e,s){var a=us(e);return Yi(a,Br(s,0,a.length))}function Ds(e,s,a,p){if(!ke(e))return e;s=vr(s,e);for(var x=-1,$=s.length,H=$-1,Q=e;Q!=null&&++x<$;){var nt=Bn(s[x]),vt=a;if(nt==="__proto__"||nt==="constructor"||nt==="prototype")return e;if(x!=H){var _t=Q[nt];vt=p?p(_t,nt,Q):r,vt===r&&(vt=ke(_t)?_t:Yn(s[x+1])?[]:{})}$s(Q,nt,vt),Q=Q[nt]}return e}var Sc=Li?function(e,s){return Li.set(e,s),e}:tn,sm=Ii?function(e,s){return Ii(e,"toString",{configurable:!0,enumerable:!1,value:tl(s),writable:!0})}:tn;function im(e){return Yi(us(e))}function _n(e,s,a){var p=-1,x=e.length;s<0&&(s=-s>x?0:x+s),a=a>x?x:a,a<0&&(a+=x),x=s>a?0:a-s>>>0,s>>>=0;for(var $=dt(x);++p<x;)$[p]=e[p+s];return $}function om(e,s){var a;return gr(e,function(p,x,$){return a=s(p,x,$),!a}),!!a}function Fi(e,s,a){var p=0,x=e==null?p:e.length;if(typeof s=="number"&&s===s&&x<=Pt){for(;p<x;){var $=p+x>>>1,H=e[$];H!==null&&!on(H)&&(a?H<=s:H<s)?p=$+1:x=$}return x}return Ra(e,s,tn,a)}function Ra(e,s,a,p){var x=0,$=e==null?0:e.length;if($===0)return 0;s=a(s);for(var H=s!==s,Q=s===null,nt=on(s),vt=s===r;x<$;){var _t=Pi((x+$)/2),xt=a(e[_t]),Tt=xt!==r,Lt=xt===null,zt=xt===xt,Gt=on(xt);if(H)var Nt=p||zt;else vt?Nt=zt&&(p||Tt):Q?Nt=zt&&Tt&&(p||!Lt):nt?Nt=zt&&Tt&&!Lt&&(p||!Gt):Lt||Gt?Nt=!1:Nt=p?xt<=s:xt<s;Nt?x=_t+1:$=_t}return Me($,it)}function Ec(e,s){for(var a=-1,p=e.length,x=0,$=[];++a<p;){var H=e[a],Q=s?s(H):H;if(!a||!An(Q,nt)){var nt=Q;$[x++]=H===0?0:H}}return $}function Ac(e){return typeof e=="number"?e:on(e)?$t:+e}function sn(e){if(typeof e=="string")return e;if(qt(e))return we(e,sn)+"";if(on(e))return ic?ic.call(e):"";var s=e+"";return s=="0"&&1/e==-ct?"-0":s}function mr(e,s,a){var p=-1,x=bi,$=e.length,H=!0,Q=[],nt=Q;if(a)H=!1,x=ra;else if($>=o){var vt=s?null:vm(e);if(vt)return wi(vt);H=!1,x=Es,nt=new Lr}else nt=s?[]:Q;t:for(;++p<$;){var _t=e[p],xt=s?s(_t):_t;if(_t=a||_t!==0?_t:0,H&&xt===xt){for(var Tt=nt.length;Tt--;)if(nt[Tt]===xt)continue t;s&&nt.push(xt),Q.push(_t)}else x(nt,xt,a)||(nt!==Q&&nt.push(xt),Q.push(_t))}return Q}function Ta(e,s){return s=vr(s,e),e=ef(e,s),e==null||delete e[Bn(yn(s))]}function Rc(e,s,a,p){return Ds(e,s,a(Dr(e,s)),p)}function ji(e,s,a,p){for(var x=e.length,$=p?x:-1;(p?$--:++$<x)&&s(e[$],$,e););return a?_n(e,p?0:$,p?$+1:x):_n(e,p?$+1:0,p?x:$)}function Tc(e,s){var a=e;return a instanceof Jt&&(a=a.value()),sa(s,function(p,x){return x.func.apply(x.thisArg,dr([p],x.args))},a)}function Oa(e,s,a){var p=e.length;if(p<2)return p?mr(e[0]):[];for(var x=-1,$=dt(p);++x<p;)for(var H=e[x],Q=-1;++Q<p;)Q!=x&&($[x]=Ps($[x]||H,e[Q],s,a));return mr(Be($,1),s,a)}function Oc(e,s,a){for(var p=-1,x=e.length,$=s.length,H={};++p<x;){var Q=p<$?s[p]:r;a(H,e[p],Q)}return H}function Ia(e){return Ee(e)?e:[]}function $a(e){return typeof e=="function"?e:tn}function vr(e,s){return qt(e)?e:Fa(e,s)?[e]:of(se(e))}var am=Zt;function _r(e,s,a){var p=e.length;return a=a===r?p:a,!s&&a>=p?e:_n(e,s,a)}var Ic=G0||function(e){return Le.clearTimeout(e)};function $c(e,s){if(s)return e.slice();var a=e.length,p=Xu?Xu(a):new e.constructor(a);return e.copy(p),p}function Pa(e){var s=new e.constructor(e.byteLength);return new Ri(s).set(new Ri(e)),s}function lm(e,s){var a=s?Pa(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function um(e){var s=new e.constructor(e.source,gu.exec(e));return s.lastIndex=e.lastIndex,s}function cm(e){return Is?fe(Is.call(e)):{}}function Pc(e,s){var a=s?Pa(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function Lc(e,s){if(e!==s){var a=e!==r,p=e===null,x=e===e,$=on(e),H=s!==r,Q=s===null,nt=s===s,vt=on(s);if(!Q&&!vt&&!$&&e>s||$&&H&&nt&&!Q&&!vt||p&&H&&nt||!a&&nt||!x)return 1;if(!p&&!$&&!vt&&e<s||vt&&a&&x&&!p&&!$||Q&&a&&x||!H&&x||!nt)return-1}return 0}function fm(e,s,a){for(var p=-1,x=e.criteria,$=s.criteria,H=x.length,Q=a.length;++p<H;){var nt=Lc(x[p],$[p]);if(nt){if(p>=Q)return nt;var vt=a[p];return nt*(vt=="desc"?-1:1)}}return e.index-s.index}function Bc(e,s,a,p){for(var x=-1,$=e.length,H=a.length,Q=-1,nt=s.length,vt=$e($-H,0),_t=dt(nt+vt),xt=!p;++Q<nt;)_t[Q]=s[Q];for(;++x<H;)(xt||x<$)&&(_t[a[x]]=e[x]);for(;vt--;)_t[Q++]=e[x++];return _t}function Dc(e,s,a,p){for(var x=-1,$=e.length,H=-1,Q=a.length,nt=-1,vt=s.length,_t=$e($-Q,0),xt=dt(_t+vt),Tt=!p;++x<_t;)xt[x]=e[x];for(var Lt=x;++nt<vt;)xt[Lt+nt]=s[nt];for(;++H<Q;)(Tt||x<$)&&(xt[Lt+a[H]]=e[x++]);return xt}function Je(e,s){var a=-1,p=e.length;for(s||(s=dt(p));++a<p;)s[a]=e[a];return s}function Ln(e,s,a,p){var x=!a;a||(a={});for(var $=-1,H=s.length;++$<H;){var Q=s[$],nt=p?p(a[Q],e[Q],Q,a,e):r;nt===r&&(nt=e[Q]),x?Kn(a,Q,nt):$s(a,Q,nt)}return a}function dm(e,s){return Ln(e,Ua(e),s)}function hm(e,s){return Ln(e,Zc(e),s)}function Wi(e,s){return function(a,p){var x=qt(a)?_0:Bg,$=s?s():{};return x(a,e,Dt(p,2),$)}}function is(e){return Zt(function(s,a){var p=-1,x=a.length,$=x>1?a[x-1]:r,H=x>2?a[2]:r;for($=e.length>3&&typeof $=="function"?(x--,$):r,H&&Ve(a[0],a[1],H)&&($=x<3?r:$,x=1),s=fe(s);++p<x;){var Q=a[p];Q&&e(s,Q,p,$)}return s})}function Mc(e,s){return function(a,p){if(a==null)return a;if(!Qe(a))return e(a,p);for(var x=a.length,$=s?x:-1,H=fe(a);(s?$--:++$<x)&&p(H[$],$,H)!==!1;);return a}}function zc(e){return function(s,a,p){for(var x=-1,$=fe(s),H=p(s),Q=H.length;Q--;){var nt=H[e?Q:++x];if(a($[nt],nt,$)===!1)break}return s}}function pm(e,s,a){var p=s&I,x=Ms(e);function $(){var H=this&&this!==Le&&this instanceof $?x:e;return H.apply(p?a:this,arguments)}return $}function Nc(e){return function(s){s=se(s);var a=Qr(s)?Sn(s):r,p=a?a[0]:s.charAt(0),x=a?_r(a,1).join(""):s.slice(1);return p[e]()+x}}function os(e){return function(s){return sa(zf(Mf(s).replace(s0,"")),e,"")}}function Ms(e){return function(){var s=arguments;switch(s.length){case 0:return new e;case 1:return new e(s[0]);case 2:return new e(s[0],s[1]);case 3:return new e(s[0],s[1],s[2]);case 4:return new e(s[0],s[1],s[2],s[3]);case 5:return new e(s[0],s[1],s[2],s[3],s[4]);case 6:return new e(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new e(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var a=ss(e.prototype),p=e.apply(a,s);return ke(p)?p:a}}function gm(e,s,a){var p=Ms(e);function x(){for(var $=arguments.length,H=dt($),Q=$,nt=as(x);Q--;)H[Q]=arguments[Q];var vt=$<3&&H[0]!==nt&&H[$-1]!==nt?[]:hr(H,nt);if($-=vt.length,$<a)return qc(e,s,qi,x.placeholder,r,H,vt,r,r,a-$);var _t=this&&this!==Le&&this instanceof x?p:e;return nn(_t,this,H)}return x}function Uc(e){return function(s,a,p){var x=fe(s);if(!Qe(s)){var $=Dt(a,3);s=Pe(s),a=function(Q){return $(x[Q],Q,x)}}var H=e(s,a,p);return H>-1?x[$?s[H]:H]:r}}function Fc(e){return Zn(function(s){var a=s.length,p=a,x=mn.prototype.thru;for(e&&s.reverse();p--;){var $=s[p];if(typeof $!="function")throw new gn(u);if(x&&!H&&Gi($)=="wrapper")var H=new mn([],!0)}for(p=H?p:a;++p<a;){$=s[p];var Q=Gi($),nt=Q=="wrapper"?za($):r;nt&&ja(nt[0])&&nt[1]==(F|E|U|M)&&!nt[4].length&&nt[9]==1?H=H[Gi(nt[0])].apply(H,nt[3]):H=$.length==1&&ja($)?H[Q]():H.thru($)}return function(){var vt=arguments,_t=vt[0];if(H&&vt.length==1&&qt(_t))return H.plant(_t).value();for(var xt=0,Tt=a?s[xt].apply(this,vt):_t;++xt<a;)Tt=s[xt].call(this,Tt);return Tt}})}function qi(e,s,a,p,x,$,H,Q,nt,vt){var _t=s&F,xt=s&I,Tt=s&S,Lt=s&(E|P),zt=s&L,Gt=Tt?r:Ms(e);function Nt(){for(var Yt=arguments.length,Qt=dt(Yt),an=Yt;an--;)Qt[an]=arguments[an];if(Lt)var Ke=as(Nt),ln=A0(Qt,Ke);if(p&&(Qt=Bc(Qt,p,x,Lt)),$&&(Qt=Dc(Qt,$,H,Lt)),Yt-=ln,Lt&&Yt<vt){var Ae=hr(Qt,Ke);return qc(e,s,qi,Nt.placeholder,a,Qt,Ae,Q,nt,vt-Yt)}var Rn=xt?a:this,Xn=Tt?Rn[e]:e;return Yt=Qt.length,Q?Qt=Bm(Qt,Q):zt&&Yt>1&&Qt.reverse(),_t&&nt<Yt&&(Qt.length=nt),this&&this!==Le&&this instanceof Nt&&(Xn=Gt||Ms(Xn)),Xn.apply(Rn,Qt)}return Nt}function jc(e,s){return function(a,p){return Wg(a,e,s(p),{})}}function Hi(e,s){return function(a,p){var x;if(a===r&&p===r)return s;if(a!==r&&(x=a),p!==r){if(x===r)return p;typeof a=="string"||typeof p=="string"?(a=sn(a),p=sn(p)):(a=Ac(a),p=Ac(p)),x=e(a,p)}return x}}function La(e){return Zn(function(s){return s=we(s,rn(Dt())),Zt(function(a){var p=this;return e(s,function(x){return nn(x,p,a)})})})}function Vi(e,s){s=s===r?" ":sn(s);var a=s.length;if(a<2)return a?Aa(s,e):s;var p=Aa(s,$i(e/Xr(s)));return Qr(s)?_r(Sn(p),0,e).join(""):p.slice(0,e)}function mm(e,s,a,p){var x=s&I,$=Ms(e);function H(){for(var Q=-1,nt=arguments.length,vt=-1,_t=p.length,xt=dt(_t+nt),Tt=this&&this!==Le&&this instanceof H?$:e;++vt<_t;)xt[vt]=p[vt];for(;nt--;)xt[vt++]=arguments[++Q];return nn(Tt,x?a:this,xt)}return H}function Wc(e){return function(s,a,p){return p&&typeof p!="number"&&Ve(s,a,p)&&(a=p=r),s=Qn(s),a===r?(a=s,s=0):a=Qn(a),p=p===r?s<a?1:-1:Qn(p),em(s,a,p,e)}}function Ki(e){return function(s,a){return typeof s=="string"&&typeof a=="string"||(s=bn(s),a=bn(a)),e(s,a)}}function qc(e,s,a,p,x,$,H,Q,nt,vt){var _t=s&E,xt=_t?H:r,Tt=_t?r:H,Lt=_t?$:r,zt=_t?r:$;s|=_t?U:rt,s&=~(_t?rt:U),s&A||(s&=-4);var Gt=[e,s,x,Lt,xt,zt,Tt,Q,nt,vt],Nt=a.apply(r,Gt);return ja(e)&&nf(Nt,Gt),Nt.placeholder=p,rf(Nt,e,s)}function Ba(e){var s=Ie[e];return function(a,p){if(a=bn(a),p=p==null?0:Me(Vt(p),292),p&&rc(a)){var x=(se(a)+"e").split("e"),$=s(x[0]+"e"+(+x[1]+p));return x=(se($)+"e").split("e"),+(x[0]+"e"+(+x[1]-p))}return s(a)}}var vm=ns&&1/wi(new ns([,-0]))[1]==ct?function(e){return new ns(e)}:rl;function Hc(e){return function(s){var a=ze(s);return a==h?fa(s):a==X?L0(s):E0(s,e(s))}}function Gn(e,s,a,p,x,$,H,Q){var nt=s&S;if(!nt&&typeof e!="function")throw new gn(u);var vt=p?p.length:0;if(vt||(s&=-97,p=x=r),H=H===r?H:$e(Vt(H),0),Q=Q===r?Q:Vt(Q),vt-=x?x.length:0,s&rt){var _t=p,xt=x;p=x=r}var Tt=nt?r:za(e),Lt=[e,s,a,p,x,_t,xt,$,H,Q];if(Tt&&$m(Lt,Tt),e=Lt[0],s=Lt[1],a=Lt[2],p=Lt[3],x=Lt[4],Q=Lt[9]=Lt[9]===r?nt?0:e.length:$e(Lt[9]-vt,0),!Q&&s&(E|P)&&(s&=-25),!s||s==I)var zt=pm(e,s,a);else s==E||s==P?zt=gm(e,s,Q):(s==U||s==(I|U))&&!x.length?zt=mm(e,s,a,p):zt=qi.apply(r,Lt);var Gt=Tt?Sc:nf;return rf(Gt(zt,Lt),e,s)}function Vc(e,s,a,p){return e===r||An(e,es[a])&&!ue.call(p,a)?s:e}function Kc(e,s,a,p,x,$){return ke(e)&&ke(s)&&($.set(s,e),Ui(e,s,r,Kc,$),$.delete(s)),e}function _m(e){return Us(e)?r:e}function Gc(e,s,a,p,x,$){var H=a&O,Q=e.length,nt=s.length;if(Q!=nt&&!(H&&nt>Q))return!1;var vt=$.get(e),_t=$.get(s);if(vt&&_t)return vt==s&&_t==e;var xt=-1,Tt=!0,Lt=a&w?new Lr:r;for($.set(e,s),$.set(s,e);++xt<Q;){var zt=e[xt],Gt=s[xt];if(p)var Nt=H?p(Gt,zt,xt,s,e,$):p(zt,Gt,xt,e,s,$);if(Nt!==r){if(Nt)continue;Tt=!1;break}if(Lt){if(!ia(s,function(Yt,Qt){if(!Es(Lt,Qt)&&(zt===Yt||x(zt,Yt,a,p,$)))return Lt.push(Qt)})){Tt=!1;break}}else if(!(zt===Gt||x(zt,Gt,a,p,$))){Tt=!1;break}}return $.delete(e),$.delete(s),Tt}function ym(e,s,a,p,x,$,H){switch(a){case Ot:if(e.byteLength!=s.byteLength||e.byteOffset!=s.byteOffset)return!1;e=e.buffer,s=s.buffer;case Bt:return!(e.byteLength!=s.byteLength||!$(new Ri(e),new Ri(s)));case W:case z:case V:return An(+e,+s);case Et:return e.name==s.name&&e.message==s.message;case tt:case J:return e==s+"";case h:var Q=fa;case X:var nt=p&O;if(Q||(Q=wi),e.size!=s.size&&!nt)return!1;var vt=H.get(e);if(vt)return vt==s;p|=w,H.set(e,s);var _t=Gc(Q(e),Q(s),p,x,$,H);return H.delete(e),_t;case at:if(Is)return Is.call(e)==Is.call(s)}return!1}function bm(e,s,a,p,x,$){var H=a&O,Q=Da(e),nt=Q.length,vt=Da(s),_t=vt.length;if(nt!=_t&&!H)return!1;for(var xt=nt;xt--;){var Tt=Q[xt];if(!(H?Tt in s:ue.call(s,Tt)))return!1}var Lt=$.get(e),zt=$.get(s);if(Lt&&zt)return Lt==s&&zt==e;var Gt=!0;$.set(e,s),$.set(s,e);for(var Nt=H;++xt<nt;){Tt=Q[xt];var Yt=e[Tt],Qt=s[Tt];if(p)var an=H?p(Qt,Yt,Tt,s,e,$):p(Yt,Qt,Tt,e,s,$);if(!(an===r?Yt===Qt||x(Yt,Qt,a,p,$):an)){Gt=!1;break}Nt||(Nt=Tt=="constructor")}if(Gt&&!Nt){var Ke=e.constructor,ln=s.constructor;Ke!=ln&&"constructor"in e&&"constructor"in s&&!(typeof Ke=="function"&&Ke instanceof Ke&&typeof ln=="function"&&ln instanceof ln)&&(Gt=!1)}return $.delete(e),$.delete(s),Gt}function Zn(e){return qa(tf(e,r,cf),e+"")}function Da(e){return pc(e,Pe,Ua)}function Ma(e){return pc(e,Xe,Zc)}var za=Li?function(e){return Li.get(e)}:rl;function Gi(e){for(var s=e.name+"",a=rs[s],p=ue.call(rs,s)?a.length:0;p--;){var x=a[p],$=x.func;if($==null||$==e)return x.name}return s}function as(e){var s=ue.call(T,"placeholder")?T:e;return s.placeholder}function Dt(){var e=T.iteratee||el;return e=e===el?vc:e,arguments.length?e(arguments[0],arguments[1]):e}function Zi(e,s){var a=e.__data__;return Rm(s)?a[typeof s=="string"?"string":"hash"]:a.map}function Na(e){for(var s=Pe(e),a=s.length;a--;){var p=s[a],x=e[p];s[a]=[p,x,Qc(x)]}return s}function Mr(e,s){var a=I0(e,s);return mc(a)?a:r}function xm(e){var s=ue.call(e,$r),a=e[$r];try{e[$r]=r;var p=!0}catch{}var x=Ei.call(e);return p&&(s?e[$r]=a:delete e[$r]),x}var Ua=ha?function(e){return e==null?[]:(e=fe(e),fr(ha(e),function(s){return ec.call(e,s)}))}:sl,Zc=ha?function(e){for(var s=[];e;)dr(s,Ua(e)),e=Ti(e);return s}:sl,ze=He;(pa&&ze(new pa(new ArrayBuffer(1)))!=Ot||Rs&&ze(new Rs)!=h||ga&&ze(ga.resolve())!=R||ns&&ze(new ns)!=X||Ts&&ze(new Ts)!=ht)&&(ze=function(e){var s=He(e),a=s==C?e.constructor:r,p=a?zr(a):"";if(p)switch(p){case rg:return Ot;case sg:return h;case ig:return R;case og:return X;case ag:return ht}return s});function wm(e,s,a){for(var p=-1,x=a.length;++p<x;){var $=a[p],H=$.size;switch($.type){case"drop":e+=H;break;case"dropRight":s-=H;break;case"take":s=Me(s,e+H);break;case"takeRight":e=$e(e,s-H);break}}return{start:e,end:s}}function km(e){var s=e.match(Tp);return s?s[1].split(Op):[]}function Yc(e,s,a){s=vr(s,e);for(var p=-1,x=s.length,$=!1;++p<x;){var H=Bn(s[p]);if(!($=e!=null&&a(e,H)))break;e=e[H]}return $||++p!=x?$:(x=e==null?0:e.length,!!x&&no(x)&&Yn(H,x)&&(qt(e)||Nr(e)))}function Cm(e){var s=e.length,a=new e.constructor(s);return s&&typeof e[0]=="string"&&ue.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function Jc(e){return typeof e.constructor=="function"&&!zs(e)?ss(Ti(e)):{}}function Sm(e,s,a){var p=e.constructor;switch(s){case Bt:return Pa(e);case W:case z:return new p(+e);case Ot:return lm(e,a);case ee:case be:case _e:case Re:case ne:case Cn:case Se:case xe:case qn:return Pc(e,a);case h:return new p;case V:case J:return new p(e);case tt:return um(e);case X:return new p;case at:return cm(e)}}function Em(e,s){var a=s.length;if(!a)return e;var p=a-1;return s[p]=(a>1?"& ":"")+s[p],s=s.join(a>2?", ":" "),e.replace(Rp,`{
/* [wrapped with `+s+`] */
`)}function Am(e){return qt(e)||Nr(e)||!!(nc&&e&&e[nc])}function Yn(e,s){var a=typeof e;return s=s??St,!!s&&(a=="number"||a!="symbol"&&Np.test(e))&&e>-1&&e%1==0&&e<s}function Ve(e,s,a){if(!ke(a))return!1;var p=typeof s;return(p=="number"?Qe(a)&&Yn(s,a.length):p=="string"&&s in a)?An(a[s],e):!1}function Fa(e,s){if(qt(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||on(e)?!0:Cp.test(e)||!kp.test(e)||s!=null&&e in fe(s)}function Rm(e){var s=typeof e;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?e!=="__proto__":e===null}function ja(e){var s=Gi(e),a=T[s];if(typeof a!="function"||!(s in Jt.prototype))return!1;if(e===a)return!0;var p=za(a);return!!p&&e===p[0]}function Tm(e){return!!Qu&&Qu in e}var Om=Ci?Jn:il;function zs(e){var s=e&&e.constructor,a=typeof s=="function"&&s.prototype||es;return e===a}function Qc(e){return e===e&&!ke(e)}function Xc(e,s){return function(a){return a==null?!1:a[e]===s&&(s!==r||e in fe(a))}}function Im(e){var s=to(e,function(p){return a.size===y&&a.clear(),p}),a=s.cache;return s}function $m(e,s){var a=e[1],p=s[1],x=a|p,$=x<(I|S|F),H=p==F&&a==E||p==F&&a==M&&e[7].length<=s[8]||p==(F|M)&&s[7].length<=s[8]&&a==E;if(!($||H))return e;p&I&&(e[2]=s[2],x|=a&I?0:A);var Q=s[3];if(Q){var nt=e[3];e[3]=nt?Bc(nt,Q,s[4]):Q,e[4]=nt?hr(e[3],g):s[4]}return Q=s[5],Q&&(nt=e[5],e[5]=nt?Dc(nt,Q,s[6]):Q,e[6]=nt?hr(e[5],g):s[6]),Q=s[7],Q&&(e[7]=Q),p&F&&(e[8]=e[8]==null?s[8]:Me(e[8],s[8])),e[9]==null&&(e[9]=s[9]),e[0]=s[0],e[1]=x,e}function Pm(e){var s=[];if(e!=null)for(var a in fe(e))s.push(a);return s}function Lm(e){return Ei.call(e)}function tf(e,s,a){return s=$e(s===r?e.length-1:s,0),function(){for(var p=arguments,x=-1,$=$e(p.length-s,0),H=dt($);++x<$;)H[x]=p[s+x];x=-1;for(var Q=dt(s+1);++x<s;)Q[x]=p[x];return Q[s]=a(H),nn(e,this,Q)}}function ef(e,s){return s.length<2?e:Dr(e,_n(s,0,-1))}function Bm(e,s){for(var a=e.length,p=Me(s.length,a),x=Je(e);p--;){var $=s[p];e[p]=Yn($,a)?x[$]:r}return e}function Wa(e,s){if(!(s==="constructor"&&typeof e[s]=="function")&&s!="__proto__")return e[s]}var nf=sf(Sc),Ns=Y0||function(e,s){return Le.setTimeout(e,s)},qa=sf(sm);function rf(e,s,a){var p=s+"";return qa(e,Em(p,Dm(km(p),a)))}function sf(e){var s=0,a=0;return function(){var p=tg(),x=K-(p-a);if(a=p,x>0){if(++s>=k)return arguments[0]}else s=0;return e.apply(r,arguments)}}function Yi(e,s){var a=-1,p=e.length,x=p-1;for(s=s===r?p:s;++a<s;){var $=Ea(a,x),H=e[$];e[$]=e[a],e[a]=H}return e.length=s,e}var of=Im(function(e){var s=[];return e.charCodeAt(0)===46&&s.push(""),e.replace(Sp,function(a,p,x,$){s.push(x?$.replace(Pp,"$1"):p||a)}),s});function Bn(e){if(typeof e=="string"||on(e))return e;var s=e+"";return s=="0"&&1/e==-ct?"-0":s}function zr(e){if(e!=null){try{return Si.call(e)}catch{}try{return e+""}catch{}}return""}function Dm(e,s){return pn(At,function(a){var p="_."+a[0];s&a[1]&&!bi(e,p)&&e.push(p)}),e.sort()}function af(e){if(e instanceof Jt)return e.clone();var s=new mn(e.__wrapped__,e.__chain__);return s.__actions__=Je(e.__actions__),s.__index__=e.__index__,s.__values__=e.__values__,s}function Mm(e,s,a){(a?Ve(e,s,a):s===r)?s=1:s=$e(Vt(s),0);var p=e==null?0:e.length;if(!p||s<1)return[];for(var x=0,$=0,H=dt($i(p/s));x<p;)H[$++]=_n(e,x,x+=s);return H}function zm(e){for(var s=-1,a=e==null?0:e.length,p=0,x=[];++s<a;){var $=e[s];$&&(x[p++]=$)}return x}function Nm(){var e=arguments.length;if(!e)return[];for(var s=dt(e-1),a=arguments[0],p=e;p--;)s[p-1]=arguments[p];return dr(qt(a)?Je(a):[a],Be(s,1))}var Um=Zt(function(e,s){return Ee(e)?Ps(e,Be(s,1,Ee,!0)):[]}),Fm=Zt(function(e,s){var a=yn(s);return Ee(a)&&(a=r),Ee(e)?Ps(e,Be(s,1,Ee,!0),Dt(a,2)):[]}),jm=Zt(function(e,s){var a=yn(s);return Ee(a)&&(a=r),Ee(e)?Ps(e,Be(s,1,Ee,!0),r,a):[]});function Wm(e,s,a){var p=e==null?0:e.length;return p?(s=a||s===r?1:Vt(s),_n(e,s<0?0:s,p)):[]}function qm(e,s,a){var p=e==null?0:e.length;return p?(s=a||s===r?1:Vt(s),s=p-s,_n(e,0,s<0?0:s)):[]}function Hm(e,s){return e&&e.length?ji(e,Dt(s,3),!0,!0):[]}function Vm(e,s){return e&&e.length?ji(e,Dt(s,3),!0):[]}function Km(e,s,a,p){var x=e==null?0:e.length;return x?(a&&typeof a!="number"&&Ve(e,s,a)&&(a=0,p=x),Ng(e,s,a,p)):[]}function lf(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var x=a==null?0:Vt(a);return x<0&&(x=$e(p+x,0)),xi(e,Dt(s,3),x)}function uf(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var x=p-1;return a!==r&&(x=Vt(a),x=a<0?$e(p+x,0):Me(x,p-1)),xi(e,Dt(s,3),x,!0)}function cf(e){var s=e==null?0:e.length;return s?Be(e,1):[]}function Gm(e){var s=e==null?0:e.length;return s?Be(e,ct):[]}function Zm(e,s){var a=e==null?0:e.length;return a?(s=s===r?1:Vt(s),Be(e,s)):[]}function Ym(e){for(var s=-1,a=e==null?0:e.length,p={};++s<a;){var x=e[s];p[x[0]]=x[1]}return p}function ff(e){return e&&e.length?e[0]:r}function Jm(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var x=a==null?0:Vt(a);return x<0&&(x=$e(p+x,0)),Jr(e,s,x)}function Qm(e){var s=e==null?0:e.length;return s?_n(e,0,-1):[]}var Xm=Zt(function(e){var s=we(e,Ia);return s.length&&s[0]===e[0]?xa(s):[]}),tv=Zt(function(e){var s=yn(e),a=we(e,Ia);return s===yn(a)?s=r:a.pop(),a.length&&a[0]===e[0]?xa(a,Dt(s,2)):[]}),ev=Zt(function(e){var s=yn(e),a=we(e,Ia);return s=typeof s=="function"?s:r,s&&a.pop(),a.length&&a[0]===e[0]?xa(a,r,s):[]});function nv(e,s){return e==null?"":Q0.call(e,s)}function yn(e){var s=e==null?0:e.length;return s?e[s-1]:r}function rv(e,s,a){var p=e==null?0:e.length;if(!p)return-1;var x=p;return a!==r&&(x=Vt(a),x=x<0?$e(p+x,0):Me(x,p-1)),s===s?D0(e,s,x):xi(e,qu,x,!0)}function sv(e,s){return e&&e.length?xc(e,Vt(s)):r}var iv=Zt(df);function df(e,s){return e&&e.length&&s&&s.length?Sa(e,s):e}function ov(e,s,a){return e&&e.length&&s&&s.length?Sa(e,s,Dt(a,2)):e}function av(e,s,a){return e&&e.length&&s&&s.length?Sa(e,s,r,a):e}var lv=Zn(function(e,s){var a=e==null?0:e.length,p=va(e,s);return Cc(e,we(s,function(x){return Yn(x,a)?+x:x}).sort(Lc)),p});function uv(e,s){var a=[];if(!(e&&e.length))return a;var p=-1,x=[],$=e.length;for(s=Dt(s,3);++p<$;){var H=e[p];s(H,p,e)&&(a.push(H),x.push(p))}return Cc(e,x),a}function Ha(e){return e==null?e:ng.call(e)}function cv(e,s,a){var p=e==null?0:e.length;return p?(a&&typeof a!="number"&&Ve(e,s,a)?(s=0,a=p):(s=s==null?0:Vt(s),a=a===r?p:Vt(a)),_n(e,s,a)):[]}function fv(e,s){return Fi(e,s)}function dv(e,s,a){return Ra(e,s,Dt(a,2))}function hv(e,s){var a=e==null?0:e.length;if(a){var p=Fi(e,s);if(p<a&&An(e[p],s))return p}return-1}function pv(e,s){return Fi(e,s,!0)}function gv(e,s,a){return Ra(e,s,Dt(a,2),!0)}function mv(e,s){var a=e==null?0:e.length;if(a){var p=Fi(e,s,!0)-1;if(An(e[p],s))return p}return-1}function vv(e){return e&&e.length?Ec(e):[]}function _v(e,s){return e&&e.length?Ec(e,Dt(s,2)):[]}function yv(e){var s=e==null?0:e.length;return s?_n(e,1,s):[]}function bv(e,s,a){return e&&e.length?(s=a||s===r?1:Vt(s),_n(e,0,s<0?0:s)):[]}function xv(e,s,a){var p=e==null?0:e.length;return p?(s=a||s===r?1:Vt(s),s=p-s,_n(e,s<0?0:s,p)):[]}function wv(e,s){return e&&e.length?ji(e,Dt(s,3),!1,!0):[]}function kv(e,s){return e&&e.length?ji(e,Dt(s,3)):[]}var Cv=Zt(function(e){return mr(Be(e,1,Ee,!0))}),Sv=Zt(function(e){var s=yn(e);return Ee(s)&&(s=r),mr(Be(e,1,Ee,!0),Dt(s,2))}),Ev=Zt(function(e){var s=yn(e);return s=typeof s=="function"?s:r,mr(Be(e,1,Ee,!0),r,s)});function Av(e){return e&&e.length?mr(e):[]}function Rv(e,s){return e&&e.length?mr(e,Dt(s,2)):[]}function Tv(e,s){return s=typeof s=="function"?s:r,e&&e.length?mr(e,r,s):[]}function Va(e){if(!(e&&e.length))return[];var s=0;return e=fr(e,function(a){if(Ee(a))return s=$e(a.length,s),!0}),ua(s,function(a){return we(e,oa(a))})}function hf(e,s){if(!(e&&e.length))return[];var a=Va(e);return s==null?a:we(a,function(p){return nn(s,r,p)})}var Ov=Zt(function(e,s){return Ee(e)?Ps(e,s):[]}),Iv=Zt(function(e){return Oa(fr(e,Ee))}),$v=Zt(function(e){var s=yn(e);return Ee(s)&&(s=r),Oa(fr(e,Ee),Dt(s,2))}),Pv=Zt(function(e){var s=yn(e);return s=typeof s=="function"?s:r,Oa(fr(e,Ee),r,s)}),Lv=Zt(Va);function Bv(e,s){return Oc(e||[],s||[],$s)}function Dv(e,s){return Oc(e||[],s||[],Ds)}var Mv=Zt(function(e){var s=e.length,a=s>1?e[s-1]:r;return a=typeof a=="function"?(e.pop(),a):r,hf(e,a)});function pf(e){var s=T(e);return s.__chain__=!0,s}function zv(e,s){return s(e),e}function Ji(e,s){return s(e)}var Nv=Zn(function(e){var s=e.length,a=s?e[0]:0,p=this.__wrapped__,x=function($){return va($,e)};return s>1||this.__actions__.length||!(p instanceof Jt)||!Yn(a)?this.thru(x):(p=p.slice(a,+a+(s?1:0)),p.__actions__.push({func:Ji,args:[x],thisArg:r}),new mn(p,this.__chain__).thru(function($){return s&&!$.length&&$.push(r),$}))});function Uv(){return pf(this)}function Fv(){return new mn(this.value(),this.__chain__)}function jv(){this.__values__===r&&(this.__values__=Rf(this.value()));var e=this.__index__>=this.__values__.length,s=e?r:this.__values__[this.__index__++];return{done:e,value:s}}function Wv(){return this}function qv(e){for(var s,a=this;a instanceof Di;){var p=af(a);p.__index__=0,p.__values__=r,s?x.__wrapped__=p:s=p;var x=p;a=a.__wrapped__}return x.__wrapped__=e,s}function Hv(){var e=this.__wrapped__;if(e instanceof Jt){var s=e;return this.__actions__.length&&(s=new Jt(this)),s=s.reverse(),s.__actions__.push({func:Ji,args:[Ha],thisArg:r}),new mn(s,this.__chain__)}return this.thru(Ha)}function Vv(){return Tc(this.__wrapped__,this.__actions__)}var Kv=Wi(function(e,s,a){ue.call(e,a)?++e[a]:Kn(e,a,1)});function Gv(e,s,a){var p=qt(e)?ju:zg;return a&&Ve(e,s,a)&&(s=r),p(e,Dt(s,3))}function Zv(e,s){var a=qt(e)?fr:dc;return a(e,Dt(s,3))}var Yv=Uc(lf),Jv=Uc(uf);function Qv(e,s){return Be(Qi(e,s),1)}function Xv(e,s){return Be(Qi(e,s),ct)}function t1(e,s,a){return a=a===r?1:Vt(a),Be(Qi(e,s),a)}function gf(e,s){var a=qt(e)?pn:gr;return a(e,Dt(s,3))}function mf(e,s){var a=qt(e)?y0:fc;return a(e,Dt(s,3))}var e1=Wi(function(e,s,a){ue.call(e,a)?e[a].push(s):Kn(e,a,[s])});function n1(e,s,a,p){e=Qe(e)?e:us(e),a=a&&!p?Vt(a):0;var x=e.length;return a<0&&(a=$e(x+a,0)),ro(e)?a<=x&&e.indexOf(s,a)>-1:!!x&&Jr(e,s,a)>-1}var r1=Zt(function(e,s,a){var p=-1,x=typeof s=="function",$=Qe(e)?dt(e.length):[];return gr(e,function(H){$[++p]=x?nn(s,H,a):Ls(H,s,a)}),$}),s1=Wi(function(e,s,a){Kn(e,a,s)});function Qi(e,s){var a=qt(e)?we:_c;return a(e,Dt(s,3))}function i1(e,s,a,p){return e==null?[]:(qt(s)||(s=s==null?[]:[s]),a=p?r:a,qt(a)||(a=a==null?[]:[a]),wc(e,s,a))}var o1=Wi(function(e,s,a){e[a?0:1].push(s)},function(){return[[],[]]});function a1(e,s,a){var p=qt(e)?sa:Vu,x=arguments.length<3;return p(e,Dt(s,4),a,x,gr)}function l1(e,s,a){var p=qt(e)?b0:Vu,x=arguments.length<3;return p(e,Dt(s,4),a,x,fc)}function u1(e,s){var a=qt(e)?fr:dc;return a(e,eo(Dt(s,3)))}function c1(e){var s=qt(e)?ac:nm;return s(e)}function f1(e,s,a){(a?Ve(e,s,a):s===r)?s=1:s=Vt(s);var p=qt(e)?Pg:rm;return p(e,s)}function d1(e){var s=qt(e)?Lg:im;return s(e)}function h1(e){if(e==null)return 0;if(Qe(e))return ro(e)?Xr(e):e.length;var s=ze(e);return s==h||s==X?e.size:ka(e).length}function p1(e,s,a){var p=qt(e)?ia:om;return a&&Ve(e,s,a)&&(s=r),p(e,Dt(s,3))}var g1=Zt(function(e,s){if(e==null)return[];var a=s.length;return a>1&&Ve(e,s[0],s[1])?s=[]:a>2&&Ve(s[0],s[1],s[2])&&(s=[s[0]]),wc(e,Be(s,1),[])}),Xi=Z0||function(){return Le.Date.now()};function m1(e,s){if(typeof s!="function")throw new gn(u);return e=Vt(e),function(){if(--e<1)return s.apply(this,arguments)}}function vf(e,s,a){return s=a?r:s,s=e&&s==null?e.length:s,Gn(e,F,r,r,r,r,s)}function _f(e,s){var a;if(typeof s!="function")throw new gn(u);return e=Vt(e),function(){return--e>0&&(a=s.apply(this,arguments)),e<=1&&(s=r),a}}var Ka=Zt(function(e,s,a){var p=I;if(a.length){var x=hr(a,as(Ka));p|=U}return Gn(e,p,s,a,x)}),yf=Zt(function(e,s,a){var p=I|S;if(a.length){var x=hr(a,as(yf));p|=U}return Gn(s,p,e,a,x)});function bf(e,s,a){s=a?r:s;var p=Gn(e,E,r,r,r,r,r,s);return p.placeholder=bf.placeholder,p}function xf(e,s,a){s=a?r:s;var p=Gn(e,P,r,r,r,r,r,s);return p.placeholder=xf.placeholder,p}function wf(e,s,a){var p,x,$,H,Q,nt,vt=0,_t=!1,xt=!1,Tt=!0;if(typeof e!="function")throw new gn(u);s=bn(s)||0,ke(a)&&(_t=!!a.leading,xt="maxWait"in a,$=xt?$e(bn(a.maxWait)||0,s):$,Tt="trailing"in a?!!a.trailing:Tt);function Lt(Ae){var Rn=p,Xn=x;return p=x=r,vt=Ae,H=e.apply(Xn,Rn),H}function zt(Ae){return vt=Ae,Q=Ns(Yt,s),_t?Lt(Ae):H}function Gt(Ae){var Rn=Ae-nt,Xn=Ae-vt,Ff=s-Rn;return xt?Me(Ff,$-Xn):Ff}function Nt(Ae){var Rn=Ae-nt,Xn=Ae-vt;return nt===r||Rn>=s||Rn<0||xt&&Xn>=$}function Yt(){var Ae=Xi();if(Nt(Ae))return Qt(Ae);Q=Ns(Yt,Gt(Ae))}function Qt(Ae){return Q=r,Tt&&p?Lt(Ae):(p=x=r,H)}function an(){Q!==r&&Ic(Q),vt=0,p=nt=x=Q=r}function Ke(){return Q===r?H:Qt(Xi())}function ln(){var Ae=Xi(),Rn=Nt(Ae);if(p=arguments,x=this,nt=Ae,Rn){if(Q===r)return zt(nt);if(xt)return Ic(Q),Q=Ns(Yt,s),Lt(nt)}return Q===r&&(Q=Ns(Yt,s)),H}return ln.cancel=an,ln.flush=Ke,ln}var v1=Zt(function(e,s){return cc(e,1,s)}),_1=Zt(function(e,s,a){return cc(e,bn(s)||0,a)});function y1(e){return Gn(e,L)}function to(e,s){if(typeof e!="function"||s!=null&&typeof s!="function")throw new gn(u);var a=function(){var p=arguments,x=s?s.apply(this,p):p[0],$=a.cache;if($.has(x))return $.get(x);var H=e.apply(this,p);return a.cache=$.set(x,H)||$,H};return a.cache=new(to.Cache||Vn),a}to.Cache=Vn;function eo(e){if(typeof e!="function")throw new gn(u);return function(){var s=arguments;switch(s.length){case 0:return!e.call(this);case 1:return!e.call(this,s[0]);case 2:return!e.call(this,s[0],s[1]);case 3:return!e.call(this,s[0],s[1],s[2])}return!e.apply(this,s)}}function b1(e){return _f(2,e)}var x1=am(function(e,s){s=s.length==1&&qt(s[0])?we(s[0],rn(Dt())):we(Be(s,1),rn(Dt()));var a=s.length;return Zt(function(p){for(var x=-1,$=Me(p.length,a);++x<$;)p[x]=s[x].call(this,p[x]);return nn(e,this,p)})}),Ga=Zt(function(e,s){var a=hr(s,as(Ga));return Gn(e,U,r,s,a)}),kf=Zt(function(e,s){var a=hr(s,as(kf));return Gn(e,rt,r,s,a)}),w1=Zn(function(e,s){return Gn(e,M,r,r,r,s)});function k1(e,s){if(typeof e!="function")throw new gn(u);return s=s===r?s:Vt(s),Zt(e,s)}function C1(e,s){if(typeof e!="function")throw new gn(u);return s=s==null?0:$e(Vt(s),0),Zt(function(a){var p=a[s],x=_r(a,0,s);return p&&dr(x,p),nn(e,this,x)})}function S1(e,s,a){var p=!0,x=!0;if(typeof e!="function")throw new gn(u);return ke(a)&&(p="leading"in a?!!a.leading:p,x="trailing"in a?!!a.trailing:x),wf(e,s,{leading:p,maxWait:s,trailing:x})}function E1(e){return vf(e,1)}function A1(e,s){return Ga($a(s),e)}function R1(){if(!arguments.length)return[];var e=arguments[0];return qt(e)?e:[e]}function T1(e){return vn(e,v)}function O1(e,s){return s=typeof s=="function"?s:r,vn(e,v,s)}function I1(e){return vn(e,m|v)}function $1(e,s){return s=typeof s=="function"?s:r,vn(e,m|v,s)}function P1(e,s){return s==null||uc(e,s,Pe(s))}function An(e,s){return e===s||e!==e&&s!==s}var L1=Ki(ba),B1=Ki(function(e,s){return e>=s}),Nr=gc(function(){return arguments}())?gc:function(e){return Ce(e)&&ue.call(e,"callee")&&!ec.call(e,"callee")},qt=dt.isArray,D1=Du?rn(Du):qg;function Qe(e){return e!=null&&no(e.length)&&!Jn(e)}function Ee(e){return Ce(e)&&Qe(e)}function M1(e){return e===!0||e===!1||Ce(e)&&He(e)==W}var yr=J0||il,z1=Mu?rn(Mu):Hg;function N1(e){return Ce(e)&&e.nodeType===1&&!Us(e)}function U1(e){if(e==null)return!0;if(Qe(e)&&(qt(e)||typeof e=="string"||typeof e.splice=="function"||yr(e)||ls(e)||Nr(e)))return!e.length;var s=ze(e);if(s==h||s==X)return!e.size;if(zs(e))return!ka(e).length;for(var a in e)if(ue.call(e,a))return!1;return!0}function F1(e,s){return Bs(e,s)}function j1(e,s,a){a=typeof a=="function"?a:r;var p=a?a(e,s):r;return p===r?Bs(e,s,r,a):!!p}function Za(e){if(!Ce(e))return!1;var s=He(e);return s==Et||s==ut||typeof e.message=="string"&&typeof e.name=="string"&&!Us(e)}function W1(e){return typeof e=="number"&&rc(e)}function Jn(e){if(!ke(e))return!1;var s=He(e);return s==B||s==q||s==G||s==N}function Cf(e){return typeof e=="number"&&e==Vt(e)}function no(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=St}function ke(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}function Ce(e){return e!=null&&typeof e=="object"}var Sf=zu?rn(zu):Kg;function q1(e,s){return e===s||wa(e,s,Na(s))}function H1(e,s,a){return a=typeof a=="function"?a:r,wa(e,s,Na(s),a)}function V1(e){return Ef(e)&&e!=+e}function K1(e){if(Om(e))throw new jt(l);return mc(e)}function G1(e){return e===null}function Z1(e){return e==null}function Ef(e){return typeof e=="number"||Ce(e)&&He(e)==V}function Us(e){if(!Ce(e)||He(e)!=C)return!1;var s=Ti(e);if(s===null)return!0;var a=ue.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&Si.call(a)==H0}var Ya=Nu?rn(Nu):Gg;function Y1(e){return Cf(e)&&e>=-St&&e<=St}var Af=Uu?rn(Uu):Zg;function ro(e){return typeof e=="string"||!qt(e)&&Ce(e)&&He(e)==J}function on(e){return typeof e=="symbol"||Ce(e)&&He(e)==at}var ls=Fu?rn(Fu):Yg;function J1(e){return e===r}function Q1(e){return Ce(e)&&ze(e)==ht}function X1(e){return Ce(e)&&He(e)==Ct}var t_=Ki(Ca),e_=Ki(function(e,s){return e<=s});function Rf(e){if(!e)return[];if(Qe(e))return ro(e)?Sn(e):Je(e);if(As&&e[As])return P0(e[As]());var s=ze(e),a=s==h?fa:s==X?wi:us;return a(e)}function Qn(e){if(!e)return e===0?e:0;if(e=bn(e),e===ct||e===-ct){var s=e<0?-1:1;return s*bt}return e===e?e:0}function Vt(e){var s=Qn(e),a=s%1;return s===s?a?s-a:s:0}function Tf(e){return e?Br(Vt(e),0,ot):0}function bn(e){if(typeof e=="number")return e;if(on(e))return $t;if(ke(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=ke(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=Ku(e);var a=Dp.test(e);return a||zp.test(e)?m0(e.slice(2),a?2:8):Bp.test(e)?$t:+e}function Of(e){return Ln(e,Xe(e))}function n_(e){return e?Br(Vt(e),-St,St):e===0?e:0}function se(e){return e==null?"":sn(e)}var r_=is(function(e,s){if(zs(s)||Qe(s)){Ln(s,Pe(s),e);return}for(var a in s)ue.call(s,a)&&$s(e,a,s[a])}),If=is(function(e,s){Ln(s,Xe(s),e)}),so=is(function(e,s,a,p){Ln(s,Xe(s),e,p)}),s_=is(function(e,s,a,p){Ln(s,Pe(s),e,p)}),i_=Zn(va);function o_(e,s){var a=ss(e);return s==null?a:lc(a,s)}var a_=Zt(function(e,s){e=fe(e);var a=-1,p=s.length,x=p>2?s[2]:r;for(x&&Ve(s[0],s[1],x)&&(p=1);++a<p;)for(var $=s[a],H=Xe($),Q=-1,nt=H.length;++Q<nt;){var vt=H[Q],_t=e[vt];(_t===r||An(_t,es[vt])&&!ue.call(e,vt))&&(e[vt]=$[vt])}return e}),l_=Zt(function(e){return e.push(r,Kc),nn($f,r,e)});function u_(e,s){return Wu(e,Dt(s,3),Pn)}function c_(e,s){return Wu(e,Dt(s,3),ya)}function f_(e,s){return e==null?e:_a(e,Dt(s,3),Xe)}function d_(e,s){return e==null?e:hc(e,Dt(s,3),Xe)}function h_(e,s){return e&&Pn(e,Dt(s,3))}function p_(e,s){return e&&ya(e,Dt(s,3))}function g_(e){return e==null?[]:Ni(e,Pe(e))}function m_(e){return e==null?[]:Ni(e,Xe(e))}function Ja(e,s,a){var p=e==null?r:Dr(e,s);return p===r?a:p}function v_(e,s){return e!=null&&Yc(e,s,Ug)}function Qa(e,s){return e!=null&&Yc(e,s,Fg)}var __=jc(function(e,s,a){s!=null&&typeof s.toString!="function"&&(s=Ei.call(s)),e[s]=a},tl(tn)),y_=jc(function(e,s,a){s!=null&&typeof s.toString!="function"&&(s=Ei.call(s)),ue.call(e,s)?e[s].push(a):e[s]=[a]},Dt),b_=Zt(Ls);function Pe(e){return Qe(e)?oc(e):ka(e)}function Xe(e){return Qe(e)?oc(e,!0):Jg(e)}function x_(e,s){var a={};return s=Dt(s,3),Pn(e,function(p,x,$){Kn(a,s(p,x,$),p)}),a}function w_(e,s){var a={};return s=Dt(s,3),Pn(e,function(p,x,$){Kn(a,x,s(p,x,$))}),a}var k_=is(function(e,s,a){Ui(e,s,a)}),$f=is(function(e,s,a,p){Ui(e,s,a,p)}),C_=Zn(function(e,s){var a={};if(e==null)return a;var p=!1;s=we(s,function($){return $=vr($,e),p||(p=$.length>1),$}),Ln(e,Ma(e),a),p&&(a=vn(a,m|b|v,_m));for(var x=s.length;x--;)Ta(a,s[x]);return a});function S_(e,s){return Pf(e,eo(Dt(s)))}var E_=Zn(function(e,s){return e==null?{}:Xg(e,s)});function Pf(e,s){if(e==null)return{};var a=we(Ma(e),function(p){return[p]});return s=Dt(s),kc(e,a,function(p,x){return s(p,x[0])})}function A_(e,s,a){s=vr(s,e);var p=-1,x=s.length;for(x||(x=1,e=r);++p<x;){var $=e==null?r:e[Bn(s[p])];$===r&&(p=x,$=a),e=Jn($)?$.call(e):$}return e}function R_(e,s,a){return e==null?e:Ds(e,s,a)}function T_(e,s,a,p){return p=typeof p=="function"?p:r,e==null?e:Ds(e,s,a,p)}var Lf=Hc(Pe),Bf=Hc(Xe);function O_(e,s,a){var p=qt(e),x=p||yr(e)||ls(e);if(s=Dt(s,4),a==null){var $=e&&e.constructor;x?a=p?new $:[]:ke(e)?a=Jn($)?ss(Ti(e)):{}:a={}}return(x?pn:Pn)(e,function(H,Q,nt){return s(a,H,Q,nt)}),a}function I_(e,s){return e==null?!0:Ta(e,s)}function $_(e,s,a){return e==null?e:Rc(e,s,$a(a))}function P_(e,s,a,p){return p=typeof p=="function"?p:r,e==null?e:Rc(e,s,$a(a),p)}function us(e){return e==null?[]:ca(e,Pe(e))}function L_(e){return e==null?[]:ca(e,Xe(e))}function B_(e,s,a){return a===r&&(a=s,s=r),a!==r&&(a=bn(a),a=a===a?a:0),s!==r&&(s=bn(s),s=s===s?s:0),Br(bn(e),s,a)}function D_(e,s,a){return s=Qn(s),a===r?(a=s,s=0):a=Qn(a),e=bn(e),jg(e,s,a)}function M_(e,s,a){if(a&&typeof a!="boolean"&&Ve(e,s,a)&&(s=a=r),a===r&&(typeof s=="boolean"?(a=s,s=r):typeof e=="boolean"&&(a=e,e=r)),e===r&&s===r?(e=0,s=1):(e=Qn(e),s===r?(s=e,e=0):s=Qn(s)),e>s){var p=e;e=s,s=p}if(a||e%1||s%1){var x=sc();return Me(e+x*(s-e+g0("1e-"+((x+"").length-1))),s)}return Ea(e,s)}var z_=os(function(e,s,a){return s=s.toLowerCase(),e+(a?Df(s):s)});function Df(e){return Xa(se(e).toLowerCase())}function Mf(e){return e=se(e),e&&e.replace(Up,R0).replace(i0,"")}function N_(e,s,a){e=se(e),s=sn(s);var p=e.length;a=a===r?p:Br(Vt(a),0,p);var x=a;return a-=s.length,a>=0&&e.slice(a,x)==s}function U_(e){return e=se(e),e&&bp.test(e)?e.replace(cr,T0):e}function F_(e){return e=se(e),e&&Ep.test(e)?e.replace(Go,"\\$&"):e}var j_=os(function(e,s,a){return e+(a?"-":"")+s.toLowerCase()}),W_=os(function(e,s,a){return e+(a?" ":"")+s.toLowerCase()}),q_=Nc("toLowerCase");function H_(e,s,a){e=se(e),s=Vt(s);var p=s?Xr(e):0;if(!s||p>=s)return e;var x=(s-p)/2;return Vi(Pi(x),a)+e+Vi($i(x),a)}function V_(e,s,a){e=se(e),s=Vt(s);var p=s?Xr(e):0;return s&&p<s?e+Vi(s-p,a):e}function K_(e,s,a){e=se(e),s=Vt(s);var p=s?Xr(e):0;return s&&p<s?Vi(s-p,a)+e:e}function G_(e,s,a){return a||s==null?s=0:s&&(s=+s),eg(se(e).replace(Zo,""),s||0)}function Z_(e,s,a){return(a?Ve(e,s,a):s===r)?s=1:s=Vt(s),Aa(se(e),s)}function Y_(){var e=arguments,s=se(e[0]);return e.length<3?s:s.replace(e[1],e[2])}var J_=os(function(e,s,a){return e+(a?"_":"")+s.toLowerCase()});function Q_(e,s,a){return a&&typeof a!="number"&&Ve(e,s,a)&&(s=a=r),a=a===r?ot:a>>>0,a?(e=se(e),e&&(typeof s=="string"||s!=null&&!Ya(s))&&(s=sn(s),!s&&Qr(e))?_r(Sn(e),0,a):e.split(s,a)):[]}var X_=os(function(e,s,a){return e+(a?" ":"")+Xa(s)});function ty(e,s,a){return e=se(e),a=a==null?0:Br(Vt(a),0,e.length),s=sn(s),e.slice(a,a+s.length)==s}function ey(e,s,a){var p=T.templateSettings;a&&Ve(e,s,a)&&(s=r),e=se(e),s=so({},s,p,Vc);var x=so({},s.imports,p.imports,Vc),$=Pe(x),H=ca(x,$),Q,nt,vt=0,_t=s.interpolate||vi,xt="__p += '",Tt=da((s.escape||vi).source+"|"+_t.source+"|"+(_t===pu?Lp:vi).source+"|"+(s.evaluate||vi).source+"|$","g"),Lt="//# sourceURL="+(ue.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++c0+"]")+`
`;e.replace(Tt,function(Nt,Yt,Qt,an,Ke,ln){return Qt||(Qt=an),xt+=e.slice(vt,ln).replace(Fp,O0),Yt&&(Q=!0,xt+=`' +
__e(`+Yt+`) +
'`),Ke&&(nt=!0,xt+=`';
`+Ke+`;
__p += '`),Qt&&(xt+=`' +
((__t = (`+Qt+`)) == null ? '' : __t) +
'`),vt=ln+Nt.length,Nt}),xt+=`';
`;var zt=ue.call(s,"variable")&&s.variable;if(!zt)xt=`with (obj) {
`+xt+`
}
`;else if($p.test(zt))throw new jt(c);xt=(nt?xt.replace(Gr,""):xt).replace(Vo,"$1").replace(Ko,"$1;"),xt="function("+(zt||"obj")+`) {
`+(zt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Q?", __e = _.escape":"")+(nt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xt+`return __p
}`;var Gt=Nf(function(){return re($,Lt+"return "+xt).apply(r,H)});if(Gt.source=xt,Za(Gt))throw Gt;return Gt}function ny(e){return se(e).toLowerCase()}function ry(e){return se(e).toUpperCase()}function sy(e,s,a){if(e=se(e),e&&(a||s===r))return Ku(e);if(!e||!(s=sn(s)))return e;var p=Sn(e),x=Sn(s),$=Gu(p,x),H=Zu(p,x)+1;return _r(p,$,H).join("")}function iy(e,s,a){if(e=se(e),e&&(a||s===r))return e.slice(0,Ju(e)+1);if(!e||!(s=sn(s)))return e;var p=Sn(e),x=Zu(p,Sn(s))+1;return _r(p,0,x).join("")}function oy(e,s,a){if(e=se(e),e&&(a||s===r))return e.replace(Zo,"");if(!e||!(s=sn(s)))return e;var p=Sn(e),x=Gu(p,Sn(s));return _r(p,x).join("")}function ay(e,s){var a=D,p=st;if(ke(s)){var x="separator"in s?s.separator:x;a="length"in s?Vt(s.length):a,p="omission"in s?sn(s.omission):p}e=se(e);var $=e.length;if(Qr(e)){var H=Sn(e);$=H.length}if(a>=$)return e;var Q=a-Xr(p);if(Q<1)return p;var nt=H?_r(H,0,Q).join(""):e.slice(0,Q);if(x===r)return nt+p;if(H&&(Q+=nt.length-Q),Ya(x)){if(e.slice(Q).search(x)){var vt,_t=nt;for(x.global||(x=da(x.source,se(gu.exec(x))+"g")),x.lastIndex=0;vt=x.exec(_t);)var xt=vt.index;nt=nt.slice(0,xt===r?Q:xt)}}else if(e.indexOf(sn(x),Q)!=Q){var Tt=nt.lastIndexOf(x);Tt>-1&&(nt=nt.slice(0,Tt))}return nt+p}function ly(e){return e=se(e),e&&Zr.test(e)?e.replace(Ss,M0):e}var uy=os(function(e,s,a){return e+(a?" ":"")+s.toUpperCase()}),Xa=Nc("toUpperCase");function zf(e,s,a){return e=se(e),s=a?r:s,s===r?$0(e)?U0(e):k0(e):e.match(s)||[]}var Nf=Zt(function(e,s){try{return nn(e,r,s)}catch(a){return Za(a)?a:new jt(a)}}),cy=Zn(function(e,s){return pn(s,function(a){a=Bn(a),Kn(e,a,Ka(e[a],e))}),e});function fy(e){var s=e==null?0:e.length,a=Dt();return e=s?we(e,function(p){if(typeof p[1]!="function")throw new gn(u);return[a(p[0]),p[1]]}):[],Zt(function(p){for(var x=-1;++x<s;){var $=e[x];if(nn($[0],this,p))return nn($[1],this,p)}})}function dy(e){return Mg(vn(e,m))}function tl(e){return function(){return e}}function hy(e,s){return e==null||e!==e?s:e}var py=Fc(),gy=Fc(!0);function tn(e){return e}function el(e){return vc(typeof e=="function"?e:vn(e,m))}function my(e){return yc(vn(e,m))}function vy(e,s){return bc(e,vn(s,m))}var _y=Zt(function(e,s){return function(a){return Ls(a,e,s)}}),yy=Zt(function(e,s){return function(a){return Ls(e,a,s)}});function nl(e,s,a){var p=Pe(s),x=Ni(s,p);a==null&&!(ke(s)&&(x.length||!p.length))&&(a=s,s=e,e=this,x=Ni(s,Pe(s)));var $=!(ke(a)&&"chain"in a)||!!a.chain,H=Jn(e);return pn(x,function(Q){var nt=s[Q];e[Q]=nt,H&&(e.prototype[Q]=function(){var vt=this.__chain__;if($||vt){var _t=e(this.__wrapped__),xt=_t.__actions__=Je(this.__actions__);return xt.push({func:nt,args:arguments,thisArg:e}),_t.__chain__=vt,_t}return nt.apply(e,dr([this.value()],arguments))})}),e}function by(){return Le._===this&&(Le._=V0),this}function rl(){}function xy(e){return e=Vt(e),Zt(function(s){return xc(s,e)})}var wy=La(we),ky=La(ju),Cy=La(ia);function Uf(e){return Fa(e)?oa(Bn(e)):tm(e)}function Sy(e){return function(s){return e==null?r:Dr(e,s)}}var Ey=Wc(),Ay=Wc(!0);function sl(){return[]}function il(){return!1}function Ry(){return{}}function Ty(){return""}function Oy(){return!0}function Iy(e,s){if(e=Vt(e),e<1||e>St)return[];var a=ot,p=Me(e,ot);s=Dt(s),e-=ot;for(var x=ua(p,s);++a<e;)s(a);return x}function $y(e){return qt(e)?we(e,Bn):on(e)?[e]:Je(of(se(e)))}function Py(e){var s=++q0;return se(e)+s}var Ly=Hi(function(e,s){return e+s},0),By=Ba("ceil"),Dy=Hi(function(e,s){return e/s},1),My=Ba("floor");function zy(e){return e&&e.length?zi(e,tn,ba):r}function Ny(e,s){return e&&e.length?zi(e,Dt(s,2),ba):r}function Uy(e){return Hu(e,tn)}function Fy(e,s){return Hu(e,Dt(s,2))}function jy(e){return e&&e.length?zi(e,tn,Ca):r}function Wy(e,s){return e&&e.length?zi(e,Dt(s,2),Ca):r}var qy=Hi(function(e,s){return e*s},1),Hy=Ba("round"),Vy=Hi(function(e,s){return e-s},0);function Ky(e){return e&&e.length?la(e,tn):0}function Gy(e,s){return e&&e.length?la(e,Dt(s,2)):0}return T.after=m1,T.ary=vf,T.assign=r_,T.assignIn=If,T.assignInWith=so,T.assignWith=s_,T.at=i_,T.before=_f,T.bind=Ka,T.bindAll=cy,T.bindKey=yf,T.castArray=R1,T.chain=pf,T.chunk=Mm,T.compact=zm,T.concat=Nm,T.cond=fy,T.conforms=dy,T.constant=tl,T.countBy=Kv,T.create=o_,T.curry=bf,T.curryRight=xf,T.debounce=wf,T.defaults=a_,T.defaultsDeep=l_,T.defer=v1,T.delay=_1,T.difference=Um,T.differenceBy=Fm,T.differenceWith=jm,T.drop=Wm,T.dropRight=qm,T.dropRightWhile=Hm,T.dropWhile=Vm,T.fill=Km,T.filter=Zv,T.flatMap=Qv,T.flatMapDeep=Xv,T.flatMapDepth=t1,T.flatten=cf,T.flattenDeep=Gm,T.flattenDepth=Zm,T.flip=y1,T.flow=py,T.flowRight=gy,T.fromPairs=Ym,T.functions=g_,T.functionsIn=m_,T.groupBy=e1,T.initial=Qm,T.intersection=Xm,T.intersectionBy=tv,T.intersectionWith=ev,T.invert=__,T.invertBy=y_,T.invokeMap=r1,T.iteratee=el,T.keyBy=s1,T.keys=Pe,T.keysIn=Xe,T.map=Qi,T.mapKeys=x_,T.mapValues=w_,T.matches=my,T.matchesProperty=vy,T.memoize=to,T.merge=k_,T.mergeWith=$f,T.method=_y,T.methodOf=yy,T.mixin=nl,T.negate=eo,T.nthArg=xy,T.omit=C_,T.omitBy=S_,T.once=b1,T.orderBy=i1,T.over=wy,T.overArgs=x1,T.overEvery=ky,T.overSome=Cy,T.partial=Ga,T.partialRight=kf,T.partition=o1,T.pick=E_,T.pickBy=Pf,T.property=Uf,T.propertyOf=Sy,T.pull=iv,T.pullAll=df,T.pullAllBy=ov,T.pullAllWith=av,T.pullAt=lv,T.range=Ey,T.rangeRight=Ay,T.rearg=w1,T.reject=u1,T.remove=uv,T.rest=k1,T.reverse=Ha,T.sampleSize=f1,T.set=R_,T.setWith=T_,T.shuffle=d1,T.slice=cv,T.sortBy=g1,T.sortedUniq=vv,T.sortedUniqBy=_v,T.split=Q_,T.spread=C1,T.tail=yv,T.take=bv,T.takeRight=xv,T.takeRightWhile=wv,T.takeWhile=kv,T.tap=zv,T.throttle=S1,T.thru=Ji,T.toArray=Rf,T.toPairs=Lf,T.toPairsIn=Bf,T.toPath=$y,T.toPlainObject=Of,T.transform=O_,T.unary=E1,T.union=Cv,T.unionBy=Sv,T.unionWith=Ev,T.uniq=Av,T.uniqBy=Rv,T.uniqWith=Tv,T.unset=I_,T.unzip=Va,T.unzipWith=hf,T.update=$_,T.updateWith=P_,T.values=us,T.valuesIn=L_,T.without=Ov,T.words=zf,T.wrap=A1,T.xor=Iv,T.xorBy=$v,T.xorWith=Pv,T.zip=Lv,T.zipObject=Bv,T.zipObjectDeep=Dv,T.zipWith=Mv,T.entries=Lf,T.entriesIn=Bf,T.extend=If,T.extendWith=so,nl(T,T),T.add=Ly,T.attempt=Nf,T.camelCase=z_,T.capitalize=Df,T.ceil=By,T.clamp=B_,T.clone=T1,T.cloneDeep=I1,T.cloneDeepWith=$1,T.cloneWith=O1,T.conformsTo=P1,T.deburr=Mf,T.defaultTo=hy,T.divide=Dy,T.endsWith=N_,T.eq=An,T.escape=U_,T.escapeRegExp=F_,T.every=Gv,T.find=Yv,T.findIndex=lf,T.findKey=u_,T.findLast=Jv,T.findLastIndex=uf,T.findLastKey=c_,T.floor=My,T.forEach=gf,T.forEachRight=mf,T.forIn=f_,T.forInRight=d_,T.forOwn=h_,T.forOwnRight=p_,T.get=Ja,T.gt=L1,T.gte=B1,T.has=v_,T.hasIn=Qa,T.head=ff,T.identity=tn,T.includes=n1,T.indexOf=Jm,T.inRange=D_,T.invoke=b_,T.isArguments=Nr,T.isArray=qt,T.isArrayBuffer=D1,T.isArrayLike=Qe,T.isArrayLikeObject=Ee,T.isBoolean=M1,T.isBuffer=yr,T.isDate=z1,T.isElement=N1,T.isEmpty=U1,T.isEqual=F1,T.isEqualWith=j1,T.isError=Za,T.isFinite=W1,T.isFunction=Jn,T.isInteger=Cf,T.isLength=no,T.isMap=Sf,T.isMatch=q1,T.isMatchWith=H1,T.isNaN=V1,T.isNative=K1,T.isNil=Z1,T.isNull=G1,T.isNumber=Ef,T.isObject=ke,T.isObjectLike=Ce,T.isPlainObject=Us,T.isRegExp=Ya,T.isSafeInteger=Y1,T.isSet=Af,T.isString=ro,T.isSymbol=on,T.isTypedArray=ls,T.isUndefined=J1,T.isWeakMap=Q1,T.isWeakSet=X1,T.join=nv,T.kebabCase=j_,T.last=yn,T.lastIndexOf=rv,T.lowerCase=W_,T.lowerFirst=q_,T.lt=t_,T.lte=e_,T.max=zy,T.maxBy=Ny,T.mean=Uy,T.meanBy=Fy,T.min=jy,T.minBy=Wy,T.stubArray=sl,T.stubFalse=il,T.stubObject=Ry,T.stubString=Ty,T.stubTrue=Oy,T.multiply=qy,T.nth=sv,T.noConflict=by,T.noop=rl,T.now=Xi,T.pad=H_,T.padEnd=V_,T.padStart=K_,T.parseInt=G_,T.random=M_,T.reduce=a1,T.reduceRight=l1,T.repeat=Z_,T.replace=Y_,T.result=A_,T.round=Hy,T.runInContext=et,T.sample=c1,T.size=h1,T.snakeCase=J_,T.some=p1,T.sortedIndex=fv,T.sortedIndexBy=dv,T.sortedIndexOf=hv,T.sortedLastIndex=pv,T.sortedLastIndexBy=gv,T.sortedLastIndexOf=mv,T.startCase=X_,T.startsWith=ty,T.subtract=Vy,T.sum=Ky,T.sumBy=Gy,T.template=ey,T.times=Iy,T.toFinite=Qn,T.toInteger=Vt,T.toLength=Tf,T.toLower=ny,T.toNumber=bn,T.toSafeInteger=n_,T.toString=se,T.toUpper=ry,T.trim=sy,T.trimEnd=iy,T.trimStart=oy,T.truncate=ay,T.unescape=ly,T.uniqueId=Py,T.upperCase=uy,T.upperFirst=Xa,T.each=gf,T.eachRight=mf,T.first=ff,nl(T,function(){var e={};return Pn(T,function(s,a){ue.call(T.prototype,a)||(e[a]=s)}),e}(),{chain:!1}),T.VERSION=i,pn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){T[e].placeholder=T}),pn(["drop","take"],function(e,s){Jt.prototype[e]=function(a){a=a===r?1:$e(Vt(a),0);var p=this.__filtered__&&!s?new Jt(this):this.clone();return p.__filtered__?p.__takeCount__=Me(a,p.__takeCount__):p.__views__.push({size:Me(a,ot),type:e+(p.__dir__<0?"Right":"")}),p},Jt.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),pn(["filter","map","takeWhile"],function(e,s){var a=s+1,p=a==_||a==wt;Jt.prototype[e]=function(x){var $=this.clone();return $.__iteratees__.push({iteratee:Dt(x,3),type:a}),$.__filtered__=$.__filtered__||p,$}}),pn(["head","last"],function(e,s){var a="take"+(s?"Right":"");Jt.prototype[e]=function(){return this[a](1).value()[0]}}),pn(["initial","tail"],function(e,s){var a="drop"+(s?"":"Right");Jt.prototype[e]=function(){return this.__filtered__?new Jt(this):this[a](1)}}),Jt.prototype.compact=function(){return this.filter(tn)},Jt.prototype.find=function(e){return this.filter(e).head()},Jt.prototype.findLast=function(e){return this.reverse().find(e)},Jt.prototype.invokeMap=Zt(function(e,s){return typeof e=="function"?new Jt(this):this.map(function(a){return Ls(a,e,s)})}),Jt.prototype.reject=function(e){return this.filter(eo(Dt(e)))},Jt.prototype.slice=function(e,s){e=Vt(e);var a=this;return a.__filtered__&&(e>0||s<0)?new Jt(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),s!==r&&(s=Vt(s),a=s<0?a.dropRight(-s):a.take(s-e)),a)},Jt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Jt.prototype.toArray=function(){return this.take(ot)},Pn(Jt.prototype,function(e,s){var a=/^(?:filter|find|map|reject)|While$/.test(s),p=/^(?:head|last)$/.test(s),x=T[p?"take"+(s=="last"?"Right":""):s],$=p||/^find/.test(s);x&&(T.prototype[s]=function(){var H=this.__wrapped__,Q=p?[1]:arguments,nt=H instanceof Jt,vt=Q[0],_t=nt||qt(H),xt=function(Yt){var Qt=x.apply(T,dr([Yt],Q));return p&&Tt?Qt[0]:Qt};_t&&a&&typeof vt=="function"&&vt.length!=1&&(nt=_t=!1);var Tt=this.__chain__,Lt=!!this.__actions__.length,zt=$&&!Tt,Gt=nt&&!Lt;if(!$&&_t){H=Gt?H:new Jt(this);var Nt=e.apply(H,Q);return Nt.__actions__.push({func:Ji,args:[xt],thisArg:r}),new mn(Nt,Tt)}return zt&&Gt?e.apply(this,Q):(Nt=this.thru(xt),zt?p?Nt.value()[0]:Nt.value():Nt)})}),pn(["pop","push","shift","sort","splice","unshift"],function(e){var s=ki[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",p=/^(?:pop|shift)$/.test(e);T.prototype[e]=function(){var x=arguments;if(p&&!this.__chain__){var $=this.value();return s.apply(qt($)?$:[],x)}return this[a](function(H){return s.apply(qt(H)?H:[],x)})}}),Pn(Jt.prototype,function(e,s){var a=T[s];if(a){var p=a.name+"";ue.call(rs,p)||(rs[p]=[]),rs[p].push({name:s,func:a})}}),rs[qi(r,S).name]=[{name:"wrapper",func:r}],Jt.prototype.clone=lg,Jt.prototype.reverse=ug,Jt.prototype.value=cg,T.prototype.at=Nv,T.prototype.chain=Uv,T.prototype.commit=Fv,T.prototype.next=jv,T.prototype.plant=qv,T.prototype.reverse=Hv,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=Vv,T.prototype.first=T.prototype.head,As&&(T.prototype[As]=Wv),T},ts=F0();Ir?((Ir.exports=ts)._=ts,ea._=ts):Le._=ts}).call(ir)})(Io,Io.exports);var r5=Io.exports;const s5={class:"mb-8 border-b border-gray-200"},i5={class:"-mb-px flex space-x-8","aria-label":"Tabs"},o5=["onClick"],a5={key:0},l5={class:"card p-8"},u5={class:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end mb-6 p-6 bg-sky-50 border border-sky-200 rounded-lg"},c5={class:"md:col-span-2"},f5={class:"md:col-span-2"},d5={key:0,class:"text-center py-8 text-slate-500"},h5={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"},p5={class:"text-sm text-slate-500"},g5={class:"text-xl font-bold text-slate-800 text-center"},m5={key:1},v5={key:0,class:"card p-8 max-w-4xl mx-auto"},_5={class:"space-y-6"},y5=["value"],b5={class:"text-right"},x5=["disabled"],w5={key:1},k5={class:"card p-8"},C5={class:"text-2xl font-semibold mb-6"},S5={class:"overflow-x-auto"},E5={class:"min-w-full divide-y divide-gray-200"},A5={class:"bg-white divide-y divide-gray-200"},R5={class:"table-cell"},T5={class:"table-cell font-medium"},O5={class:"table-cell"},I5=["onUpdate:modelValue","onInput","onKeydown","data-index"],$5={key:2},P5={class:"card p-8"},L5={class:"space-y-8"},B5={class:"text-xl font-bold text-sky-700 border-b-2 border-sky-200 pb-2 mb-4"},D5={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},M5=["onClick"],z5={class:"font-bold text-lg text-slate-800"},N5={class:"text-sm text-slate-500"},U5={class:"text-xs text-slate-400 mt-2"},F5={key:3},j5={class:"card p-8"},W5={class:"max-w-xl mx-auto"},q5={class:"flex items-center space-x-4 mb-8 p-4 bg-slate-50 rounded-lg border"},H5={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},V5=["onUpdate:modelValue","onChange"],K5=["onClick"],G5={__name:"GradeManagementView",setup(t){const n=pt([{key:"performance",name:"課堂表現"},{key:"grade_entry",name:"登錄新成績"},{key:"grade_overview",name:"總覽與修改成績"},{key:"settings",name:"科目設定"}]),r=pt("performance"),i=Fe({category:"",subject_id:null,name:"",grade_item_id:null}),o=pt(!1),l=pt([]),u=pt([]),c=pt([]),d=pt([]),y=pt(!1),g=Fe({start:"",end:""}),m=pt(""),b=le(()=>i.grade_item_id?u.value.find(k=>k.id===i.grade_item_id):null),v=le(()=>{const k={平時測驗:[],定期評量:[]};return[...u.value].sort((_,lt)=>new Date(lt.date)-new Date(_.date)).forEach(_=>{k[_.category]&&k[_.category].push(_)}),k}),O=()=>{Object.assign(i,{category:"",subject_id:null,name:"",grade_item_id:null}),c.value=[]},w=async()=>{const k={category:i.category,subject_id:i.subject_id,name:i.name};try{const _=await(await Kt("/api/grade-items",{method:"POST",body:JSON.stringify(k)})).json();u.value.unshift(_),i.grade_item_id=_.id,await M(_.id),o.value=!0}catch(K){console.error("建立成績項目失敗:",K)}},I=()=>{o.value=!1,O(),r.value==="grade_entry"||(r.value="grade_overview")},S=async k=>{i.grade_item_id=k.id,await M(k.id),r.value="grade_entry",o.value=!0},A=()=>{const k=new Date,K=new Date;K.setDate(k.getDate()-30),g.end=k.toISOString().split("T")[0],g.start=K.toISOString().split("T")[0]},E=async()=>{try{const[k,K]=await Promise.all([Kt("/api/subjects"),Kt("/api/grade-items")]);l.value=await k.json(),u.value=await K.json(),await P()}catch(k){console.error("讀取初始資料失敗:",k)}},P=async()=>{y.value=!0;try{const k=await Kt(`/api/performance-summary?startDate=${g.start}&endDate=${g.end}`);d.value=await k.json()}catch(k){console.error("讀取表現統計失敗:",k)}finally{y.value=!1}};Ye(()=>{A(),E()});const U=async()=>{if(!m.value)return;const k=await Kt("/api/subjects",{method:"POST",body:JSON.stringify({name:m.value})});l.value.push(await k.json()),m.value=""},rt=async k=>{Kt(`/api/subjects/${k.id}`,{method:"PUT",body:JSON.stringify({name:k.name})})},F=async k=>{confirm("確定刪除此科目嗎？所有相關的成績項目和分數將會一併刪除！")&&(await Kt(`/api/subjects/${k}`,{method:"DELETE"}),l.value=l.value.filter(K=>K.id!==k),u.value=u.value.filter(K=>K.subject_id!==k))},M=async k=>{const K=await Kt(`/api/grades/${k}`);c.value=await K.json()},L=r5.debounce((k,K)=>{b.value&&Kt("/api/grades",{method:"POST",body:JSON.stringify({grade_item_id:b.value.id,student_id:k,score:K})})},500),D=(k,K)=>{L(k,K)},st=k=>{const K=k+1;if(K<c.value.length){const _=document.querySelector(`input[data-index='${K}']`);_&&(_.focus(),_.select())}};return Er(r,k=>{k!=="grade_entry"&&(o.value=!1,O()),k==="performance"&&P()}),(k,K)=>(Z(),Y("div",null,[K[19]||(K[19]=f("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"成績管理",-1)),f("div",s5,[f("nav",i5,[(Z(!0),Y(Wt,null,te(n.value,_=>(Z(),Y("a",{key:_.key,onClick:lt=>r.value=_.key,class:me([r.value===_.key?"border-sky-500 text-sky-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg cursor-pointer"])},ft(_.name),11,o5))),128))])]),r.value==="performance"?(Z(),Y("div",a5,[f("div",l5,[K[9]||(K[9]=f("h2",{class:"text-2xl font-semibold mb-6"},"課堂表現區間統計",-1)),f("div",u5,[f("div",c5,[K[6]||(K[6]=f("label",{for:"startDate",class:"block text-sm font-medium text-slate-700 mb-1"},"開始日期",-1)),Mt(f("input",{type:"date",id:"startDate","onUpdate:modelValue":K[0]||(K[0]=_=>g.start=_),class:"form-input text-base w-full py-2.5"},null,512),[[Ft,g.start]])]),f("div",f5,[K[7]||(K[7]=f("label",{for:"endDate",class:"block text-sm font-medium text-slate-700 mb-1"},"結束日期",-1)),Mt(f("input",{type:"date",id:"endDate","onUpdate:modelValue":K[1]||(K[1]=_=>g.end=_),class:"form-input text-base w-full py-2.5"},null,512),[[Ft,g.end]])]),f("div",{class:"md:col-span-1"},[f("button",{onClick:P,class:"btn btn-primary w-full text-base py-2.5 px-6 flex items-center justify-center gap-2"},[...K[8]||(K[8]=[f("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[f("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})],-1),f("span",null,"查詢",-1)])])])]),y.value?(Z(),Y("div",d5,"正在讀取統計資料...")):(Z(),Y("div",h5,[(Z(!0),Y(Wt,null,te(d.value,_=>(Z(),Y("div",{key:_.id,class:"bg-white rounded-xl shadow-md p-4 flex flex-col items-center justify-center space-y-2 transition-transform hover:scale-105 hover:shadow-lg border"},[f("div",p5,ft(_.seat_number)+".",1),f("div",g5,ft(_.name),1),f("div",{class:me(["px-5 py-2 rounded-full text-2xl font-extrabold",{"bg-green-100 text-green-700":_.total_score>0,"bg-red-100 text-red-700":_.total_score<0,"bg-slate-100 text-slate-600":_.total_score===0||_.total_score===null}])},ft(_.total_score),3)]))),128))]))])])):Rt("",!0),r.value==="grade_entry"?(Z(),Y("div",m5,[o.value?Rt("",!0):(Z(),Y("div",v5,[K[15]||(K[15]=f("h2",{class:"text-2xl font-semibold mb-6"},"登錄新成績",-1)),f("div",_5,[f("div",null,[K[11]||(K[11]=f("label",{class:"block text-base font-medium text-slate-700"},"1. 選擇成績類別",-1)),Mt(f("select",{"onUpdate:modelValue":K[2]||(K[2]=_=>i.category=_),class:"mt-1 form-input text-lg py-3"},[...K[10]||(K[10]=[f("option",{disabled:"",value:""},"-- 請選擇 --",-1),f("option",null,"平時測驗",-1),f("option",null,"定期評量",-1)])],512),[[ai,i.category]])]),f("div",null,[K[13]||(K[13]=f("label",{class:"block text-base font-medium text-slate-700"},"2. 選擇科目",-1)),Mt(f("select",{"onUpdate:modelValue":K[3]||(K[3]=_=>i.subject_id=_),class:"mt-1 form-input text-lg py-3"},[K[12]||(K[12]=f("option",{value:null},"-- 請選擇 --",-1)),(Z(!0),Y(Wt,null,te(l.value,_=>(Z(),Y("option",{key:_.id,value:_.id},ft(_.name),9,y5))),128))],512),[[ai,i.subject_id]])]),f("div",null,[K[14]||(K[14]=f("label",{class:"block text-base font-medium text-slate-700"},"3. 輸入成績項目名稱",-1)),Mt(f("input",{type:"text","onUpdate:modelValue":K[4]||(K[4]=_=>i.name=_),placeholder:"例如: 第一次月考",class:"mt-1 form-input text-lg py-3"},null,512),[[Ft,i.name]])]),f("div",b5,[f("button",{onClick:w,disabled:!i.category||!i.subject_id||!i.name,class:"btn btn-primary text-lg px-8 py-3"}," 下一步：輸入分數 ",8,x5)])])])),o.value&&b.value?(Z(),Y("div",w5,[f("button",{onClick:I,class:"text-sky-600 hover:text-sky-800 mb-4"},"← 返回"),f("div",k5,[f("h2",C5,ft(b.value.subject_name)+" - "+ft(b.value.name)+" ("+ft(b.value.category)+")",1),f("div",S5,[f("table",E5,[K[16]||(K[16]=f("thead",{class:"bg-slate-50"},[f("tr",null,[f("th",{class:"table-header"},"座號"),f("th",{class:"table-header"},"姓名"),f("th",{class:"table-header"},"分數")])],-1)),f("tbody",A5,[(Z(!0),Y(Wt,null,te(c.value,(_,lt)=>(Z(),Y("tr",{key:_.id,class:"hover:bg-slate-50"},[f("td",R5,ft(_.seat_number),1),f("td",T5,ft(_.name),1),f("td",O5,[Mt(f("input",{type:"number","onUpdate:modelValue":wt=>_.score=wt,onInput:wt=>D(_.student_id,wt.target.value),onKeydown:gw(We(wt=>st(lt),["prevent"]),["enter"]),"data-index":lt,class:"form-input w-32 text-lg py-2 text-center"},null,40,I5),[[Ft,_.score]])])]))),128))])])])])])):Rt("",!0)])):Rt("",!0),r.value==="grade_overview"?(Z(),Y("div",$5,[f("div",P5,[K[17]||(K[17]=f("h2",{class:"text-2xl font-semibold mb-6"},"成績項目總覽與修改",-1)),f("div",L5,[(Z(!0),Y(Wt,null,te(v.value,(_,lt)=>(Z(),Y("div",{key:lt},[f("h3",B5,ft(lt),1),f("div",D5,[(Z(!0),Y(Wt,null,te(_,wt=>(Z(),Y("div",{key:wt.id,onClick:ct=>S(wt),class:"p-4 border rounded-lg cursor-pointer hover:bg-sky-50 hover:shadow-lg transition-all"},[f("p",z5,ft(wt.name),1),f("p",N5,ft(wt.subject_name),1),f("p",U5,ft(new Date(wt.date).toLocaleDateString()),1)],8,M5))),128))])]))),128))])])])):Rt("",!0),r.value==="settings"?(Z(),Y("div",F5,[f("div",j5,[K[18]||(K[18]=f("h2",{class:"text-2xl font-semibold mb-6"},"科目管理",-1)),f("div",W5,[f("div",q5,[Mt(f("input",{type:"text","onUpdate:modelValue":K[5]||(K[5]=_=>m.value=_),placeholder:"新增科目名稱...",class:"form-input text-lg flex-grow py-3"},null,512),[[Ft,m.value]]),f("button",{onClick:U,class:"btn btn-primary text-base py-3 px-6"},"新增")]),f("div",H5,[(Z(!0),Y(Wt,null,te(l.value,_=>(Z(),Y("div",{key:_.id,class:"bg-white rounded-lg shadow border p-4 flex flex-col"},[Mt(f("input",{type:"text","onUpdate:modelValue":lt=>_.name=lt,onChange:lt=>rt(_),class:"form-input text-xl font-bold border-0 text-center p-2 mb-4"},null,40,V5),[[Ft,_.name]]),f("button",{onClick:lt=>F(_.id),class:"mt-auto w-full btn btn-danger btn-sm text-xs py-1"},"刪除",8,K5)]))),128))])])])])):Rt("",!0)]))}},Z5=lu(G5,[["__scopeId","data-v-3ef008ee"]]),Y5={class:"min-h-screen bg-sky-50 p-4 sm:p-8"},J5={class:"max-w-4xl mx-auto"},Q5={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 pb-4"},X5={class:"text-xl text-slate-600 mt-2"},tC={class:"flex items-center space-x-2 mt-4 sm:mt-0"},eC={class:"space-y-8"},nC={key:0,class:"text-center text-slate-500 py-10"},rC={key:1,class:"text-center text-slate-500 bg-white p-10 rounded-lg shadow"},sC={key:2,class:"space-y-6"},iC={class:"flex flex-col md:flex-row justify-between items-start"},oC={class:"mb-4 md:mb-0 flex-1"},aC={class:"px-2 py-1 text-xs font-semibold rounded-full bg-sky-100 text-sky-800"},lC={class:"text-2xl font-bold text-slate-800 mt-2"},uC={class:"text-slate-600 mt-2"},cC={class:"text-sm text-red-600 mt-3 font-medium"},fC={class:"w-full md:w-auto md:ml-6"},dC={key:0,class:"w-full text-center py-3 px-6 text-base flex items-center justify-center gap-2 bg-green-100 text-green-700 rounded-md font-bold"},hC={key:1},pC=["onChange","id"],gC=["onClick"],mC={key:0,class:"fixed z-20 inset-0 overflow-y-auto"},vC={class:"flex items-center justify-center min-h-screen"},_C={class:"bg-white rounded-lg shadow-xl transform transition-all max-w-lg w-full"},yC={class:"p-6"},bC={class:"mb-2"},xC={class:"text-indigo-600"},wC={class:"text-sm text-slate-600 bg-slate-50 p-3 rounded-md max-h-40 overflow-y-auto border"},kC={key:1,class:"fixed z-10 inset-0 overflow-y-auto"},CC={class:"flex items-center justify-center min-h-screen"},SC={class:"bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all max-w-lg w-full"},EC={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},AC={class:"mt-4 space-y-4"},RC={key:0,class:"text-red-500 text-sm"},TC={__name:"StudentDashboardView",setup(t){const n=mi(),r=pt(JSON.parse(localStorage.getItem("studentInfo")||"{}")),i=pt([]),o=pt(!0);Fe({text:"",type:"success"});const l=pt(!1),u=Fe({currentPassword:"",newPassword:"",confirmPassword:"",error:""}),c=Fe({show:!1,files:[],assignmentId:null,assignmentTitle:"",fileInputRef:null}),d=(A,E="success",P=5e3)=>{const U=document.createElement("div");U.className=`fixed top-5 right-5 p-4 rounded-lg shadow-lg text-white ${E==="success"?"bg-green-500":"bg-red-500"}`,U.textContent=A,document.body.appendChild(U),setTimeout(()=>{U.remove()},P)},y=()=>{localStorage.clear(),n.push({name:"auth"})},g=()=>{n.push({name:"pingpong-student"})},m=async()=>{o.value=!0;try{const A=await Kt("/api/student/assignments");if(!A.ok)throw new Error("無法讀取作業列表");i.value=await A.json()}catch(A){d(A.message,"error")}finally{o.value=!1}},b=A=>{const E=document.getElementById(`file-upload-${A}`);E&&E.click()},v=(A,E)=>{const P=Array.from(A.target.files);if(P.length===0)return;const U=i.value.find(rt=>rt.id===E);Object.assign(c,{show:!0,files:P,assignmentId:E,assignmentTitle:U.title,fileInputRef:A.target})},O=()=>{c.fileInputRef&&(c.fileInputRef.value=""),Object.assign(c,{show:!1,files:[],assignmentId:null,assignmentTitle:"",fileInputRef:null})},w=async()=>{const A=new FormData;c.files.forEach(E=>{A.append("files",E)});try{const E=await Kt(`/api/student/upload/${c.assignmentId}`,{method:"POST",body:A}),P=await E.json();if(!E.ok)throw new Error(P.error||"上傳失敗");d(P.message,"success"),m()}catch(E){d(E.message,"error")}finally{O()}},I=()=>{l.value=!1,Object.assign(u,{currentPassword:"",newPassword:"",confirmPassword:"",error:""})},S=async()=>{if(u.error="",u.newPassword!==u.confirmPassword)return u.error="新密碼與確認密碼不相符。";if(u.newPassword.length<6)return u.error="新密碼長度至少需要 6 個字元。";try{const A=await Kt("/api/student/change-password",{method:"POST",body:JSON.stringify({currentPassword:u.currentPassword,newPassword:u.newPassword})}),E=await A.json();if(!A.ok)throw new Error(E.error);d("密碼已成功更新！您無需重新登入。","success"),I()}catch(A){u.error=A.message}};return Ye(m),(A,E)=>(Z(),Y("div",Y5,[f("div",J5,[f("div",Q5,[f("div",null,[E[5]||(E[5]=f("h1",{class:"text-4xl font-bold text-slate-800"},"學生儀表板",-1)),f("p",X5,ft(r.value.name)+" 同學，您好！",1)]),f("div",tC,[f("button",{onClick:g,class:"btn bg-teal-500 hover:bg-teal-600"},"加入 PingPong"),f("button",{onClick:E[0]||(E[0]=P=>l.value=!0),class:"btn bg-slate-500 hover:bg-slate-600"},"修改密碼"),f("button",{onClick:y,class:"btn bg-red-500 hover:bg-red-600"},"登出")])]),f("div",eC,[E[8]||(E[8]=f("h2",{class:"text-3xl font-semibold text-slate-700"},"待繳交作業",-1)),o.value?(Z(),Y("div",nC,"作業列表讀取中...")):i.value.length===0?(Z(),Y("div",rC,"目前沒有需要繳交的作業。")):(Z(),Y("div",sC,[(Z(!0),Y(Wt,null,te(i.value,P=>(Z(),Y("div",{key:P.id,class:"card p-6"},[f("div",iC,[f("div",oC,[f("span",aC,ft(P.subject_name),1),f("h3",lC,ft(P.title),1),f("p",uC,ft(P.description),1),f("p",cC,"繳交截止日期："+ft(new Date(P.due_date).toLocaleString()),1)]),f("div",fC,[P.hasSubmitted&&!P.allow_resubmission?(Z(),Y("div",dC,[...E[6]||(E[6]=[f("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),f("span",null,"已繳交",-1)])])):(Z(),Y("div",hC,[f("input",{type:"file",onChange:U=>v(U,P.id),id:"file-upload-"+P.id,class:"hidden",multiple:""},null,40,pC),f("button",{onClick:U=>b(P.id),class:"w-full btn btn-primary py-3 px-6 text-base flex items-center justify-center gap-2"},[E[7]||(E[7]=f("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[f("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),f("span",null,ft(P.hasSubmitted?"重新上傳":"選擇檔案上傳"),1)],8,gC)]))])])]))),128))]))])]),c.show?(Z(),Y("div",mC,[f("div",vC,[f("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:O}),f("div",_C,[f("div",yC,[E[12]||(E[12]=f("h3",{class:"text-xl font-bold mb-4"},"確認上傳",-1)),f("p",bC,[E[9]||(E[9]=ve("您確定要將以下 ",-1)),f("strong",xC,ft(c.files.length),1),E[10]||(E[10]=ve(" 個檔案上傳至「",-1)),f("strong",null,ft(c.assignmentTitle),1),E[11]||(E[11]=ve("」嗎？",-1))]),f("ul",wC,[(Z(!0),Y(Wt,null,te(c.files,P=>(Z(),Y("li",{key:P.name,class:"truncate"},ft(P.name),1))),128))])]),f("div",{class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"},[f("button",{onClick:O,class:"btn btn-secondary"},"取消"),f("button",{onClick:w,class:"btn btn-primary"},"確認上傳")])])])])):Rt("",!0),l.value?(Z(),Y("div",kC,[f("div",CC,[f("div",{class:"fixed inset-0 bg-gray-500 opacity-75",onClick:E[1]||(E[1]=P=>l.value=!1)}),f("div",SC,[f("form",{onSubmit:We(S,["prevent"])},[f("div",EC,[E[16]||(E[16]=f("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"修改密碼",-1)),f("div",AC,[f("div",null,[E[13]||(E[13]=f("label",{class:"block text-sm font-medium text-gray-700"},"目前的密碼",-1)),Mt(f("input",{type:"password","onUpdate:modelValue":E[2]||(E[2]=P=>u.currentPassword=P),required:"",class:"mt-1 form-input"},null,512),[[Ft,u.currentPassword]])]),f("div",null,[E[14]||(E[14]=f("label",{class:"block text-sm font-medium text-gray-700"},"新密碼 (至少 6 個字元)",-1)),Mt(f("input",{type:"password","onUpdate:modelValue":E[3]||(E[3]=P=>u.newPassword=P),required:"",class:"mt-1 form-input"},null,512),[[Ft,u.newPassword]])]),f("div",null,[E[15]||(E[15]=f("label",{class:"block text-sm font-medium text-gray-700"},"確認新密碼",-1)),Mt(f("input",{type:"password","onUpdate:modelValue":E[4]||(E[4]=P=>u.confirmPassword=P),required:"",class:"mt-1 form-input"},null,512),[[Ft,u.confirmPassword]])]),u.error?(Z(),Y("p",RC,ft(u.error),1)):Rt("",!0)])]),f("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[E[17]||(E[17]=f("button",{type:"submit",class:"btn btn-primary"},"確認修改",-1)),f("button",{type:"button",onClick:I,class:"btn btn-secondary sm:ml-3 mt-2 sm:mt-0"},"取消")])],32)])])])):Rt("",!0)]))}},OC={class:"min-h-screen bg-slate-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},IC={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-lg"},$C={class:"bg-white py-8 px-4 shadow-2xl rounded-2xl sm:px-10"},PC={key:0,class:"mb-6"},LC={class:"flex border-b border-slate-200"},BC={key:0,class:"text-red-500 text-base text-center font-semibold"},DC={key:0},MC={class:"mt-4"},zC={key:1},NC={class:"mt-4"},UC={key:2,class:"text-red-500 text-base text-center font-semibold"},FC={key:3,class:"mt-6"},jC={__name:"AuthView",setup(t){const n=pt(!1),r=pt(""),i=mi(),o=pt("teacher"),l=Fe({name:"",username:"",account:"",password:"",passwordConfirm:""});Er(o,()=>{r.value="",Object.keys(l).forEach(g=>l[g]="")}),Ye(async()=>{try{const m=await(await fetch("/api/auth/teacher/setup-status")).json();n.value=m.setupNeeded}catch{r.value="無法連接到伺服器，請確認後端是否已啟動。"}});const c=async()=>{if(r.value="",l.password!==l.passwordConfirm)return r.value="兩次輸入的密碼不一致。";if(l.password.length<6)return r.value="密碼長度至少需要 6 個字元。";try{const g=await fetch("/api/auth/teacher/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l.name,username:l.username,password:l.password})});if(!g.ok)throw new Error((await g.json()).error);alert("帳號建立成功！請使用剛剛建立的帳號密碼登入。"),window.location.reload()}catch(g){r.value=g.message}},d=async()=>{r.value="";const g=o.value==="teacher",m=g?"/api/auth/teacher/login":"/api/auth/student/login",b=g?{username:l.username,password:l.password}:{account:l.account,password:l.password};try{const v=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),O=await v.json();if(!v.ok)throw new Error(O.error);g?(localStorage.setItem("teacherToken",O.token),localStorage.setItem("teacherInfo",JSON.stringify(O.teacher)),i.push({name:"home"})):(localStorage.setItem("studentToken",O.token),localStorage.setItem("studentInfo",JSON.stringify(O.student)),i.push({name:"student-dashboard"}))}catch(v){r.value=v.message}},y=()=>i.push({name:"pingpong-student"});return(g,m)=>(Z(),Y("div",OC,[m[23]||(m[23]=f("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[f("h2",{class:"mt-6 text-center text-4xl font-extrabold text-sky-600"}," 智慧班級 "),f("p",{class:"mt-2 text-center text-lg text-slate-500"},"一個為課堂而生的互動平台")],-1)),f("div",IC,[f("div",$C,[n.value?Rt("",!0):(Z(),Y("div",PC,[f("div",LC,[f("button",{onClick:m[0]||(m[0]=b=>o.value="teacher"),class:me(["w-1/2 py-4 text-center font-semibold text-lg transition-colors duration-200",o.value==="teacher"?"border-b-4 border-sky-500 text-sky-600":"text-slate-500 hover:text-slate-800"])}," 教師登入 ",2),f("button",{onClick:m[1]||(m[1]=b=>o.value="student"),class:me(["w-1/2 py-4 text-center font-semibold text-lg transition-colors duration-200",o.value==="student"?"border-b-4 border-sky-500 text-sky-600":"text-slate-500 hover:text-slate-800"])}," 學生登入 ",2)])])),n.value&&o.value==="teacher"?(Z(),Y("form",{key:1,class:"space-y-6",onSubmit:We(c,["prevent"])},[m[14]||(m[14]=f("h3",{class:"text-xl font-medium text-center text-slate-800"},"建立您的教師帳號",-1)),m[15]||(m[15]=f("p",{class:"text-center text-base text-slate-600"},"這是您第一次啟動，請設定第一位管理者帳號。",-1)),f("div",null,[m[10]||(m[10]=f("label",{for:"name",class:"block text-base font-medium text-slate-700"},"姓名",-1)),Mt(f("input",{"onUpdate:modelValue":m[2]||(m[2]=b=>l.name=b),id:"name",type:"text",required:"",placeholder:"請輸入您的姓名",class:"form-input mt-1 text-lg py-3"},null,512),[[Ft,l.name]])]),f("div",null,[m[11]||(m[11]=f("label",{for:"username",class:"block text-base font-medium text-slate-700"},"帳號",-1)),Mt(f("input",{"onUpdate:modelValue":m[3]||(m[3]=b=>l.username=b),id:"username",type:"text",required:"",placeholder:"設定您的登入帳號",class:"form-input mt-1 text-lg py-3"},null,512),[[Ft,l.username]])]),f("div",null,[m[12]||(m[12]=f("label",{for:"password",class:"block text-base font-medium text-slate-700"},"密碼",-1)),Mt(f("input",{"onUpdate:modelValue":m[4]||(m[4]=b=>l.password=b),id:"password",type:"password",required:"",placeholder:"至少 6 個字元",class:"form-input mt-1 text-lg py-3"},null,512),[[Ft,l.password]])]),f("div",null,[m[13]||(m[13]=f("label",{for:"passwordConfirm",class:"block text-base font-medium text-slate-700"},"確認密碼",-1)),Mt(f("input",{"onUpdate:modelValue":m[5]||(m[5]=b=>l.passwordConfirm=b),id:"passwordConfirm",type:"password",required:"",placeholder:"再次輸入您的密碼",class:"form-input mt-1 text-lg py-3"},null,512),[[Ft,l.passwordConfirm]])]),r.value?(Z(),Y("div",BC,ft(r.value),1)):Rt("",!0),m[16]||(m[16]=f("div",null,[f("button",{type:"submit",class:"w-full btn btn-success text-xl py-4"},"建立帳號")],-1))],32)):(Z(),Y("form",{key:2,class:"space-y-6",onSubmit:We(d,["prevent"])},[o.value==="teacher"?(Z(),Y("div",DC,[f("div",null,[m[17]||(m[17]=f("label",{for:"login-username",class:"block text-base font-medium text-slate-700"},"教師帳號",-1)),Mt(f("input",{"onUpdate:modelValue":m[6]||(m[6]=b=>l.username=b),id:"login-username",type:"text",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[Ft,l.username]])]),f("div",MC,[m[18]||(m[18]=f("label",{for:"login-password",class:"block text-base font-medium text-slate-700"},"密碼",-1)),Mt(f("input",{"onUpdate:modelValue":m[7]||(m[7]=b=>l.password=b),id:"login-password",type:"password",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[Ft,l.password]])])])):Rt("",!0),o.value==="student"?(Z(),Y("div",zC,[f("div",null,[m[19]||(m[19]=f("label",{for:"student-account",class:"block text-base font-medium text-slate-700"},"學生帳號",-1)),Mt(f("input",{"onUpdate:modelValue":m[8]||(m[8]=b=>l.account=b),id:"student-account",type:"text",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[Ft,l.account]])]),f("div",NC,[m[20]||(m[20]=f("label",{for:"student-password",class:"block text-base font-medium text-slate-700"},"密碼",-1)),Mt(f("input",{"onUpdate:modelValue":m[9]||(m[9]=b=>l.password=b),id:"student-password",type:"password",required:"",class:"form-input mt-1 text-lg py-3"},null,512),[[Ft,l.password]])])])):Rt("",!0),r.value?(Z(),Y("div",UC,ft(r.value),1)):Rt("",!0),m[21]||(m[21]=f("div",null,[f("button",{type:"submit",class:"w-full btn btn-primary text-xl py-4"},"登入")],-1))],32)),n.value?Rt("",!0):(Z(),Y("div",FC,[m[22]||(m[22]=qr('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-slate-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-slate-500 text-base">或者</span></div></div>',1)),f("div",{class:"mt-6"},[f("button",{onClick:y,class:"w-full btn bg-teal-500 hover:bg-teal-600 text-xl py-4"},"加入 PingPong 活動")])]))])])]))}},Wn=Object.create(null);Wn.open="0";Wn.close="1";Wn.ping="2";Wn.pong="3";Wn.message="4";Wn.upgrade="5";Wn.noop="6";const vo=Object.create(null);Object.keys(Wn).forEach(t=>{vo[Wn[t]]=t});const Dl={type:"error",data:"parser error"},sp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ip=typeof ArrayBuffer=="function",op=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,uu=({type:t,data:n},r,i)=>sp&&n instanceof Blob?r?i(n):Md(n,i):ip&&(n instanceof ArrayBuffer||op(n))?r?i(n):Md(new Blob([n]),i):i(Wn[t]+(n||"")),Md=(t,n)=>{const r=new FileReader;return r.onload=function(){const i=r.result.split(",")[1];n("b"+(i||""))},r.readAsDataURL(t)};function zd(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let yl;function WC(t,n){if(sp&&t.data instanceof Blob)return t.data.arrayBuffer().then(zd).then(n);if(ip&&(t.data instanceof ArrayBuffer||op(t.data)))return n(zd(t.data));uu(t,!1,r=>{yl||(yl=new TextEncoder),n(yl.encode(r))})}const Nd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Nd.length;t++)Vs[Nd.charCodeAt(t)]=t;const qC=t=>{let n=t.length*.75,r=t.length,i,o=0,l,u,c,d;t[t.length-1]==="="&&(n--,t[t.length-2]==="="&&n--);const y=new ArrayBuffer(n),g=new Uint8Array(y);for(i=0;i<r;i+=4)l=Vs[t.charCodeAt(i)],u=Vs[t.charCodeAt(i+1)],c=Vs[t.charCodeAt(i+2)],d=Vs[t.charCodeAt(i+3)],g[o++]=l<<2|u>>4,g[o++]=(u&15)<<4|c>>2,g[o++]=(c&3)<<6|d&63;return y},HC=typeof ArrayBuffer=="function",cu=(t,n)=>{if(typeof t!="string")return{type:"message",data:ap(t,n)};const r=t.charAt(0);return r==="b"?{type:"message",data:VC(t.substring(1),n)}:vo[r]?t.length>1?{type:vo[r],data:t.substring(1)}:{type:vo[r]}:Dl},VC=(t,n)=>{if(HC){const r=qC(t);return ap(r,n)}else return{base64:!0,data:t}},ap=(t,n)=>{switch(n){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},lp="",KC=(t,n)=>{const r=t.length,i=new Array(r);let o=0;t.forEach((l,u)=>{uu(l,!1,c=>{i[u]=c,++o===r&&n(i.join(lp))})})},GC=(t,n)=>{const r=t.split(lp),i=[];for(let o=0;o<r.length;o++){const l=cu(r[o],n);if(i.push(l),l.type==="error")break}return i};function ZC(){return new TransformStream({transform(t,n){WC(t,r=>{const i=r.length;let o;if(i<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,i);else if(i<65536){o=new Uint8Array(3);const l=new DataView(o.buffer);l.setUint8(0,126),l.setUint16(1,i)}else{o=new Uint8Array(9);const l=new DataView(o.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(o[0]|=128),n.enqueue(o),n.enqueue(r)})}})}let bl;function lo(t){return t.reduce((n,r)=>n+r.length,0)}function uo(t,n){if(t[0].length===n)return t.shift();const r=new Uint8Array(n);let i=0;for(let o=0;o<n;o++)r[o]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),r}function YC(t,n){bl||(bl=new TextDecoder);const r=[];let i=0,o=-1,l=!1;return new TransformStream({transform(u,c){for(r.push(u);;){if(i===0){if(lo(r)<1)break;const d=uo(r,1);l=(d[0]&128)===128,o=d[0]&127,o<126?i=3:o===126?i=1:i=2}else if(i===1){if(lo(r)<2)break;const d=uo(r,2);o=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),i=3}else if(i===2){if(lo(r)<8)break;const d=uo(r,8),y=new DataView(d.buffer,d.byteOffset,d.length),g=y.getUint32(0);if(g>Math.pow(2,21)-1){c.enqueue(Dl);break}o=g*Math.pow(2,32)+y.getUint32(4),i=3}else{if(lo(r)<o)break;const d=uo(r,o);c.enqueue(cu(l?d:bl.decode(d),n)),i=0}if(o===0||o>t){c.enqueue(Dl);break}}}})}const up=4;function Te(t){if(t)return JC(t)}function JC(t){for(var n in Te.prototype)t[n]=Te.prototype[n];return t}Te.prototype.on=Te.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(n),this};Te.prototype.once=function(t,n){function r(){this.off(t,r),n.apply(this,arguments)}return r.fn=n,this.on(t,r),this};Te.prototype.off=Te.prototype.removeListener=Te.prototype.removeAllListeners=Te.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,o=0;o<r.length;o++)if(i=r[o],i===n||i.fn===n){r.splice(o,1);break}return r.length===0&&delete this._callbacks["$"+t],this};Te.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),r=this._callbacks["$"+t],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,o=r.length;i<o;++i)r[i].apply(this,n)}return this};Te.prototype.emitReserved=Te.prototype.emit;Te.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Te.prototype.hasListeners=function(t){return!!this.listeners(t).length};const qo=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,r)=>r(n,0),xn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),QC="arraybuffer";function cp(t,...n){return n.reduce((r,i)=>(t.hasOwnProperty(i)&&(r[i]=t[i]),r),{})}const XC=xn.setTimeout,tS=xn.clearTimeout;function Ho(t,n){n.useNativeTimers?(t.setTimeoutFn=XC.bind(xn),t.clearTimeoutFn=tS.bind(xn)):(t.setTimeoutFn=xn.setTimeout.bind(xn),t.clearTimeoutFn=xn.clearTimeout.bind(xn))}const eS=1.33;function nS(t){return typeof t=="string"?rS(t):Math.ceil((t.byteLength||t.size)*eS)}function rS(t){let n=0,r=0;for(let i=0,o=t.length;i<o;i++)n=t.charCodeAt(i),n<128?r+=1:n<2048?r+=2:n<55296||n>=57344?r+=3:(i++,r+=4);return r}function fp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function sS(t){let n="";for(let r in t)t.hasOwnProperty(r)&&(n.length&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n}function iS(t){let n={},r=t.split("&");for(let i=0,o=r.length;i<o;i++){let l=r[i].split("=");n[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return n}class oS extends Error{constructor(n,r,i){super(n),this.description=r,this.context=i,this.type="TransportError"}}class fu extends Te{constructor(n){super(),this.writable=!1,Ho(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,r,i){return super.emitReserved("error",new oS(n,r,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const r=cu(n,this.socket.binaryType);this.onPacket(r)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,r={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const r=sS(n);return r.length?"?"+r:""}}class aS extends fu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const r=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||r()})),this.writable||(i++,this.once("drain",function(){--i||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};GC(n,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,KC(n,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=fp()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(n,r)}}let dp=!1;try{dp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const lS=dp;function uS(){}class cS extends aS{constructor(n){if(super(n),typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||i!==n.port}}doWrite(n,r){const i=this.request({method:"POST",data:n});i.on("success",r),i.on("error",(o,l)=>{this.onError("xhr post error",o,l)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(r,i)=>{this.onError("xhr poll error",r,i)}),this.pollXhr=n}}class Un extends Te{constructor(n,r,i){super(),this.createRequest=n,Ho(this,i),this._opts=i,this._method=i.method||"GET",this._uri=r,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var n;const r=cp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(r);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var o;i.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=Un.requestsCount++,Un.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=uS,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Un.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Un.requestsCount=0;Un.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ud);else if(typeof addEventListener=="function"){const t="onpagehide"in xn?"pagehide":"unload";addEventListener(t,Ud,!1)}}function Ud(){for(let t in Un.requests)Un.requests.hasOwnProperty(t)&&Un.requests[t].abort()}const fS=function(){const t=hp({xdomain:!1});return t&&t.responseType!==null}();class dS extends cS{constructor(n){super(n);const r=n&&n.forceBase64;this.supportsBinary=fS&&!r}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new Un(hp,this.uri(),n)}}function hp(t){const n=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||lS))return new XMLHttpRequest}catch{}if(!n)try{return new xn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const pp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class hS extends fu{get name(){return"websocket"}doOpen(){const n=this.uri(),r=this.opts.protocols,i=pp?{}:cp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,r,i)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const i=n[r],o=r===n.length-1;uu(i,this.supportsBinary,l=>{try{this.doWrite(i,l)}catch{}o&&qo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=fp()),this.supportsBinary||(r.b64=1),this.createUri(n,r)}}const xl=xn.WebSocket||xn.MozWebSocket;class pS extends hS{createSocket(n,r,i){return pp?new xl(n,r,i):r?new xl(n,r):new xl(n)}doWrite(n,r){this.ws.send(r)}}class gS extends fu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const r=YC(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=n.readable.pipeThrough(r).getReader(),o=ZC();o.readable.pipeTo(n.writable),this._writer=o.writable.getWriter();const l=()=>{i.read().then(({done:c,value:d})=>{c||(this.onPacket(d),l())}).catch(c=>{})};l();const u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this._writer.write(u).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const i=n[r],o=r===n.length-1;this._writer.write(i).then(()=>{o&&qo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const mS={websocket:pS,webtransport:gS,polling:dS},vS=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_S=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ml(t){if(t.length>8e3)throw"URI too long";const n=t,r=t.indexOf("["),i=t.indexOf("]");r!=-1&&i!=-1&&(t=t.substring(0,r)+t.substring(r,i).replace(/:/g,";")+t.substring(i,t.length));let o=vS.exec(t||""),l={},u=14;for(;u--;)l[_S[u]]=o[u]||"";return r!=-1&&i!=-1&&(l.source=n,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=yS(l,l.path),l.queryKey=bS(l,l.query),l}function yS(t,n){const r=/\/{2,9}/g,i=n.replace(r,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&i.splice(0,1),n.slice(-1)=="/"&&i.splice(i.length-1,1),i}function bS(t,n){const r={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,o,l){o&&(r[o]=l)}),r}const zl=typeof addEventListener=="function"&&typeof removeEventListener=="function",_o=[];zl&&addEventListener("offline",()=>{_o.forEach(t=>t())},!1);class Ar extends Te{constructor(n,r){if(super(),this.binaryType=QC,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){const i=Ml(n);r.hostname=i.host,r.secure=i.protocol==="https"||i.protocol==="wss",r.port=i.port,i.query&&(r.query=i.query)}else r.host&&(r.hostname=Ml(r.host).host);Ho(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(i=>{const o=i.prototype.name;this.transports.push(o),this._transportsByName[o]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=iS(this.opts.query)),zl&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},_o.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const r=Object.assign({},this.opts.query);r.EIO=up,r.transport=n,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&Ar.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Ar.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const o=this.writeBuffer[i].data;if(o&&(r+=nS(o)),i>0&&r>this._maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,qo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,i){return this._sendPacket("message",n,r,i),this}send(n,r,i){return this._sendPacket("message",n,r,i),this}_sendPacket(n,r,i,o){if(typeof r=="function"&&(o=r,r=void 0),typeof i=="function"&&(o=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const l={type:n,data:r,options:i};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),o&&this.once("flush",o),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():n()}):this.upgrading?i():n()),this}_onError(n){if(Ar.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zl&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=_o.indexOf(this._offlineEventListener);i!==-1&&_o.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}Ar.protocol=up;class xS extends Ar{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let r=this.createTransport(n),i=!1;Ar.priorWebsocketSuccess=!1;const o=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!i)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Ar.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(g(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=r.name,this.emitReserved("upgradeError",b)}}))};function l(){i||(i=!0,g(),r.close(),r=null)}const u=m=>{const b=new Error("probe error: "+m);b.transport=r.name,l(),this.emitReserved("upgradeError",b)};function c(){u("transport closed")}function d(){u("socket closed")}function y(m){r&&m.name!==r.name&&l()}const g=()=>{r.removeListener("open",o),r.removeListener("error",u),r.removeListener("close",c),this.off("close",d),this.off("upgrading",y)};r.once("open",o),r.once("error",u),r.once("close",c),this.once("close",d),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{i||r.open()},200):r.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const r=[];for(let i=0;i<n.length;i++)~this.transports.indexOf(n[i])&&r.push(n[i]);return r}}let wS=class extends xS{constructor(n,r={}){const i=typeof n=="object"?n:r;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(o=>mS[o]).filter(o=>!!o)),super(n,i)}};function kS(t,n="",r){let i=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),i=Ml(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const l=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+l+":"+i.port+n,i.href=i.protocol+"://"+l+(r&&r.port===i.port?"":":"+i.port),i}const CS=typeof ArrayBuffer=="function",SS=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,gp=Object.prototype.toString,ES=typeof Blob=="function"||typeof Blob<"u"&&gp.call(Blob)==="[object BlobConstructor]",AS=typeof File=="function"||typeof File<"u"&&gp.call(File)==="[object FileConstructor]";function du(t){return CS&&(t instanceof ArrayBuffer||SS(t))||ES&&t instanceof Blob||AS&&t instanceof File}function yo(t,n){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,i=t.length;r<i;r++)if(yo(t[r]))return!0;return!1}if(du(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return yo(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&yo(t[r]))return!0;return!1}function RS(t){const n=[],r=t.data,i=t;return i.data=Nl(r,n),i.attachments=n.length,{packet:i,buffers:n}}function Nl(t,n){if(!t)return t;if(du(t)){const r={_placeholder:!0,num:n.length};return n.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=Nl(t[i],n);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=Nl(t[i],n));return r}return t}function TS(t,n){return t.data=Ul(t.data,n),delete t.attachments,t}function Ul(t,n){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<n.length)return n[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Ul(t[r],n);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Ul(t[r],n));return t}const OS=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],IS=5;var Xt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Xt||(Xt={}));class $S{constructor(n){this.replacer=n}encode(n){return(n.type===Xt.EVENT||n.type===Xt.ACK)&&yo(n)?this.encodeAsBinary({type:n.type===Xt.EVENT?Xt.BINARY_EVENT:Xt.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let r=""+n.type;return(n.type===Xt.BINARY_EVENT||n.type===Xt.BINARY_ACK)&&(r+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(r+=n.nsp+","),n.id!=null&&(r+=n.id),n.data!=null&&(r+=JSON.stringify(n.data,this.replacer)),r}encodeAsBinary(n){const r=RS(n),i=this.encodeAsString(r.packet),o=r.buffers;return o.unshift(i),o}}function Fd(t){return Object.prototype.toString.call(t)==="[object Object]"}class hu extends Te{constructor(n){super(),this.reviver=n}add(n){let r;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(n);const i=r.type===Xt.BINARY_EVENT;i||r.type===Xt.BINARY_ACK?(r.type=i?Xt.EVENT:Xt.ACK,this.reconstructor=new PS(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(du(n)||n.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(n),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let r=0;const i={type:Number(n.charAt(0))};if(Xt[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Xt.BINARY_EVENT||i.type===Xt.BINARY_ACK){const l=r+1;for(;n.charAt(++r)!=="-"&&r!=n.length;);const u=n.substring(l,r);if(u!=Number(u)||n.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(u)}if(n.charAt(r+1)==="/"){const l=r+1;for(;++r&&!(n.charAt(r)===","||r===n.length););i.nsp=n.substring(l,r)}else i.nsp="/";const o=n.charAt(r+1);if(o!==""&&Number(o)==o){const l=r+1;for(;++r;){const u=n.charAt(r);if(u==null||Number(u)!=u){--r;break}if(r===n.length)break}i.id=Number(n.substring(l,r+1))}if(n.charAt(++r)){const l=this.tryParse(n.substr(r));if(hu.isPayloadValid(i.type,l))i.data=l;else throw new Error("invalid payload")}return i}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,r){switch(n){case Xt.CONNECT:return Fd(r);case Xt.DISCONNECT:return r===void 0;case Xt.CONNECT_ERROR:return typeof r=="string"||Fd(r);case Xt.EVENT:case Xt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&OS.indexOf(r[0])===-1);case Xt.ACK:case Xt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class PS{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const r=TS(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const LS=Object.freeze(Object.defineProperty({__proto__:null,Decoder:hu,Encoder:$S,get PacketType(){return Xt},protocol:IS},Symbol.toStringTag,{value:"Module"}));function Tn(t,n,r){return t.on(n,r),function(){t.off(n,r)}}const BS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class mp extends Te{constructor(n,r,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[Tn(n,"open",this.onopen.bind(this)),Tn(n,"packet",this.onpacket.bind(this)),Tn(n,"error",this.onerror.bind(this)),Tn(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...r){var i,o,l;if(BS.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(r.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const u={type:Xt.EVENT,data:r};if(u.options={},u.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const g=this.ids++,m=r.pop();this._registerAckCallback(g,m),u.id=g}const c=(o=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||o===void 0?void 0:o.writable,d=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!c||(d?(this.notifyOutgoingListeners(u),this.packet(u)):this.sendBuffer.push(u)),this.flags={},this}_registerAckCallback(n,r){var i;const o=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(o===void 0){this.acks[n]=r;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===n&&this.sendBuffer.splice(c,1);r.call(this,new Error("operation has timed out"))},o),u=(...c)=>{this.io.clearTimeoutFn(l),r.apply(this,c)};u.withError=!0,this.acks[n]=u}emitWithAck(n,...r){return new Promise((i,o)=>{const l=(u,c)=>u?o(u):i(c);l.withError=!0,r.push(l),this.emit(n,...r)})}_addToQueue(n){let r;typeof n[n.length-1]=="function"&&(r=n.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((o,...l)=>i!==this._queue[0]?void 0:(o!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(o)):(this._queue.shift(),r&&r(null,...l)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!n||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:Xt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(i=>String(i.id)===n)){const i=this.acks[n];delete this.acks[n],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case Xt.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Xt.EVENT:case Xt.BINARY_EVENT:this.onevent(n);break;case Xt.ACK:case Xt.BINARY_ACK:this.onack(n);break;case Xt.DISCONNECT:this.ondisconnect();break;case Xt.CONNECT_ERROR:this.destroy();const i=new Error(n.data.message);i.data=n.data.data,this.emitReserved("connect_error",i);break}}onevent(n){const r=n.data||[];n.id!=null&&r.push(this.ack(n.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const i of r)i.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const r=this;let i=!1;return function(...o){i||(i=!0,r.packet({type:Xt.ACK,id:n,data:o}))}}onack(n){const r=this.acks[n.id];typeof r=="function"&&(delete this.acks[n.id],r.withError&&n.data.unshift(null),r.apply(this,n.data))}onconnect(n,r){this.id=n,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Xt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const r=this._anyListeners;for(let i=0;i<r.length;i++)if(n===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const r=this._anyOutgoingListeners;for(let i=0;i<r.length;i++)if(n===r[i])return r.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const i of r)i.apply(this,n.data)}}}function Cs(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Cs.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*t);t=Math.floor(n*10)&1?t+r:t-r}return Math.min(t,this.max)|0};Cs.prototype.reset=function(){this.attempts=0};Cs.prototype.setMin=function(t){this.ms=t};Cs.prototype.setMax=function(t){this.max=t};Cs.prototype.setJitter=function(t){this.jitter=t};class Fl extends Te{constructor(n,r){var i;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(r=n,n=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Ho(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Cs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=n;const o=r.parser||LS;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var r;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(r=this.backoff)===null||r===void 0||r.setMin(n),this)}randomizationFactor(n){var r;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(r=this.backoff)===null||r===void 0||r.setJitter(n),this)}reconnectionDelayMax(n){var r;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(r=this.backoff)===null||r===void 0||r.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new wS(this.uri,this.opts);const r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const o=Tn(r,"open",function(){i.onopen(),n&&n()}),l=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),n?n(c):this.maybeReconnectOnOpen()},u=Tn(r,"error",l);if(this._timeout!==!1){const c=this._timeout,d=this.setTimeoutFn(()=>{o(),l(new Error("timeout")),r.close()},c);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(o),this.subs.push(u),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(Tn(n,"ping",this.onping.bind(this)),Tn(n,"data",this.ondata.bind(this)),Tn(n,"error",this.onerror.bind(this)),Tn(n,"close",this.onclose.bind(this)),Tn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(r){this.onclose("parse error",r)}}ondecoded(n){qo(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,r){let i=this.nsps[n];return i?this._autoConnect&&!i.active&&i.connect():(i=new mp(this,n,r),this.nsps[n]=i),i}_destroy(n){const r=Object.keys(this.nsps);for(const i of r)if(this.nsps[i].active)return;this._close()}_packet(n){const r=this.encoder.encode(n);for(let i=0;i<r.length;i++)this.engine.write(r[i],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,r){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(o=>{o?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",o)):n.onreconnect()}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const qs={};function Hr(t,n){typeof t=="object"&&(n=t,t=void 0),n=n||{};const r=kS(t,n.path||"/socket.io"),i=r.source,o=r.id,l=r.path,u=qs[o]&&l in qs[o].nsps,c=n.forceNew||n["force new connection"]||n.multiplex===!1||u;let d;return c?d=new Fl(i,n):(qs[o]||(qs[o]=new Fl(i,n)),d=qs[o]),r.query&&!n.query&&(n.query=r.queryKey),d.socket(r.path,n)}Object.assign(Hr,{Manager:Fl,Socket:mp,io:Hr,connect:Hr});function co(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vp={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,n){(function(r){t.exports=r()})(function(){return function r(i,o,l){function u(y,g){if(!o[y]){if(!i[y]){var m=typeof co=="function"&&co;if(!g&&m)return m(y,!0);if(c)return c(y,!0);var b=new Error("Cannot find module '"+y+"'");throw b.code="MODULE_NOT_FOUND",b}var v=o[y]={exports:{}};i[y][0].call(v.exports,function(O){var w=i[y][1][O];return u(w||O)},v,v.exports,r,i,o,l)}return o[y].exports}for(var c=typeof co=="function"&&co,d=0;d<l.length;d++)u(l[d]);return u}({1:[function(r,i,o){var l=r("./utils"),u=r("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(d){for(var y,g,m,b,v,O,w,I=[],S=0,A=d.length,E=A,P=l.getTypeOf(d)!=="string";S<d.length;)E=A-S,m=P?(y=d[S++],g=S<A?d[S++]:0,S<A?d[S++]:0):(y=d.charCodeAt(S++),g=S<A?d.charCodeAt(S++):0,S<A?d.charCodeAt(S++):0),b=y>>2,v=(3&y)<<4|g>>4,O=1<E?(15&g)<<2|m>>6:64,w=2<E?63&m:64,I.push(c.charAt(b)+c.charAt(v)+c.charAt(O)+c.charAt(w));return I.join("")},o.decode=function(d){var y,g,m,b,v,O,w=0,I=0,S="data:";if(d.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var A,E=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===c.charAt(64)&&E--,d.charAt(d.length-2)===c.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(A=u.uint8array?new Uint8Array(0|E):new Array(0|E);w<d.length;)y=c.indexOf(d.charAt(w++))<<2|(b=c.indexOf(d.charAt(w++)))>>4,g=(15&b)<<4|(v=c.indexOf(d.charAt(w++)))>>2,m=(3&v)<<6|(O=c.indexOf(d.charAt(w++))),A[I++]=y,v!==64&&(A[I++]=g),O!==64&&(A[I++]=m);return A}},{"./support":30,"./utils":32}],2:[function(r,i,o){var l=r("./external"),u=r("./stream/DataWorker"),c=r("./stream/Crc32Probe"),d=r("./stream/DataLengthProbe");function y(g,m,b,v,O){this.compressedSize=g,this.uncompressedSize=m,this.crc32=b,this.compression=v,this.compressedContent=O}y.prototype={getContentWorker:function(){var g=new u(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),m=this;return g.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new u(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(g,m,b){return g.pipe(new c).pipe(new d("uncompressedSize")).pipe(m.compressWorker(b)).pipe(new d("compressedSize")).withStreamInfo("compression",m)},i.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,i,o){var l=r("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},o.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,i,o){var l=r("./utils"),u=function(){for(var c,d=[],y=0;y<256;y++){c=y;for(var g=0;g<8;g++)c=1&c?3988292384^c>>>1:c>>>1;d[y]=c}return d}();i.exports=function(c,d){return c!==void 0&&c.length?l.getTypeOf(c)!=="string"?function(y,g,m,b){var v=u,O=b+m;y^=-1;for(var w=b;w<O;w++)y=y>>>8^v[255&(y^g[w])];return-1^y}(0|d,c,c.length,0):function(y,g,m,b){var v=u,O=b+m;y^=-1;for(var w=b;w<O;w++)y=y>>>8^v[255&(y^g.charCodeAt(w))];return-1^y}(0|d,c,c.length,0):0}},{"./utils":32}],5:[function(r,i,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(r,i,o){var l=null;l=typeof Promise<"u"?Promise:r("lie"),i.exports={Promise:l}},{lie:37}],7:[function(r,i,o){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=r("pako"),c=r("./utils"),d=r("./stream/GenericWorker"),y=l?"uint8array":"array";function g(m,b){d.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=b,this.meta={}}o.magic="\b\0",c.inherits(g,d),g.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(y,m.data),!1)},g.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(b){m.push({data:b,meta:m.meta})}},o.compressWorker=function(m){return new g("Deflate",m)},o.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,i,o){function l(v,O){var w,I="";for(w=0;w<O;w++)I+=String.fromCharCode(255&v),v>>>=8;return I}function u(v,O,w,I,S,A){var E,P,U=v.file,rt=v.compression,F=A!==y.utf8encode,M=c.transformTo("string",A(U.name)),L=c.transformTo("string",y.utf8encode(U.name)),D=U.comment,st=c.transformTo("string",A(D)),k=c.transformTo("string",y.utf8encode(D)),K=L.length!==U.name.length,_=k.length!==D.length,lt="",wt="",ct="",St=U.dir,bt=U.date,$t={crc32:0,compressedSize:0,uncompressedSize:0};O&&!w||($t.crc32=v.crc32,$t.compressedSize=v.compressedSize,$t.uncompressedSize=v.uncompressedSize);var ot=0;O&&(ot|=8),F||!K&&!_||(ot|=2048);var it=0,Pt=0;St&&(it|=16),S==="UNIX"?(Pt=798,it|=function(kt,yt){var G=kt;return kt||(G=yt?16893:33204),(65535&G)<<16}(U.unixPermissions,St)):(Pt=20,it|=function(kt){return 63&(kt||0)}(U.dosPermissions)),E=bt.getUTCHours(),E<<=6,E|=bt.getUTCMinutes(),E<<=5,E|=bt.getUTCSeconds()/2,P=bt.getUTCFullYear()-1980,P<<=4,P|=bt.getUTCMonth()+1,P<<=5,P|=bt.getUTCDate(),K&&(wt=l(1,1)+l(g(M),4)+L,lt+="up"+l(wt.length,2)+wt),_&&(ct=l(1,1)+l(g(st),4)+k,lt+="uc"+l(ct.length,2)+ct);var At="";return At+=`
\0`,At+=l(ot,2),At+=rt.magic,At+=l(E,2),At+=l(P,2),At+=l($t.crc32,4),At+=l($t.compressedSize,4),At+=l($t.uncompressedSize,4),At+=l(M.length,2),At+=l(lt.length,2),{fileRecord:m.LOCAL_FILE_HEADER+At+M+lt,dirRecord:m.CENTRAL_FILE_HEADER+l(Pt,2)+At+l(st.length,2)+"\0\0\0\0"+l(it,4)+l(I,4)+M+lt+st}}var c=r("../utils"),d=r("../stream/GenericWorker"),y=r("../utf8"),g=r("../crc32"),m=r("../signature");function b(v,O,w,I){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=O,this.zipPlatform=w,this.encodeFileName=I,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(b,d),b.prototype.push=function(v){var O=v.meta.percent||0,w=this.entriesCount,I=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,d.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:w?(O+100*(w-I-1))/w:100}}))},b.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var O=this.streamFiles&&!v.file.dir;if(O){var w=u(v,O,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(v){this.accumulate=!1;var O=this.streamFiles&&!v.file.dir,w=u(v,O,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),O)this.push({data:function(I){return m.DATA_DESCRIPTOR+l(I.crc32,4)+l(I.compressedSize,4)+l(I.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var v=this.bytesWritten,O=0;O<this.dirRecords.length;O++)this.push({data:this.dirRecords[O],meta:{percent:100}});var w=this.bytesWritten-v,I=function(S,A,E,P,U){var rt=c.transformTo("string",U(P));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(S,2)+l(S,2)+l(A,4)+l(E,4)+l(rt.length,2)+rt}(this.dirRecords.length,w,v,this.zipComment,this.encodeFileName);this.push({data:I,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(v){this._sources.push(v);var O=this;return v.on("data",function(w){O.processChunk(w)}),v.on("end",function(){O.closedSource(O.previous.streamInfo),O._sources.length?O.prepareNextSource():O.end()}),v.on("error",function(w){O.error(w)}),this},b.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(v){var O=this._sources;if(!d.prototype.error.call(this,v))return!1;for(var w=0;w<O.length;w++)try{O[w].error(v)}catch{}return!0},b.prototype.lock=function(){d.prototype.lock.call(this);for(var v=this._sources,O=0;O<v.length;O++)v[O].lock()},i.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,i,o){var l=r("../compressions"),u=r("./ZipFileWorker");o.generateWorker=function(c,d,y){var g=new u(d.streamFiles,y,d.platform,d.encodeFileName),m=0;try{c.forEach(function(b,v){m++;var O=function(A,E){var P=A||E,U=l[P];if(!U)throw new Error(P+" is not a valid compression method !");return U}(v.options.compression,d.compression),w=v.options.compressionOptions||d.compressionOptions||{},I=v.dir,S=v.date;v._compressWorker(O,w).withStreamInfo("file",{name:b,dir:I,date:S,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(g)}),g.entriesCount=m}catch(b){g.error(b)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,i,o){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new l;for(var c in this)typeof this[c]!="function"&&(u[c]=this[c]);return u}}(l.prototype=r("./object")).loadAsync=r("./load"),l.support=r("./support"),l.defaults=r("./defaults"),l.version="3.10.1",l.loadAsync=function(u,c){return new l().loadAsync(u,c)},l.external=r("./external"),i.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,i,o){var l=r("./utils"),u=r("./external"),c=r("./utf8"),d=r("./zipEntries"),y=r("./stream/Crc32Probe"),g=r("./nodejsUtils");function m(b){return new u.Promise(function(v,O){var w=b.decompressed.getContentWorker().pipe(new y);w.on("error",function(I){O(I)}).on("end",function(){w.streamInfo.crc32!==b.decompressed.crc32?O(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}i.exports=function(b,v){var O=this;return v=l.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),g.isNode&&g.isStream(b)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",b,!0,v.optimizedBinaryString,v.base64).then(function(w){var I=new d(v);return I.load(w),I}).then(function(w){var I=[u.Promise.resolve(w)],S=w.files;if(v.checkCRC32)for(var A=0;A<S.length;A++)I.push(m(S[A]));return u.Promise.all(I)}).then(function(w){for(var I=w.shift(),S=I.files,A=0;A<S.length;A++){var E=S[A],P=E.fileNameStr,U=l.resolve(E.fileNameStr);O.file(U,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:v.createFolders}),E.dir||(O.file(U).unsafeOriginalName=P)}return I.zipComment.length&&(O.comment=I.zipComment),O})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,i,o){var l=r("../utils"),u=r("../stream/GenericWorker");function c(d,y){u.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(y)}l.inherits(c,u),c.prototype._bindStream=function(d){var y=this;(this._stream=d).pause(),d.on("data",function(g){y.push({data:g,meta:{percent:0}})}).on("error",function(g){y.isPaused?this.generatedError=g:y.error(g)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},c.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,i,o){var l=r("readable-stream").Readable;function u(c,d,y){l.call(this,d),this._helper=c;var g=this;c.on("data",function(m,b){g.push(m)||g._helper.pause(),y&&y(b)}).on("error",function(m){g.emit("error",m)}).on("end",function(){g.push(null)})}r("../utils").inherits(u,l),u.prototype._read=function(){this._helper.resume()},i.exports=u},{"../utils":32,"readable-stream":16}],14:[function(r,i,o){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,u);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,u)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var u=new Buffer(l);return u.fill(0),u},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(r,i,o){function l(U,rt,F){var M,L=c.getTypeOf(rt),D=c.extend(F||{},g);D.date=D.date||new Date,D.compression!==null&&(D.compression=D.compression.toUpperCase()),typeof D.unixPermissions=="string"&&(D.unixPermissions=parseInt(D.unixPermissions,8)),D.unixPermissions&&16384&D.unixPermissions&&(D.dir=!0),D.dosPermissions&&16&D.dosPermissions&&(D.dir=!0),D.dir&&(U=S(U)),D.createFolders&&(M=I(U))&&A.call(this,M,!0);var st=L==="string"&&D.binary===!1&&D.base64===!1;F&&F.binary!==void 0||(D.binary=!st),(rt instanceof m&&rt.uncompressedSize===0||D.dir||!rt||rt.length===0)&&(D.base64=!1,D.binary=!0,rt="",D.compression="STORE",L="string");var k=null;k=rt instanceof m||rt instanceof d?rt:O.isNode&&O.isStream(rt)?new w(U,rt):c.prepareContent(U,rt,D.binary,D.optimizedBinaryString,D.base64);var K=new b(U,k,D);this.files[U]=K}var u=r("./utf8"),c=r("./utils"),d=r("./stream/GenericWorker"),y=r("./stream/StreamHelper"),g=r("./defaults"),m=r("./compressedObject"),b=r("./zipObject"),v=r("./generate"),O=r("./nodejsUtils"),w=r("./nodejs/NodejsStreamInputAdapter"),I=function(U){U.slice(-1)==="/"&&(U=U.substring(0,U.length-1));var rt=U.lastIndexOf("/");return 0<rt?U.substring(0,rt):""},S=function(U){return U.slice(-1)!=="/"&&(U+="/"),U},A=function(U,rt){return rt=rt!==void 0?rt:g.createFolders,U=S(U),this.files[U]||l.call(this,U,null,{dir:!0,createFolders:rt}),this.files[U]};function E(U){return Object.prototype.toString.call(U)==="[object RegExp]"}var P={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(U){var rt,F,M;for(rt in this.files)M=this.files[rt],(F=rt.slice(this.root.length,rt.length))&&rt.slice(0,this.root.length)===this.root&&U(F,M)},filter:function(U){var rt=[];return this.forEach(function(F,M){U(F,M)&&rt.push(M)}),rt},file:function(U,rt,F){if(arguments.length!==1)return U=this.root+U,l.call(this,U,rt,F),this;if(E(U)){var M=U;return this.filter(function(D,st){return!st.dir&&M.test(D)})}var L=this.files[this.root+U];return L&&!L.dir?L:null},folder:function(U){if(!U)return this;if(E(U))return this.filter(function(L,D){return D.dir&&U.test(L)});var rt=this.root+U,F=A.call(this,rt),M=this.clone();return M.root=F.name,M},remove:function(U){U=this.root+U;var rt=this.files[U];if(rt||(U.slice(-1)!=="/"&&(U+="/"),rt=this.files[U]),rt&&!rt.dir)delete this.files[U];else for(var F=this.filter(function(L,D){return D.name.slice(0,U.length)===U}),M=0;M<F.length;M++)delete this.files[F[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(U){var rt,F={};try{if((F=c.extend(U||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),F.type==="binarystring"&&(F.type="string"),!F.type)throw new Error("No output type specified.");c.checkSupport(F.type),F.platform!=="darwin"&&F.platform!=="freebsd"&&F.platform!=="linux"&&F.platform!=="sunos"||(F.platform="UNIX"),F.platform==="win32"&&(F.platform="DOS");var M=F.comment||this.comment||"";rt=v.generateWorker(this,F,M)}catch(L){(rt=new d("error")).error(L)}return new y(rt,F.type||"string",F.mimeType)},generateAsync:function(U,rt){return this.generateInternalStream(U).accumulate(rt)},generateNodeStream:function(U,rt){return(U=U||{}).type||(U.type="nodebuffer"),this.generateInternalStream(U).toNodejsStream(rt)}};i.exports=P},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,i,o){i.exports=r("stream")},{stream:void 0}],17:[function(r,i,o){var l=r("./DataReader");function u(c){l.call(this,c);for(var d=0;d<this.data.length;d++)c[d]=255&c[d]}r("../utils").inherits(u,l),u.prototype.byteAt=function(c){return this.data[this.zero+c]},u.prototype.lastIndexOfSignature=function(c){for(var d=c.charCodeAt(0),y=c.charCodeAt(1),g=c.charCodeAt(2),m=c.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===d&&this.data[b+1]===y&&this.data[b+2]===g&&this.data[b+3]===m)return b-this.zero;return-1},u.prototype.readAndCheckSignature=function(c){var d=c.charCodeAt(0),y=c.charCodeAt(1),g=c.charCodeAt(2),m=c.charCodeAt(3),b=this.readData(4);return d===b[0]&&y===b[1]&&g===b[2]&&m===b[3]},u.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=u},{"../utils":32,"./DataReader":18}],18:[function(r,i,o){var l=r("../utils");function u(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var d,y=0;for(this.checkOffset(c),d=this.index+c-1;d>=this.index;d--)y=(y<<8)+this.byteAt(d);return this.index+=c,y},readString:function(c){return l.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},i.exports=u},{"../utils":32}],19:[function(r,i,o){var l=r("./Uint8ArrayReader");function u(c){l.call(this,c)}r("../utils").inherits(u,l),u.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,i,o){var l=r("./DataReader");function u(c){l.call(this,c)}r("../utils").inherits(u,l),u.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},u.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},u.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},u.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=u},{"../utils":32,"./DataReader":18}],21:[function(r,i,o){var l=r("./ArrayReader");function u(c){l.call(this,c)}r("../utils").inherits(u,l),u.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(r,i,o){var l=r("../utils"),u=r("../support"),c=r("./ArrayReader"),d=r("./StringReader"),y=r("./NodeBufferReader"),g=r("./Uint8ArrayReader");i.exports=function(m){var b=l.getTypeOf(m);return l.checkSupport(b),b!=="string"||u.uint8array?b==="nodebuffer"?new y(m):u.uint8array?new g(l.transformTo("uint8array",m)):new c(l.transformTo("array",m)):new d(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,i,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,i,o){var l=r("./GenericWorker"),u=r("../utils");function c(d){l.call(this,"ConvertWorker to "+d),this.destType=d}u.inherits(c,l),c.prototype.processChunk=function(d){this.push({data:u.transformTo(this.destType,d.data),meta:d.meta})},i.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(r,i,o){var l=r("./GenericWorker"),u=r("../crc32");function c(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(c,l),c.prototype.processChunk=function(d){this.streamInfo.crc32=u(d.data,this.streamInfo.crc32||0),this.push(d)},i.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,i,o){var l=r("../utils"),u=r("./GenericWorker");function c(d){u.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}l.inherits(c,u),c.prototype.processChunk=function(d){if(d){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+d.data.length}u.prototype.processChunk.call(this,d)},i.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(r,i,o){var l=r("../utils"),u=r("./GenericWorker");function c(d){u.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(g){y.dataIsReady=!0,y.data=g,y.max=g&&g.length||0,y.type=l.getTypeOf(g),y.isPaused||y._tickAndRepeat()},function(g){y.error(g)})}l.inherits(c,u),c.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,y);break;case"uint8array":d=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":d=this.data.slice(this.index,y)}return this.index=y,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(r,i,o){function l(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,c){return this._listeners[u].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,c){if(this._listeners[u])for(var d=0;d<this._listeners[u].length;d++)this._listeners[u][d].call(this,c)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var c=this;return u.on("data",function(d){c.processChunk(d)}),u.on("end",function(){c.end()}),u.on("error",function(d){c.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,c){return this.extraStreamInfo[u]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},i.exports=l},{}],29:[function(r,i,o){var l=r("../utils"),u=r("./ConvertWorker"),c=r("./GenericWorker"),d=r("../base64"),y=r("../support"),g=r("../external"),m=null;if(y.nodestream)try{m=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(O,w){return new g.Promise(function(I,S){var A=[],E=O._internalType,P=O._outputType,U=O._mimeType;O.on("data",function(rt,F){A.push(rt),w&&w(F)}).on("error",function(rt){A=[],S(rt)}).on("end",function(){try{var rt=function(F,M,L){switch(F){case"blob":return l.newBlob(l.transformTo("arraybuffer",M),L);case"base64":return d.encode(M);default:return l.transformTo(F,M)}}(P,function(F,M){var L,D=0,st=null,k=0;for(L=0;L<M.length;L++)k+=M[L].length;switch(F){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(st=new Uint8Array(k),L=0;L<M.length;L++)st.set(M[L],D),D+=M[L].length;return st;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+F+"'")}}(E,A),U);I(rt)}catch(F){S(F)}A=[]}).resume()})}function v(O,w,I){var S=w;switch(w){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=w,this._mimeType=I,l.checkSupport(S),this._worker=O.pipe(new u(S)),O.lock()}catch(A){this._worker=new c("error"),this._worker.error(A)}}v.prototype={accumulate:function(O){return b(this,O)},on:function(O,w){var I=this;return O==="data"?this._worker.on(O,function(S){w.call(I,S.data,S.meta)}):this._worker.on(O,function(){l.delay(w,arguments,I)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(O){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},O)}},i.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,i,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var l=new ArrayBuffer(0);try{o.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(l),o.blob=u.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!r("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(r,i,o){for(var l=r("./utils"),u=r("./support"),c=r("./nodejsUtils"),d=r("./stream/GenericWorker"),y=new Array(256),g=0;g<256;g++)y[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;y[254]=y[254]=1;function m(){d.call(this,"utf-8 decode"),this.leftOver=null}function b(){d.call(this,"utf-8 encode")}o.utf8encode=function(v){return u.nodebuffer?c.newBufferFrom(v,"utf-8"):function(O){var w,I,S,A,E,P=O.length,U=0;for(A=0;A<P;A++)(64512&(I=O.charCodeAt(A)))==55296&&A+1<P&&(64512&(S=O.charCodeAt(A+1)))==56320&&(I=65536+(I-55296<<10)+(S-56320),A++),U+=I<128?1:I<2048?2:I<65536?3:4;for(w=u.uint8array?new Uint8Array(U):new Array(U),A=E=0;E<U;A++)(64512&(I=O.charCodeAt(A)))==55296&&A+1<P&&(64512&(S=O.charCodeAt(A+1)))==56320&&(I=65536+(I-55296<<10)+(S-56320),A++),I<128?w[E++]=I:(I<2048?w[E++]=192|I>>>6:(I<65536?w[E++]=224|I>>>12:(w[E++]=240|I>>>18,w[E++]=128|I>>>12&63),w[E++]=128|I>>>6&63),w[E++]=128|63&I);return w}(v)},o.utf8decode=function(v){return u.nodebuffer?l.transformTo("nodebuffer",v).toString("utf-8"):function(O){var w,I,S,A,E=O.length,P=new Array(2*E);for(w=I=0;w<E;)if((S=O[w++])<128)P[I++]=S;else if(4<(A=y[S]))P[I++]=65533,w+=A-1;else{for(S&=A===2?31:A===3?15:7;1<A&&w<E;)S=S<<6|63&O[w++],A--;1<A?P[I++]=65533:S<65536?P[I++]=S:(S-=65536,P[I++]=55296|S>>10&1023,P[I++]=56320|1023&S)}return P.length!==I&&(P.subarray?P=P.subarray(0,I):P.length=I),l.applyFromCharCode(P)}(v=l.transformTo(u.uint8array?"uint8array":"array",v))},l.inherits(m,d),m.prototype.processChunk=function(v){var O=l.transformTo(u.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var w=O;(O=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),O.set(w,this.leftOver.length)}else O=this.leftOver.concat(O);this.leftOver=null}var I=function(A,E){var P;for((E=E||A.length)>A.length&&(E=A.length),P=E-1;0<=P&&(192&A[P])==128;)P--;return P<0||P===0?E:P+y[A[P]]>E?P:E}(O),S=O;I!==O.length&&(u.uint8array?(S=O.subarray(0,I),this.leftOver=O.subarray(I,O.length)):(S=O.slice(0,I),this.leftOver=O.slice(I,O.length))),this.push({data:o.utf8decode(S),meta:v.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=m,l.inherits(b,d),b.prototype.processChunk=function(v){this.push({data:o.utf8encode(v.data),meta:v.meta})},o.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,i,o){var l=r("./support"),u=r("./base64"),c=r("./nodejsUtils"),d=r("./external");function y(w){return w}function g(w,I){for(var S=0;S<w.length;++S)I[S]=255&w.charCodeAt(S);return I}r("setimmediate"),o.newBlob=function(w,I){o.checkSupport("blob");try{return new Blob([w],{type:I})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(w),S.getBlob(I)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(w,I,S){var A=[],E=0,P=w.length;if(P<=S)return String.fromCharCode.apply(null,w);for(;E<P;)I==="array"||I==="nodebuffer"?A.push(String.fromCharCode.apply(null,w.slice(E,Math.min(E+S,P)))):A.push(String.fromCharCode.apply(null,w.subarray(E,Math.min(E+S,P)))),E+=S;return A.join("")},stringifyByChar:function(w){for(var I="",S=0;S<w.length;S++)I+=String.fromCharCode(w[S]);return I},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}}()}};function b(w){var I=65536,S=o.getTypeOf(w),A=!0;if(S==="uint8array"?A=m.applyCanBeUsed.uint8array:S==="nodebuffer"&&(A=m.applyCanBeUsed.nodebuffer),A)for(;1<I;)try{return m.stringifyByChunk(w,S,I)}catch{I=Math.floor(I/2)}return m.stringifyByChar(w)}function v(w,I){for(var S=0;S<w.length;S++)I[S]=w[S];return I}o.applyFromCharCode=b;var O={};O.string={string:y,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return O.string.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:function(w){return g(w,c.allocBuffer(w.length))}},O.array={string:b,array:y,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return c.newBufferFrom(w)}},O.arraybuffer={string:function(w){return b(new Uint8Array(w))},array:function(w){return v(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:y,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return c.newBufferFrom(new Uint8Array(w))}},O.uint8array={string:b,array:function(w){return v(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:y,nodebuffer:function(w){return c.newBufferFrom(w)}},O.nodebuffer={string:b,array:function(w){return v(w,new Array(w.length))},arraybuffer:function(w){return O.nodebuffer.uint8array(w).buffer},uint8array:function(w){return v(w,new Uint8Array(w.length))},nodebuffer:y},o.transformTo=function(w,I){if(I=I||"",!w)return I;o.checkSupport(w);var S=o.getTypeOf(I);return O[S][w](I)},o.resolve=function(w){for(var I=w.split("/"),S=[],A=0;A<I.length;A++){var E=I[A];E==="."||E===""&&A!==0&&A!==I.length-1||(E===".."?S.pop():S.push(E))}return S.join("/")},o.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":l.nodebuffer&&c.isBuffer(w)?"nodebuffer":l.uint8array&&w instanceof Uint8Array?"uint8array":l.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(w){if(!l[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(w){var I,S,A="";for(S=0;S<(w||"").length;S++)A+="\\x"+((I=w.charCodeAt(S))<16?"0":"")+I.toString(16).toUpperCase();return A},o.delay=function(w,I,S){setImmediate(function(){w.apply(S||null,I||[])})},o.inherits=function(w,I){function S(){}S.prototype=I.prototype,w.prototype=new S},o.extend=function(){var w,I,S={};for(w=0;w<arguments.length;w++)for(I in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],I)&&S[I]===void 0&&(S[I]=arguments[w][I]);return S},o.prepareContent=function(w,I,S,A,E){return d.Promise.resolve(I).then(function(P){return l.blob&&(P instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(P))!==-1)&&typeof FileReader<"u"?new d.Promise(function(U,rt){var F=new FileReader;F.onload=function(M){U(M.target.result)},F.onerror=function(M){rt(M.target.error)},F.readAsArrayBuffer(P)}):P}).then(function(P){var U=o.getTypeOf(P);return U?(U==="arraybuffer"?P=o.transformTo("uint8array",P):U==="string"&&(E?P=u.decode(P):S&&A!==!0&&(P=function(rt){return g(rt,l.uint8array?new Uint8Array(rt.length):new Array(rt.length))}(P))),P):d.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,i,o){var l=r("./reader/readerFor"),u=r("./utils"),c=r("./signature"),d=r("./zipEntry"),y=r("./support");function g(m){this.files=[],this.loadOptions=m}g.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(b)+", expected "+u.pretty(m)+")")}},isSignature:function(m,b){var v=this.reader.index;this.reader.setIndex(m);var O=this.reader.readString(4)===b;return this.reader.setIndex(v),O},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),b=y.uint8array?"uint8array":"array",v=u.transformTo(b,m);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,b,v,O=this.zip64EndOfCentralSize-44;0<O;)m=this.reader.readInt(2),b=this.reader.readInt(4),v=this.reader.readData(b),this.zip64ExtensibleData[m]={id:m,length:b,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,b;for(m=0;m<this.files.length;m++)b=this.files[m],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(m=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var b=m;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var O=b-v;if(0<O)this.isSignature(b,c.CENTRAL_FILE_HEADER)||(this.reader.zero=O);else if(O<0)throw new Error("Corrupted zip: missing "+Math.abs(O)+" bytes.")},prepareReader:function(m){this.reader=l(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,i,o){var l=r("./reader/readerFor"),u=r("./utils"),c=r("./compressedObject"),d=r("./crc32"),y=r("./utf8"),g=r("./compressions"),m=r("./support");function b(v,O){this.options=v,this.loadOptions=O}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var O,w;if(v.skip(22),this.fileNameLength=v.readInt(2),w=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((O=function(I){for(var S in g)if(Object.prototype.hasOwnProperty.call(g,S)&&g[S].magic===I)return g[S];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,O,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var O=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(O),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=l(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var O,w,I,S=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<S;)O=v.readInt(2),w=v.readInt(2),I=v.readData(w),this.extraFields[O]={id:O,length:w,value:I};v.setIndex(S)},handleUTF8:function(){var v=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var O=this.findExtraFieldUnicodePath();if(O!==null)this.fileNameStr=O;else{var w=u.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var I=this.findExtraFieldUnicodeComment();if(I!==null)this.fileCommentStr=I;else{var S=u.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var O=l(v.value);return O.readInt(1)!==1||d(this.fileName)!==O.readInt(4)?null:y.utf8decode(O.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var O=l(v.value);return O.readInt(1)!==1||d(this.fileComment)!==O.readInt(4)?null:y.utf8decode(O.readData(v.length-5))}return null}},i.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,i,o){function l(O,w,I){this.name=O,this.dir=I.dir,this.date=I.date,this.comment=I.comment,this.unixPermissions=I.unixPermissions,this.dosPermissions=I.dosPermissions,this._data=w,this._dataBinary=I.binary,this.options={compression:I.compression,compressionOptions:I.compressionOptions}}var u=r("./stream/StreamHelper"),c=r("./stream/DataWorker"),d=r("./utf8"),y=r("./compressedObject"),g=r("./stream/GenericWorker");l.prototype={internalStream:function(O){var w=null,I="string";try{if(!O)throw new Error("No output type specified.");var S=(I=O.toLowerCase())==="string"||I==="text";I!=="binarystring"&&I!=="text"||(I="string"),w=this._decompressWorker();var A=!this._dataBinary;A&&!S&&(w=w.pipe(new d.Utf8EncodeWorker)),!A&&S&&(w=w.pipe(new d.Utf8DecodeWorker))}catch(E){(w=new g("error")).error(E)}return new u(w,I,"")},async:function(O,w){return this.internalStream(O).accumulate(w)},nodeStream:function(O,w){return this.internalStream(O||"nodebuffer").toNodejsStream(w)},_compressWorker:function(O,w){if(this._data instanceof y&&this._data.compression.magic===O.magic)return this._data.getCompressedWorker();var I=this._decompressWorker();return this._dataBinary||(I=I.pipe(new d.Utf8EncodeWorker)),y.createWorkerFrom(I,O,w)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof g?this._data:new c(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<m.length;v++)l.prototype[m[v]]=b;i.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,i,o){(function(l){var u,c,d=l.MutationObserver||l.WebKitMutationObserver;if(d){var y=0,g=new d(O),m=l.document.createTextNode("");g.observe(m,{characterData:!0}),u=function(){m.data=y=++y%2}}else if(l.setImmediate||l.MessageChannel===void 0)u="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var w=l.document.createElement("script");w.onreadystatechange=function(){O(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},l.document.documentElement.appendChild(w)}:function(){setTimeout(O,0)};else{var b=new l.MessageChannel;b.port1.onmessage=O,u=function(){b.port2.postMessage(0)}}var v=[];function O(){var w,I;c=!0;for(var S=v.length;S;){for(I=v,v=[],w=-1;++w<S;)I[w]();S=v.length}c=!1}i.exports=function(w){v.push(w)!==1||c||u()}}).call(this,typeof ir<"u"?ir:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,i,o){var l=r("immediate");function u(){}var c={},d=["REJECTED"],y=["FULFILLED"],g=["PENDING"];function m(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,S!==u&&w(this,S)}function b(S,A,E){this.promise=S,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function v(S,A,E){l(function(){var P;try{P=A(E)}catch(U){return c.reject(S,U)}P===S?c.reject(S,new TypeError("Cannot resolve promise with itself")):c.resolve(S,P)})}function O(S){var A=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof A=="function")return function(){A.apply(S,arguments)}}function w(S,A){var E=!1;function P(F){E||(E=!0,c.reject(S,F))}function U(F){E||(E=!0,c.resolve(S,F))}var rt=I(function(){A(U,P)});rt.status==="error"&&P(rt.value)}function I(S,A){var E={};try{E.value=S(A),E.status="success"}catch(P){E.status="error",E.value=P}return E}(i.exports=m).prototype.finally=function(S){if(typeof S!="function")return this;var A=this.constructor;return this.then(function(E){return A.resolve(S()).then(function(){return E})},function(E){return A.resolve(S()).then(function(){throw E})})},m.prototype.catch=function(S){return this.then(null,S)},m.prototype.then=function(S,A){if(typeof S!="function"&&this.state===y||typeof A!="function"&&this.state===d)return this;var E=new this.constructor(u);return this.state!==g?v(E,this.state===y?S:A,this.outcome):this.queue.push(new b(E,S,A)),E},b.prototype.callFulfilled=function(S){c.resolve(this.promise,S)},b.prototype.otherCallFulfilled=function(S){v(this.promise,this.onFulfilled,S)},b.prototype.callRejected=function(S){c.reject(this.promise,S)},b.prototype.otherCallRejected=function(S){v(this.promise,this.onRejected,S)},c.resolve=function(S,A){var E=I(O,A);if(E.status==="error")return c.reject(S,E.value);var P=E.value;if(P)w(S,P);else{S.state=y,S.outcome=A;for(var U=-1,rt=S.queue.length;++U<rt;)S.queue[U].callFulfilled(A)}return S},c.reject=function(S,A){S.state=d,S.outcome=A;for(var E=-1,P=S.queue.length;++E<P;)S.queue[E].callRejected(A);return S},m.resolve=function(S){return S instanceof this?S:c.resolve(new this(u),S)},m.reject=function(S){var A=new this(u);return c.reject(A,S)},m.all=function(S){var A=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=S.length,P=!1;if(!E)return this.resolve([]);for(var U=new Array(E),rt=0,F=-1,M=new this(u);++F<E;)L(S[F],F);return M;function L(D,st){A.resolve(D).then(function(k){U[st]=k,++rt!==E||P||(P=!0,c.resolve(M,U))},function(k){P||(P=!0,c.reject(M,k))})}},m.race=function(S){var A=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=S.length,P=!1;if(!E)return this.resolve([]);for(var U=-1,rt=new this(u);++U<E;)F=S[U],A.resolve(F).then(function(M){P||(P=!0,c.resolve(rt,M))},function(M){P||(P=!0,c.reject(rt,M))});var F;return rt}},{immediate:36}],38:[function(r,i,o){var l={};(0,r("./lib/utils/common").assign)(l,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),i.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,i,o){var l=r("./zlib/deflate"),u=r("./utils/common"),c=r("./utils/strings"),d=r("./zlib/messages"),y=r("./zlib/zstream"),g=Object.prototype.toString,m=0,b=-1,v=0,O=8;function w(S){if(!(this instanceof w))return new w(S);this.options=u.assign({level:b,method:O,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},S||{});var A=this.options;A.raw&&0<A.windowBits?A.windowBits=-A.windowBits:A.gzip&&0<A.windowBits&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var E=l.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(E!==m)throw new Error(d[E]);if(A.header&&l.deflateSetHeader(this.strm,A.header),A.dictionary){var P;if(P=typeof A.dictionary=="string"?c.string2buf(A.dictionary):g.call(A.dictionary)==="[object ArrayBuffer]"?new Uint8Array(A.dictionary):A.dictionary,(E=l.deflateSetDictionary(this.strm,P))!==m)throw new Error(d[E]);this._dict_set=!0}}function I(S,A){var E=new w(A);if(E.push(S,!0),E.err)throw E.msg||d[E.err];return E.result}w.prototype.push=function(S,A){var E,P,U=this.strm,rt=this.options.chunkSize;if(this.ended)return!1;P=A===~~A?A:A===!0?4:0,typeof S=="string"?U.input=c.string2buf(S):g.call(S)==="[object ArrayBuffer]"?U.input=new Uint8Array(S):U.input=S,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new u.Buf8(rt),U.next_out=0,U.avail_out=rt),(E=l.deflate(U,P))!==1&&E!==m)return this.onEnd(E),!(this.ended=!0);U.avail_out!==0&&(U.avail_in!==0||P!==4&&P!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(u.shrinkBuf(U.output,U.next_out))):this.onData(u.shrinkBuf(U.output,U.next_out)))}while((0<U.avail_in||U.avail_out===0)&&E!==1);return P===4?(E=l.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===m):P!==2||(this.onEnd(m),!(U.avail_out=0))},w.prototype.onData=function(S){this.chunks.push(S)},w.prototype.onEnd=function(S){S===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},o.Deflate=w,o.deflate=I,o.deflateRaw=function(S,A){return(A=A||{}).raw=!0,I(S,A)},o.gzip=function(S,A){return(A=A||{}).gzip=!0,I(S,A)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,i,o){var l=r("./zlib/inflate"),u=r("./utils/common"),c=r("./utils/strings"),d=r("./zlib/constants"),y=r("./zlib/messages"),g=r("./zlib/zstream"),m=r("./zlib/gzheader"),b=Object.prototype.toString;function v(w){if(!(this instanceof v))return new v(w);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},w||{});var I=this.options;I.raw&&0<=I.windowBits&&I.windowBits<16&&(I.windowBits=-I.windowBits,I.windowBits===0&&(I.windowBits=-15)),!(0<=I.windowBits&&I.windowBits<16)||w&&w.windowBits||(I.windowBits+=32),15<I.windowBits&&I.windowBits<48&&!(15&I.windowBits)&&(I.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var S=l.inflateInit2(this.strm,I.windowBits);if(S!==d.Z_OK)throw new Error(y[S]);this.header=new m,l.inflateGetHeader(this.strm,this.header)}function O(w,I){var S=new v(I);if(S.push(w,!0),S.err)throw S.msg||y[S.err];return S.result}v.prototype.push=function(w,I){var S,A,E,P,U,rt,F=this.strm,M=this.options.chunkSize,L=this.options.dictionary,D=!1;if(this.ended)return!1;A=I===~~I?I:I===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof w=="string"?F.input=c.binstring2buf(w):b.call(w)==="[object ArrayBuffer]"?F.input=new Uint8Array(w):F.input=w,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new u.Buf8(M),F.next_out=0,F.avail_out=M),(S=l.inflate(F,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&L&&(rt=typeof L=="string"?c.string2buf(L):b.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,S=l.inflateSetDictionary(this.strm,rt)),S===d.Z_BUF_ERROR&&D===!0&&(S=d.Z_OK,D=!1),S!==d.Z_STREAM_END&&S!==d.Z_OK)return this.onEnd(S),!(this.ended=!0);F.next_out&&(F.avail_out!==0&&S!==d.Z_STREAM_END&&(F.avail_in!==0||A!==d.Z_FINISH&&A!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=c.utf8border(F.output,F.next_out),P=F.next_out-E,U=c.buf2string(F.output,E),F.next_out=P,F.avail_out=M-P,P&&u.arraySet(F.output,F.output,E,P,0),this.onData(U)):this.onData(u.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(D=!0)}while((0<F.avail_in||F.avail_out===0)&&S!==d.Z_STREAM_END);return S===d.Z_STREAM_END&&(A=d.Z_FINISH),A===d.Z_FINISH?(S=l.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===d.Z_OK):A!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(F.avail_out=0))},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},o.Inflate=v,o.inflate=O,o.inflateRaw=function(w,I){return(I=I||{}).raw=!0,O(w,I)},o.ungzip=O},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,i,o){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(d){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var g=y.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var m in g)g.hasOwnProperty(m)&&(d[m]=g[m])}}return d},o.shrinkBuf=function(d,y){return d.length===y?d:d.subarray?d.subarray(0,y):(d.length=y,d)};var u={arraySet:function(d,y,g,m,b){if(y.subarray&&d.subarray)d.set(y.subarray(g,g+m),b);else for(var v=0;v<m;v++)d[b+v]=y[g+v]},flattenChunks:function(d){var y,g,m,b,v,O;for(y=m=0,g=d.length;y<g;y++)m+=d[y].length;for(O=new Uint8Array(m),y=b=0,g=d.length;y<g;y++)v=d[y],O.set(v,b),b+=v.length;return O}},c={arraySet:function(d,y,g,m,b){for(var v=0;v<m;v++)d[b+v]=y[g+v]},flattenChunks:function(d){return[].concat.apply([],d)}};o.setTyped=function(d){d?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,u)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,c))},o.setTyped(l)},{}],42:[function(r,i,o){var l=r("./common"),u=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var d=new l.Buf8(256),y=0;y<256;y++)d[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function g(m,b){if(b<65537&&(m.subarray&&c||!m.subarray&&u))return String.fromCharCode.apply(null,l.shrinkBuf(m,b));for(var v="",O=0;O<b;O++)v+=String.fromCharCode(m[O]);return v}d[254]=d[254]=1,o.string2buf=function(m){var b,v,O,w,I,S=m.length,A=0;for(w=0;w<S;w++)(64512&(v=m.charCodeAt(w)))==55296&&w+1<S&&(64512&(O=m.charCodeAt(w+1)))==56320&&(v=65536+(v-55296<<10)+(O-56320),w++),A+=v<128?1:v<2048?2:v<65536?3:4;for(b=new l.Buf8(A),w=I=0;I<A;w++)(64512&(v=m.charCodeAt(w)))==55296&&w+1<S&&(64512&(O=m.charCodeAt(w+1)))==56320&&(v=65536+(v-55296<<10)+(O-56320),w++),v<128?b[I++]=v:(v<2048?b[I++]=192|v>>>6:(v<65536?b[I++]=224|v>>>12:(b[I++]=240|v>>>18,b[I++]=128|v>>>12&63),b[I++]=128|v>>>6&63),b[I++]=128|63&v);return b},o.buf2binstring=function(m){return g(m,m.length)},o.binstring2buf=function(m){for(var b=new l.Buf8(m.length),v=0,O=b.length;v<O;v++)b[v]=m.charCodeAt(v);return b},o.buf2string=function(m,b){var v,O,w,I,S=b||m.length,A=new Array(2*S);for(v=O=0;v<S;)if((w=m[v++])<128)A[O++]=w;else if(4<(I=d[w]))A[O++]=65533,v+=I-1;else{for(w&=I===2?31:I===3?15:7;1<I&&v<S;)w=w<<6|63&m[v++],I--;1<I?A[O++]=65533:w<65536?A[O++]=w:(w-=65536,A[O++]=55296|w>>10&1023,A[O++]=56320|1023&w)}return g(A,O)},o.utf8border=function(m,b){var v;for((b=b||m.length)>m.length&&(b=m.length),v=b-1;0<=v&&(192&m[v])==128;)v--;return v<0||v===0?b:v+d[m[v]]>b?v:b}},{"./common":41}],43:[function(r,i,o){i.exports=function(l,u,c,d){for(var y=65535&l|0,g=l>>>16&65535|0,m=0;c!==0;){for(c-=m=2e3<c?2e3:c;g=g+(y=y+u[d++]|0)|0,--m;);y%=65521,g%=65521}return y|g<<16|0}},{}],44:[function(r,i,o){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,i,o){var l=function(){for(var u,c=[],d=0;d<256;d++){u=d;for(var y=0;y<8;y++)u=1&u?3988292384^u>>>1:u>>>1;c[d]=u}return c}();i.exports=function(u,c,d,y){var g=l,m=y+d;u^=-1;for(var b=y;b<m;b++)u=u>>>8^g[255&(u^c[b])];return-1^u}},{}],46:[function(r,i,o){var l,u=r("../utils/common"),c=r("./trees"),d=r("./adler32"),y=r("./crc32"),g=r("./messages"),m=0,b=4,v=0,O=-2,w=-1,I=4,S=2,A=8,E=9,P=286,U=30,rt=19,F=2*P+1,M=15,L=3,D=258,st=D+L+1,k=42,K=113,_=1,lt=2,wt=3,ct=4;function St(h,V){return h.msg=g[V],V}function bt(h){return(h<<1)-(4<h?9:0)}function $t(h){for(var V=h.length;0<=--V;)h[V]=0}function ot(h){var V=h.state,j=V.pending;j>h.avail_out&&(j=h.avail_out),j!==0&&(u.arraySet(h.output,V.pending_buf,V.pending_out,j,h.next_out),h.next_out+=j,V.pending_out+=j,h.total_out+=j,h.avail_out-=j,V.pending-=j,V.pending===0&&(V.pending_out=0))}function it(h,V){c._tr_flush_block(h,0<=h.block_start?h.block_start:-1,h.strstart-h.block_start,V),h.block_start=h.strstart,ot(h.strm)}function Pt(h,V){h.pending_buf[h.pending++]=V}function At(h,V){h.pending_buf[h.pending++]=V>>>8&255,h.pending_buf[h.pending++]=255&V}function kt(h,V){var j,C,R=h.max_chain_length,N=h.strstart,tt=h.prev_length,X=h.nice_match,J=h.strstart>h.w_size-st?h.strstart-(h.w_size-st):0,at=h.window,mt=h.w_mask,ht=h.prev,Ct=h.strstart+D,Bt=at[N+tt-1],Ot=at[N+tt];h.prev_length>=h.good_match&&(R>>=2),X>h.lookahead&&(X=h.lookahead);do if(at[(j=V)+tt]===Ot&&at[j+tt-1]===Bt&&at[j]===at[N]&&at[++j]===at[N+1]){N+=2,j++;do;while(at[++N]===at[++j]&&at[++N]===at[++j]&&at[++N]===at[++j]&&at[++N]===at[++j]&&at[++N]===at[++j]&&at[++N]===at[++j]&&at[++N]===at[++j]&&at[++N]===at[++j]&&N<Ct);if(C=D-(Ct-N),N=Ct-D,tt<C){if(h.match_start=V,X<=(tt=C))break;Bt=at[N+tt-1],Ot=at[N+tt]}}while((V=ht[V&mt])>J&&--R!=0);return tt<=h.lookahead?tt:h.lookahead}function yt(h){var V,j,C,R,N,tt,X,J,at,mt,ht=h.w_size;do{if(R=h.window_size-h.lookahead-h.strstart,h.strstart>=ht+(ht-st)){for(u.arraySet(h.window,h.window,ht,ht,0),h.match_start-=ht,h.strstart-=ht,h.block_start-=ht,V=j=h.hash_size;C=h.head[--V],h.head[V]=ht<=C?C-ht:0,--j;);for(V=j=ht;C=h.prev[--V],h.prev[V]=ht<=C?C-ht:0,--j;);R+=ht}if(h.strm.avail_in===0)break;if(tt=h.strm,X=h.window,J=h.strstart+h.lookahead,at=R,mt=void 0,mt=tt.avail_in,at<mt&&(mt=at),j=mt===0?0:(tt.avail_in-=mt,u.arraySet(X,tt.input,tt.next_in,mt,J),tt.state.wrap===1?tt.adler=d(tt.adler,X,mt,J):tt.state.wrap===2&&(tt.adler=y(tt.adler,X,mt,J)),tt.next_in+=mt,tt.total_in+=mt,mt),h.lookahead+=j,h.lookahead+h.insert>=L)for(N=h.strstart-h.insert,h.ins_h=h.window[N],h.ins_h=(h.ins_h<<h.hash_shift^h.window[N+1])&h.hash_mask;h.insert&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[N+L-1])&h.hash_mask,h.prev[N&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=N,N++,h.insert--,!(h.lookahead+h.insert<L)););}while(h.lookahead<st&&h.strm.avail_in!==0)}function G(h,V){for(var j,C;;){if(h.lookahead<st){if(yt(h),h.lookahead<st&&V===m)return _;if(h.lookahead===0)break}if(j=0,h.lookahead>=L&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+L-1])&h.hash_mask,j=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),j!==0&&h.strstart-j<=h.w_size-st&&(h.match_length=kt(h,j)),h.match_length>=L)if(C=c._tr_tally(h,h.strstart-h.match_start,h.match_length-L),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=L){for(h.match_length--;h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+L-1])&h.hash_mask,j=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart,--h.match_length!=0;);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else C=c._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(C&&(it(h,!1),h.strm.avail_out===0))return _}return h.insert=h.strstart<L-1?h.strstart:L-1,V===b?(it(h,!0),h.strm.avail_out===0?wt:ct):h.last_lit&&(it(h,!1),h.strm.avail_out===0)?_:lt}function W(h,V){for(var j,C,R;;){if(h.lookahead<st){if(yt(h),h.lookahead<st&&V===m)return _;if(h.lookahead===0)break}if(j=0,h.lookahead>=L&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+L-1])&h.hash_mask,j=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=L-1,j!==0&&h.prev_length<h.max_lazy_match&&h.strstart-j<=h.w_size-st&&(h.match_length=kt(h,j),h.match_length<=5&&(h.strategy===1||h.match_length===L&&4096<h.strstart-h.match_start)&&(h.match_length=L-1)),h.prev_length>=L&&h.match_length<=h.prev_length){for(R=h.strstart+h.lookahead-L,C=c._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-L),h.lookahead-=h.prev_length-1,h.prev_length-=2;++h.strstart<=R&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+L-1])&h.hash_mask,j=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),--h.prev_length!=0;);if(h.match_available=0,h.match_length=L-1,h.strstart++,C&&(it(h,!1),h.strm.avail_out===0))return _}else if(h.match_available){if((C=c._tr_tally(h,0,h.window[h.strstart-1]))&&it(h,!1),h.strstart++,h.lookahead--,h.strm.avail_out===0)return _}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(C=c._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<L-1?h.strstart:L-1,V===b?(it(h,!0),h.strm.avail_out===0?wt:ct):h.last_lit&&(it(h,!1),h.strm.avail_out===0)?_:lt}function z(h,V,j,C,R){this.good_length=h,this.max_lazy=V,this.nice_length=j,this.max_chain=C,this.func=R}function ut(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*F),this.dyn_dtree=new u.Buf16(2*(2*U+1)),this.bl_tree=new u.Buf16(2*(2*rt+1)),$t(this.dyn_ltree),$t(this.dyn_dtree),$t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(M+1),this.heap=new u.Buf16(2*P+1),$t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*P+1),$t(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Et(h){var V;return h&&h.state?(h.total_in=h.total_out=0,h.data_type=S,(V=h.state).pending=0,V.pending_out=0,V.wrap<0&&(V.wrap=-V.wrap),V.status=V.wrap?k:K,h.adler=V.wrap===2?0:1,V.last_flush=m,c._tr_init(V),v):St(h,O)}function B(h){var V=Et(h);return V===v&&function(j){j.window_size=2*j.w_size,$t(j.head),j.max_lazy_match=l[j.level].max_lazy,j.good_match=l[j.level].good_length,j.nice_match=l[j.level].nice_length,j.max_chain_length=l[j.level].max_chain,j.strstart=0,j.block_start=0,j.lookahead=0,j.insert=0,j.match_length=j.prev_length=L-1,j.match_available=0,j.ins_h=0}(h.state),V}function q(h,V,j,C,R,N){if(!h)return O;var tt=1;if(V===w&&(V=6),C<0?(tt=0,C=-C):15<C&&(tt=2,C-=16),R<1||E<R||j!==A||C<8||15<C||V<0||9<V||N<0||I<N)return St(h,O);C===8&&(C=9);var X=new ut;return(h.state=X).strm=h,X.wrap=tt,X.gzhead=null,X.w_bits=C,X.w_size=1<<X.w_bits,X.w_mask=X.w_size-1,X.hash_bits=R+7,X.hash_size=1<<X.hash_bits,X.hash_mask=X.hash_size-1,X.hash_shift=~~((X.hash_bits+L-1)/L),X.window=new u.Buf8(2*X.w_size),X.head=new u.Buf16(X.hash_size),X.prev=new u.Buf16(X.w_size),X.lit_bufsize=1<<R+6,X.pending_buf_size=4*X.lit_bufsize,X.pending_buf=new u.Buf8(X.pending_buf_size),X.d_buf=1*X.lit_bufsize,X.l_buf=3*X.lit_bufsize,X.level=V,X.strategy=N,X.method=j,B(h)}l=[new z(0,0,0,0,function(h,V){var j=65535;for(j>h.pending_buf_size-5&&(j=h.pending_buf_size-5);;){if(h.lookahead<=1){if(yt(h),h.lookahead===0&&V===m)return _;if(h.lookahead===0)break}h.strstart+=h.lookahead,h.lookahead=0;var C=h.block_start+j;if((h.strstart===0||h.strstart>=C)&&(h.lookahead=h.strstart-C,h.strstart=C,it(h,!1),h.strm.avail_out===0)||h.strstart-h.block_start>=h.w_size-st&&(it(h,!1),h.strm.avail_out===0))return _}return h.insert=0,V===b?(it(h,!0),h.strm.avail_out===0?wt:ct):(h.strstart>h.block_start&&(it(h,!1),h.strm.avail_out),_)}),new z(4,4,8,4,G),new z(4,5,16,8,G),new z(4,6,32,32,G),new z(4,4,16,16,W),new z(8,16,32,32,W),new z(8,16,128,128,W),new z(8,32,128,256,W),new z(32,128,258,1024,W),new z(32,258,258,4096,W)],o.deflateInit=function(h,V){return q(h,V,A,15,8,0)},o.deflateInit2=q,o.deflateReset=B,o.deflateResetKeep=Et,o.deflateSetHeader=function(h,V){return h&&h.state?h.state.wrap!==2?O:(h.state.gzhead=V,v):O},o.deflate=function(h,V){var j,C,R,N;if(!h||!h.state||5<V||V<0)return h?St(h,O):O;if(C=h.state,!h.output||!h.input&&h.avail_in!==0||C.status===666&&V!==b)return St(h,h.avail_out===0?-5:O);if(C.strm=h,j=C.last_flush,C.last_flush=V,C.status===k)if(C.wrap===2)h.adler=0,Pt(C,31),Pt(C,139),Pt(C,8),C.gzhead?(Pt(C,(C.gzhead.text?1:0)+(C.gzhead.hcrc?2:0)+(C.gzhead.extra?4:0)+(C.gzhead.name?8:0)+(C.gzhead.comment?16:0)),Pt(C,255&C.gzhead.time),Pt(C,C.gzhead.time>>8&255),Pt(C,C.gzhead.time>>16&255),Pt(C,C.gzhead.time>>24&255),Pt(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),Pt(C,255&C.gzhead.os),C.gzhead.extra&&C.gzhead.extra.length&&(Pt(C,255&C.gzhead.extra.length),Pt(C,C.gzhead.extra.length>>8&255)),C.gzhead.hcrc&&(h.adler=y(h.adler,C.pending_buf,C.pending,0)),C.gzindex=0,C.status=69):(Pt(C,0),Pt(C,0),Pt(C,0),Pt(C,0),Pt(C,0),Pt(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),Pt(C,3),C.status=K);else{var tt=A+(C.w_bits-8<<4)<<8;tt|=(2<=C.strategy||C.level<2?0:C.level<6?1:C.level===6?2:3)<<6,C.strstart!==0&&(tt|=32),tt+=31-tt%31,C.status=K,At(C,tt),C.strstart!==0&&(At(C,h.adler>>>16),At(C,65535&h.adler)),h.adler=1}if(C.status===69)if(C.gzhead.extra){for(R=C.pending;C.gzindex<(65535&C.gzhead.extra.length)&&(C.pending!==C.pending_buf_size||(C.gzhead.hcrc&&C.pending>R&&(h.adler=y(h.adler,C.pending_buf,C.pending-R,R)),ot(h),R=C.pending,C.pending!==C.pending_buf_size));)Pt(C,255&C.gzhead.extra[C.gzindex]),C.gzindex++;C.gzhead.hcrc&&C.pending>R&&(h.adler=y(h.adler,C.pending_buf,C.pending-R,R)),C.gzindex===C.gzhead.extra.length&&(C.gzindex=0,C.status=73)}else C.status=73;if(C.status===73)if(C.gzhead.name){R=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>R&&(h.adler=y(h.adler,C.pending_buf,C.pending-R,R)),ot(h),R=C.pending,C.pending===C.pending_buf_size)){N=1;break}N=C.gzindex<C.gzhead.name.length?255&C.gzhead.name.charCodeAt(C.gzindex++):0,Pt(C,N)}while(N!==0);C.gzhead.hcrc&&C.pending>R&&(h.adler=y(h.adler,C.pending_buf,C.pending-R,R)),N===0&&(C.gzindex=0,C.status=91)}else C.status=91;if(C.status===91)if(C.gzhead.comment){R=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>R&&(h.adler=y(h.adler,C.pending_buf,C.pending-R,R)),ot(h),R=C.pending,C.pending===C.pending_buf_size)){N=1;break}N=C.gzindex<C.gzhead.comment.length?255&C.gzhead.comment.charCodeAt(C.gzindex++):0,Pt(C,N)}while(N!==0);C.gzhead.hcrc&&C.pending>R&&(h.adler=y(h.adler,C.pending_buf,C.pending-R,R)),N===0&&(C.status=103)}else C.status=103;if(C.status===103&&(C.gzhead.hcrc?(C.pending+2>C.pending_buf_size&&ot(h),C.pending+2<=C.pending_buf_size&&(Pt(C,255&h.adler),Pt(C,h.adler>>8&255),h.adler=0,C.status=K)):C.status=K),C.pending!==0){if(ot(h),h.avail_out===0)return C.last_flush=-1,v}else if(h.avail_in===0&&bt(V)<=bt(j)&&V!==b)return St(h,-5);if(C.status===666&&h.avail_in!==0)return St(h,-5);if(h.avail_in!==0||C.lookahead!==0||V!==m&&C.status!==666){var X=C.strategy===2?function(J,at){for(var mt;;){if(J.lookahead===0&&(yt(J),J.lookahead===0)){if(at===m)return _;break}if(J.match_length=0,mt=c._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,mt&&(it(J,!1),J.strm.avail_out===0))return _}return J.insert=0,at===b?(it(J,!0),J.strm.avail_out===0?wt:ct):J.last_lit&&(it(J,!1),J.strm.avail_out===0)?_:lt}(C,V):C.strategy===3?function(J,at){for(var mt,ht,Ct,Bt,Ot=J.window;;){if(J.lookahead<=D){if(yt(J),J.lookahead<=D&&at===m)return _;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=L&&0<J.strstart&&(ht=Ot[Ct=J.strstart-1])===Ot[++Ct]&&ht===Ot[++Ct]&&ht===Ot[++Ct]){Bt=J.strstart+D;do;while(ht===Ot[++Ct]&&ht===Ot[++Ct]&&ht===Ot[++Ct]&&ht===Ot[++Ct]&&ht===Ot[++Ct]&&ht===Ot[++Ct]&&ht===Ot[++Ct]&&ht===Ot[++Ct]&&Ct<Bt);J.match_length=D-(Bt-Ct),J.match_length>J.lookahead&&(J.match_length=J.lookahead)}if(J.match_length>=L?(mt=c._tr_tally(J,1,J.match_length-L),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0):(mt=c._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++),mt&&(it(J,!1),J.strm.avail_out===0))return _}return J.insert=0,at===b?(it(J,!0),J.strm.avail_out===0?wt:ct):J.last_lit&&(it(J,!1),J.strm.avail_out===0)?_:lt}(C,V):l[C.level].func(C,V);if(X!==wt&&X!==ct||(C.status=666),X===_||X===wt)return h.avail_out===0&&(C.last_flush=-1),v;if(X===lt&&(V===1?c._tr_align(C):V!==5&&(c._tr_stored_block(C,0,0,!1),V===3&&($t(C.head),C.lookahead===0&&(C.strstart=0,C.block_start=0,C.insert=0))),ot(h),h.avail_out===0))return C.last_flush=-1,v}return V!==b?v:C.wrap<=0?1:(C.wrap===2?(Pt(C,255&h.adler),Pt(C,h.adler>>8&255),Pt(C,h.adler>>16&255),Pt(C,h.adler>>24&255),Pt(C,255&h.total_in),Pt(C,h.total_in>>8&255),Pt(C,h.total_in>>16&255),Pt(C,h.total_in>>24&255)):(At(C,h.adler>>>16),At(C,65535&h.adler)),ot(h),0<C.wrap&&(C.wrap=-C.wrap),C.pending!==0?v:1)},o.deflateEnd=function(h){var V;return h&&h.state?(V=h.state.status)!==k&&V!==69&&V!==73&&V!==91&&V!==103&&V!==K&&V!==666?St(h,O):(h.state=null,V===K?St(h,-3):v):O},o.deflateSetDictionary=function(h,V){var j,C,R,N,tt,X,J,at,mt=V.length;if(!h||!h.state||(N=(j=h.state).wrap)===2||N===1&&j.status!==k||j.lookahead)return O;for(N===1&&(h.adler=d(h.adler,V,mt,0)),j.wrap=0,mt>=j.w_size&&(N===0&&($t(j.head),j.strstart=0,j.block_start=0,j.insert=0),at=new u.Buf8(j.w_size),u.arraySet(at,V,mt-j.w_size,j.w_size,0),V=at,mt=j.w_size),tt=h.avail_in,X=h.next_in,J=h.input,h.avail_in=mt,h.next_in=0,h.input=V,yt(j);j.lookahead>=L;){for(C=j.strstart,R=j.lookahead-(L-1);j.ins_h=(j.ins_h<<j.hash_shift^j.window[C+L-1])&j.hash_mask,j.prev[C&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=C,C++,--R;);j.strstart=C,j.lookahead=L-1,yt(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=L-1,j.match_available=0,h.next_in=X,h.input=J,h.avail_in=tt,j.wrap=N,v},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,i,o){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,i,o){i.exports=function(l,u){var c,d,y,g,m,b,v,O,w,I,S,A,E,P,U,rt,F,M,L,D,st,k,K,_,lt;c=l.state,d=l.next_in,_=l.input,y=d+(l.avail_in-5),g=l.next_out,lt=l.output,m=g-(u-l.avail_out),b=g+(l.avail_out-257),v=c.dmax,O=c.wsize,w=c.whave,I=c.wnext,S=c.window,A=c.hold,E=c.bits,P=c.lencode,U=c.distcode,rt=(1<<c.lenbits)-1,F=(1<<c.distbits)-1;t:do{E<15&&(A+=_[d++]<<E,E+=8,A+=_[d++]<<E,E+=8),M=P[A&rt];e:for(;;){if(A>>>=L=M>>>24,E-=L,(L=M>>>16&255)===0)lt[g++]=65535&M;else{if(!(16&L)){if(!(64&L)){M=P[(65535&M)+(A&(1<<L)-1)];continue e}if(32&L){c.mode=12;break t}l.msg="invalid literal/length code",c.mode=30;break t}D=65535&M,(L&=15)&&(E<L&&(A+=_[d++]<<E,E+=8),D+=A&(1<<L)-1,A>>>=L,E-=L),E<15&&(A+=_[d++]<<E,E+=8,A+=_[d++]<<E,E+=8),M=U[A&F];n:for(;;){if(A>>>=L=M>>>24,E-=L,!(16&(L=M>>>16&255))){if(!(64&L)){M=U[(65535&M)+(A&(1<<L)-1)];continue n}l.msg="invalid distance code",c.mode=30;break t}if(st=65535&M,E<(L&=15)&&(A+=_[d++]<<E,(E+=8)<L&&(A+=_[d++]<<E,E+=8)),v<(st+=A&(1<<L)-1)){l.msg="invalid distance too far back",c.mode=30;break t}if(A>>>=L,E-=L,(L=g-m)<st){if(w<(L=st-L)&&c.sane){l.msg="invalid distance too far back",c.mode=30;break t}if(K=S,(k=0)===I){if(k+=O-L,L<D){for(D-=L;lt[g++]=S[k++],--L;);k=g-st,K=lt}}else if(I<L){if(k+=O+I-L,(L-=I)<D){for(D-=L;lt[g++]=S[k++],--L;);if(k=0,I<D){for(D-=L=I;lt[g++]=S[k++],--L;);k=g-st,K=lt}}}else if(k+=I-L,L<D){for(D-=L;lt[g++]=S[k++],--L;);k=g-st,K=lt}for(;2<D;)lt[g++]=K[k++],lt[g++]=K[k++],lt[g++]=K[k++],D-=3;D&&(lt[g++]=K[k++],1<D&&(lt[g++]=K[k++]))}else{for(k=g-st;lt[g++]=lt[k++],lt[g++]=lt[k++],lt[g++]=lt[k++],2<(D-=3););D&&(lt[g++]=lt[k++],1<D&&(lt[g++]=lt[k++]))}break}}break}}while(d<y&&g<b);d-=D=E>>3,A&=(1<<(E-=D<<3))-1,l.next_in=d,l.next_out=g,l.avail_in=d<y?y-d+5:5-(d-y),l.avail_out=g<b?b-g+257:257-(g-b),c.hold=A,c.bits=E}},{}],49:[function(r,i,o){var l=r("../utils/common"),u=r("./adler32"),c=r("./crc32"),d=r("./inffast"),y=r("./inftrees"),g=1,m=2,b=0,v=-2,O=1,w=852,I=592;function S(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function A(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(k){var K;return k&&k.state?(K=k.state,k.total_in=k.total_out=K.total=0,k.msg="",K.wrap&&(k.adler=1&K.wrap),K.mode=O,K.last=0,K.havedict=0,K.dmax=32768,K.head=null,K.hold=0,K.bits=0,K.lencode=K.lendyn=new l.Buf32(w),K.distcode=K.distdyn=new l.Buf32(I),K.sane=1,K.back=-1,b):v}function P(k){var K;return k&&k.state?((K=k.state).wsize=0,K.whave=0,K.wnext=0,E(k)):v}function U(k,K){var _,lt;return k&&k.state?(lt=k.state,K<0?(_=0,K=-K):(_=1+(K>>4),K<48&&(K&=15)),K&&(K<8||15<K)?v:(lt.window!==null&&lt.wbits!==K&&(lt.window=null),lt.wrap=_,lt.wbits=K,P(k))):v}function rt(k,K){var _,lt;return k?(lt=new A,(k.state=lt).window=null,(_=U(k,K))!==b&&(k.state=null),_):v}var F,M,L=!0;function D(k){if(L){var K;for(F=new l.Buf32(512),M=new l.Buf32(32),K=0;K<144;)k.lens[K++]=8;for(;K<256;)k.lens[K++]=9;for(;K<280;)k.lens[K++]=7;for(;K<288;)k.lens[K++]=8;for(y(g,k.lens,0,288,F,0,k.work,{bits:9}),K=0;K<32;)k.lens[K++]=5;y(m,k.lens,0,32,M,0,k.work,{bits:5}),L=!1}k.lencode=F,k.lenbits=9,k.distcode=M,k.distbits=5}function st(k,K,_,lt){var wt,ct=k.state;return ct.window===null&&(ct.wsize=1<<ct.wbits,ct.wnext=0,ct.whave=0,ct.window=new l.Buf8(ct.wsize)),lt>=ct.wsize?(l.arraySet(ct.window,K,_-ct.wsize,ct.wsize,0),ct.wnext=0,ct.whave=ct.wsize):(lt<(wt=ct.wsize-ct.wnext)&&(wt=lt),l.arraySet(ct.window,K,_-lt,wt,ct.wnext),(lt-=wt)?(l.arraySet(ct.window,K,_-lt,lt,0),ct.wnext=lt,ct.whave=ct.wsize):(ct.wnext+=wt,ct.wnext===ct.wsize&&(ct.wnext=0),ct.whave<ct.wsize&&(ct.whave+=wt))),0}o.inflateReset=P,o.inflateReset2=U,o.inflateResetKeep=E,o.inflateInit=function(k){return rt(k,15)},o.inflateInit2=rt,o.inflate=function(k,K){var _,lt,wt,ct,St,bt,$t,ot,it,Pt,At,kt,yt,G,W,z,ut,Et,B,q,h,V,j,C,R=0,N=new l.Buf8(4),tt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return v;(_=k.state).mode===12&&(_.mode=13),St=k.next_out,wt=k.output,$t=k.avail_out,ct=k.next_in,lt=k.input,bt=k.avail_in,ot=_.hold,it=_.bits,Pt=bt,At=$t,V=b;t:for(;;)switch(_.mode){case O:if(_.wrap===0){_.mode=13;break}for(;it<16;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}if(2&_.wrap&&ot===35615){N[_.check=0]=255&ot,N[1]=ot>>>8&255,_.check=c(_.check,N,2,0),it=ot=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&ot)<<8)+(ot>>8))%31){k.msg="incorrect header check",_.mode=30;break}if((15&ot)!=8){k.msg="unknown compression method",_.mode=30;break}if(it-=4,h=8+(15&(ot>>>=4)),_.wbits===0)_.wbits=h;else if(h>_.wbits){k.msg="invalid window size",_.mode=30;break}_.dmax=1<<h,k.adler=_.check=1,_.mode=512&ot?10:12,it=ot=0;break;case 2:for(;it<16;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}if(_.flags=ot,(255&_.flags)!=8){k.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){k.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=ot>>8&1),512&_.flags&&(N[0]=255&ot,N[1]=ot>>>8&255,_.check=c(_.check,N,2,0)),it=ot=0,_.mode=3;case 3:for(;it<32;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}_.head&&(_.head.time=ot),512&_.flags&&(N[0]=255&ot,N[1]=ot>>>8&255,N[2]=ot>>>16&255,N[3]=ot>>>24&255,_.check=c(_.check,N,4,0)),it=ot=0,_.mode=4;case 4:for(;it<16;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}_.head&&(_.head.xflags=255&ot,_.head.os=ot>>8),512&_.flags&&(N[0]=255&ot,N[1]=ot>>>8&255,_.check=c(_.check,N,2,0)),it=ot=0,_.mode=5;case 5:if(1024&_.flags){for(;it<16;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}_.length=ot,_.head&&(_.head.extra_len=ot),512&_.flags&&(N[0]=255&ot,N[1]=ot>>>8&255,_.check=c(_.check,N,2,0)),it=ot=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(bt<(kt=_.length)&&(kt=bt),kt&&(_.head&&(h=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),l.arraySet(_.head.extra,lt,ct,kt,h)),512&_.flags&&(_.check=c(_.check,lt,kt,ct)),bt-=kt,ct+=kt,_.length-=kt),_.length))break t;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(bt===0)break t;for(kt=0;h=lt[ct+kt++],_.head&&h&&_.length<65536&&(_.head.name+=String.fromCharCode(h)),h&&kt<bt;);if(512&_.flags&&(_.check=c(_.check,lt,kt,ct)),bt-=kt,ct+=kt,h)break t}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(bt===0)break t;for(kt=0;h=lt[ct+kt++],_.head&&h&&_.length<65536&&(_.head.comment+=String.fromCharCode(h)),h&&kt<bt;);if(512&_.flags&&(_.check=c(_.check,lt,kt,ct)),bt-=kt,ct+=kt,h)break t}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;it<16;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}if(ot!==(65535&_.check)){k.msg="header crc mismatch",_.mode=30;break}it=ot=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),k.adler=_.check=0,_.mode=12;break;case 10:for(;it<32;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}k.adler=_.check=S(ot),it=ot=0,_.mode=11;case 11:if(_.havedict===0)return k.next_out=St,k.avail_out=$t,k.next_in=ct,k.avail_in=bt,_.hold=ot,_.bits=it,2;k.adler=_.check=1,_.mode=12;case 12:if(K===5||K===6)break t;case 13:if(_.last){ot>>>=7&it,it-=7&it,_.mode=27;break}for(;it<3;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}switch(_.last=1&ot,it-=1,3&(ot>>>=1)){case 0:_.mode=14;break;case 1:if(D(_),_.mode=20,K!==6)break;ot>>>=2,it-=2;break t;case 2:_.mode=17;break;case 3:k.msg="invalid block type",_.mode=30}ot>>>=2,it-=2;break;case 14:for(ot>>>=7&it,it-=7&it;it<32;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}if((65535&ot)!=(ot>>>16^65535)){k.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&ot,it=ot=0,_.mode=15,K===6)break t;case 15:_.mode=16;case 16:if(kt=_.length){if(bt<kt&&(kt=bt),$t<kt&&(kt=$t),kt===0)break t;l.arraySet(wt,lt,ct,kt,St),bt-=kt,ct+=kt,$t-=kt,St+=kt,_.length-=kt;break}_.mode=12;break;case 17:for(;it<14;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}if(_.nlen=257+(31&ot),ot>>>=5,it-=5,_.ndist=1+(31&ot),ot>>>=5,it-=5,_.ncode=4+(15&ot),ot>>>=4,it-=4,286<_.nlen||30<_.ndist){k.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;it<3;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}_.lens[tt[_.have++]]=7&ot,ot>>>=3,it-=3}for(;_.have<19;)_.lens[tt[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,j={bits:_.lenbits},V=y(0,_.lens,0,19,_.lencode,0,_.work,j),_.lenbits=j.bits,V){k.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;z=(R=_.lencode[ot&(1<<_.lenbits)-1])>>>16&255,ut=65535&R,!((W=R>>>24)<=it);){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}if(ut<16)ot>>>=W,it-=W,_.lens[_.have++]=ut;else{if(ut===16){for(C=W+2;it<C;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}if(ot>>>=W,it-=W,_.have===0){k.msg="invalid bit length repeat",_.mode=30;break}h=_.lens[_.have-1],kt=3+(3&ot),ot>>>=2,it-=2}else if(ut===17){for(C=W+3;it<C;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}it-=W,h=0,kt=3+(7&(ot>>>=W)),ot>>>=3,it-=3}else{for(C=W+7;it<C;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}it-=W,h=0,kt=11+(127&(ot>>>=W)),ot>>>=7,it-=7}if(_.have+kt>_.nlen+_.ndist){k.msg="invalid bit length repeat",_.mode=30;break}for(;kt--;)_.lens[_.have++]=h}}if(_.mode===30)break;if(_.lens[256]===0){k.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,j={bits:_.lenbits},V=y(g,_.lens,0,_.nlen,_.lencode,0,_.work,j),_.lenbits=j.bits,V){k.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,j={bits:_.distbits},V=y(m,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,j),_.distbits=j.bits,V){k.msg="invalid distances set",_.mode=30;break}if(_.mode=20,K===6)break t;case 20:_.mode=21;case 21:if(6<=bt&&258<=$t){k.next_out=St,k.avail_out=$t,k.next_in=ct,k.avail_in=bt,_.hold=ot,_.bits=it,d(k,At),St=k.next_out,wt=k.output,$t=k.avail_out,ct=k.next_in,lt=k.input,bt=k.avail_in,ot=_.hold,it=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;z=(R=_.lencode[ot&(1<<_.lenbits)-1])>>>16&255,ut=65535&R,!((W=R>>>24)<=it);){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}if(z&&!(240&z)){for(Et=W,B=z,q=ut;z=(R=_.lencode[q+((ot&(1<<Et+B)-1)>>Et)])>>>16&255,ut=65535&R,!(Et+(W=R>>>24)<=it);){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}ot>>>=Et,it-=Et,_.back+=Et}if(ot>>>=W,it-=W,_.back+=W,_.length=ut,z===0){_.mode=26;break}if(32&z){_.back=-1,_.mode=12;break}if(64&z){k.msg="invalid literal/length code",_.mode=30;break}_.extra=15&z,_.mode=22;case 22:if(_.extra){for(C=_.extra;it<C;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}_.length+=ot&(1<<_.extra)-1,ot>>>=_.extra,it-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;z=(R=_.distcode[ot&(1<<_.distbits)-1])>>>16&255,ut=65535&R,!((W=R>>>24)<=it);){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}if(!(240&z)){for(Et=W,B=z,q=ut;z=(R=_.distcode[q+((ot&(1<<Et+B)-1)>>Et)])>>>16&255,ut=65535&R,!(Et+(W=R>>>24)<=it);){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}ot>>>=Et,it-=Et,_.back+=Et}if(ot>>>=W,it-=W,_.back+=W,64&z){k.msg="invalid distance code",_.mode=30;break}_.offset=ut,_.extra=15&z,_.mode=24;case 24:if(_.extra){for(C=_.extra;it<C;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}_.offset+=ot&(1<<_.extra)-1,ot>>>=_.extra,it-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){k.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if($t===0)break t;if(kt=At-$t,_.offset>kt){if((kt=_.offset-kt)>_.whave&&_.sane){k.msg="invalid distance too far back",_.mode=30;break}yt=kt>_.wnext?(kt-=_.wnext,_.wsize-kt):_.wnext-kt,kt>_.length&&(kt=_.length),G=_.window}else G=wt,yt=St-_.offset,kt=_.length;for($t<kt&&(kt=$t),$t-=kt,_.length-=kt;wt[St++]=G[yt++],--kt;);_.length===0&&(_.mode=21);break;case 26:if($t===0)break t;wt[St++]=_.length,$t--,_.mode=21;break;case 27:if(_.wrap){for(;it<32;){if(bt===0)break t;bt--,ot|=lt[ct++]<<it,it+=8}if(At-=$t,k.total_out+=At,_.total+=At,At&&(k.adler=_.check=_.flags?c(_.check,wt,At,St-At):u(_.check,wt,At,St-At)),At=$t,(_.flags?ot:S(ot))!==_.check){k.msg="incorrect data check",_.mode=30;break}it=ot=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;it<32;){if(bt===0)break t;bt--,ot+=lt[ct++]<<it,it+=8}if(ot!==(4294967295&_.total)){k.msg="incorrect length check",_.mode=30;break}it=ot=0}_.mode=29;case 29:V=1;break t;case 30:V=-3;break t;case 31:return-4;case 32:default:return v}return k.next_out=St,k.avail_out=$t,k.next_in=ct,k.avail_in=bt,_.hold=ot,_.bits=it,(_.wsize||At!==k.avail_out&&_.mode<30&&(_.mode<27||K!==4))&&st(k,k.output,k.next_out,At-k.avail_out)?(_.mode=31,-4):(Pt-=k.avail_in,At-=k.avail_out,k.total_in+=Pt,k.total_out+=At,_.total+=At,_.wrap&&At&&(k.adler=_.check=_.flags?c(_.check,wt,At,k.next_out-At):u(_.check,wt,At,k.next_out-At)),k.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(Pt==0&&At===0||K===4)&&V===b&&(V=-5),V)},o.inflateEnd=function(k){if(!k||!k.state)return v;var K=k.state;return K.window&&(K.window=null),k.state=null,b},o.inflateGetHeader=function(k,K){var _;return k&&k.state&&2&(_=k.state).wrap?((_.head=K).done=!1,b):v},o.inflateSetDictionary=function(k,K){var _,lt=K.length;return k&&k.state?(_=k.state).wrap!==0&&_.mode!==11?v:_.mode===11&&u(1,K,lt,0)!==_.check?-3:st(k,K,lt,lt)?(_.mode=31,-4):(_.havedict=1,b):v},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,i,o){var l=r("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(g,m,b,v,O,w,I,S){var A,E,P,U,rt,F,M,L,D,st=S.bits,k=0,K=0,_=0,lt=0,wt=0,ct=0,St=0,bt=0,$t=0,ot=0,it=null,Pt=0,At=new l.Buf16(16),kt=new l.Buf16(16),yt=null,G=0;for(k=0;k<=15;k++)At[k]=0;for(K=0;K<v;K++)At[m[b+K]]++;for(wt=st,lt=15;1<=lt&&At[lt]===0;lt--);if(lt<wt&&(wt=lt),lt===0)return O[w++]=20971520,O[w++]=20971520,S.bits=1,0;for(_=1;_<lt&&At[_]===0;_++);for(wt<_&&(wt=_),k=bt=1;k<=15;k++)if(bt<<=1,(bt-=At[k])<0)return-1;if(0<bt&&(g===0||lt!==1))return-1;for(kt[1]=0,k=1;k<15;k++)kt[k+1]=kt[k]+At[k];for(K=0;K<v;K++)m[b+K]!==0&&(I[kt[m[b+K]]++]=K);if(F=g===0?(it=yt=I,19):g===1?(it=u,Pt-=257,yt=c,G-=257,256):(it=d,yt=y,-1),k=_,rt=w,St=K=ot=0,P=-1,U=($t=1<<(ct=wt))-1,g===1&&852<$t||g===2&&592<$t)return 1;for(;;){for(M=k-St,D=I[K]<F?(L=0,I[K]):I[K]>F?(L=yt[G+I[K]],it[Pt+I[K]]):(L=96,0),A=1<<k-St,_=E=1<<ct;O[rt+(ot>>St)+(E-=A)]=M<<24|L<<16|D|0,E!==0;);for(A=1<<k-1;ot&A;)A>>=1;if(A!==0?(ot&=A-1,ot+=A):ot=0,K++,--At[k]==0){if(k===lt)break;k=m[b+I[K]]}if(wt<k&&(ot&U)!==P){for(St===0&&(St=wt),rt+=_,bt=1<<(ct=k-St);ct+St<lt&&!((bt-=At[ct+St])<=0);)ct++,bt<<=1;if($t+=1<<ct,g===1&&852<$t||g===2&&592<$t)return 1;O[P=ot&U]=wt<<24|ct<<16|rt-w|0}}return ot!==0&&(O[rt+ot]=k-St<<24|64<<16|0),S.bits=wt,0}},{"../utils/common":41}],51:[function(r,i,o){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,i,o){var l=r("../utils/common"),u=0,c=1;function d(R){for(var N=R.length;0<=--N;)R[N]=0}var y=0,g=29,m=256,b=m+1+g,v=30,O=19,w=2*b+1,I=15,S=16,A=7,E=256,P=16,U=17,rt=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=new Array(2*(b+2));d(st);var k=new Array(2*v);d(k);var K=new Array(512);d(K);var _=new Array(256);d(_);var lt=new Array(g);d(lt);var wt,ct,St,bt=new Array(v);function $t(R,N,tt,X,J){this.static_tree=R,this.extra_bits=N,this.extra_base=tt,this.elems=X,this.max_length=J,this.has_stree=R&&R.length}function ot(R,N){this.dyn_tree=R,this.max_code=0,this.stat_desc=N}function it(R){return R<256?K[R]:K[256+(R>>>7)]}function Pt(R,N){R.pending_buf[R.pending++]=255&N,R.pending_buf[R.pending++]=N>>>8&255}function At(R,N,tt){R.bi_valid>S-tt?(R.bi_buf|=N<<R.bi_valid&65535,Pt(R,R.bi_buf),R.bi_buf=N>>S-R.bi_valid,R.bi_valid+=tt-S):(R.bi_buf|=N<<R.bi_valid&65535,R.bi_valid+=tt)}function kt(R,N,tt){At(R,tt[2*N],tt[2*N+1])}function yt(R,N){for(var tt=0;tt|=1&R,R>>>=1,tt<<=1,0<--N;);return tt>>>1}function G(R,N,tt){var X,J,at=new Array(I+1),mt=0;for(X=1;X<=I;X++)at[X]=mt=mt+tt[X-1]<<1;for(J=0;J<=N;J++){var ht=R[2*J+1];ht!==0&&(R[2*J]=yt(at[ht]++,ht))}}function W(R){var N;for(N=0;N<b;N++)R.dyn_ltree[2*N]=0;for(N=0;N<v;N++)R.dyn_dtree[2*N]=0;for(N=0;N<O;N++)R.bl_tree[2*N]=0;R.dyn_ltree[2*E]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function z(R){8<R.bi_valid?Pt(R,R.bi_buf):0<R.bi_valid&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function ut(R,N,tt,X){var J=2*N,at=2*tt;return R[J]<R[at]||R[J]===R[at]&&X[N]<=X[tt]}function Et(R,N,tt){for(var X=R.heap[tt],J=tt<<1;J<=R.heap_len&&(J<R.heap_len&&ut(N,R.heap[J+1],R.heap[J],R.depth)&&J++,!ut(N,X,R.heap[J],R.depth));)R.heap[tt]=R.heap[J],tt=J,J<<=1;R.heap[tt]=X}function B(R,N,tt){var X,J,at,mt,ht=0;if(R.last_lit!==0)for(;X=R.pending_buf[R.d_buf+2*ht]<<8|R.pending_buf[R.d_buf+2*ht+1],J=R.pending_buf[R.l_buf+ht],ht++,X===0?kt(R,J,N):(kt(R,(at=_[J])+m+1,N),(mt=F[at])!==0&&At(R,J-=lt[at],mt),kt(R,at=it(--X),tt),(mt=M[at])!==0&&At(R,X-=bt[at],mt)),ht<R.last_lit;);kt(R,E,N)}function q(R,N){var tt,X,J,at=N.dyn_tree,mt=N.stat_desc.static_tree,ht=N.stat_desc.has_stree,Ct=N.stat_desc.elems,Bt=-1;for(R.heap_len=0,R.heap_max=w,tt=0;tt<Ct;tt++)at[2*tt]!==0?(R.heap[++R.heap_len]=Bt=tt,R.depth[tt]=0):at[2*tt+1]=0;for(;R.heap_len<2;)at[2*(J=R.heap[++R.heap_len]=Bt<2?++Bt:0)]=1,R.depth[J]=0,R.opt_len--,ht&&(R.static_len-=mt[2*J+1]);for(N.max_code=Bt,tt=R.heap_len>>1;1<=tt;tt--)Et(R,at,tt);for(J=Ct;tt=R.heap[1],R.heap[1]=R.heap[R.heap_len--],Et(R,at,1),X=R.heap[1],R.heap[--R.heap_max]=tt,R.heap[--R.heap_max]=X,at[2*J]=at[2*tt]+at[2*X],R.depth[J]=(R.depth[tt]>=R.depth[X]?R.depth[tt]:R.depth[X])+1,at[2*tt+1]=at[2*X+1]=J,R.heap[1]=J++,Et(R,at,1),2<=R.heap_len;);R.heap[--R.heap_max]=R.heap[1],function(Ot,ee){var be,_e,Re,ne,Cn,Se,xe=ee.dyn_tree,qn=ee.max_code,Gr=ee.stat_desc.static_tree,Vo=ee.stat_desc.has_stree,Ko=ee.stat_desc.extra_bits,Ss=ee.stat_desc.extra_base,cr=ee.stat_desc.max_length,Zr=0;for(ne=0;ne<=I;ne++)Ot.bl_count[ne]=0;for(xe[2*Ot.heap[Ot.heap_max]+1]=0,be=Ot.heap_max+1;be<w;be++)cr<(ne=xe[2*xe[2*(_e=Ot.heap[be])+1]+1]+1)&&(ne=cr,Zr++),xe[2*_e+1]=ne,qn<_e||(Ot.bl_count[ne]++,Cn=0,Ss<=_e&&(Cn=Ko[_e-Ss]),Se=xe[2*_e],Ot.opt_len+=Se*(ne+Cn),Vo&&(Ot.static_len+=Se*(Gr[2*_e+1]+Cn)));if(Zr!==0){do{for(ne=cr-1;Ot.bl_count[ne]===0;)ne--;Ot.bl_count[ne]--,Ot.bl_count[ne+1]+=2,Ot.bl_count[cr]--,Zr-=2}while(0<Zr);for(ne=cr;ne!==0;ne--)for(_e=Ot.bl_count[ne];_e!==0;)qn<(Re=Ot.heap[--be])||(xe[2*Re+1]!==ne&&(Ot.opt_len+=(ne-xe[2*Re+1])*xe[2*Re],xe[2*Re+1]=ne),_e--)}}(R,N),G(at,Bt,R.bl_count)}function h(R,N,tt){var X,J,at=-1,mt=N[1],ht=0,Ct=7,Bt=4;for(mt===0&&(Ct=138,Bt=3),N[2*(tt+1)+1]=65535,X=0;X<=tt;X++)J=mt,mt=N[2*(X+1)+1],++ht<Ct&&J===mt||(ht<Bt?R.bl_tree[2*J]+=ht:J!==0?(J!==at&&R.bl_tree[2*J]++,R.bl_tree[2*P]++):ht<=10?R.bl_tree[2*U]++:R.bl_tree[2*rt]++,at=J,Bt=(ht=0)===mt?(Ct=138,3):J===mt?(Ct=6,3):(Ct=7,4))}function V(R,N,tt){var X,J,at=-1,mt=N[1],ht=0,Ct=7,Bt=4;for(mt===0&&(Ct=138,Bt=3),X=0;X<=tt;X++)if(J=mt,mt=N[2*(X+1)+1],!(++ht<Ct&&J===mt)){if(ht<Bt)for(;kt(R,J,R.bl_tree),--ht!=0;);else J!==0?(J!==at&&(kt(R,J,R.bl_tree),ht--),kt(R,P,R.bl_tree),At(R,ht-3,2)):ht<=10?(kt(R,U,R.bl_tree),At(R,ht-3,3)):(kt(R,rt,R.bl_tree),At(R,ht-11,7));at=J,Bt=(ht=0)===mt?(Ct=138,3):J===mt?(Ct=6,3):(Ct=7,4)}}d(bt);var j=!1;function C(R,N,tt,X){At(R,(y<<1)+(X?1:0),3),function(J,at,mt,ht){z(J),Pt(J,mt),Pt(J,~mt),l.arraySet(J.pending_buf,J.window,at,mt,J.pending),J.pending+=mt}(R,N,tt)}o._tr_init=function(R){j||(function(){var N,tt,X,J,at,mt=new Array(I+1);for(J=X=0;J<g-1;J++)for(lt[J]=X,N=0;N<1<<F[J];N++)_[X++]=J;for(_[X-1]=J,J=at=0;J<16;J++)for(bt[J]=at,N=0;N<1<<M[J];N++)K[at++]=J;for(at>>=7;J<v;J++)for(bt[J]=at<<7,N=0;N<1<<M[J]-7;N++)K[256+at++]=J;for(tt=0;tt<=I;tt++)mt[tt]=0;for(N=0;N<=143;)st[2*N+1]=8,N++,mt[8]++;for(;N<=255;)st[2*N+1]=9,N++,mt[9]++;for(;N<=279;)st[2*N+1]=7,N++,mt[7]++;for(;N<=287;)st[2*N+1]=8,N++,mt[8]++;for(G(st,b+1,mt),N=0;N<v;N++)k[2*N+1]=5,k[2*N]=yt(N,5);wt=new $t(st,F,m+1,b,I),ct=new $t(k,M,0,v,I),St=new $t(new Array(0),L,0,O,A)}(),j=!0),R.l_desc=new ot(R.dyn_ltree,wt),R.d_desc=new ot(R.dyn_dtree,ct),R.bl_desc=new ot(R.bl_tree,St),R.bi_buf=0,R.bi_valid=0,W(R)},o._tr_stored_block=C,o._tr_flush_block=function(R,N,tt,X){var J,at,mt=0;0<R.level?(R.strm.data_type===2&&(R.strm.data_type=function(ht){var Ct,Bt=4093624447;for(Ct=0;Ct<=31;Ct++,Bt>>>=1)if(1&Bt&&ht.dyn_ltree[2*Ct]!==0)return u;if(ht.dyn_ltree[18]!==0||ht.dyn_ltree[20]!==0||ht.dyn_ltree[26]!==0)return c;for(Ct=32;Ct<m;Ct++)if(ht.dyn_ltree[2*Ct]!==0)return c;return u}(R)),q(R,R.l_desc),q(R,R.d_desc),mt=function(ht){var Ct;for(h(ht,ht.dyn_ltree,ht.l_desc.max_code),h(ht,ht.dyn_dtree,ht.d_desc.max_code),q(ht,ht.bl_desc),Ct=O-1;3<=Ct&&ht.bl_tree[2*D[Ct]+1]===0;Ct--);return ht.opt_len+=3*(Ct+1)+5+5+4,Ct}(R),J=R.opt_len+3+7>>>3,(at=R.static_len+3+7>>>3)<=J&&(J=at)):J=at=tt+5,tt+4<=J&&N!==-1?C(R,N,tt,X):R.strategy===4||at===J?(At(R,2+(X?1:0),3),B(R,st,k)):(At(R,4+(X?1:0),3),function(ht,Ct,Bt,Ot){var ee;for(At(ht,Ct-257,5),At(ht,Bt-1,5),At(ht,Ot-4,4),ee=0;ee<Ot;ee++)At(ht,ht.bl_tree[2*D[ee]+1],3);V(ht,ht.dyn_ltree,Ct-1),V(ht,ht.dyn_dtree,Bt-1)}(R,R.l_desc.max_code+1,R.d_desc.max_code+1,mt+1),B(R,R.dyn_ltree,R.dyn_dtree)),W(R),X&&z(R)},o._tr_tally=function(R,N,tt){return R.pending_buf[R.d_buf+2*R.last_lit]=N>>>8&255,R.pending_buf[R.d_buf+2*R.last_lit+1]=255&N,R.pending_buf[R.l_buf+R.last_lit]=255&tt,R.last_lit++,N===0?R.dyn_ltree[2*tt]++:(R.matches++,N--,R.dyn_ltree[2*(_[tt]+m+1)]++,R.dyn_dtree[2*it(N)]++),R.last_lit===R.lit_bufsize-1},o._tr_align=function(R){At(R,2,3),kt(R,E,st),function(N){N.bi_valid===16?(Pt(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):8<=N.bi_valid&&(N.pending_buf[N.pending++]=255&N.bi_buf,N.bi_buf>>=8,N.bi_valid-=8)}(R)}},{"../utils/common":41}],53:[function(r,i,o){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,i,o){(function(l){(function(u,c){if(!u.setImmediate){var d,y,g,m,b=1,v={},O=!1,w=u.document,I=Object.getPrototypeOf&&Object.getPrototypeOf(u);I=I&&I.setTimeout?I:u,d={}.toString.call(u.process)==="[object process]"?function(P){process.nextTick(function(){A(P)})}:function(){if(u.postMessage&&!u.importScripts){var P=!0,U=u.onmessage;return u.onmessage=function(){P=!1},u.postMessage("","*"),u.onmessage=U,P}}()?(m="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",E,!1):u.attachEvent("onmessage",E),function(P){u.postMessage(m+P,"*")}):u.MessageChannel?((g=new MessageChannel).port1.onmessage=function(P){A(P.data)},function(P){g.port2.postMessage(P)}):w&&"onreadystatechange"in w.createElement("script")?(y=w.documentElement,function(P){var U=w.createElement("script");U.onreadystatechange=function(){A(P),U.onreadystatechange=null,y.removeChild(U),U=null},y.appendChild(U)}):function(P){setTimeout(A,0,P)},I.setImmediate=function(P){typeof P!="function"&&(P=new Function(""+P));for(var U=new Array(arguments.length-1),rt=0;rt<U.length;rt++)U[rt]=arguments[rt+1];var F={callback:P,args:U};return v[b]=F,d(b),b++},I.clearImmediate=S}function S(P){delete v[P]}function A(P){if(O)setTimeout(A,0,P);else{var U=v[P];if(U){O=!0;try{(function(rt){var F=rt.callback,M=rt.args;switch(M.length){case 0:F();break;case 1:F(M[0]);break;case 2:F(M[0],M[1]);break;case 3:F(M[0],M[1],M[2]);break;default:F.apply(c,M)}})(U)}finally{S(P),O=!1}}}}function E(P){P.source===u&&typeof P.data=="string"&&P.data.indexOf(m)===0&&A(+P.data.slice(m.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof ir<"u"?ir:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(vp);var DS=vp.exports;const MS=n5(DS),zS={key:0,class:"text-center p-10 card max-w-2xl mx-auto"},NS={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},US={class:"lg:col-span-1 card flex flex-col"},FS={class:"mt-4 p-4 bg-slate-800 rounded-lg text-center"},jS={class:"text-5xl font-bold text-white tracking-widest"},WS={class:"mt-4 flex justify-center"},qS={class:"p-2 border-4 border-slate-200 rounded-lg bg-white"},HS=["src"],VS={class:"text-lg font-semibold text-slate-800 mb-2"},KS={class:"h-48 overflow-y-auto bg-slate-100 p-3 rounded-md border space-y-2 flex-grow"},GS={key:0,class:"text-slate-400 text-center pt-10"},ZS={class:"lg:col-span-2 card"},YS={key:0},JS={class:"space-y-6"},QS={class:"mt-1 border border-gray-300 rounded-lg"},XS={class:"border-b bg-slate-50 p-2 flex items-center gap-3"},t6={key:0},e6={class:"mt-2 flex space-x-4"},n6=["onClick"],r6={key:1},s6={class:"mt-2 flex space-x-4"},i6={key:1},o6=["innerHTML"],a6={class:"text-center my-6 text-2xl text-slate-600"},l6={class:"font-bold text-sky-600 text-3xl"},u6={key:2,class:"fixed inset-0 bg-gray-900 bg-opacity-90 flex flex-col items-center justify-center p-4 z-50"},c6={class:"w-full max-w-7xl h-[90vh] bg-white rounded-lg shadow-2xl flex flex-col p-6"},f6={class:"flex-grow overflow-y-auto"},d6={key:0,class:"space-y-6 p-4"},h6={class:"flex justify-between items-center mb-2"},p6={key:0,class:"w-8 h-8 ml-2 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},g6={class:"text-2xl font-bold"},m6={class:"w-full bg-slate-200 rounded-full h-12"},v6={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},_6=["onClick"],y6={class:"text-lg font-semibold text-center truncate mb-2"},b6=["src"],x6={key:1,class:"text-base p-2 bg-slate-100 rounded h-32 overflow-hidden"},w6={key:3,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50"},k6={class:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col"},C6={class:"p-4 border-b flex justify-between items-center bg-slate-50 rounded-t-lg"},S6={class:"text-2xl font-bold"},E6={class:"p-6 overflow-y-auto flex-grow flex items-center justify-center"},A6=["src"],R6={key:1,class:"text-3xl whitespace-pre-wrap"},T6={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},O6={class:"bg-white rounded-lg shadow-xl p-4 w-full max-w-3xl"},I6={class:"bg-slate-100 p-2 rounded-t-lg flex items-center justify-center gap-4 flex-wrap"},$6={class:"text-base font-medium"},P6={class:"text-base font-medium flex items-center gap-2"},L6={__name:"TeacherPingPongView",setup(t){const n=pt(null),r=pt(""),i=le(()=>`https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${window.location.origin}/pingpong-student?room=${r.value}`),o=pt([]),l=pt("waiting"),u=Fe({type:"multiple-choice",htmlContent:"",correctAnswer:"A"}),c=pt({}),d=pt(null),y=pt(null),g=pt(null),m=pt(!1),b=pt({name:"",answer:""}),v=pt(!1),O=pt(!1),w=pt({}),I=pt({}),S=pt(null),A=pt(!1),E=pt("#ff0000"),P=pt(5),U=le(()=>{if(!O.value||w.value.type!=="multiple-choice"&&w.value.type!=="true-false")return[];const yt={},G=w.value.type==="multiple-choice"?["A","B","C","D"]:["O","X"];G.forEach(z=>yt[z]=0);for(const z in I.value){const ut=I.value[z].answer;yt[ut]!==void 0&&yt[ut]++}const W=Object.keys(I.value).length;return G.map(z=>({option:z,count:yt[z],percentage:W>0?(yt[z]/W*100).toFixed(0):0,isCorrect:z===w.value.correctAnswer}))}),rt=()=>n.value.emit("teacher:createRoom",yt=>{yt.roomCode&&(r.value=yt.roomCode)}),F=()=>{u.htmlContent=d.value.innerHTML,n.value.emit("teacher:startQuestion",{roomCode:r.value,question:u})},M=()=>n.value.emit("teacher:stopAnswering",{roomCode:r.value}),L=()=>{confirm("確定要結束活動嗎？")&&(n.value.emit("teacher:endActivity",{roomCode:r.value}),r.value="")},D=yt=>{b.value=yt,m.value=!0},st=()=>{v.value=!1,St()},k=()=>{O.value=!1,l.value="results",d.value&&(d.value.innerHTML="")},K=()=>{if(!g.value)return;S.value=g.value.getContext("2d");const yt=g.value,G=yt.getBoundingClientRect();yt.width=G.width,yt.height=G.height,yt.addEventListener("mousedown",lt),yt.addEventListener("mousemove",wt),yt.addEventListener("mouseup",ct),yt.addEventListener("mouseleave",ct),yt.addEventListener("touchstart",lt,{passive:!1}),yt.addEventListener("touchmove",wt,{passive:!1}),yt.addEventListener("touchend",ct)},_=yt=>{const G=g.value,W=G.getBoundingClientRect(),z=G.width/W.width,ut=G.height/W.height,Et=yt.touches?yt.touches[0].clientX:yt.clientX,B=yt.touches?yt.touches[0].clientY:yt.clientY;return{x:(Et-W.left)*z,y:(B-W.top)*ut}},lt=yt=>{yt.preventDefault(),A.value=!0;const{x:G,y:W}=_(yt);S.value.beginPath(),S.value.moveTo(G,W)},wt=yt=>{if(!A.value)return;yt.preventDefault();const{x:G,y:W}=_(yt);S.value.lineTo(G,W),S.value.strokeStyle=E.value,S.value.lineWidth=P.value,S.value.lineCap="round",S.value.lineJoin="round",S.value.stroke()},ct=()=>{A.value&&(A.value=!1,S.value.closePath())},St=()=>S.value.clearRect(0,0,g.value.width,g.value.height),bt=()=>{const yt=g.value.toDataURL("image/png"),G=document.createElement("img");G.src=yt,G.style.maxWidth="100%",G.style.maxHeight="200px",G.style.display="block",G.style.margin="0.5rem auto",d.value.appendChild(G),st()},$t=()=>y.value.click(),ot=yt=>{const G=yt.target.files[0];G&&(it(G,800,800,.8).then(W=>{const z=document.createElement("img");z.src=W,z.style.maxWidth="100%",z.style.maxHeight="200px",z.style.display="block",z.style.margin="0.5rem auto",d.value.appendChild(z)}).catch(W=>console.error("圖片處理失敗:",W)),yt.target.value="")};function it(yt,G,W,z){return new Promise((ut,Et)=>{const B=new FileReader;B.onload=q=>{const h=new Image;h.onload=()=>{let{width:V,height:j}=h;V>j?V>G&&(j*=G/V,V=G):j>W&&(V*=W/j,j=W);const C=document.createElement("canvas");C.width=V,C.height=j,C.getContext("2d").drawImage(h,0,0,V,j),ut(C.toDataURL(yt.type,z))},h.onerror=Et,h.src=q.target.result},B.onerror=Et,B.readAsDataURL(yt)})}const Pt=async()=>{const yt=new Date,G=`${yt.getFullYear()}-${String(yt.getMonth()+1).padStart(2,"0")}-${String(yt.getDate()).padStart(2,"0")}_${String(yt.getHours()).padStart(2,"0")}${String(yt.getMinutes()).padStart(2,"0")}`,W=Object.values(I.value);if(w.value.type==="image"){const z=new MS;for(const Et of W){const B=await At(Et.answer),q=await(await fetch(B)).blob(),h=`${Et.name}_${G}.png`;z.file(h,q)}const ut=await z.generateAsync({type:"blob"});kt(ut,`繪圖作品_${r.value}_${G}.zip`)}else{let z=`\uFEFF學生暱稱,回答內容
`;W.forEach(Et=>{const B=`"${Et.name.replace(/"/g,'""')}"`,q=`"${String(Et.answer).replace(/"/g,'""')}"`;z+=`${B},${q}
`});const ut=new Blob([z],{type:"text/csv;charset=utf-8;"});kt(ut,`答題記錄_${r.value}_${G}.csv`)}},At=yt=>new Promise(G=>{const W=new Image;W.onload=()=>{const z=document.createElement("canvas");z.width=W.width,z.height=W.height;const ut=z.getContext("2d");ut.fillStyle="white",ut.fillRect(0,0,z.width,z.height),ut.drawImage(W,0,0),G(z.toDataURL("image/png"))},W.src=yt}),kt=(yt,G)=>{const W=document.createElement("a");W.href=URL.createObjectURL(yt),W.download=G,document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL(W.href)};return Er(v,yt=>{yt&&pi(K)}),Ye(()=>{n.value=Hr("http://localhost:3000"),n.value.on("connect",()=>console.log("成功連接到 Socket.IO 伺服器")),n.value.on("student:joined",yt=>o.value=yt),n.value.on("student:left",yt=>o.value=yt),n.value.on("teacher:questionStarted",()=>{l.value="question",c.value={}}),n.value.on("student:answered",yt=>c.value=yt),n.value.on("question:ended",yt=>{w.value={...u},I.value=yt,l.value="results",O.value=!0}),n.value.on("activity:ended",yt=>{alert(yt||"活動已結束"),r.value="",l.value="waiting"})}),Kr(()=>{n.value&&(r.value&&n.value.emit("teacher:endActivity",{roomCode:r.value}),n.value.disconnect())}),(yt,G)=>(Z(),Y("div",null,[G[27]||(G[27]=f("h1",{class:"text-4xl font-bold text-slate-800 mb-8"},"PingPong 即時問答",-1)),r.value?(Z(),Y("div",NS,[f("div",US,[G[11]||(G[11]=f("h2",{class:"text-xl font-semibold text-slate-800"},"活動進行中",-1)),f("div",FS,[G[10]||(G[10]=f("p",{class:"text-sm text-slate-300"},"房間代碼",-1)),f("p",jS,ft(r.value),1)]),f("div",WS,[f("div",qS,[f("img",{src:i.value,alt:"QR Code",class:"w-48 h-48"},null,8,HS)])]),G[12]||(G[12]=f("p",{class:"text-center text-slate-500 mt-2 text-sm"},"請學生掃描 QR Code 或輸入代碼加入",-1)),G[13]||(G[13]=f("hr",{class:"my-6"},null,-1)),f("h3",VS,"已連線學生 ("+ft(o.value.length)+")",1),f("ul",KS,[(Z(!0),Y(Wt,null,te(o.value,W=>(Z(),Y("li",{key:W.id,class:"text-slate-700 py-1 px-2 bg-white rounded shadow-sm"},ft(W.name),1))),128)),o.value.length===0?(Z(),Y("li",GS,"尚無學生加入...")):Rt("",!0)]),f("button",{onClick:L,class:"btn btn-danger w-full mt-6 py-3 text-lg"}," 結束活動 ")]),f("div",ZS,[l.value==="waiting"||l.value==="results"?(Z(),Y("div",YS,[G[19]||(G[19]=f("h2",{class:"text-2xl font-semibold text-slate-800 mb-6"},"設定新問題",-1)),f("div",JS,[f("div",null,[G[15]||(G[15]=f("label",{class:"block text-base font-medium text-slate-700"},"問題類型",-1)),Mt(f("select",{"onUpdate:modelValue":G[0]||(G[0]=W=>u.type=W),class:"mt-1 form-input text-lg py-3"},[...G[14]||(G[14]=[f("option",{value:"multiple-choice"},"單選題 (4選1)",-1),f("option",{value:"true-false"},"是非題",-1),f("option",{value:"short-answer"},"簡答題",-1),f("option",{value:"image"},"繪圖題",-1)])],512),[[ai,u.type]])]),f("div",null,[G[16]||(G[16]=f("label",{class:"block text-base font-medium text-slate-700"},"題目內容 (可選)",-1)),f("div",QS,[f("div",XS,[f("button",{onClick:G[1]||(G[1]=W=>v.value=!0),class:"btn btn-secondary text-sm"},"繪圖"),f("button",{onClick:$t,class:"btn btn-secondary text-sm"},"插入圖片"),f("input",{type:"file",ref_key:"imageUploader",ref:y,onChange:ot,class:"hidden",accept:"image/*"},null,544)]),f("div",{ref_key:"questionEditor",ref:d,contenteditable:"true",class:"w-full min-h-[150px] p-3 text-lg bg-white overflow-y-auto focus:outline-none focus:ring-2 focus:ring-sky-400 rounded-b-lg",style:{"-webkit-user-modify":"read-write-plaintext-only"}},null,512)])]),u.type==="multiple-choice"?(Z(),Y("div",t6,[G[17]||(G[17]=f("label",{class:"block text-base font-medium text-slate-700"},"正確答案",-1)),f("div",e6,[(Z(),Y(Wt,null,te(["A","B","C","D"],W=>f("button",{key:W,onClick:z=>u.correctAnswer=W,class:me(["w-16 h-16 rounded-full font-bold text-2xl",u.correctAnswer===W?"bg-green-500 text-white ring-2 ring-offset-2 ring-green-500":"bg-slate-200 text-slate-700 hover:bg-slate-300"])},ft(W),11,n6)),64))])])):Rt("",!0),u.type==="true-false"?(Z(),Y("div",r6,[G[18]||(G[18]=f("label",{class:"block text-base font-medium text-slate-700"},"正確答案",-1)),f("div",s6,[f("button",{onClick:G[2]||(G[2]=W=>u.correctAnswer="O"),class:me(["px-8 py-4 rounded-lg font-bold text-2xl",u.correctAnswer==="O"?"bg-green-500 text-white ring-2 ring-offset-2 ring-green-500":"bg-slate-200 text-slate-700 hover:bg-slate-300"])},"O (是)",2),f("button",{onClick:G[3]||(G[3]=W=>u.correctAnswer="X"),class:me(["px-8 py-4 rounded-lg font-bold text-2xl",u.correctAnswer==="X"?"bg-red-500 text-white ring-2 ring-offset-2 ring-red-500":"bg-slate-200 text-slate-700 hover:bg-slate-300"])},"X (否)",2)])])):Rt("",!0),f("button",{onClick:F,class:"btn bg-green-500 hover:bg-green-600 w-full text-xl py-4"}," 開始提問 ")])])):Rt("",!0),l.value==="question"?(Z(),Y("div",i6,[G[21]||(G[21]=f("h2",{class:"text-2xl font-semibold text-slate-800 mb-4"},"問題進行中...",-1)),f("div",{class:"p-4 border-2 border-sky-500 rounded-lg bg-sky-50 min-h-[150px]",innerHTML:u.htmlContent},null,8,o6),f("p",a6,[G[20]||(G[20]=ve("已作答人數: ",-1)),f("span",l6,ft(Object.keys(c.value).length),1),ve(" / "+ft(o.value.length),1)]),f("button",{onClick:M,class:"btn btn-danger w-full text-xl py-4"}," 結束作答 ")])):Rt("",!0)])])):(Z(),Y("div",zS,[G[7]||(G[7]=f("svg",{class:"mx-auto h-24 w-24 text-sky-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),G[8]||(G[8]=f("h2",{class:"mt-6 text-2xl font-semibold text-slate-700"},"開始一個新的問答活動",-1)),G[9]||(G[9]=f("p",{class:"mt-2 text-slate-500"},"點擊下方按鈕以產生一個活動房間代碼，讓學生可以加入。",-1)),f("button",{onClick:rt,class:"btn btn-primary text-xl px-8 py-4 rounded-full mt-8"}," 建立新活動 ")])),O.value?(Z(),Y("div",u6,[f("div",c6,[f("div",{class:"flex justify-between items-center border-b pb-4 mb-6"},[G[22]||(G[22]=f("h2",{class:"text-3xl font-bold"},"作答結果",-1)),f("div",{class:"flex items-center gap-4"},[f("button",{onClick:Pt,class:"btn btn-success text-base"}," 匯出答題記錄 "),f("button",{onClick:k,class:"text-4xl text-slate-400 hover:text-slate-800"},"×")])]),f("div",f6,[w.value.type==="multiple-choice"||w.value.type==="true-false"?(Z(),Y("div",d6,[(Z(!0),Y(Wt,null,te(U.value,W=>(Z(),Y("div",{key:W.option,class:"w-full"},[f("div",h6,[f("span",{class:me(["font-semibold text-3xl flex items-center",[W.isCorrect?"text-green-600":"text-slate-700"]])},[ve(ft(W.option)+" ",1),W.isCorrect?(Z(),Y("svg",p6,[...G[23]||(G[23]=[f("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):Rt("",!0)],2),f("span",g6,ft(W.count)+"人 ("+ft(W.percentage)+"%)",1)]),f("div",m6,[f("div",{class:me(["h-12 rounded-full flex items-center justify-center text-white font-bold text-lg",[W.isCorrect?"bg-green-500":"bg-sky-500"]]),style:Vr({width:W.percentage+"%"})},ft(W.percentage>10?W.percentage+"%":""),7)])]))),128))])):Rt("",!0),w.value.type==="image"||w.value.type==="short-answer"?(Z(),Y("div",v6,[(Z(!0),Y(Wt,null,te(I.value,W=>(Z(),Y("div",{key:W.id,onClick:z=>D(W),class:"card p-2 cursor-pointer hover:shadow-xl hover:-translate-y-1 transition-all"},[f("p",y6,ft(W.name),1),w.value.type==="image"?(Z(),Y("img",{key:0,src:W.answer,class:"w-full rounded-md aspect-video object-contain bg-slate-100"},null,8,b6)):(Z(),Y("p",x6,ft(W.answer),1))],8,_6))),128))])):Rt("",!0)])])])):Rt("",!0),m.value?(Z(),Y("div",w6,[f("div",k6,[f("div",C6,[f("h3",S6,ft(b.value.name)+" 的回應",1),f("button",{onClick:G[4]||(G[4]=W=>m.value=!1),class:"text-4xl text-slate-400 hover:text-slate-800"},"×")]),f("div",E6,[w.value.type==="image"?(Z(),Y("img",{key:0,src:b.value.answer,class:"max-w-full max-h-full object-contain"},null,8,A6)):(Z(),Y("p",R6,ft(b.value.answer),1))])])])):Rt("",!0),v.value?(Z(),Y("div",T6,[f("div",O6,[G[26]||(G[26]=f("h3",{class:"text-2xl font-bold mb-4"},"繪製題目插圖",-1)),f("div",I6,[f("label",$6,[G[24]||(G[24]=ve("顏色: ",-1)),Mt(f("input",{type:"color","onUpdate:modelValue":G[5]||(G[5]=W=>E.value=W)},null,512),[[Ft,E.value]])]),f("label",P6,[G[25]||(G[25]=ve("筆刷: ",-1)),Mt(f("input",{type:"range","onUpdate:modelValue":G[6]||(G[6]=W=>P.value=W),min:"1",max:"50"},null,512),[[Ft,P.value]])])]),f("canvas",{ref_key:"drawingCanvas",ref:g,class:"border bg-white w-full aspect-video",style:{"touch-action":"none"}},null,512),f("div",{class:"flex justify-end gap-4 mt-4"},[f("button",{onClick:st,class:"btn btn-secondary text-base"},"取消"),f("button",{onClick:bt,class:"btn bg-teal-500 hover:bg-teal-600 text-base"},"儲存繪圖")])])])):Rt("",!0)]))}},B6={class:"min-h-screen bg-sky-100 flex items-center justify-center p-4 font-sans"},D6={key:0,class:"card p-8 transform transition-all hover:shadow-2xl duration-300"},M6={key:0,class:"text-red-500 text-sm text-center pt-2"},z6={key:1,class:"text-center p-8 card"},N6=["innerHTML"],U6={key:1,class:"mb-6"},F6={class:"text-3xl font-semibold text-center text-slate-800"},j6={key:2,class:"grid grid-cols-2 gap-4"},W6=["onClick"],q6={key:3,class:"grid grid-cols-2 gap-4"},H6={key:5},V6={class:"bg-slate-100 p-2 rounded-t-lg flex items-center justify-center gap-2 md:gap-4 flex-wrap"},K6={class:"text-base font-medium"},G6={class:"flex items-center gap-2"},Z6={class:"w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center"},Y6={key:3,class:"text-center p-8 card"},J6={__name:"StudentPingPongView",setup(t){const n=pt(null),r=au(),i=Fe({roomCode:"",name:""}),o=Fe({joined:!1}),l=pt(""),u=pt(null),c=pt(!1),d=pt(""),y=pt(null),g=pt(null),m=pt(!1),b=pt("#000000"),v=pt(5),O=()=>{if(!y.value)return;g.value=y.value.getContext("2d");const F=y.value,M=F.getBoundingClientRect();F.width=M.width,F.height=M.height,F.addEventListener("mousedown",I),F.addEventListener("mousemove",S),F.addEventListener("mouseup",A),F.addEventListener("mouseleave",A),F.addEventListener("touchstart",I,{passive:!1}),F.addEventListener("touchmove",S,{passive:!1}),F.addEventListener("touchend",A)},w=F=>{const M=y.value,L=M.getBoundingClientRect(),D=M.width/L.width,st=M.height/L.height,k=F.touches?F.touches[0].clientX:F.clientX,K=F.touches?F.touches[0].clientY:F.clientY;return{x:(k-L.left)*D,y:(K-L.top)*st}},I=F=>{F.preventDefault(),m.value=!0;const{x:M,y:L}=w(F);g.value.beginPath(),g.value.moveTo(M,L)},S=F=>{if(!m.value)return;F.preventDefault();const{x:M,y:L}=w(F);g.value.lineTo(M,L),g.value.strokeStyle=b.value,g.value.lineWidth=v.value,g.value.lineCap="round",g.value.lineJoin="round",g.value.stroke()},A=()=>{m.value&&(m.value=!1,g.value.closePath())},E=()=>{g.value.clearRect(0,0,y.value.width,y.value.height)},P=()=>{const F=y.value,M=document.createElement("canvas");M.width=F.width,M.height=F.height;const L=M.getContext("2d");L.fillStyle="white",L.fillRect(0,0,M.width,M.height),L.drawImage(F,0,0),rt(M.toDataURL("image/png"))};Er(u,F=>{(F==null?void 0:F.type)==="image"&&pi(O)});const U=()=>{if(!i.roomCode||!i.name){l.value="房間代碼和姓名為必填項。";return}l.value="",n.value.emit("student:joinRoom",{roomCode:i.roomCode.toUpperCase(),name:i.name},F=>{F.success?o.joined=!0:l.value=F.message})},rt=F=>{typeof F=="string"&&!F.trim()||(n.value.emit("student:submitAnswer",{roomCode:i.roomCode.toUpperCase(),answer:F}),c.value=!0)};return Ye(()=>{const F=r.query.room;F&&(i.roomCode=F.toUpperCase());const M=localStorage.getItem("studentInfo");M&&(i.name=JSON.parse(M).name),n.value=Hr("http://localhost:3000"),n.value.on("connect",()=>console.log("成功連接到 Socket.IO 伺服器")),n.value.on("question:started",L=>{u.value=L,c.value=!1,d.value=""}),n.value.on("question:ended",()=>{u.value=null,c.value=!0}),n.value.on("activity:ended",L=>{alert(L||"老師已結束活動，將返回加入頁面。"),o.joined=!1,u.value=null,c.value=!1,l.value=""})}),Kr(()=>{n.value&&n.value.disconnect()}),(F,M)=>{var L;return Z(),Y("div",B6,[f("div",{class:me(["w-full transition-all duration-300",((L=u.value)==null?void 0:L.type)==="image"?"max-w-4xl":"max-w-lg"])},[o.joined?Rt("",!0):(Z(),Y("div",D6,[M[11]||(M[11]=f("h1",{class:"text-3xl font-bold text-center text-sky-600 mb-2"},"加入 PingPong 活動",-1)),M[12]||(M[12]=f("p",{class:"text-center text-slate-500 mb-8"},"請輸入老師提供的房間代碼",-1)),f("form",{onSubmit:We(U,["prevent"]),class:"space-y-6"},[f("div",null,[M[8]||(M[8]=f("label",{for:"roomCode",class:"block text-lg font-bold text-slate-600 mb-1"},"房間代碼",-1)),Mt(f("input",{"onUpdate:modelValue":M[0]||(M[0]=D=>i.roomCode=D),type:"text",id:"roomCode",placeholder:"ABCDEF",class:"form-input text-4xl tracking-widest text-center uppercase py-3"},null,512),[[Ft,i.roomCode,void 0,{trim:!0}]])]),f("div",null,[M[9]||(M[9]=f("label",{for:"studentName",class:"block text-lg font-bold text-slate-600 mb-1"},"你的名字",-1)),Mt(f("input",{"onUpdate:modelValue":M[1]||(M[1]=D=>i.name=D),type:"text",id:"studentName",placeholder:"請輸入姓名或座號",class:"form-input text-2xl py-3"},null,512),[[Ft,i.name,void 0,{trim:!0}]])]),l.value?(Z(),Y("p",M6,ft(l.value),1)):Rt("",!0),M[10]||(M[10]=f("button",{type:"submit",class:"w-full btn btn-primary py-4 text-2xl font-bold"}," 加入 ",-1))],32)])),o.joined&&!u.value?(Z(),Y("div",z6,[...M[13]||(M[13]=[qr('<h2 class="text-4xl font-bold text-slate-700">已成功加入！</h2><p class="text-slate-500 mt-2 text-xl">請等待老師開始提問...</p><div class="mt-12"><svg class="animate-spin h-16 w-16 text-sky-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>',3)])])):Rt("",!0),o.joined&&u.value&&!c.value?(Z(),Y("div",{key:2,class:me(["card",u.value.type==="image"?"p-4":"p-8"])},[u.value.htmlContent?(Z(),Y("div",{key:0,id:"question-area",class:"mb-6 max-h-60 overflow-y-auto p-2 text-xl",innerHTML:u.value.htmlContent},null,8,N6)):u.value.text?(Z(),Y("div",U6,[f("p",F6,ft(u.value.text),1)])):Rt("",!0),u.value.type==="multiple-choice"?(Z(),Y("div",j6,[(Z(),Y(Wt,null,te(["A","B","C","D"],D=>f("button",{key:D,onClick:st=>rt(D),class:"answer-btn-student text-7xl font-bold h-40"},ft(D),9,W6)),64))])):Rt("",!0),u.value.type==="true-false"?(Z(),Y("div",q6,[f("button",{onClick:M[2]||(M[2]=D=>rt("O")),class:"answer-btn-student h-40"},[...M[14]||(M[14]=[f("svg",{class:"w-24 h-24 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])]),f("button",{onClick:M[3]||(M[3]=D=>rt("X")),class:"answer-btn-student h-40"},[...M[15]||(M[15]=[f("svg",{class:"w-24 h-24 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])])):Rt("",!0),u.value.type==="short-answer"?(Z(),Y("form",{key:4,onSubmit:M[5]||(M[5]=We(D=>rt(d.value),["prevent"]))},[Mt(f("textarea",{"onUpdate:modelValue":M[4]||(M[4]=D=>d.value=D),rows:"6",class:"form-input text-xl",placeholder:"請在此輸入您的答案..."},null,512),[[Ft,d.value]]),M[16]||(M[16]=f("button",{type:"submit",class:"w-full mt-4 btn btn-primary py-4 text-xl font-bold"},"送出答案",-1))],32)):Rt("",!0),u.value.type==="image"?(Z(),Y("div",H6,[f("div",V6,[f("label",K6,[M[17]||(M[17]=ve("顏色: ",-1)),Mt(f("input",{type:"color","onUpdate:modelValue":M[6]||(M[6]=D=>b.value=D),class:"w-10 h-10"},null,512),[[Ft,b.value]])]),f("div",G6,[M[18]||(M[18]=f("label",{class:"text-base font-medium"},"筆刷:",-1)),Mt(f("input",{type:"range","onUpdate:modelValue":M[7]||(M[7]=D=>v.value=D),min:"1",max:"50",class:"w-32 md:w-48"},null,512),[[Ft,v.value]]),f("span",Z6,[f("span",{class:"rounded-full bg-black",style:Vr({width:v.value+"px",height:v.value+"px"})},null,4)])]),f("button",{onClick:E,class:"btn btn-secondary text-base"},"清除")]),f("canvas",{ref_key:"drawingCanvas",ref:y,class:"border-x border-b border-gray-300 bg-white w-full aspect-video",style:{"touch-action":"none"}},null,512),f("button",{onClick:P,class:"mt-4 w-full btn bg-orange-500 hover:bg-orange-600 text-xl font-bold py-4"},"送出我的作品")])):Rt("",!0)],2)):Rt("",!0),o.joined&&c.value?(Z(),Y("div",Y6,[...M[19]||(M[19]=[f("svg",{class:"mx-auto h-24 w-24 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[f("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),f("h2",{class:"mt-6 text-3xl font-bold text-green-600"},"已成功送出答案！",-1),f("p",{class:"text-slate-500 mt-2 text-lg"},"請等待下一題或老師公佈結果...",-1)])])):Rt("",!0)],2)])}}},Q6={class:"flex justify-between items-center mb-8"},X6={key:0,class:"text-center py-10 text-slate-500"},tE={key:1,class:"text-center bg-white rounded-lg p-12 shadow"},eE={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},nE={class:"flex-grow"},rE={key:0,class:"px-2 py-1 text-xs font-semibold rounded-full bg-sky-100 text-sky-800"},sE={class:"text-2xl font-bold text-slate-800 mt-2"},iE={class:"text-sm text-slate-500 mt-2"},oE={class:"mt-6 grid grid-cols-2 gap-3"},aE=["onClick"],lE={class:"mt-3 flex justify-end items-center text-sm"},uE=["onClick"],cE=["onClick"],fE={key:3,class:"fixed z-10 inset-0 overflow-y-auto"},dE={class:"flex items-center justify-center min-h-screen"},hE={class:"p-6"},pE={class:"text-xl font-bold mb-4"},gE={class:"space-y-4"},mE=["value"],vE={class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"},_E={key:4,class:"fixed z-20 inset-0 overflow-y-auto"},yE={class:"flex items-center justify-center min-h-screen p-4"},bE={class:"bg-white rounded-lg shadow-xl transform transition-all w-full max-w-5xl h-[90vh] flex flex-col"},xE={class:"p-4 border-b flex justify-between items-center"},wE={class:"text-2xl font-bold"},kE={class:"flex-grow p-6 overflow-y-auto"},CE={class:"flex justify-end items-center gap-4 mb-6"},SE={key:0,class:"text-center text-slate-500 py-10"},EE={key:1,class:"space-y-4"},AE={class:"flex justify-between items-start"},RE={class:"font-bold text-lg"},TE=["innerHTML"],OE={class:"grid grid-cols-2 gap-x-8 gap-y-2 mt-2 pl-6"},IE={key:0,class:"w-5 h-5 ml-1 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},$E={class:"flex items-center space-x-2"},PE=["onClick"],LE=["onClick"],BE={key:5,class:"fixed z-30 inset-0 overflow-y-auto"},DE={class:"flex items-center justify-center min-h-screen"},ME={class:"p-6"},zE={class:"text-xl font-bold mb-4"},NE={class:"space-y-4"},UE=["innerHTML"],FE=["onUpdate:modelValue"],jE={class:"flex items-center gap-1.5"},WE=["name","value","onChange","checked"],qE=["onClick"],HE={class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"},VE={__name:"QuizManagerView",setup(t){const n=pt(!0),r=pt([]),i=pt([]),o=pt(!1),l=pt({}),u=pt(!1),c=pt(null),d=pt([]),y=pt(!1),g=pt({}),m=pt(null),b=pt(null),v=st=>{l.value=st?{...st}:{title:"",subject_id:null},o.value=!0},O=async()=>{const st=!!l.value.id,k=st?`/api/quiz-sets/${l.value.id}`:"/api/quiz-sets",K=st?"PUT":"POST";try{const lt=await(await Kt(k,{method:K,body:JSON.stringify(l.value)})).json();if(st){const wt=r.value.findIndex(ct=>ct.id===lt.id);r.value[wt]=lt}else r.value.unshift(lt);o.value=!1}catch(_){console.error("儲存測驗集失敗:",_)}},w=async st=>{if(confirm("確定要刪除這個測驗集嗎？所有相關的題目將會一併刪除！"))try{await Kt(`/api/quiz-sets/${st}`,{method:"DELETE"}),r.value=r.value.filter(k=>k.id!==st)}catch(k){console.error("刪除測驗集失敗:",k)}},I=async st=>{try{const k=await Kt(`/api/quiz-questions/${st.id}`);if(!k.ok)throw new Error("讀取題目失敗");d.value=await k.json()}catch(k){console.error("讀取題目失敗:",k),alert(k.message)}},S=async st=>{c.value=st,u.value=!0,await I(st)},A=()=>{u.value=!1,c.value=null,d.value=[]},E=st=>{g.value=st?JSON.parse(JSON.stringify(st)):{quiz_set_id:c.value.id,question_text:"",options:[{text:"",isCorrect:!0},{text:"",isCorrect:!1}],time_limit:20},y.value=!0},P=()=>{g.value.options.length<4&&g.value.options.push({text:"",isCorrect:!1})},U=st=>{g.value.options.length>2&&(g.value.options[st].isCorrect&&(g.value.options[0].isCorrect=!0),g.value.options.splice(st,1))},rt=st=>{g.value.options.forEach((k,K)=>{k.isCorrect=K===st})},F=async()=>{g.value.question_text=m.value.innerHTML;const st=!!g.value.id,k=st?`/api/quiz-questions/${g.value.id}`:"/api/quiz-questions",K=st?"PUT":"POST";try{const lt=await(await Kt(k,{method:K,body:JSON.stringify(g.value)})).json();if(st){const wt=d.value.findIndex(ct=>ct.id===lt.id);d.value[wt]=lt}else d.value.push(lt);y.value=!1}catch(_){console.error("儲存題目失敗:",_)}},M=async st=>{if(confirm("確定要刪除這個題目嗎？"))try{await Kt(`/api/quiz-questions/${st}`,{method:"DELETE"}),d.value=d.value.filter(k=>k.id!==st)}catch(k){console.error("刪除題目失敗:",k)}},L=()=>{b.value.click()},D=async st=>{const k=st.target.files[0];if(!k||!c.value)return;const K=new FormData;K.append("file",k);try{const _=await Kt(`/api/quiz-questions/import/${c.value.id}`,{method:"POST",body:K}),lt=await _.json();if(!_.ok)throw new Error(lt.error);alert(lt.message),await I(c.value)}catch(_){console.error("匯入題庫失敗:",_),alert(`匯入失敗: ${_.message}`)}finally{b.value.value=""}};return Ye(async()=>{try{const[st,k]=await Promise.all([Kt("/api/quiz-sets"),Kt("/api/subjects")]);r.value=await st.json(),i.value=await k.json()}catch(st){console.error("初始化失敗:",st)}finally{n.value=!1}}),(st,k)=>{const K=Eo("router-link");return Z(),Y("div",null,[f("div",Q6,[k[9]||(k[9]=f("h1",{class:"text-4xl font-bold text-slate-800"},"搶答競賽 (QuizRace)",-1)),f("button",{onClick:k[0]||(k[0]=_=>v(null)),class:"btn btn-primary"},"建立新測驗集")]),n.value?(Z(),Y("div",X6,"正在載入題庫...")):r.value.length===0?(Z(),Y("div",tE,[...k[10]||(k[10]=[f("h3",{class:"text-2xl font-semibold text-slate-700"},"尚未建立任何測驗集",-1),f("p",{class:"text-slate-500 mt-2"},"點擊右上角的「建立新測驗集」來開始吧！",-1)])])):(Z(),Y("div",eE,[(Z(!0),Y(Wt,null,te(r.value,_=>(Z(),Y("div",{key:_.id,class:"card flex flex-col"},[f("div",nE,[_.subject_name?(Z(),Y("span",rE,ft(_.subject_name),1)):Rt("",!0),f("h3",sE,ft(_.title),1),f("p",iE,"建立於: "+ft(new Date(_.created_at).toLocaleDateString()),1)]),f("div",oE,[f("button",{onClick:lt=>S(_),class:"btn bg-slate-600 hover:bg-slate-700 w-full"},"管理題目",8,aE),ce(K,{to:{name:"quiz-game-teacher",params:{setId:_.id}},class:"btn btn-success w-full text-center"},{default:cn(()=>[...k[11]||(k[11]=[ve("開始競賽",-1)])]),_:1},8,["to"])]),f("div",lE,[f("button",{onClick:lt=>v(_),class:"text-blue-500 hover:text-blue-700 font-medium"},"編輯資訊",8,uE),k[12]||(k[12]=f("span",{class:"mx-2 text-slate-300"},"|",-1)),f("button",{onClick:lt=>w(_.id),class:"text-red-500 hover:text-red-700 font-medium"},"刪除",8,cE)])]))),128))])),o.value?(Z(),Y("div",fE,[f("div",dE,[f("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:k[1]||(k[1]=_=>o.value=!1)}),f("form",{onSubmit:We(O,["prevent"]),class:"bg-white rounded-lg shadow-xl transform transition-all max-w-lg w-full"},[f("div",hE,[f("h3",pE,ft(l.value.id?"編輯測驗集":"建立新測驗集"),1),f("div",gE,[f("div",null,[k[13]||(k[13]=f("label",{class:"block text-sm font-medium text-slate-700"},"測驗集標題",-1)),Mt(f("input",{type:"text","onUpdate:modelValue":k[2]||(k[2]=_=>l.value.title=_),required:"",class:"mt-1 form-input"},null,512),[[Ft,l.value.title]])]),f("div",null,[k[15]||(k[15]=f("label",{class:"block text-sm font-medium text-slate-700"},"關聯科目 (選填)",-1)),Mt(f("select",{"onUpdate:modelValue":k[3]||(k[3]=_=>l.value.subject_id=_),class:"mt-1 form-input"},[k[14]||(k[14]=f("option",{value:null},"-- 無 --",-1)),(Z(!0),Y(Wt,null,te(i.value,_=>(Z(),Y("option",{key:_.id,value:_.id},ft(_.name),9,mE))),128))],512),[[ai,l.value.subject_id]])])])]),f("div",vE,[f("button",{type:"button",onClick:k[4]||(k[4]=_=>o.value=!1),class:"btn btn-secondary"},"取消"),k[16]||(k[16]=f("button",{type:"submit",class:"btn btn-primary"},"儲存",-1))])],32)])])):Rt("",!0),u.value&&c.value?(Z(),Y("div",_E,[f("div",yE,[f("div",{class:"fixed inset-0 bg-gray-800 bg-opacity-80",onClick:A}),f("div",bE,[f("div",xE,[f("h3",wE,"管理題目: "+ft(c.value.title),1),f("button",{onClick:A,class:"text-3xl text-gray-500 hover:text-gray-800"},"×")]),f("div",kE,[f("div",CE,[f("input",{type:"file",ref_key:"quizFileInput",ref:b,onChange:D,class:"hidden",accept:".xlsx, .xls, .csv"},null,544),f("button",{onClick:L,class:"btn bg-emerald-500 hover:bg-emerald-600"},"匯入題庫"),f("button",{onClick:k[5]||(k[5]=_=>E(null)),class:"btn btn-primary"},"新增題目")]),d.value.length===0?(Z(),Y("div",SE,[...k[17]||(k[17]=[f("p",null,"這個測驗集還沒有題目喔！",-1)])])):(Z(),Y("div",EE,[(Z(!0),Y(Wt,null,te(d.value,(_,lt)=>(Z(),Y("div",{key:_.id,class:"border rounded-lg p-4 bg-slate-50"},[f("div",AE,[f("div",null,[f("p",RE,[ve(ft(lt+1)+". ",1),f("span",{innerHTML:_.question_text||"無題目文字"},null,8,TE)]),f("div",OE,[(Z(!0),Y(Wt,null,te(_.options,(wt,ct)=>(Z(),Y("div",{key:ct,class:me(["flex items-center",{"font-bold text-green-600":wt.isCorrect}])},[ve(ft(wt.text)+" ",1),wt.isCorrect?(Z(),Y("svg",IE,[...k[18]||(k[18]=[f("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):Rt("",!0)],2))),128))])]),f("div",$E,[f("button",{onClick:wt=>E(_),class:"btn bg-yellow-500 hover:bg-yellow-600 text-sm"},"編輯",8,PE),f("button",{onClick:wt=>M(_.id),class:"btn btn-danger text-sm"},"刪除",8,LE)])])]))),128))]))])])])])):Rt("",!0),y.value?(Z(),Y("div",BE,[f("div",DE,[f("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-50",onClick:k[6]||(k[6]=_=>y.value=!1)}),f("form",{onSubmit:We(F,["prevent"]),class:"bg-white rounded-lg shadow-xl transform transition-all max-w-2xl w-full"},[f("div",ME,[f("h3",zE,ft(g.value.id?"編輯題目":"新增題目"),1),f("div",NE,[f("div",null,[k[19]||(k[19]=f("label",{class:"block text-sm font-medium text-slate-700"},"題目內容 (可留空)",-1)),f("div",{ref_key:"questionEditor",ref:m,contenteditable:"true",innerHTML:g.value.question_text,class:"mt-1 w-full min-h-[100px] p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-400"},null,8,UE)]),f("div",null,[k[21]||(k[21]=f("label",{class:"block text-sm font-medium text-slate-700"},"選項 (至少2個，最多4個)",-1)),(Z(!0),Y(Wt,null,te(g.value.options,(_,lt)=>(Z(),Y("div",{key:lt,class:"flex items-center mt-2 gap-2"},[Mt(f("input",{type:"text","onUpdate:modelValue":wt=>_.text=wt,class:"form-input flex-grow",required:""},null,8,FE),[[Ft,_.text]]),f("label",jE,[f("input",{type:"radio",name:"correct-option-"+g.value.id,value:lt,onChange:wt=>rt(lt),checked:_.isCorrect},null,40,WE),k[20]||(k[20]=ve(" 正確 ",-1))]),g.value.options.length>2?(Z(),Y("button",{key:0,type:"button",onClick:wt=>U(lt),class:"text-red-500"},"×",8,qE)):Rt("",!0)]))),128)),g.value.options.length<4?(Z(),Y("button",{key:0,type:"button",onClick:P,class:"text-sm text-sky-600 mt-2"},"新增選項")):Rt("",!0)]),f("div",null,[k[22]||(k[22]=f("label",{class:"block text-sm font-medium text-slate-700"},"作答時間 (秒)",-1)),Mt(f("input",{type:"number","onUpdate:modelValue":k[7]||(k[7]=_=>g.value.time_limit=_),class:"mt-1 form-input w-24"},null,512),[[Ft,g.value.time_limit,void 0,{number:!0}]])])])]),f("div",HE,[f("button",{type:"button",onClick:k[8]||(k[8]=_=>y.value=!1),class:"btn btn-secondary"},"取消"),k[23]||(k[23]=f("button",{type:"submit",class:"btn btn-primary"},"儲存題目",-1))])],32)])])):Rt("",!0)])}}},KE={class:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-4 font-sans"},GE={key:0,class:"text-center"},ZE={class:"my-8 flex flex-col md:flex-row items-center justify-center gap-8"},YE={class:"p-4 bg-white rounded-lg"},JE=["src"],QE={class:"text-8xl font-bold tracking-widest"},XE=["disabled"],tA={class:"mt-8"},eA={class:"flex flex-wrap justify-center gap-3 mt-4 max-w-4xl"},nA={key:1,class:"w-full max-w-6xl mx-auto flex flex-col h-full"},rA={class:"flex justify-between items-center bg-gray-800 p-4 rounded-t-lg"},sA={class:"text-2xl font-bold"},iA={class:"text-5xl font-bold text-yellow-300"},oA={class:"text-2xl font-bold"},aA={class:"flex-grow bg-white text-gray-900 flex flex-col items-center justify-center p-8 text-center"},lA=["innerHTML"],uA={class:"grid grid-cols-2 gap-4 p-4 bg-gray-800 rounded-b-lg"},cA={class:"text-4xl mr-4"},fA={key:2,class:"w-full max-w-4xl mx-auto text-center"},dA={class:"space-y-4"},hA={class:"flex items-center"},pA={class:"font-bold w-12"},gA={class:"font-bold text-yellow-300"},mA={key:3,class:"w-full max-w-4xl mx-auto text-center"},vA={class:"space-y-4"},_A={class:"flex items-center"},yA={class:"font-bold text-4xl w-16"},bA={class:"font-bold"},xA={__name:"QuizGameTeacher",props:{setId:{type:String,required:!0}},setup(t){const n=t,r=mi(),i=pt(null),o=pt(""),l=pt("lobby"),u=pt([]),c=pt(null),d=pt(0),y=pt(0),g=pt(0),m=pt(null),b=pt(0),v=pt([]),O=["bg-red-500","bg-blue-500","bg-yellow-400","bg-green-500"],w=le(()=>`https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${window.location.origin}/quiz/play?room=${o.value}`),I=le(()=>d.value>=y.value-1),S=U=>U===0?"bg-yellow-400 text-gray-900":U===1?"bg-gray-300 text-gray-900":U===2?"bg-yellow-700 text-white":"bg-gray-800",A=()=>{i.value.emit("teacher:startQuizRace",{roomCode:o.value})},E=()=>{i.value.emit("teacher:nextQuestion",{roomCode:o.value})},P=()=>{r.push({name:"quiz-manager"})};return Ye(()=>{i.value=Hr("http://localhost:3000"),i.value.on("connect",()=>{i.value.emit("teacher:createQuizRace",{quizSetId:n.setId},U=>{U.roomCode?o.value=U.roomCode:(alert(U.error||"無法建立遊戲室"),r.back())})}),i.value.on("player:joined",U=>{u.value=U}),i.value.on("player:left",U=>{u.value=U}),i.value.on("game:started",()=>{l.value="question_open"}),i.value.on("question:new",U=>{c.value=U.question,d.value=U.questionIndex,y.value=U.totalQuestions,g.value=U.question.time_limit,b.value=0,l.value="question_open",clearInterval(m.value),m.value=setInterval(()=>{g.value>0?g.value--:clearInterval(m.value)},1e3)}),i.value.on("player:answered",()=>{b.value++}),i.value.on("game:leaderboard",U=>{l.value="leaderboard",v.value=U.leaderboard,clearInterval(m.value)}),i.value.on("game:ended",U=>{l.value="finished",v.value=U})}),Kr(()=>{i.value&&i.value.disconnect(),clearInterval(m.value)}),(U,rt)=>(Z(),Y("div",KE,[l.value==="lobby"?(Z(),Y("div",GE,[rt[2]||(rt[2]=f("h1",{class:"text-3xl font-bold text-yellow-300"},"遊戲大廳",-1)),rt[3]||(rt[3]=f("p",{class:"text-gray-300 text-lg mt-2"},"請學生掃描 QR Code 或輸入房間代碼加入",-1)),f("div",ZE,[f("div",YE,[f("img",{src:w.value,alt:"QR Code",class:"w-48 h-48 md:w-64 md:h-64"},null,8,JE)]),f("div",null,[rt[0]||(rt[0]=f("p",{class:"text-2xl text-gray-400"},"房間代碼",-1)),f("p",QE,ft(o.value),1)])]),f("button",{onClick:A,class:"btn bg-green-500 hover:bg-green-600 text-2xl px-12 py-4 rounded-full",disabled:u.value.length===0},ft(u.value.length===0?"等待玩家加入...":`開始遊戲 (${u.value.length})`),9,XE),f("div",tA,[rt[1]||(rt[1]=f("h2",{class:"text-xl font-semibold"},"已加入的玩家:",-1)),f("div",eA,[(Z(!0),Y(Wt,null,te(u.value,F=>(Z(),Y("span",{key:F.id,class:"bg-gray-700 text-white px-4 py-2 rounded-full text-lg"},ft(F.name),1))),128))])])])):Rt("",!0),l.value==="question_open"&&c.value?(Z(),Y("div",nA,[f("div",rA,[f("div",sA,"第 "+ft(d.value+1)+" / "+ft(y.value)+" 題",1),f("div",iA,ft(g.value),1),f("div",oA,ft(b.value)+" / "+ft(u.value.length)+" 人已作答",1)]),f("div",aA,[c.value.question_text?(Z(),Y("div",{key:0,innerHTML:c.value.question_text,class:"text-4xl font-bold"},null,8,lA)):Rt("",!0)]),f("div",uA,[(Z(!0),Y(Wt,null,te(c.value.options,(F,M)=>(Z(),Y("div",{key:M,class:me(["p-6 rounded-lg text-2xl font-bold flex items-center",O[M]])},[f("div",cA,ft(["A","B","C","D"][M]),1),f("div",null,ft(F.text),1)],2))),128))])])):Rt("",!0),l.value==="leaderboard"?(Z(),Y("div",fA,[rt[4]||(rt[4]=f("h1",{class:"text-5xl font-bold text-yellow-300 mb-8"},"排行榜",-1)),f("div",dA,[(Z(!0),Y(Wt,null,te(v.value,(F,M)=>(Z(),Y("div",{key:F.id,class:"bg-gray-800 p-4 rounded-lg flex items-center justify-between text-2xl"},[f("div",hA,[f("span",pA,ft(M+1)+".",1),f("span",null,ft(F.name),1)]),f("span",gA,ft(F.score)+" 分",1)]))),128))]),f("button",{onClick:E,class:"btn btn-primary text-2xl px-12 py-4 rounded-full mt-10"},ft(I.value?"查看最終結果":"下一題"),1)])):Rt("",!0),l.value==="finished"?(Z(),Y("div",mA,[rt[5]||(rt[5]=f("h1",{class:"text-6xl font-bold text-yellow-300 mb-8"},"遊戲結束！",-1)),f("div",vA,[(Z(!0),Y(Wt,null,te(v.value.slice(0,3),(F,M)=>(Z(),Y("div",{key:F.id,class:me(["p-6 rounded-lg flex items-center justify-between text-3xl",S(M)])},[f("div",_A,[f("span",yA,ft(M+1),1),f("span",null,ft(F.name),1)]),f("span",bA,ft(F.score)+" 分",1)],2))),128))]),f("button",{onClick:P,class:"btn btn-secondary text-2xl px-12 py-4 rounded-full mt-12"},"返回題庫管理")])):Rt("",!0)]))}},wA={class:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-4 font-sans"},kA={key:0,class:"w-full max-w-md"},CA={class:"card bg-gray-800 p-8"},SA={key:0,class:"text-red-400 text-sm text-center pt-2"},EA={key:1,class:"text-center"},AA={key:2,class:"w-full max-w-6xl mx-auto flex flex-col h-screen p-4"},RA={class:"flex justify-between items-center text-2xl font-bold mb-4"},TA=["innerHTML"],OA={class:"grid grid-cols-2 gap-4"},IA=["onClick"],$A={key:3,class:"text-center"},PA={key:0,class:"text-green-400"},LA={class:"text-3xl mt-4"},BA={key:1,class:"text-red-400"},DA={class:"text-2xl text-gray-300 mt-8"},MA={__name:"QuizGameStudent",setup(t){const n=au(),r=mi(),i=pt(null),o=Fe({roomCode:"",name:""}),l=Fe({joined:!1,playerId:null}),u=pt(""),c=pt("lobby"),d=pt(null),y=pt(0),g=pt(0),m=pt(0),b=pt(null),v=pt(null),O=pt(0),w=["bg-red-500","bg-blue-500","bg-yellow-400","bg-green-500"],I=()=>{if(!o.roomCode||!o.name){u.value="房間代碼和姓名為必填項。";return}u.value="",i.value.emit("student:joinQuizRace",{roomCode:o.roomCode.toUpperCase(),name:o.name},A=>{A.success?(l.joined=!0,l.playerId=A.playerId):u.value=A.message})},S=A=>{clearInterval(b.value),i.value.emit("student:submitQuizAnswer",{roomCode:o.roomCode.toUpperCase(),optionIndex:A,timeRemaining:m.value}),v.value={isCorrect:null,points:0}};return Ye(()=>{o.roomCode=n.query.room||"";const A=localStorage.getItem("studentInfo");A&&(o.name=JSON.parse(A).name),i.value=Hr("http://localhost:3000"),i.value.on("connect",()=>console.log("成功連接到 Socket.IO 伺服器")),i.value.on("game:started",()=>{c.value="question_open"}),i.value.on("question:new",E=>{d.value=E.question,y.value=E.questionIndex,g.value=E.totalQuestions,m.value=E.question.time_limit,c.value="question_open",v.value=null,clearInterval(b.value),b.value=setInterval(()=>{m.value>0?m.value--:(clearInterval(b.value),v.value||(v.value={isCorrect:!1,points:0}))},1e3)}),i.value.on("game:leaderboard",E=>{c.value="leaderboard";const P=E.leaderboard.find(rt=>rt.id===l.playerId);P&&(O.value=P.score);const U=i.value.id in room.currentAnswers?room.currentAnswers[i.value.id].optionIndex:-1;if(U!==-1){const rt=U===E.correctOptionIndex;v.value={isCorrect:rt,points:rt?room.currentAnswers[i.value.id].points:0}}else v.value={isCorrect:!1,points:0}}),i.value.on("game:ended",()=>{alert("遊戲結束了！"),r.push({name:"auth"})})}),Kr(()=>{i.value&&i.value.disconnect(),clearInterval(b.value)}),(A,E)=>(Z(),Y("div",wA,[l.joined?Rt("",!0):(Z(),Y("div",kA,[f("div",CA,[E[5]||(E[5]=f("h1",{class:"text-3xl font-bold text-center text-yellow-300 mb-2"},"加入搶答競賽",-1)),E[6]||(E[6]=f("p",{class:"text-center text-gray-400 mb-8"},"請輸入老師提供的房間代碼",-1)),f("form",{onSubmit:We(I,["prevent"]),class:"space-y-6"},[f("div",null,[E[2]||(E[2]=f("label",{for:"roomCode",class:"block text-lg font-bold text-gray-300 mb-1"},"房間代碼",-1)),Mt(f("input",{"onUpdate:modelValue":E[0]||(E[0]=P=>o.roomCode=P),type:"text",id:"roomCode",placeholder:"6 位數字",class:"form-input bg-gray-900 text-white border-gray-600 text-4xl tracking-widest text-center uppercase py-3"},null,512),[[Ft,o.roomCode,void 0,{trim:!0}]])]),f("div",null,[E[3]||(E[3]=f("label",{for:"studentName",class:"block text-lg font-bold text-gray-300 mb-1"},"你的名字",-1)),Mt(f("input",{"onUpdate:modelValue":E[1]||(E[1]=P=>o.name=P),type:"text",id:"studentName",placeholder:"請輸入姓名或座號",class:"form-input bg-gray-900 text-white border-gray-600 text-2xl py-3"},null,512),[[Ft,o.name,void 0,{trim:!0}]])]),u.value?(Z(),Y("p",SA,ft(u.value),1)):Rt("",!0),E[4]||(E[4]=f("button",{type:"submit",class:"w-full btn bg-green-500 hover:bg-green-600 py-4 text-2xl font-bold"}," 加入遊戲 ",-1))],32)])])),l.joined&&c.value==="lobby"?(Z(),Y("div",EA,[...E[7]||(E[7]=[qr('<h2 class="text-4xl font-bold text-white">已成功加入！</h2><p class="text-gray-400 mt-2 text-xl">請等待老師開始遊戲...</p><div class="mt-12"><svg class="animate-spin h-16 w-16 text-yellow-300 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>',3)])])):Rt("",!0),c.value==="question_open"&&d.value&&!v.value?(Z(),Y("div",AA,[f("div",RA,[f("span",null,"第 "+ft(y.value+1)+" / "+ft(g.value)+" 題",1),f("span",null,ft(m.value),1)]),f("div",{class:"flex-grow bg-white text-gray-900 flex items-center justify-center p-8 text-center rounded-lg text-4xl font-bold mb-4",innerHTML:d.value.question_text||""},null,8,TA),f("div",OA,[(Z(!0),Y(Wt,null,te(d.value.options,(P,U)=>(Z(),Y("button",{key:U,onClick:rt=>S(U),class:me(["p-8 rounded-lg text-3xl font-bold flex items-center justify-center h-40",w[U]])},ft(P.text),11,IA))),128))])])):Rt("",!0),v.value?(Z(),Y("div",$A,[v.value.isCorrect?(Z(),Y("div",PA,[E[8]||(E[8]=f("h1",{class:"text-6xl font-bold"},"正確！",-1)),f("p",LA,"+"+ft(v.value.points)+" 分",1)])):(Z(),Y("div",BA,[...E[9]||(E[9]=[f("h1",{class:"text-6xl font-bold"},"答錯了",-1)])])),f("p",DA,"目前總分: "+ft(O.value),1),E[10]||(E[10]=f("p",{class:"text-xl text-gray-400 mt-4"},"等待其他玩家...",-1))])):Rt("",!0)]))}},_p=w2({history:Jw("/"),routes:[{path:"/auth",name:"auth",component:jC,meta:{layout:"clean"}},{path:"/",name:"home",component:U2,meta:{requiresAuth:!0,layout:"default"}},{path:"/students",name:"student-management",component:Ck,meta:{requiresAuth:!0,layout:"default"}},{path:"/seating-chart",name:"seating-chart",component:Yk,meta:{requiresAuth:!0,layout:"default"}},{path:"/dashboard",name:"classroom-dashboard",component:d3,meta:{requiresAuth:!0,layout:"default"}},{path:"/assignments",name:"assignments",component:e5,meta:{requiresAuth:!0,layout:"default"}},{path:"/grades",name:"grade-management",component:Z5,meta:{requiresAuth:!0,layout:"default"}},{path:"/pingpong-teacher",name:"pingpong-teacher",component:L6,meta:{requiresAuth:!0,layout:"default"}},{path:"/quiz",name:"quiz-manager",component:VE,meta:{requiresAuth:!0,layout:"default"}},{path:"/quiz/host/:setId",name:"quiz-game-teacher",component:xA,props:!0,meta:{requiresAuth:!0,layout:"clean"}},{path:"/student/dashboard",name:"student-dashboard",component:TC,meta:{requiresStudentAuth:!0,layout:"clean"}},{path:"/pingpong-student",name:"pingpong-student",component:J6,meta:{layout:"clean"}},{path:"/quiz/play",name:"quiz-game-student",component:MA,meta:{layout:"clean"}}]});_p.beforeEach((t,n,r)=>{const i=!!localStorage.getItem("teacherToken"),o=!!localStorage.getItem("studentToken");t.meta.requiresAuth&&!i?r({name:"auth"}):t.meta.requiresStudentAuth&&!o?r({name:"auth"}):t.name==="auth"&&(i||o)?r(i?{name:"home"}:{name:"student-dashboard"}):r()});const yp=_w($2);yp.use(_p);yp.mount("#app");
